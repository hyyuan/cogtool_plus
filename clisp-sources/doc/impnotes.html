<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Implementation Notes for GNU CLISP</title><link rel="stylesheet" href="impnotes.css" type="text/css" /><link rev="made" href="mailto:clisp-list@lists.sourceforge.net" /><meta name="generator" content="DocBook XSL Stylesheets V2005-10-07_10:16_snapshot" /><meta name="description" content="These notes describe the GNU CLISP - an ANSI CL standard&#10;   implementation. Bugs both in these notes and in CLISP itself should be&#10;   reported to the mailing list clisp-list@lists.sourceforge.net ()." /><meta name="keywords" content="Lisp, Common Lisp, CLISP" /></head><body><div class="book" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="impnotes-top"></a>Implementation Notes for <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h1></div><div><h2 class="subtitle">These notes document <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> version 2.38</h2></div><div><h3 class="corpauthor"><span class="inlinemediaobject"><img src="clisp.png" /></span></h3></div><div><div class="author"><h3 class="author"><span class="firstname">Bruno</span> <span class="surname">Haible</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Sam</span> <span class="surname">Steingold</span></h3></div></div><div><p class="copyright">Copyright © 1992-2006 Bruno Haible</p></div><div><p class="copyright">Copyright © 1998-2006 Sam Steingold</p></div><div><div class="legalnotice"><a id="legalese"></a><p class="legalnotice-title"><b>Legal Status of the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
   Implementation Notes</b></p><p>These notes are dually licensed under <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/fdl.html" target="_top">GFDL</a> and <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>.
   This means that you can redistribute this document under
   either of these two licenses, at your choice.</p><p><b>These notes are covered by the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/fdl.html" target="_top">GFDL</a>. </b>Permission is granted to copy, distribute and/or modify this
    document under the terms of the GNU Free Documentation License
    (<a href="http://www.gnu.org/copyleft/fdl.html" target="_top">GFDL</a>), either version 1.2 of the License, or (at your option) any
    later version published by the <a href="http://www.fsf.org" target="_top">Free Software Foundation (FSF)</a>;
    with no Invariant Sections,
    with no Front-Cover Text, and
    with no Back-Cover Texts.
    A copy of the license is included in <a href="#gfdl" title="Appendix&#xA0;B.&#xA0;GNU Free Documentation License">Appendix B, <i>GNU Free Documentation License</i></a>.
  </p><p><b>These notes are covered by the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>. </b>This document documents free software; you can redistribute it
    and/or modify it under the terms of the GNU General Public License
    (<a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>), either version 2 of the License, or (at your option) any
    later version published by the <a href="http://www.fsf.org" target="_top">Free Software Foundation (FSF)</a>.
    A copy of the license is included in <a href="#gpl" title="Appendix&#xA0;C.&#xA0;GNU General Public License">Appendix C, <i>GNU General Public License</i></a>.
  </p></div></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>These notes describe the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> - an [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]
   implementation.</p><p>Bugs both in these notes and in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> itself should be
   reported to the mailing list <code class="email">&lt;<a href="mailto:clisp-list@lists.sourceforge.net">clisp-list@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-list</a>).</p></div></div></div><hr /></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="preface"><a href="#overview">Overview</a></span></dt><dt><span class="preface"><a href="#conventions">Conventions</a></span></dt><dt><span class="part"><a href="#clhs-chapters">I. Chapters or the Common Lisp HyperSpec</a></span></dt><dd><dl><dt><span class="chapter"><a href="#intro">1. Introduction
  [CLHS-1]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-symb">1.1. Special Symbols
  [CLHS-1.4.1.3]</a></span></dt><dt><span class="section"><a href="#error-terms">1.2. Error Terminology
  [CLHS-1.4.2]</a></span></dt><dt><span class="section"><a href="#cl-symb">1.3. Symbols in the Package <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong>
  [CLHS-1.9]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#syntax">2. Syntax
   [CLHS-2]</a></span></dt><dd><dl><dt><span class="section"><a href="#std-char">2.1. Standard Characters
  [CLHS-2.1.3]</a></span></dt><dt><span class="section"><a href="#reader-alg">2.2. Reader Algorithm
   [CLHS-2.2]</a></span></dt><dt><span class="section"><a href="#tokens">2.3. Symbols as Tokens
  [CLHS-2.3.4]</a></span></dt><dt><span class="section"><a href="#valid-patterns">2.4. Valid Patterns for Tokens
  [CLHS-2.3.5]</a></span></dt><dt><span class="section"><a href="#backquote">2.5. Backquote
  [CLHS-2.4.6]</a></span></dt><dt><span class="section"><a href="#sharpsign">2.6. Sharpsign
  [CLHS-2.4.8]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#eval">3. Evaluation and Compilation
   [CLHS-3]</a></span></dt><dd><dl><dt><span class="section"><a href="#evaluation">3.1. Evaluation
  [CLHS-3.1]</a></span></dt><dt><span class="section"><a href="#compilation">3.2. Compilation
  [CLHS-3.2]</a></span></dt><dt><span class="section"><a href="#declarations">3.3. Declarations
  [CLHS-3.3]</a></span></dt><dt><span class="section"><a href="#lalist">3.4. Lambda Lists
   [CLHS-3.4]</a></span></dt><dt><span class="section"><a href="#eval-comp">3.5. The Evaluation and Compilation Dictionary
  [CLHS-3.8]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#types-classes">4. Types and Classes
   [CLHS-4]</a></span></dt><dd><dl><dt><span class="section"><a href="#types">4.1. Types
  [CLHS-4.2]</a></span></dt><dt><span class="section"><a href="#classes">4.2. Classes
  [CLHS-4.3]</a></span></dt><dt><span class="section"><a href="#clos-diff">4.3. Deviations from ANSI CL standard</a></span></dt><dt><span class="section"><a href="#metaclasses">4.4. Standard Metaclasses
  [CLHS-4.3.1.1]</a></span></dt><dt><span class="section"><a href="#def-class">4.5. Defining Classes
  [CLHS-4.3.2]</a></span></dt><dt><span class="section"><a href="#redef-class">4.6. Redefining Classes
  [CLHS-4.3.6]</a></span></dt><dt><span class="section"><a href="#type-class-dict">4.7. The Types and Classes Dictionary
  [CLHS-4.4]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#data">5. Data and Control Flow
   [CLHS-5]</a></span></dt><dd><dl><dt><span class="section"><a href="#flow-dict">5.1. The Data and Control Flow Dictionary
   [CLHS-5.3]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#iteration">6. Iteration
  [CLHS-6]</a></span></dt><dd><dl><dt><span class="section"><a href="#loop">6.1. The LOOP Facility
  [CLHS-6.1]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#objects">7. Objects
   [CLHS-7]</a></span></dt><dd><dl><dt><span class="section"><a href="#std-meth-combo">7.1. Standard Method Combination
  [CLHS-7.6.6.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#structures">8. Structures
   [CLHS-8]</a></span></dt><dt><span class="chapter"><a href="#conditions">9. Conditions
   [CLHS-9]</a></span></dt><dd><dl><dt><span class="section"><a href="#cond-nl">9.1. Embedded Newlines in Condition Reports
   [CLHS-9.1.3.1.3]</a></span></dt><dt><span class="section"><a href="#cond-dict">9.2. The Conditions Dictionary
   [CLHS-9.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#symbols">10. Symbols
   [CLHS-10]</a></span></dt><dt><span class="chapter"><a href="#packages">11. Packages
   [CLHS-11]</a></span></dt><dd><dl><dt><span class="section"><a href="#pack-lock">11.1. Constraints on the <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong> Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></span></dt><dt><span class="section"><a href="#clupack">11.2. The
  <strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong> Package
  [CLHS-11.1.2.2]</a></span></dt><dt><span class="section"><a href="#imppack">11.3. Implementation-Defined Packages
   [CLHS-11.1.2.4]</a></span></dt><dt><span class="section"><a href="#package-case">11.4. Package Case-Sensitivity</a></span></dt><dt><span class="section"><a href="#pack-dict">11.5. The Packages Dictionary
   [CLHS-11.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#numbers">12. Numbers
   [CLHS-12]</a></span></dt><dd><dl><dt><span class="section"><a href="#num-types">12.1. Numeric Types</a></span></dt><dt><span class="section"><a href="#num-concepts">12.2. Number Concepts
   [CLHS-12.1]</a></span></dt><dt><span class="section"><a href="#num-dict">12.3. The Numbers Dictionary
   [CLHS-12.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#characters">13. Characters
   [CLHS-13]</a></span></dt><dd><dl><dt><span class="section"><a href="#char-script">13.1. Character Scripts
   [CLHS-13.1.2.1]</a></span></dt><dt><span class="section"><a href="#char-attrib">13.2. Character Attributes
   [CLHS-13.1.3]</a></span></dt><dt><span class="section"><a href="#graph-char">13.3. Graphic Characters
   [CLHS-13.1.4.1]</a></span></dt><dt><span class="section"><a href="#alpha-char">13.4. Alphabetic Characters
   [CLHS-13.1.4.2]</a></span></dt><dt><span class="section"><a href="#char-case">13.5. Characters With Case
   [CLHS-13.1.4.3]</a></span></dt><dt><span class="section"><a href="#num-char">13.6. Numeric Characters
   [CLHS-13.1.4.4]</a></span></dt><dt><span class="section"><a href="#char-ord">13.7. Ordering of Characters
   [CLHS-13.1.6]</a></span></dt><dt><span class="section"><a href="#clhs-newline">13.8. Treatment of Newline during Input and Output
   [CLHS-13.1.8]</a></span></dt><dt><span class="section"><a href="#char-int">13.9. Character Encodings
   [CLHS-13.1.9]</a></span></dt><dt><span class="section"><a href="#script-ext">13.10. Documentation
   of Implementation-Defined Scripts
   [CLHS-13.1.10]</a></span></dt><dt><span class="section"><a href="#char-dict">13.11. The Characters Dictionary
   [CLHS-13.2]</a></span></dt><dt><span class="section"><a href="#char-platform-dep">13.12. Platform-Dependent Characters</a></span></dt><dt><span class="section"><a href="#char-bits">13.13. Obsolete Constants</a></span></dt></dl></dd><dt><span class="chapter"><a href="#conses">14. Conses
   [CLHS-14]</a></span></dt><dd><dl><dt><span class="section"><a href="#cons-dict">14.1. The Conses Dictionary
   [CLHS-14.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#arrays">15. Arrays
   [CLHS-15]</a></span></dt><dd><dl><dt><span class="section"><a href="#array-elts">15.1. Array Elements
   [CLHS-15.1.1]</a></span></dt><dt><span class="section"><a href="#array-dict">15.2. The Arrays Dictionary
   [CLHS-15.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#strings">16. Strings
   [CLHS-16]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-dict">16.1. The Strings Dictionary
   [CLHS-16.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#sequences">17. Sequences
   [CLHS-17]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-dict">17.1. The Sequences Dictionary
   [CLHS-17.3]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#hash">18. Hash Tables
   [CLHS-18]</a></span></dt><dd><dl><dt><span class="section"><a href="#hash-dict">18.1. The Hash Tables Dictionary
   [CLHS-18.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#filenames">19. Filenames
   [CLHS-19]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-components">19.1. Pathname Components
   [CLHS-19.2.1]</a></span></dt><dt><span class="section"><a href="#unspecific">19.2. :UNSPECIFIC as a Component Value
 [CLHS-19.2.2.2.3]</a></span></dt><dt><span class="section"><a href="#path-external-notation">19.3. External notation</a></span></dt><dt><span class="section"><a href="#log-path">19.4. Logical Pathnames
  [CLHS-19.3]</a></span></dt><dt><span class="section"><a href="#filename-dict">19.5. The Filenames Dictionary
   [CLHS-19.4]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#files">20. Files
   [CLHS-20]</a></span></dt><dd><dl><dt><span class="section"><a href="#file-dict">20.1. The Files Dictionary
   [CLHS-20.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#streams">21. Streams
   [CLHS-21]</a></span></dt><dd><dl><dt><span class="section"><a href="#streams-interactive">21.1. Interactive Streams
 [CLHS-21.1.1.1.3]</a></span></dt><dt><span class="section"><a href="#terminal">21.2. Terminal interaction</a></span></dt><dt><span class="section"><a href="#stream-dict">21.3. The Streams Dictionary
   [CLHS-21.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#printer">22. Printer
   [CLHS-22]</a></span></dt><dd><dl><dt><span class="section"><a href="#multi-rep">22.1. Multiple Possible Textual Representations
   [CLHS-22.1.1.1]</a></span></dt><dt><span class="section"><a href="#sym-pack-prefix">22.2. Package Prefixes for Symbols
  [CLHS-22.1.3.3.1]</a></span></dt><dt><span class="section"><a href="#print-vector">22.3. Printing Other Vectors
   [CLHS-22.1.3.7]</a></span></dt><dt><span class="section"><a href="#print-array">22.4. Printing Other Arrays
   [CLHS-22.1.3.8]</a></span></dt><dt><span class="section"><a href="#clpp">22.5. The Lisp Pretty Printer
   [CLHS-22.2]</a></span></dt><dt><span class="section"><a href="#print-formatted">22.6. Formatted Output
  [CLHS-22.3]</a></span></dt><dt><span class="section"><a href="#print-dict">22.7. The Printer Dictionary
   [CLHS-22.4]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#reader">23. Reader
   [CLHS-23]</a></span></dt><dd><dl><dt><span class="section"><a href="#chario">23.1. Characters</a></span></dt><dt><span class="section"><a href="#read-dispatch-ext">23.2. Additional read dispatch macros</a></span></dt><dt><span class="section"><a href="#rt-case">23.3. Function <code class="function">READTABLE-CASE</code></a></span></dt></dl></dd><dt><span class="chapter"><a href="#system">24. System Construction
   [CLHS-24]</a></span></dt><dd><dl><dt><span class="section"><a href="#system-dict">24.1. The System Construction Dictionary
   [CLHS-24.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#environment">25. Environment
   [CLHS-25]</a></span></dt><dd><dl><dt><span class="section"><a href="#debugger">25.1. Debugging Utilities
   [CLHS-25.1.2]</a></span></dt><dt><span class="section"><a href="#environment-dict">25.2. The Environment Dictionary
   [CLHS-25.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#glossary">26. Glossary
   [CLHS-26]</a></span></dt><dt><span class="chapter"><a href="#appendix">27. Appendix
   [CLHS-a]</a></span></dt><dt><span class="chapter"><a href="#issues">28. X3J13 Issue Index
   [CLHS-ic]</a></span></dt></dl></dd><dt><span class="part"><a href="#extensions">II. Extensions</a></span></dt><dd><dl><dt><span class="chapter"><a href="#ext-standard">29. Standard Widely Portable Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-chap">29.1. Meta-Object Protocol</a></span></dt><dt><span class="section"><a href="#gray">29.2. Gray streams</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ext-p-indep">30. Platform Independent Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#custom-init-fini">30.1. Customizing <span><strong class="command">CLISP</strong></span> Process
  Initialization and Termination</a></span></dt><dt><span class="section"><a href="#image">30.2. Saving an Image</a></span></dt><dt><span class="section"><a href="#quit">30.3. Quitting <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#i18n">30.4. Internationalization of <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#encoding">30.5. Encodings</a></span></dt><dt><span class="section"><a href="#gstream">30.6. Generic streams</a></span></dt><dt><span class="section"><a href="#weak">30.7. Weak Objects</a></span></dt><dt><span class="section"><a href="#final">30.8. Finalization</a></span></dt><dt><span class="section"><a href="#prompt">30.9. The Prompt</a></span></dt><dt><span class="section"><a href="#ansi">30.10. Maximum ANSI CL compliance</a></span></dt><dt><span class="section"><a href="#macros3">30.11. Additional Fancy Macros and Functions</a></span></dt><dt><span class="section"><a href="#customize">30.12. Customizing <span><strong class="command">CLISP</strong></span> behavior</a></span></dt><dt><span class="section"><a href="#code-walk">30.13. Code Walker</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ext-platform">31. Platform Specific Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#screen">31.1. Random Screen Access</a></span></dt><dt><span class="section"><a href="#modules">31.2. External Modules</a></span></dt><dt><span class="section"><a href="#dffi">31.3. The Foreign Function Call Facility</a></span></dt><dt><span class="section"><a href="#affi">31.4. The Amiga Foreign Function Call Facility</a></span></dt><dt><span class="section"><a href="#socket">31.5. Socket Streams</a></span></dt><dt><span class="section"><a href="#quickstart">31.6. Quickstarting delivery with <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#shell">31.7. Shell, Pipes and Printing</a></span></dt><dt><span class="section"><a href="#getenv">31.8. Operating System Environment</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ext-modules">32. Extensions Implemented as Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#matlab">32.1. Matlab Interface</a></span></dt><dt><span class="section"><a href="#netica">32.2. Netica Interface</a></span></dt><dt><span class="section"><a href="#dir-key">32.3. Directory Access</a></span></dt><dt><span class="section"><a href="#berkeley-db">32.4. Berkeley DB access</a></span></dt><dt><span class="section"><a href="#regexp-mod">32.5. POSIX Regular Expressions</a></span></dt><dt><span class="section"><a href="#pari">32.6. Computer Algebra System PARI</a></span></dt><dt><span class="section"><a href="#pcre">32.7. Perl Compatible Regular Expressions</a></span></dt><dt><span class="section"><a href="#postgresql">32.8. PostgreSQL Database Access</a></span></dt><dt><span class="section"><a href="#i18n-mod">32.9. Internationalization of User Programs</a></span></dt><dt><span class="section"><a href="#readline-mod">32.10. Advanced Readline and History Functionality</a></span></dt><dt><span class="section"><a href="#syscalls">32.11. System Calls</a></span></dt><dt><span class="section"><a href="#oracle">32.12. Oracle Interface</a></span></dt><dt><span class="section"><a href="#fastcgi">32.13. The FastCGI Interface</a></span></dt><dt><span class="section"><a href="#rawsock">32.14. Raw Socket Access</a></span></dt><dt><span class="section"><a href="#wildcard">32.15. The Wildcard Module</a></span></dt><dt><span class="section"><a href="#zlib">32.16. ZLIB Interface</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#internals">III. Internals of the <span><strong class="command">CLISP</strong></span> Implementation</a></span></dt><dd><dl><dt><span class="chapter"><a href="#source-files">33. The source files of <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#src-file-types">33.1. File Types</a></span></dt><dt><span class="section"><a href="#src-preprocessing">33.2. Source Pre-Processing</a></span></dt><dt><span class="section"><a href="#src-files">33.3. Files</a></span></dt></dl></dd><dt><span class="chapter"><a href="#gc">34. Overview of <span><strong class="command">CLISP</strong></span>'s Garbage Collection</a></span></dt><dd><dl><dt><span class="section"><a href="#internals-intro">34.1. Introduction</a></span></dt><dt><span class="section"><a href="#lisp-obj-in-c">34.2. Lisp objects in <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#typecodes">34.3. Object Pointer Representations</a></span></dt><dt><span class="section"><a href="#memory-models">34.4. Memory Models</a></span></dt><dt><span class="section"><a href="#gc-safety">34.5. The burden of garbage-collection upon the rest of <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#foreign-pointers">34.6. Foreign Pointers</a></span></dt></dl></dd><dt><span class="chapter"><a href="#extend">35. Extending <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#add-fun">35.1. Adding a built-in function</a></span></dt><dt><span class="section"><a href="#add-var">35.2. Adding a built-in variable</a></span></dt><dt><span class="section"><a href="#recompile">35.3. Recompilation</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bytecode">36. The <span><strong class="command">CLISP</strong></span> bytecode specification</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-intro">36.1. Introduction</a></span></dt><dt><span class="section"><a href="#vm">36.2. The virtual machine</a></span></dt><dt><span class="section"><a href="#comp-fun">36.3. The structure of compiled functions</a></span></dt><dt><span class="section"><a href="#intr-struct">36.4. The general structure of the instructions</a></span></dt><dt><span class="section"><a href="#intr-set">36.5. The instruction set</a></span></dt><dt><span class="section"><a href="#bytecode-design">36.6. Bytecode Design</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#appendices">IV. Appendices</a></span></dt><dd><dl><dt><span class="appendix"><a href="#faq">A. Frequently Asked Questions (With Answers)
  about <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="appendix"><a href="#gfdl">B. GNU Free Documentation License</a></span></dt><dd><dl><dt><span class="section"><a href="#gfdl-0">B.1. PREAMBLE</a></span></dt><dt><span class="section"><a href="#gfdl-1">B.2. APPLICABILITY AND DEFINITIONS</a></span></dt><dt><span class="section"><a href="#gfdl-2">B.3. VERBATIM COPYING</a></span></dt><dt><span class="section"><a href="#gfdl-3">B.4. COPYING IN QUANTITY</a></span></dt><dt><span class="section"><a href="#gfdl-4">B.5. MODIFICATIONS</a></span></dt><dt><span class="section"><a href="#gfdl-5">B.6. COMBINING DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-6">B.7. COLLECTIONS OF DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-7">B.8. AGGREGATION WITH INDEPENDENT WORKS</a></span></dt><dt><span class="section"><a href="#gfdl-8">B.9. TRANSLATION</a></span></dt><dt><span class="section"><a href="#gfdl-9">B.10. TERMINATION</a></span></dt><dt><span class="section"><a href="#gfdl-10">B.11. FUTURE REVISIONS OF THIS LICENSE</a></span></dt><dt><span class="section"><a href="#gfdl-addendum">B.12. ADDENDUM: How to use this License for
  your documents</a></span></dt></dl></dd><dt><span class="appendix"><a href="#gpl">C. GNU General Public License</a></span></dt><dd><dl><dt><span class="sect1"><a href="#gpl-1">C.1. Preamble</a></span></dt><dt><span class="sect1"><a href="#gpl-2">C.2. TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</a></span></dt><dt><span class="sect1"><a href="#gpl-3">C.3. How to Apply These Terms to Your New Programs
    </a></span></dt></dl></dd></dl></dd><dt><span class="index"><a href="#idx">Index</a></span></dt><dt><span class="bibliography"><a href="#references">References</a></span></dt></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>29.1. <a href="#mop-mo-cl-inheritance-fig">Inheritance structure of metaobject classes</a></dt><dt>29.2. <a href="#mop-cl-Inheritance-fig">Inheritance structure of class metaobject classes</a></dt><dt>29.3. <a href="#mop-sd-inheritance-fig">Inheritance structure of slot definition metaobject classes</a></dt><dt>29.4. <a href="#mop-gf-inheritance-fig">Inheritance structure of generic function metaobject classes</a></dt><dt>29.5. <a href="#mop-meth-inheritance-fig">Inheritance structure of method metaobject classes</a></dt><dt>29.6. <a href="#mop-specializers-inheritance-fig">Inheritance structure of specializer metaobject classes</a></dt><dt>29.7. <a href="#mop-meth-comb-inheritance-fig">Inheritance structure of method combination metaobject classes</a></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>5.1. <a href="#values-limits-table">Function call limits</a></dt><dt>12.1. <a href="#bool-op-table">Boolean operations</a></dt><dt>12.2. <a href="#fixnum-lim-table">Fixnum limits</a></dt><dt>13.1. <a href="#standard-char-table">Standard characters</a></dt><dt>13.2. <a href="#semi-standard-char-table">Semi-standard characters</a></dt><dt>13.3. <a href="#extra-named-chars-table">Additional Named Characters</a></dt><dt>13.4. <a href="#ctrl-char-table">Additional syntax for characters with code from
   <span class="keycode">#x00</span> to <span class="keycode">#x1F</span>:</a></dt><dt>13.5. <a href="#char-code-limit-table">Number of characters</a></dt><dt>13.6. <a href="#dos-win32-chars-table">Additional characters (<span class="strong"><strong>Win32</strong></span> platform only.)</a></dt><dt>13.7. <a href="#unix-chars-table">Additional characters (<span class="strong"><strong>UNIX</strong></span> platform only.)</a></dt><dt>13.8. <a href="#char-bits-table">Character bit constants (obsolete)</a></dt><dt>15.1. <a href="#array-limit-table">Array limits</a></dt><dt>19.1. <a href="#min-filename-syntax-table">The minimum filename syntax that may be used portably</a></dt><dt>23.1. <a href="#unreadable-objects-table">Unreadable objects</a></dt><dt>25.1. <a href="#debugger-main-deb-step">Commands common to the main loop, the debugger and the stepper</a></dt><dt>25.2. <a href="#debugger-deb-step">Commands common to the debugger and the stepper</a></dt><dt>25.3. <a href="#debugger-deb-step-1">Commands common to the debugger and the stepper</a></dt><dt>25.4. <a href="#debugger-eval-apply">Commands specific to <code class="function">EVAL</code>/<code class="function">APPLY</code></a></dt><dt>25.5. <a href="#debugger-deb">Commands specific to the debugger</a></dt><dt>25.6. <a href="#debugger-step">Commands specific to the stepper</a></dt><dt>25.7. <a href="#internal-time-units-table">Time granularity</a></dt><dt>29.1. <a href="#mop-inherit-struct">Direct Superclass Relationships
  Among The Specified Metaobject Classes</a></dt><dt>29.2. <a href="#class-mo-initargs">Initialization arguments and
   accessors for class metaobjects</a></dt><dt>29.3. <a href="#slotd-mo-initargs">Initialization arguments and
  accessors for slot definition metaobjects</a></dt><dt>29.4. <a href="#gf-mo-initargs">Initialization arguments and accessors
  for generic function metaobjects</a></dt><dt>29.5. <a href="#mop-meth-initargs">Initialization arguments and
  accessors for method metaobjects</a></dt><dt>29.6. <a href="#mop-sa-instance-stuct-table">The correspondence between slot access function and
  underlying slot access generic function</a></dt><dt>34.1. <a href="#mem-models-comb-typecodes">Memory models with <span class="strong"><strong><code class="option">TYPECODES</code></strong></span></a></dt><dt>34.2. <a href="#mem-models-comb-heapcodes">Memory models with <span class="strong"><strong><code class="option">HEAPCODES</code></strong></span></a></dt></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>29.1. <a href="#ex-fill-stream">Example of <code class="classname">EXT:FILL-STREAM</code> usage</a></dt><dt>31.1. <a href="#dffi-simple">Simple declarations and access</a></dt><dt>31.2. <a href="#dffi-extern-var">external <span><strong class="command">C</strong></span> variable and some accesses</a></dt><dt>31.3. <a href="#dffi-extern-func1">Calling an external function</a></dt><dt>31.4. <a href="#dffi-extern-func2">Another example for calling an external function</a></dt><dt>31.5. <a href="#dffi-ex-macro">Accessing <span><strong class="command">cpp</strong></span> macros</a></dt><dt>31.6. <a href="#ex-call-in">Calling Lisp from <span><strong class="command">C</strong></span></a></dt><dt>31.7. <a href="#ex-call-in-dll">Calling Lisp from <span><strong class="command">C</strong></span> dynamically</a></dt><dt>31.8. <a href="#dffi-gethostname">Variable size arguments:
  calling <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostname.html"><code class="function">gethostname</code></a> from <span><strong class="command">CLISP</strong></span></a></dt><dt>31.9. <a href="#dffi-dll-var">Accessing variables in shared libraries</a></dt><dt>31.10. <a href="#ex-dffi-validity">Controlling validity of resources</a></dt><dt>31.11. <a href="#ex-dffi-float">Float point array computations</a></dt><dt>31.12. <a href="#affi-ex-1-predefined">Using a predefined library function file</a></dt><dt>31.13. <a href="#affi-ex-2-flibcall">Using flibcall</a></dt><dt>31.14. <a href="#affi-ex-3-dynamic">Be fully dynamic, defining library bases ourselves</a></dt><dt>31.15. <a href="#affi-ex-4-sample">Some sample function definitions</a></dt><dt>31.16. <a href="#socket-ex-server">Lisp read-eval-print loop server</a></dt><dt>31.17. <a href="#socket-ex-client">Lisp <span><strong class="command">HTTP</strong></span> client</a></dt><dt>32.1. <a href="#ex-re-match"><code class="function">REGEXP:MATCH</code></a></dt><dt>32.2. <a href="#ex-re-quote"><code class="function">REGEXP:REGEXP-QUOTE</code></a></dt></dl></div><div class="preface" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="overview"></a>Overview</h2></div></div></div><p>These notes discuss the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> implementation of <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> by <span class="author"><span class="firstname">Bruno</span> <span class="surname">Haible</span></span>
 and <span class="author"><span class="firstname">Michael</span> <span class="surname">Stoll</span></span>. The current maintainers are <span class="author"><span class="firstname">Bruno</span> <span class="surname">Haible</span></span> and <span class="author"><span class="firstname">Sam</span> <span class="surname">Steingold</span></span>.</p><p>This implementation is mostly conforming to the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]
 available on-line as the [<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>] (but the printed ANSI document
 remains the authoritative source of information).  [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] supersedes
 the earlier specifications [<a href="#CLtL1" title="[CLtL1]"><abbr class="abbrev">CLtL1</abbr></a>] and [<a href="#CLtL2" title="[CLtL2]"><abbr class="abbrev">CLtL2</abbr></a>].</p><p>The first part of these notes, <a href="#clhs-chapters" title="Part&#xA0;I.&#xA0;Chapters or the Common Lisp HyperSpec">Part I, “Chapters or the Common Lisp HyperSpec”</a>,
 is indexed in parallel to the [<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>] and documents how <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 implements the standard [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</p><p>The second part, <a href="#extensions" title="Part&#xA0;II.&#xA0;Extensions">Part II, “Extensions”</a>, documents the
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extensions, i.e., the functionality that goes beyond the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirements.
 It includes widely portable common extensions, e.g.,
 <a href="#mop-chap" title="29.1.&#xA0;Meta-Object Protocol">Section 29.1, “Meta-Object Protocol”</a>, as well as <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>-specific extensions,
 e.g., <a href="#socket" title="31.5.&#xA0;Socket Streams">Section 31.5, “Socket Streams”</a>.</p><p>The third part, <a href="#internals" title="Part&#xA0;III.&#xA0;Internals of the CLISP Implementation">Part III, “Internals of the <span><strong class="command">CLISP</strong></span> Implementation”</a>, is intended mostly
 for developers as it documents the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> internals, e.g., <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion,
 adding new built-ins, and the <a href="impnotes.html#bytecode" class="olink">bytecode</a>s generated by the compiler
 (i.e., what is printed by <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><code class="function">DISASSEMBLE</code></a>).</p></div><div class="preface" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="conventions"></a>Conventions</h2></div></div></div><p>The following is the mark-up notations used in this document:
 </p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Object Kind</th><th align="center">Example</th></tr></thead><tbody><tr><td align="center">Function</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CAR</code></a></td></tr><tr><td align="center">Variable</td><td align="center"><a href="#load-paths"><code class="varname">CUSTOM:*LOAD-PATHS*</code></a></td></tr><tr><td align="center">Formal Argument</td><td align="center"><em class="replaceable"><code>x</code></em></td></tr><tr><td align="center">Keyword</td><td align="center"><code class="constant">:EOF</code></td></tr><tr><td align="center">Number</td><td align="center"><code class="literal">0</code></td></tr><tr><td align="center">Character</td><td align="center"><span class="keysym">#\Newline</span></td></tr><tr><td align="center">Class, type</td><td align="center"><code class="classname">REGEXP:MATCH</code></td></tr><tr><td align="center">Format instruction</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html" target="_top"><code class="literal">~A</code></a></td></tr><tr><td align="center"><a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> keyword</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a></td></tr><tr><td align="center">Declaration</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/dec_ftype.html" target="_top"><code class="literal">FTYPE</code></a></td></tr><tr><td align="center">Package</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a></td></tr><tr><td align="center">Real file</td><td align="center"><a href="#config-lisp"><code class="filename">config.lisp</code></a></td></tr><tr><td align="center">Abstract file</td><td align="center"><code class="filename">#P".c"</code></td></tr><tr><td align="center">Code (you are likely to type it)</td><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><code class="function">CONS</code></a> 1 2)</code></td></tr><tr><td align="center">Data (<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is likely to print it)</td><td align="center"><span class="data"><code class="literal">#(1 2 3)</code></span></td></tr><tr><td align="center">Program listing</td><td align="center"><pre class="programlisting">
(defun cycle-length (n <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (len 1) (top 0))
  (cond ((= n 1) (values len top))
        ((evenp n) (cycle-length (ash n -1) (1+ len) (max top n)))
        (t (let ((next (1+ (* 3 n))))
             (cycle-length next (1+ len) (max top next))))))
    </pre></td></tr><tr><td align="center">Bytecode instruction</td><td align="center"><span class="byte"><code class="literal">(STOREV <em class="replaceable"><code>k</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td></tr><tr><td align="center">first mention of an entity</td><td align="center"><strong class="first"><em class="firstterm">firstterm</em></strong></td></tr></tbody></table></div></div><div class="part" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="clhs-chapters"></a>Part I. Chapters or the [<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>]</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#intro">1. Introduction
  [CLHS-1]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-symb">1.1. Special Symbols
  [CLHS-1.4.1.3]</a></span></dt><dt><span class="section"><a href="#error-terms">1.2. Error Terminology
  [CLHS-1.4.2]</a></span></dt><dt><span class="section"><a href="#cl-symb">1.3. Symbols in the Package <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong>
  [CLHS-1.9]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#syntax">2. Syntax
   [CLHS-2]</a></span></dt><dd><dl><dt><span class="section"><a href="#std-char">2.1. Standard Characters
  [CLHS-2.1.3]</a></span></dt><dt><span class="section"><a href="#reader-alg">2.2. Reader Algorithm
   [CLHS-2.2]</a></span></dt><dt><span class="section"><a href="#tokens">2.3. Symbols as Tokens
  [CLHS-2.3.4]</a></span></dt><dt><span class="section"><a href="#valid-patterns">2.4. Valid Patterns for Tokens
  [CLHS-2.3.5]</a></span></dt><dt><span class="section"><a href="#backquote">2.5. Backquote
  [CLHS-2.4.6]</a></span></dt><dt><span class="section"><a href="#sharpsign">2.6. Sharpsign
  [CLHS-2.4.8]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#eval">3. Evaluation and Compilation
   [CLHS-3]</a></span></dt><dd><dl><dt><span class="section"><a href="#evaluation">3.1. Evaluation
  [CLHS-3.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#eval-environ">3.1.1. Introduction to Environments
  [CLHS-3.1.1]</a></span></dt><dt><span class="section"><a href="#dyn-var">3.1.2. Dynamic Variables
  [CLHS-3.1.2.1.1.2]</a></span></dt><dt><span class="section"><a href="#function-form">3.1.3. Conses as Forms
  [CLHS-3.1.2.1.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#compilation">3.2. Compilation
  [CLHS-3.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compiler-terms">3.2.1. Compiler Terminology
  [CLHS-3.2.1]</a></span></dt><dt><span class="section"><a href="#compiler-macros">3.2.2. Compiler Macros
  [CLHS-3.2.2.1]</a></span></dt><dt><span class="section"><a href="#similarity">3.2.3. Definition of Similarity
  [CLHS-3.2.4.2.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#declarations">3.3. Declarations
  [CLHS-3.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-decl">3.3.1. Declaration <code class="literal">SPECIAL</code></a></span></dt><dt><span class="section"><a href="#safety-decl">3.3.2. Declaration <code class="literal">SAFETY</code></a></span></dt><dt><span class="section"><a href="#compile-decl">3.3.3. Declaration <code class="code">(COMPILE)</code></a></span></dt></dl></dd><dt><span class="section"><a href="#lalist">3.4. Lambda Lists
   [CLHS-3.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#boa-lalist">3.4.1. Boa Lambda Lists
  [CLHS-3.4.6]</a></span></dt></dl></dd><dt><span class="section"><a href="#eval-comp">3.5. The Evaluation and Compilation Dictionary
  [CLHS-3.8]</a></span></dt><dd><dl><dt><span class="section"><a href="#constantp">3.5.1. Function <code class="function">CONSTANTP</code></a></span></dt><dt><span class="section"><a href="#eval-when">3.5.2. Macro <code class="function">EVAL-WHEN</code></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#types-classes">4. Types and Classes
   [CLHS-4]</a></span></dt><dd><dl><dt><span class="section"><a href="#types">4.1. Types
  [CLHS-4.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#type-spec">4.1.1. Type Specifiers
  [CLHS-4.2.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#classes">4.2. Classes
  [CLHS-4.3]</a></span></dt><dt><span class="section"><a href="#clos-diff">4.3. Deviations from ANSI CL standard</a></span></dt><dt><span class="section"><a href="#metaclasses">4.4. Standard Metaclasses
  [CLHS-4.3.1.1]</a></span></dt><dt><span class="section"><a href="#def-class">4.5. Defining Classes
  [CLHS-4.3.2]</a></span></dt><dt><span class="section"><a href="#redef-class">4.6. Redefining Classes
  [CLHS-4.3.6]</a></span></dt><dt><span class="section"><a href="#type-class-dict">4.7. The Types and Classes Dictionary
  [CLHS-4.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#fixnum-char-ansi">4.7.1. Function <code class="function">COERCE</code></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#data">5. Data and Control Flow
   [CLHS-5]</a></span></dt><dd><dl><dt><span class="section"><a href="#flow-dict">5.1. The Data and Control Flow Dictionary
   [CLHS-5.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#defconstant">5.1.1. Macro <code class="function">DEFCONSTANT</code></a></span></dt><dt><span class="section"><a href="#fcase">5.1.2. Macro <code class="function">EXT:FCASE</code></a></span></dt><dt><span class="section"><a href="#xor">5.1.3. Function <code class="function">EXT:XOR</code></a></span></dt><dt><span class="section"><a href="#eq">5.1.4. Function <code class="function">EQ</code></a></span></dt><dt><span class="section"><a href="#sym-fun">5.1.5. Function <code class="function">SYMBOL-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#setf">5.1.6. Macro <code class="function">SETF</code></a></span></dt><dt><span class="section"><a href="#func">5.1.7. Special Operator <code class="function">FUNCTION</code></a></span></dt><dt><span class="section"><a href="#def-sym-mac">5.1.8. Macro <code class="function">DEFINE-SYMBOL-MACRO</code></a></span></dt><dt><span class="section"><a href="#lambda">5.1.9. Macro <code class="function">LAMBDA</code></a></span></dt><dt><span class="section"><a href="#defun">5.1.10. Macros <code class="function">DEFUN</code> &amp; <code class="function">DEFMACRO</code></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#iteration">6. Iteration
  [CLHS-6]</a></span></dt><dd><dl><dt><span class="section"><a href="#loop">6.1. The LOOP Facility
  [CLHS-6.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#loop-inter-var-finally">6.1.1. Iteration variables in the loop epilogue</a></span></dt><dt><span class="section"><a href="#loop-ansi">6.1.2. Backward Compatibility</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#objects">7. Objects
   [CLHS-7]</a></span></dt><dd><dl><dt><span class="section"><a href="#std-meth-combo">7.1. Standard Method Combination
  [CLHS-7.6.6.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#structures">8. Structures
   [CLHS-8]</a></span></dt><dt><span class="chapter"><a href="#conditions">9. Conditions
   [CLHS-9]</a></span></dt><dd><dl><dt><span class="section"><a href="#cond-nl">9.1. Embedded Newlines in Condition Reports
   [CLHS-9.1.3.1.3]</a></span></dt><dt><span class="section"><a href="#cond-dict">9.2. The Conditions Dictionary
   [CLHS-9.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#symbols">10. Symbols
   [CLHS-10]</a></span></dt><dt><span class="chapter"><a href="#packages">11. Packages
   [CLHS-11]</a></span></dt><dd><dl><dt><span class="section"><a href="#pack-lock">11.1. Constraints on the <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong> Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></span></dt><dt><span class="section"><a href="#clupack">11.2. The
  <strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong> Package
  [CLHS-11.1.2.2]</a></span></dt><dt><span class="section"><a href="#imppack">11.3. Implementation-Defined Packages
   [CLHS-11.1.2.4]</a></span></dt><dt><span class="section"><a href="#package-case">11.4. Package Case-Sensitivity</a></span></dt><dd><dl><dt><span class="section"><a href="#cs-clu">11.4.1. User Package for the Case-sensitive World</a></span></dt><dt><span class="section"><a href="#cs-pack-name">11.4.2. Package Names</a></span></dt><dt><span class="section"><a href="#cs-gensym-kwd">11.4.3. Gensyms and Keywords</a></span></dt><dt><span class="section"><a href="#case-sensitive-migration">11.4.4. Migration Tips</a></span></dt><dt><span class="section"><a href="#case-sensitive-startup">11.4.5. Using case-sensitive packages by default</a></span></dt></dl></dd><dt><span class="section"><a href="#pack-dict">11.5. The Packages Dictionary
   [CLHS-11.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-pack">11.5.1. Function <code class="function">MAKE-PACKAGE</code></a></span></dt><dt><span class="section"><a href="#defpack">11.5.2. Macro <code class="function">DEFPACKAGE</code></a></span></dt><dt><span class="section"><a href="#re-export">11.5.3. Function <code class="function">EXT:RE-EXPORT</code></a></span></dt><dt><span class="section"><a href="#pack-inverted">11.5.4. Function <code class="function">EXT:PACKAGE-CASE-INVERTED-P</code></a></span></dt><dt><span class="section"><a href="#pack-sensitive">11.5.5. Function <code class="function">EXT:PACKAGE-CASE-SENSITIVE-P</code></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#numbers">12. Numbers
   [CLHS-12]</a></span></dt><dd><dl><dt><span class="section"><a href="#num-types">12.1. Numeric Types</a></span></dt><dt><span class="section"><a href="#num-concepts">12.2. Number Concepts
   [CLHS-12.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-type">12.2.1. Byte Operations on Integers
   [CLHS-12.1.1.3.2]</a></span></dt><dt><span class="section"><a href="#float-subst">12.2.2. Rule of Float Substitutability
   [CLHS-12.1.3.3]</a></span></dt><dt><span class="section"><a href="#float-comp">12.2.3. Floating-point Computations
   [CLHS-12.1.4]</a></span></dt><dt><span class="section"><a href="#complex-comp">12.2.4. Complex Computations
   [CLHS-12.1.5]</a></span></dt><dt><span class="section"><a href="#complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   [CLHS-12.1.5.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#num-dict">12.3. The Numbers Dictionary
   [CLHS-12.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#random-state">12.3.1. Random Numbers</a></span></dt><dt><span class="section"><a href="#int-func-ext">12.3.2. Additional Integer Functions</a></span></dt><dt><span class="section"><a href="#float-notes">12.3.3. Floating Point Arithmetics</a></span></dt><dt><span class="section"><a href="#float-decode">12.3.4. Float Decoding
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bool-ops">12.3.5. Boolean Operations
  [CLHS]</a></span></dt><dt><span class="section"><a href="#fixnum-lim">12.3.6. Fixnum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bignum-lim">12.3.7. Bignum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-lim">12.3.8. Float Limits
  [CLHS]</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#characters">13. Characters
   [CLHS-13]</a></span></dt><dd><dl><dt><span class="section"><a href="#char-script">13.1. Character Scripts
   [CLHS-13.1.2.1]</a></span></dt><dt><span class="section"><a href="#char-attrib">13.2. Character Attributes
   [CLHS-13.1.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#input-char">13.2.1. Input Characters</a></span></dt></dl></dd><dt><span class="section"><a href="#graph-char">13.3. Graphic Characters
   [CLHS-13.1.4.1]</a></span></dt><dt><span class="section"><a href="#alpha-char">13.4. Alphabetic Characters
   [CLHS-13.1.4.2]</a></span></dt><dt><span class="section"><a href="#char-case">13.5. Characters With Case
   [CLHS-13.1.4.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#char-invertcase">13.5.1. Function <code class="function">EXT:CHAR-INVERTCASE</code></a></span></dt><dt><span class="section"><a href="#char-ext">13.5.2. Case of Implementation-Defined Characters
  [CLHS-13.1.4.3.4]</a></span></dt></dl></dd><dt><span class="section"><a href="#num-char">13.6. Numeric Characters
   [CLHS-13.1.4.4]</a></span></dt><dt><span class="section"><a href="#char-ord">13.7. Ordering of Characters
   [CLHS-13.1.6]</a></span></dt><dt><span class="section"><a href="#clhs-newline">13.8. Treatment of Newline during Input and Output
   [CLHS-13.1.8]</a></span></dt><dt><span class="section"><a href="#char-int">13.9. Character Encodings
   [CLHS-13.1.9]</a></span></dt><dt><span class="section"><a href="#script-ext">13.10. Documentation
   of Implementation-Defined Scripts
   [CLHS-13.1.10]</a></span></dt><dt><span class="section"><a href="#char-dict">13.11. The Characters Dictionary
   [CLHS-13.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#char-code">13.11.1. Function <code class="function">CHAR-CODE</code></a></span></dt><dt><span class="section"><a href="#base-char">13.11.2. Type <code class="classname">BASE-CHAR</code></a></span></dt><dt><span class="section"><a href="#char-width">13.11.3. Function <code class="function">EXT:CHAR-WIDTH</code></a></span></dt></dl></dd><dt><span class="section"><a href="#char-platform-dep">13.12. Platform-Dependent Characters</a></span></dt><dt><span class="section"><a href="#char-bits">13.13. Obsolete Constants</a></span></dt></dl></dd><dt><span class="chapter"><a href="#conses">14. Conses
   [CLHS-14]</a></span></dt><dd><dl><dt><span class="section"><a href="#cons-dict">14.1. The Conses Dictionary
   [CLHS-14.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#map-func">14.1.1. Mapping Functions</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#arrays">15. Arrays
   [CLHS-15]</a></span></dt><dd><dl><dt><span class="section"><a href="#array-elts">15.1. Array Elements
   [CLHS-15.1.1]</a></span></dt><dt><span class="section"><a href="#array-dict">15.2. The Arrays Dictionary
   [CLHS-15.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#strings">16. Strings
   [CLHS-16]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-dict">16.1. The Strings Dictionary
   [CLHS-16.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-comp">16.1.1. String Comparison</a></span></dt><dt><span class="section"><a href="#string-width">16.1.2. Function <code class="function">EXT:STRING-WIDTH</code></a></span></dt><dt><span class="section"><a href="#string-invertcase">16.1.3. Functions <code class="function">EXT:STRING-INVERTCASE</code>
  and <code class="function">EXT:NSTRING-INVERTCASE</code></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#sequences">17. Sequences
   [CLHS-17]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-dict">17.1. The Sequences Dictionary
   [CLHS-17.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-macro-ext">17.1.1. Additional Macros</a></span></dt><dt><span class="section"><a href="#nreverse-nreconc">17.1.2. Functions <code class="function">NREVERSE</code> &amp; <code class="function">NRECONC</code></a></span></dt><dt><span class="section"><a href="#rem-del">17.1.3. Functions <code class="function">REMOVE</code> &amp; <code class="function">DELETE</code></a></span></dt><dt><span class="section"><a href="#sorting">17.1.4. Functions <code class="function">SORT</code> &amp; <code class="function">STABLE-SORT</code></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#hash">18. Hash Tables
   [CLHS-18]</a></span></dt><dd><dl><dt><span class="section"><a href="#hash-dict">18.1. The Hash Tables Dictionary
   [CLHS-18.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-hash">18.1.1. Function <code class="function">MAKE-HASH-TABLE</code></a></span></dt><dt><span class="section"><a href="#defhash">18.1.2. Macro <code class="function">EXT:DEFINE-HASH-TABLE-TEST</code></a></span></dt><dt><span class="section"><a href="#ht-test">18.1.3. Function <code class="function">HASH-TABLE-TEST</code></a></span></dt><dt><span class="section"><a href="#dohash">18.1.4. Macro <code class="function">EXT:DOHASH</code></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#filenames">19. Filenames
   [CLHS-19]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-components">19.1. Pathname Components
   [CLHS-19.2.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-dir-canon">19.1.1. Directory canonicalization</a></span></dt><dt><span class="section"><a href="#path-platform-specific">19.1.2. Platform-specific issues</a></span></dt></dl></dd><dt><span class="section"><a href="#unspecific">19.2. :UNSPECIFIC as a Component Value
 [CLHS-19.2.2.2.3]</a></span></dt><dt><span class="section"><a href="#path-external-notation">19.3. External notation</a></span></dt><dt><span class="section"><a href="#log-path">19.4. Logical Pathnames
  [CLHS-19.3]</a></span></dt><dt><span class="section"><a href="#filename-dict">19.5. The Filenames Dictionary
   [CLHS-19.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#translate-pathname">19.5.1. Function <code class="function">TRANSLATE-PATHNAME</code></a></span></dt><dt><span class="section"><a href="#translate-logpath">19.5.2. Function <code class="function">TRANSLATE-LOGICAL-PATHNAME</code></a></span></dt><dt><span class="section"><a href="#parsename">19.5.3. Function <code class="function">PARSE-NAMESTRING</code></a></span></dt><dt><span class="section"><a href="#pathmerge">19.5.4. Function <code class="function">MERGE-PATHNAMES</code></a></span></dt><dt><span class="section"><a href="#load-lpt">19.5.5. Function <code class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</code></a></span></dt><dt><span class="section"><a href="#absolute-pathname">19.5.6. Function <code class="function">EXT:ABSOLUTE-PATHNAME</code></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#files">20. Files
   [CLHS-20]</a></span></dt><dd><dl><dt><span class="section"><a href="#file-dict">20.1. The Files Dictionary
   [CLHS-20.2]</a></span></dt></dl></dd><dt><span class="chapter"><a href="#streams">21. Streams
   [CLHS-21]</a></span></dt><dd><dl><dt><span class="section"><a href="#streams-interactive">21.1. Interactive Streams
 [CLHS-21.1.1.1.3]</a></span></dt><dt><span class="section"><a href="#terminal">21.2. Terminal interaction</a></span></dt><dd><dl><dt><span class="section"><a href="#readline">21.2.1. Command line editing with GNU readline</a></span></dt><dt><span class="section"><a href="#with-kbd">21.2.2. Macro <code class="function">EXT:WITH-KEYBOARD</code></a></span></dt></dl></dd><dt><span class="section"><a href="#stream-dict">21.3. The Streams Dictionary
   [CLHS-21.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#stream-eltype">21.3.1. Function <code class="function">STREAM-ELEMENT-TYPE</code></a></span></dt><dt><span class="section"><a href="#make-stream">21.3.2. Function <code class="function">EXT:MAKE-STREAM</code></a></span></dt><dt><span class="section"><a href="#bin-input">21.3.3. Binary input, <code class="function">READ-BYTE</code>,
  <code class="function">EXT:READ-INTEGER</code> &amp; <code class="function">EXT:READ-FLOAT</code></a></span></dt><dt><span class="section"><a href="#bin-output">21.3.4. Binary output, <code class="function">WRITE-BYTE</code>,
  <code class="function">EXT:WRITE-INTEGER</code> &amp; <code class="function">EXT:WRITE-FLOAT</code></a></span></dt><dt><span class="section"><a href="#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="#file-pos">21.3.7. Function <code class="function">FILE-POSITION</code></a></span></dt><dt><span class="section"><a href="#elastic-newline">21.3.8. Avoiding blank lines, <code class="function">EXT:ELASTIC-NEWLINE</code></a></span></dt><dt><span class="section"><a href="#open">21.3.9. Function <code class="function">OPEN</code></a></span></dt><dt><span class="section"><a href="#close">21.3.10. Function <code class="function">CLOSE</code></a></span></dt><dt><span class="section"><a href="#open-stream-p">21.3.11. Function <code class="function">OPEN-STREAM-P</code></a></span></dt><dt><span class="section"><a href="#broadcast-stream">21.3.12. Class <code class="classname">BROADCAST-STREAM</code></a></span></dt><dt><span class="section"><a href="#stream-buffer">21.3.13. Functions
  <code class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</code>
    and
  <code class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</code>
   </a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#printer">22. Printer
   [CLHS-22]</a></span></dt><dd><dl><dt><span class="section"><a href="#multi-rep">22.1. Multiple Possible Textual Representations
   [CLHS-22.1.1.1]</a></span></dt><dt><span class="section"><a href="#sym-pack-prefix">22.2. Package Prefixes for Symbols
  [CLHS-22.1.3.3.1]</a></span></dt><dt><span class="section"><a href="#print-vector">22.3. Printing Other Vectors
   [CLHS-22.1.3.7]</a></span></dt><dt><span class="section"><a href="#print-array">22.4. Printing Other Arrays
   [CLHS-22.1.3.8]</a></span></dt><dt><span class="section"><a href="#clpp">22.5. The Lisp Pretty Printer
   [CLHS-22.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#pp-dispatch">22.5.1. Pretty Print Dispatch Table
   [CLHS-22.2.1.4]</a></span></dt></dl></dd><dt><span class="section"><a href="#print-formatted">22.6. Formatted Output
  [CLHS-22.3]</a></span></dt><dt><span class="section"><a href="#print-dict">22.7. The Printer Dictionary
   [CLHS-22.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#write">22.7.1. Functions <code class="function">WRITE</code> &amp; <code class="function">WRITE-TO-STRING</code></a></span></dt><dt><span class="section"><a href="#print-unreadable-object">22.7.2. Macro <code class="function">PRINT-UNREADABLE-OBJECT</code></a></span></dt><dt><span class="section"><a href="#pathprint">22.7.3. Pathnames</a></span></dt><dt><span class="section"><a href="#spacecharprint">22.7.4. Characters</a></span></dt><dt><span class="section"><a href="#print-misc">22.7.5. Miscellaneous Issues</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#reader">23. Reader
   [CLHS-23]</a></span></dt><dd><dl><dt><span class="section"><a href="#chario">23.1. Characters</a></span></dt><dt><span class="section"><a href="#read-dispatch-ext">23.2. Additional read dispatch macros</a></span></dt><dt><span class="section"><a href="#rt-case">23.3. Function <code class="function">READTABLE-CASE</code></a></span></dt></dl></dd><dt><span class="chapter"><a href="#system">24. System Construction
   [CLHS-24]</a></span></dt><dd><dl><dt><span class="section"><a href="#system-dict">24.1. The System Construction Dictionary
   [CLHS-24.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compilefile">24.1.1. Function <code class="function">COMPILE-FILE</code></a></span></dt><dt><span class="section"><a href="#compile-file-path">24.1.2. Function <code class="function">COMPILE-FILE-PATHNAME</code></a></span></dt><dt><span class="section"><a href="#require">24.1.3. Function <code class="function">REQUIRE</code></a></span></dt><dt><span class="section"><a href="#loadfile">24.1.4. Function <code class="function">LOAD</code></a></span></dt><dt><span class="section"><a href="#features">24.1.5. Variable <code class="varname">*FEATURES*</code></a></span></dt><dt><span class="section"><a href="#featurep">24.1.6. Function <code class="function">EXT:FEATUREP</code>
  [CLRFI-1]</a></span></dt><dt><span class="section"><a href="#compiled-file-p">24.1.7. Function
  <code class="function">EXT:COMPILED-FILE-P</code>
  [CLRFI-2]</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#environment">25. Environment
   [CLHS-25]</a></span></dt><dd><dl><dt><span class="section"><a href="#debugger">25.1. Debugging Utilities
   [CLHS-25.1.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#user-commands">25.1.1. User-customizable Commands</a></span></dt></dl></dd><dt><span class="section"><a href="#environment-dict">25.2. The Environment Dictionary
   [CLHS-25.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#disassemble">25.2.1. Function <code class="function">DISASSEMBLE</code></a></span></dt><dt><span class="section"><a href="#uncompile">25.2.2. Function <code class="function">EXT:UNCOMPILE</code></a></span></dt><dt><span class="section"><a href="#documentation">25.2.3. Function <code class="function">DOCUMENTATION</code></a></span></dt><dt><span class="section"><a href="#describe">25.2.4. Function <code class="function">DESCRIBE</code></a></span></dt><dt><span class="section"><a href="#trace">25.2.5. Macro <code class="function">TRACE</code></a></span></dt><dt><span class="section"><a href="#inspect">25.2.6. Function <code class="function">INSPECT</code></a></span></dt><dt><span class="section"><a href="#room">25.2.7. Function <code class="function">ROOM</code></a></span></dt><dt><span class="section"><a href="#time">25.2.8. Macro <code class="function">TIME</code></a></span></dt><dt><span class="section"><a href="#ed">25.2.9. Function <code class="function">ED</code></a></span></dt><dt><span class="section"><a href="#clock">25.2.10. Clock Time</a></span></dt><dt><span class="section"><a href="#machine">25.2.11. Machine</a></span></dt><dt><span class="section"><a href="#apropos">25.2.12. Functions <code class="function">APROPOS</code> &amp; <code class="function">APROPOS-LIST</code></a></span></dt><dt><span class="section"><a href="#dribble">25.2.13. Function <code class="function">DRIBBLE</code></a></span></dt><dt><span class="section"><a href="#version">25.2.14. Function <code class="function">LISP-IMPLEMENTATION-VERSION</code></a></span></dt><dt><span class="section"><a href="#argv">25.2.15. Function <code class="function">EXT:ARGV</code></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#glossary">26. Glossary
   [CLHS-26]</a></span></dt><dt><span class="chapter"><a href="#appendix">27. Appendix
   [CLHS-a]</a></span></dt><dt><span class="chapter"><a href="#issues">28. X3J13 Issue Index
   [CLHS-ic]</a></span></dt></dl></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="intro"></a>Chapter 1. Introduction
  <a href="http://www.lisp.org/HyperSpec/Body/chap-1.html" target="_top">[CLHS-1]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#spec-symb">1.1. Special Symbols
  [CLHS-1.4.1.3]</a></span></dt><dt><span class="section"><a href="#error-terms">1.2. Error Terminology
  [CLHS-1.4.2]</a></span></dt><dt><span class="section"><a href="#cl-symb">1.3. Symbols in the Package <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong>
  [CLHS-1.9]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="spec-symb"></a>1.1. Special Symbols
  <a href="http://www.lisp.org/HyperSpec/Body/sec_1-4-1-3.html" target="_top">[CLHS-1.4.1.3]</a></h2></div></div></div><p>The <strong class="first"><em class="firstterm">final delimiter
  <a id="fin-delim" class="indexterm"></a></em></strong>
 of an interactive stream:
 </p><div class="variablelist"><dl><dt><span class="term"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a></span></dt><dd>type <span><strong class="keycap">Control</strong></span>-<span class="keysym">D</span>
     at the beginning of a line</dd><dt><span class="term"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a></span></dt><dd>type <span><strong class="keycap">Control</strong></span>-<span class="keysym">Z</span>,
     followed by <span><strong class="keycap">Return</strong></span></dd></dl></div><p>
 This final delimiter is never actually seen by programs; no need to
 test for <span class="keysym">#\^D</span> or <span class="keysym">#\^Z</span> - use
 <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html" target="_top"><code class="function">READ-CHAR-NO-HANG</code></a> to check for <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>.
 Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_clear-input.html" target="_top"><code class="function">CLEAR-INPUT</code></a> on the stream removes the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> state,
 thus making it available for further input.</p><p>A newline character can be entered by the user by pressing the
 <span><strong class="keycap">Newline</strong></span> key or, on the numeric keypad, the
 <span><strong class="keycap">Enter</strong></span> key.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="error-terms"></a>1.2. Error Terminology
  <a href="http://www.lisp.org/HyperSpec/Body/sec_1-4-2.html" target="_top">[CLHS-1.4.2]</a></h2></div></div></div><p>Safety settings are ignored by the interpreted code;
 therefore where the standard uses the phrase “<span class="quote">should signal an
 error</span>”, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.
 See <a href="#safety-decl" title="3.3.2.&#xA0;Declaration SAFETY">Section 3.3.2, “Declaration <code class="literal">SAFETY</code>”</a> for the safety of compiled code.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cl-symb"></a>1.3. Symbols in the Package <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_1-9.html" target="_top">[CLHS-1.9]</a></h2></div></div></div><p>All 978 symbols in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> package specified by the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] are implemented.</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="syntax"></a>Chapter 2. Syntax
   <a href="http://www.lisp.org/HyperSpec/Body/chap-2.html" target="_top">[CLHS-2]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#std-char">2.1. Standard Characters
  [CLHS-2.1.3]</a></span></dt><dt><span class="section"><a href="#reader-alg">2.2. Reader Algorithm
   [CLHS-2.2]</a></span></dt><dt><span class="section"><a href="#tokens">2.3. Symbols as Tokens
  [CLHS-2.3.4]</a></span></dt><dt><span class="section"><a href="#valid-patterns">2.4. Valid Patterns for Tokens
  [CLHS-2.3.5]</a></span></dt><dt><span class="section"><a href="#backquote">2.5. Backquote
  [CLHS-2.4.6]</a></span></dt><dt><span class="section"><a href="#sharpsign">2.6. Sharpsign
  [CLHS-2.4.8]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="std-char"></a>2.1. Standard Characters
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-1-3.html" target="_top">[CLHS-2.1.3]</a></h2></div></div></div><p>The standard characters are <span class="keysym">#\Newline</span> and the
 <a href="#graph-char" title="13.3.&#xA0;Graphic Characters&#10;   [CLHS-13.1.4.1]">graphic characters</a>
 with a <a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> between 32 and 126 (inclusive).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="reader-alg"></a>2.2. Reader Algorithm
   <a href="http://www.lisp.org/HyperSpec/Body/sec_2-2.html" target="_top">[CLHS-2.2]</a></h2></div></div></div><p>The requirement of step 4 that a
 “<span class="quote"><a href="http://www.lisp.org/HyperSpec/Body/glo_r.html#reader_macro_function" target="_top">reader
  macro function</a> may return zero values or one value</span>”
  <span class="strong"><strong>is</strong></span> enforced.  You can use the function <a href="http://www.lisp.org/HyperSpec/Body/acc_values.html" target="_top"><code class="function">VALUES</code></a> to control the
  number of values returned.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="tokens"></a>2.3. Symbols as Tokens
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-3-4.html" target="_top">[CLHS-2.3.4]</a></h2></div></div></div><p>A <strong class="first"><em class="firstterm">reserved token
  <a id="res-token" class="indexterm"></a></em></strong>,
 i.e., a <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#token" target="_top">token</a> that has
 <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#potential_number" target="_top">potential number</a>
 syntax but cannot be interpreted as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a>, is interpreted as
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> when being read.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="valid-patterns"></a>2.4. Valid Patterns for Tokens
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-3-5.html" target="_top">[CLHS-2.3.5]</a></h2></div></div></div><p>When a token with package markers is read, then no checking is
 done whether the package part and the symbol-name part do not have
 number syntax. (What's the purpose of this check?) So we consider
 tokens like <span class="token">USER::</span> or <span class="token">:1</span> or
 <span class="token">LISP::4711</span> or <span class="token">21:3</span> as symbols.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="backquote"></a>2.5. Backquote
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-6.html" target="_top">[CLHS-2.4.6]</a></h2></div></div></div><p>The backquote read macro also works when nested. Example:
<a id="bq-nested"></a></p><pre class="programlisting">
   (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><code class="function">EVAL</code></a> ``(,#'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><code class="function">LAMBDA</code></a> () ',a) ,#'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><code class="function">LAMBDA</code></a> () ',b)))
 ≡ (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><code class="function">EVAL</code></a> `(list #'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><code class="function">LAMBDA</code></a> () ',a) #'(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><code class="function">LAMBDA</code></a> () ',b)))
 ≡ (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><code class="function">EVAL</code></a> (list 'list (list 'function (list 'lambda nil (list 'quote a)))
                     (list 'function (list 'lambda nil (list 'quote b)))))
</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sharpsign"></a>2.6. Sharpsign
  <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8.html" target="_top">[CLHS-2.4.8]</a></h2></div></div></div><p>Reader macros are also defined for the following:
</p><div class="variablelist"><a id="extra-read-macro-table"></a><p class="title"><b>Additional reader macros</b></p><dl><dt><span class="term">#,</span></dt><dd>load-time evaluation, kept despite the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]
    issue <a href="http://www.lisp.org/HyperSpec/Issues/iss315.html" target="_top">SHARP-COMMA-CONFUSION:REMOVE</a>.</dd><dt><span class="term">#Y</span></dt><dd>function objects and file <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a>s
 </dd><dt><span class="term">#""</span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a></dd></dl></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="eval"></a>Chapter 3. Evaluation and Compilation
   <a href="http://www.lisp.org/HyperSpec/Body/chap-3.html" target="_top">[CLHS-3]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#evaluation">3.1. Evaluation
  [CLHS-3.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#eval-environ">3.1.1. Introduction to Environments
  [CLHS-3.1.1]</a></span></dt><dt><span class="section"><a href="#dyn-var">3.1.2. Dynamic Variables
  [CLHS-3.1.2.1.1.2]</a></span></dt><dt><span class="section"><a href="#function-form">3.1.3. Conses as Forms
  [CLHS-3.1.2.1.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#compilation">3.2. Compilation
  [CLHS-3.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compiler-terms">3.2.1. Compiler Terminology
  [CLHS-3.2.1]</a></span></dt><dt><span class="section"><a href="#compiler-macros">3.2.2. Compiler Macros
  [CLHS-3.2.2.1]</a></span></dt><dt><span class="section"><a href="#similarity">3.2.3. Definition of Similarity
  [CLHS-3.2.4.2.2]</a></span></dt></dl></dd><dt><span class="section"><a href="#declarations">3.3. Declarations
  [CLHS-3.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#spec-decl">3.3.1. Declaration <code class="literal">SPECIAL</code></a></span></dt><dt><span class="section"><a href="#safety-decl">3.3.2. Declaration <code class="literal">SAFETY</code></a></span></dt><dt><span class="section"><a href="#compile-decl">3.3.3. Declaration <code class="code">(COMPILE)</code></a></span></dt></dl></dd><dt><span class="section"><a href="#lalist">3.4. Lambda Lists
   [CLHS-3.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#boa-lalist">3.4.1. Boa Lambda Lists
  [CLHS-3.4.6]</a></span></dt></dl></dd><dt><span class="section"><a href="#eval-comp">3.5. The Evaluation and Compilation Dictionary
  [CLHS-3.8]</a></span></dt><dd><dl><dt><span class="section"><a href="#constantp">3.5.1. Function <code class="function">CONSTANTP</code></a></span></dt><dt><span class="section"><a href="#eval-when">3.5.2. Macro <code class="function">EVAL-WHEN</code></a></span></dt></dl></dd></dl></div><p>All the functions built by <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><code class="function">FUNCTION</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><code class="function">COMPILE</code></a> and the like are
 atoms.  There are built-in functions written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, compiled
 functions (both of type <a href="http://www.lisp.org/HyperSpec/Body/typ_compiled-function.html" target="_top"><code class="classname">COMPILED-FUNCTION</code></a>) and interpreted
 functions (of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a>).</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="evaluation"></a>3.1. Evaluation
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1.html" target="_top">[CLHS-3.1]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#eval-environ">3.1.1. Introduction to Environments
  [CLHS-3.1.1]</a></span></dt><dt><span class="section"><a href="#dyn-var">3.1.2. Dynamic Variables
  [CLHS-3.1.2.1.1.2]</a></span></dt><dt><span class="section"><a href="#function-form">3.1.3. Conses as Forms
  [CLHS-3.1.2.1.2]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="eval-environ"></a>3.1.1. Introduction to Environments
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1.html" target="_top">[CLHS-3.1.1]</a></h3></div></div></div><p><a id="the-env"></a><b>Macro <a href="#the-env"><code class="function">EXT:THE-ENVIRONMENT</code></a>. </b>As in Scheme, the macro <code class="code">(<a href="#the-env"><code class="function">EXT:THE-ENVIRONMENT</code></a>)</code>
 returns the current <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.  This works only in interpreted code and
 is not compilable!</p><p><a id="eval-env"></a><b>Function <code class="code">(EXT:EVAL-ENV
 <em class="replaceable"><code>form</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em>)</code>. </b>evaluates a form in a given <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>, just as if the
 form had been a part of the program that the <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em> came from.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dyn-var"></a>3.1.2. Dynamic Variables
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-2.html" target="_top">[CLHS-3.1.2.1.1.2]</a></h3></div></div></div><p>“<span class="quote">Undefined variables</span>”, i.e. <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1.html" target="_top">variable</a>s which are
 referenced outside any lexical binding for a variable of the same name
 and which are not declared <a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><code class="literal">SPECIAL</code></a>, are treated like <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-2.html" target="_top">dynamic variable</a>s
 in the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-1.html" target="_top">global environment</a>.  The compiler <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a> when it
 encounters an undefined variable.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="function-form"></a>3.1.3. Conses as Forms
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-2.html" target="_top">[CLHS-3.1.2.1.2]</a></h3></div></div></div><p>Lists of the form <code class="code">((<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <em class="replaceable"><code>symbol</code></em>) ...)</code> are also
 treated as function forms. This makes the syntax
 <code class="code">(<em class="replaceable"><code>function-name</code></em> <em class="replaceable"><code>arguments</code></em> ...)</code> consistent with the syntax
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a> #'<em class="replaceable"><code>function-name</code></em> <em class="replaceable"><code>arguments</code></em> ...)</code>.
 It implements the item 7 of the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue <a href="http://www.lisp.org/HyperSpec/Issues/iss174.html" target="_top">FUNCTION-NAME:LARGE</a> and the definition of
 <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_form" target="_top">function form</a>s,
 and is consistent with the use of <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a>s elsewhere in <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>.
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="compilation"></a>3.2. Compilation
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2.html" target="_top">[CLHS-3.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#compiler-terms">3.2.1. Compiler Terminology
  [CLHS-3.2.1]</a></span></dt><dt><span class="section"><a href="#compiler-macros">3.2.2. Compiler Macros
  [CLHS-3.2.2.1]</a></span></dt><dt><span class="section"><a href="#similarity">3.2.3. Definition of Similarity
  [CLHS-3.2.4.2.2]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compiler-terms"></a>3.2.1. Compiler Terminology
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-1.html" target="_top">[CLHS-3.2.1]</a></h3></div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> compiles to platform-independent <a href="impnotes.html#bytecode" class="olink">bytecode</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compiler-macros"></a>3.2.2. Compiler Macros
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-2-1.html" target="_top">[CLHS-3.2.2.1]</a></h3></div></div></div><p>Compiler macros are expanded in the compiled code only, and
ignored by the interpreter.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="similarity"></a>3.2.3. Definition of Similarity
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-4-2-2.html" target="_top">[CLHS-3.2.4.2.2]</a></h3></div></div></div><p>Hash tables are <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-4-1.html" target="_top">externalizable object</a>s.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="declarations"></a>3.3. Declarations
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-3.html" target="_top">[CLHS-3.3]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#spec-decl">3.3.1. Declaration <code class="literal">SPECIAL</code></a></span></dt><dt><span class="section"><a href="#safety-decl">3.3.2. Declaration <code class="literal">SAFETY</code></a></span></dt><dt><span class="section"><a href="#compile-decl">3.3.3. Declaration <code class="code">(COMPILE)</code></a></span></dt></dl></div><p>The declarations <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/dec_type.html" target="_top"><code class="literal">TYPE</code></a> <em class="replaceable"><code>type</code></em> <em class="replaceable"><code>variable</code></em> ...)</code>,
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/dec_ftype.html" target="_top"><code class="literal">FTYPE</code></a> <em class="replaceable"><code>type</code></em> <em class="replaceable"><code>function</code></em> ...)</code>,
   are ignored by both the interpreter and the compiler.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="spec-decl"></a>3.3.1. Declaration <a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><code class="literal">SPECIAL</code></a></h3></div></div></div><p><a id="notspec-decl"></a><b>Declaration <a href="#notspec-decl"><code class="literal">EXT:NOTSPECIAL</code></a>. </b>Declarations <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_proclaim.html" target="_top"><code class="function">PROCLAIM</code></a> '(<a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><code class="literal">SPECIAL</code></a> <em class="replaceable"><code>variable</code></em>))</code>
 and <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><code class="function">DEFCONSTANT</code></a> are undone by the <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_proclaim.html" target="_top"><code class="function">PROCLAIM</code></a> '(<a href="#notspec-decl"><code class="literal">EXT:NOTSPECIAL</code></a>
  <em class="replaceable"><code>variable</code></em>))</code> declaration.  This declaration can be used only in
 global <a href="http://www.lisp.org/HyperSpec/Body/fun_proclaim.html" target="_top"><code class="function">PROCLAIM</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_declaim.html" target="_top"><code class="function">DECLAIM</code></a> forms, not in local <a href="http://www.lisp.org/HyperSpec/Body/sym_declare.html" target="_top"><code class="function">DECLARE</code></a> forms.
 Of course, you cannot expect miracles: functions compiled before the
 <a href="#notspec-decl"><code class="literal">EXT:NOTSPECIAL</code></a> proclamation was issued will still be treating <em class="replaceable"><code>variable</code></em> as
 special even after the <a href="#notspec-decl"><code class="literal">EXT:NOTSPECIAL</code></a> proclamation.</p><p><a id="spe-var-p"></a><b>Function <a href="#spe-var-p"><code class="function">EXT:SPECIAL-VARIABLE-P</code></a>. </b>You can use the function <code class="code">(<a href="#spe-var-p"><code class="function">EXT:SPECIAL-VARIABLE-P</code></a> <em class="replaceable"><code>symbol</code></em>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em>)</code> to check whether the symbol is a
 special variable.  <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em> of <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or omitted means use the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-1.html" target="_top">global environment</a>.
 You can also obtain the current <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> using the macro
 <a href="#the-env"><code class="function">EXT:THE-ENVIRONMENT</code></a> (interpreted code only).
 This function will always return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> for global special
 variables and <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-3.html" target="_top">constant variable</a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="safety-decl"></a>3.3.2. Declaration <a href="http://www.lisp.org/HyperSpec/Body/dec_optimize.html" target="_top"><code class="literal">SAFETY</code></a></h3></div></div></div><p>Declaration <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/dec_optimize.html" target="_top"><code class="literal">OPTIMIZE</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/dec_optimize.html" target="_top"><code class="literal">SAFETY</code></a> 3))</code>
 results in “<span class="quote">safe</span>” compiled code: function calls are never
 eliminated. This guarantees the semantics described in [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-5.html" target="_top">Section 3.5</a>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compile-decl"></a>3.3.3. Declaration <a href="#compile-decl" title="3.3.3.&#xA0;Declaration (COMPILE)"><code class="code">(COMPILE)</code></a></h3></div></div></div><p>The declaration <a href="#compile-decl" title="3.3.3.&#xA0;Declaration (COMPILE)"><code class="code">(COMPILE)</code></a> has the effect that the current
 form is compiled prior to execution.  Examples:
</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html" target="_top"><code class="function">LOCALLY</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/sym_declare.html" target="_top"><code class="function">DECLARE</code></a> (compile)) <em class="replaceable"><code>form</code></em>)
</pre><p>
executes a compiled version of <em class="replaceable"><code>form</code></em>.</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET</code></a> ((x 0))
  (<a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><code class="function">FLET</code></a> ((inc () (<a href="http://www.lisp.org/HyperSpec/Body/sym_declare.html" target="_top"><code class="function">DECLARE</code></a> (compile)) (<a href="http://www.lisp.org/HyperSpec/Body/mac_incfcm_decf.html" target="_top"><code class="function">INCF</code></a> x))
         (dec () (<a href="http://www.lisp.org/HyperSpec/Body/mac_incfcm_decf.html" target="_top"><code class="function">DECF</code></a> x)))
    (<a href="http://www.lisp.org/HyperSpec/Body/acc_values.html" target="_top"><code class="function">VALUES</code></a> #'inc #'dec)))
</pre><p>
 returns two functions.  The first is compiled and increments <em class="replaceable"><code>x</code></em>, the
 second is interpreted (slower) and decrements the same <em class="replaceable"><code>x</code></em>.</p><p>The type assertion <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/speope_the.html" target="_top"><code class="function">THE</code></a> <em class="replaceable"><code>value-type</code></em> <em class="replaceable"><code>form</code></em>)</code>
 enforces a type check in interpreted code.
 No type check is done in compiled code.  See also the <a href="#ethe" title="30.11.1.&#xA0;Macro EXT:ETHE"><code class="function">EXT:ETHE</code></a> macro.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="lalist"></a>3.4. Lambda Lists
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4.html" target="_top">[CLHS-3.4]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#boa-lalist">3.4.1. Boa Lambda Lists
  [CLHS-3.4.6]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="boa-lalist"></a>3.4.1. Boa Lambda Lists
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-6.html" target="_top">[CLHS-3.4.6]</a></h3></div></div></div><p>The initial value of an <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;AUX</code></a> variable in a boa <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> is
 the value of the corresponding slot's initial form.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="eval-comp"></a>3.5. The Evaluation and Compilation Dictionary
  <a href="http://www.lisp.org/HyperSpec/Body/sec_the_evalu_n_dictionary.html" target="_top">[CLHS-3.8]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#constantp">3.5.1. Function <code class="function">CONSTANTP</code></a></span></dt><dt><span class="section"><a href="#eval-when">3.5.2. Macro <code class="function">EVAL-WHEN</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="constantp"></a>3.5.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_constantp.html" target="_top"><code class="function">CONSTANTP</code></a></h3></div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_constantp.html" target="_top"><code class="function">CONSTANTP</code></a> fully complies with [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
Additionally, some non-trivial forms are identified as constants, e.g.,
<code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_constantp.html" target="_top"><code class="function">CONSTANTP</code></a> '(<a href="http://www.lisp.org/HyperSpec/Body/fun_pl.html" target="_top"><code class="function">+</code></a> 1 2 3))</code> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="eval-when"></a>3.5.2. Macro <a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><code class="function">EVAL-WHEN</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><code class="function">EVAL-WHEN</code></a> also accepts the situations <code class="code">(NOT EVAL)</code>
 and <code class="code">(NOT COMPILE)</code>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>The situations <code class="constant">EVAL</code>,
 <code class="constant">LOAD</code> and <code class="constant">COMPILE</code> are
 deprecated by the spec, and they are <span class="strong"><strong>not</strong></span> equivalent to the new
 standard situations <code class="constant">:EXECUTE</code>,
 <code class="constant">:LOAD-TOPLEVEL</code>
 and <code class="constant">:COMPILE-TOPLEVEL</code> in that they ignore the
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-3-1.html" target="_top">top-level form</a> versus non-<a href="http://www.lisp.org/HyperSpec/Body/sec_3-2-3-1.html" target="_top">top-level form</a> distinction.</p></div></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="types-classes"></a>Chapter 4. Types and Classes
   <a href="http://www.lisp.org/HyperSpec/Body/chap-4.html" target="_top">[CLHS-4]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#types">4.1. Types
  [CLHS-4.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#type-spec">4.1.1. Type Specifiers
  [CLHS-4.2.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#classes">4.2. Classes
  [CLHS-4.3]</a></span></dt><dt><span class="section"><a href="#clos-diff">4.3. Deviations from ANSI CL standard</a></span></dt><dt><span class="section"><a href="#metaclasses">4.4. Standard Metaclasses
  [CLHS-4.3.1.1]</a></span></dt><dt><span class="section"><a href="#def-class">4.5. Defining Classes
  [CLHS-4.3.2]</a></span></dt><dt><span class="section"><a href="#redef-class">4.6. Redefining Classes
  [CLHS-4.3.6]</a></span></dt><dt><span class="section"><a href="#type-class-dict">4.7. The Types and Classes Dictionary
  [CLHS-4.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#fixnum-char-ansi">4.7.1. Function <code class="function">COERCE</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="types"></a>4.1. Types
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-2.html" target="_top">[CLHS-4.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#type-spec">4.1.1. Type Specifiers
  [CLHS-4.2.3]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="type-spec"></a>4.1.1. Type Specifiers
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-2-3.html" target="_top">[CLHS-4.2.3]</a></h3></div></div></div><p>The general form of the <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> type specifier is <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> <em class="replaceable"><code>type-of-real-part</code></em>
 <em class="replaceable"><code>type-of-imaginary-part</code></em>)</code></span>.  The type
 specifier <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> <em class="replaceable"><code>type</code></em>)</code></span> is
 equivalent to <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> <em class="replaceable"><code>type</code></em>
 <em class="replaceable"><code>type</code></em>)</code></span>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/mac_deftype.html" target="_top"><code class="function">DEFTYPE</code></a> <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s are subject to destructuring (nested <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s
 are allowed, as in <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><code class="function">DEFMACRO</code></a>) and may contain a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;WHOLE</code></a> marker,
 but not an <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;ENVIRONMENT</code></a> marker.</p><p><b>Function <code class="code">(<code class="function">EXT:TYPE-EXPAND</code>
   <em class="replaceable"><code>typespec</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
   <em class="replaceable"><code>once-p</code></em>)</code>. </b>If <em class="replaceable"><code>typespec</code></em> is a user-defined type,
 this will expand it recursively until it is no longer a user-defined
 type (unless <em class="replaceable"><code>once-p</code></em> is supplied and
 non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>).  Two values are returned - the expansion and an indicator
 (<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>) of whether the original
 <em class="replaceable"><code>typespec</code></em> was a user-defined type.
</p><div class="itemizedlist"><p class="title"><b>The possible results of <a href="http://www.lisp.org/HyperSpec/Body/fun_type-of.html" target="_top"><code class="function">TYPE-OF</code></a></b></p><ul type="disc"><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><code class="classname">NULL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/typ_bit.html" target="_top"><code class="classname">BIT</code></a>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> 0
  #.<a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><code class="constant">MOST-POSITIVE-FIXNUM</code></a>)</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>
  #.<a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><code class="constant">MOST-NEGATIVE-FIXNUM</code></a> (0))</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>
  (#.<a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><code class="constant">MOST-POSITIVE-FIXNUM</code></a>))</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> *
  (#.<a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><code class="constant">MOST-NEGATIVE-FIXNUM</code></a>))</code></span></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><code class="classname">RATIONAL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_base-char.html" target="_top"><code class="classname">BASE-CHAR</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/typ_standard-char.html" target="_top"><code class="classname">STANDARD-CHAR</code></a></li><li><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a> <em class="replaceable"><code>element-type</code></em>
  <em class="replaceable"><code>dimensions</code></em>)</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-array.html" target="_top"><code class="classname">SIMPLE-ARRAY</code></a>
  <em class="replaceable"><code>element-type</code></em> <em class="replaceable"><code>dimensions</code></em>)</code></span></li><li><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>
  <em class="replaceable"><code>size</code></em>)</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a>
  <em class="replaceable"><code>size</code></em>)</code></span></li><li><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>
  <em class="replaceable"><code>size</code></em>)</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><code class="classname">SIMPLE-STRING</code></a>
  <em class="replaceable"><code>size</code></em>)</code></span></li><li><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_base-string.html" target="_top"><code class="classname">BASE-STRING</code></a>
  <em class="replaceable"><code>size</code></em>)</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-base-string.html" target="_top"><code class="classname">SIMPLE-BASE-STRING</code></a>
  <em class="replaceable"><code>size</code></em>)</code></span></li><li><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html" target="_top"><code class="classname">BIT-VECTOR</code></a>
  <em class="replaceable"><code>size</code></em>)</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_simple-bit-vector.html" target="_top"><code class="classname">SIMPLE-BIT-VECTOR</code></a>
  <em class="replaceable"><code>size</code></em>)</code></span></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_compiled-function.html" target="_top"><code class="classname">COMPILED-FUNCTION</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html" target="_top"><code class="classname">SYNONYM-STREAM</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><code class="classname">BROADCAST-STREAM</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_concatenated-stream.html" target="_top"><code class="classname">CONCATENATED-STREAM</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html" target="_top"><code class="classname">TWO-WAY-STREAM</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_echo-stream.html" target="_top"><code class="classname">ECHO-STREAM</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html" target="_top"><code class="classname">STRING-STREAM</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><code class="classname">PACKAGE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html" target="_top"><code class="classname">READTABLE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><code class="classname">LOGICAL-PATHNAME</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_random-state.html" target="_top"><code class="classname">RANDOM-STATE</code></a>, <a href="#byte-type" title="12.2.1.&#xA0;Byte Operations on Integers&#10;   [CLHS-12.1.1.3.2]"><span class="type">BYTE</span></a></li><li><code class="classname">SPECIAL-OPERATOR</code>,
  <code class="classname">LOAD-TIME-EVAL</code>, <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a>,
  <code class="classname">GLOBAL-SYMBOL-MACRO</code>, <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a>,
  <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a>, <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a>, <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a>,
  <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a></li><li><a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><code class="classname">EXT:WEAK-POINTER</code></a>, <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><code class="classname">EXT:WEAK-LIST</code></a>, <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><code class="classname">EXT:WEAK-AND-RELATION</code></a>,
   <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><code class="classname">EXT:WEAK-OR-RELATION</code></a>, <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><code class="classname">EXT:WEAK-MAPPING</code></a>, <a href="#weak-and-mapping" title="30.7.6.&#xA0;Weak &#x201C;And&#x201D; Mappings"><code class="classname">EXT:WEAK-AND-MAPPING</code></a>,
   <a href="#weak-or-mapping" title="30.7.7.&#xA0;Weak &#x201C;Or&#x201D; Mappings"><code class="classname">EXT:WEAK-OR-MAPPING</code></a>, <a href="#weak-alist" title="30.7.8.&#xA0;Weak Association Lists"><code class="classname">EXT:WEAK-ALIST</code></a>,
   <a href="#reader" title="Chapter&#xA0;23.&#xA0;Reader&#10;   [CLHS-23]"><code class="classname">READ-LABEL</code></a>,
   <a href="#reader" title="Chapter&#xA0;23.&#xA0;Reader&#10;   [CLHS-23]"><code class="classname">FRAME-POINTER</code></a>,
   <code class="classname">SYSTEM-INTERNAL</code></li><li><code class="classname">ADDRESS</code> (should not
  occur)</li><li>any other <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> (structure types or <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>
  classes)</li><li>a class object (<a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> classes without a
   <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_name" target="_top">proper name</a>)</li></ul></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="classes"></a>4.2. Classes
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3.html" target="_top">[CLHS-4.3]</a></h2></div></div></div><p>The <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> symbols are <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><code class="function">EXPORT</code></a>ed from the package <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a>.
 <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> uses (as in <a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><code class="function">USE-PACKAGE</code></a>) <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a> and <a href="#re-export" title="11.5.3.&#xA0;Function EXT:RE-EXPORT"><code class="function">EXT:RE-EXPORT</code></a>s the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] standard exported symbols (the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extensions, e.g.,
 those described in <a href="#mop-chap" title="29.1.&#xA0;Meta-Object Protocol">Section 29.1, “Meta-Object Protocol”</a>, are <span class="strong"><strong>not</strong></span> <a href="#re-export" title="11.5.3.&#xA0;Function EXT:RE-EXPORT"><code class="function">EXT:RE-EXPORT</code></a>ed).
 Since <a href="#make-pack" title="11.5.1.&#xA0;Function MAKE-PACKAGE">the default <code class="constant">:USE</code> argument</a>
 to <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><code class="function">MAKE-PACKAGE</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>, the standard <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> symbols are normally
 visible in all user-defined packages.
 If you do not want them (for example, if you want to use the
 <a href="ftp://ftp.gnu.org/pub/gnu/clisp/packages/pcl.sept92f.clisp.tar.gz" target="_top">PCL</a>
 implementation of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> instead of the native one), do the following:
</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> "CL-NO-CLOS" (:use "CL"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_do-symbol_-all-symbols.html" target="_top"><code class="function">DO-EXTERNAL-SYMBOLS</code></a> (<em class="replaceable"><code>symbol</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>)
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_shadow.html" target="_top"><code class="function">SHADOW</code></a> <em class="replaceable"><code>symbol</code></em> "CL-NO-CLOS"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_do-symbol_-all-symbols.html" target="_top"><code class="function">DO-SYMBOLS</code></a> (<em class="replaceable"><code>symbol</code></em> "CL-NO-CLOS")
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><code class="function">EXPORT</code></a> <em class="replaceable"><code>symbol</code></em> "CL-NO-CLOS"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><code class="function">IN-PACKAGE</code></a> "CL-NO-CLOS")
(<a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><code class="function">LOAD</code></a> "pcl") ; or whatever
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> "MY-USER" (:use "CL-NO-CLOS"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><code class="function">IN-PACKAGE</code></a> "MY-USER")
;; your code which uses PCL goes here
</pre><p>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clos-diff"></a>4.3. Deviations from [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]</h2></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> supports the option <code class="constant">:METACLASS</code> <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><code class="classname">STRUCTURE-CLASS</code></a>.
 This option is necessary in order to define a subclass of a
 <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><code class="function">DEFSTRUCT</code></a>-defined structure type using <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> instead of
 <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><code class="function">DEFSTRUCT</code></a>.</p><p>When <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a> is called with arguments, the rule that
 the ordered set of applicable methods must be the same as for the
 original arguments is enforced by the implementation only in
 interpreted code.</p><p><strong class="first"><em class="firstterm"><a href="#gen-flet"><code class="function">CLOS:GENERIC-FLET</code></a><a id="gen-flet" class="indexterm"></a></em></strong> and
 <strong class="first"><em class="firstterm"><a href="#gen-labels"><code class="function">CLOS:GENERIC-LABELS</code></a><a id="gen-labels" class="indexterm"></a></em></strong>
 are implemented as macros, not as special operators (as permitted by
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-2-2.html" target="_top">Section 3.1.2.1.2.2</a>).
 They are not imported into the packages <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> and <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> because
 of the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue <a href="http://www.lisp.org/HyperSpec/Issues/iss181.html" target="_top">GENERIC-FLET-POORLY-DESIGNED:DELETE</a>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_print-object.html" target="_top"><code class="function">PRINT-OBJECT</code></a> is only called on objects of type
 <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a>.
 It is not called on other objects, like <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a>es
 and <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a>s, due to the performance concerns.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="metaclasses"></a>4.4. Standard Metaclasses
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-1-1.html" target="_top">[CLHS-4.3.1.1]</a></h2></div></div></div><p>Among those classes listed in <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-7.html#classtypecorrespondence" target="_top">Figure
 4-8</a>, only the following are instances of <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a>:

</p><div class="itemizedlist"><ul type="disc"><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><code class="classname">REAL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><code class="classname">FLOAT</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><code class="classname">RATIONAL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html" target="_top"><code class="classname">RATIO</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html" target="_top"><code class="classname">SEQUENCE</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html" target="_top"><code class="classname">BIT-VECTOR</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><code class="classname">NULL</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><code class="classname">PACKAGE</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><code class="classname">LOGICAL-PATHNAME</code></a>
 </li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_random-state.html" target="_top"><code class="classname">RANDOM-STATE</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html" target="_top"><code class="classname">READTABLE</code></a></li><li><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><code class="classname">BROADCAST-STREAM</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_concatenated-stream.html" target="_top"><code class="classname">CONCATENATED-STREAM</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_echo-stream.html" target="_top"><code class="classname">ECHO-STREAM</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html" target="_top"><code class="classname">STRING-STREAM</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html" target="_top"><code class="classname">SYNONYM-STREAM</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html" target="_top"><code class="classname">TWO-WAY-STREAM</code></a>
 </li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="def-class"></a>4.5. Defining Classes
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-2.html" target="_top">[CLHS-4.3.2]</a></h2></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> supports the <code class="constant">:METACLASS</code> option.  Possible values are
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> (the default), <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><code class="classname">STRUCTURE-CLASS</code></a> (which creates
 structure classes, like <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><code class="function">DEFSTRUCT</code></a> does), and user-defined
 meta-classes (see <a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS">Section 29.1.3.6.7, “Generic Function <code class="function">CLOS:VALIDATE-SUPERCLASS</code>”</a>).</p><p>It is <span class="strong"><strong>not</strong></span> required that the superclasses of a class are
 defined before the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form for the class is evaluated.
 Use <a href="#mop-chap" title="29.1.&#xA0;Meta-Object Protocol">Meta-Object Protocol</a> generic functions <a href="#class-finalized-p" title="29.1.3.3.9.&#xA0;Generic Function CLOS:CLASS-FINALIZED-P"><code class="function">CLOS:CLASS-FINALIZED-P</code></a> to check whether the
 class has been finalized and thus its instances can be created,
 and <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> to force class finalization.</p><p>See also <a href="#mop-cl-defclass" title="29.1.3.1.&#xA0;Macro DEFCLASS">Section 29.1.3.1, “Macro <code class="function">DEFCLASS</code>”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="redef-class"></a>4.6. Redefining Classes
  <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-6.html" target="_top">[CLHS-4.3.6]</a></h2></div></div></div><p>Trivial changes, e.g., those that can occur when doubly loading
 the same code, do not require updating the instances.
 These are the changes that do not modify the set of local slots
 accessible in instances, e.g., changes to slot options <code class="constant">:INITFORM</code>,
 <code class="constant">:DOCUMENTATION</code>, and changes to class options
 <code class="constant">:DEFAULT-INITARGS</code>, <code class="constant">:DOCUMENTATION</code>.</p><p>The instances are updated when they are first accessed, <span class="strong"><strong>not</strong></span> at
 the time when the class is redefined or <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_mak_ces-obsolete.html" target="_top"><code class="function">MAKE-INSTANCES-OBSOLETE</code></a> is
 called.  When the class has been redefined several times since the
 instance was last accessed, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><code class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</code></a> is
 still called just once.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="type-class-dict"></a>4.7. The Types and Classes Dictionary
  <a href="http://www.lisp.org/HyperSpec/Body/sec_the_types_s_dictionary.html" target="_top">[CLHS-4.4]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#fixnum-char-ansi">4.7.1. Function <code class="function">COERCE</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fixnum-char-ansi"></a>4.7.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><code class="function">COERCE</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a> is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#character_designator" target="_top">character
  designator</a> in [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>], although <a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> provides an
  obvious venue to <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><code class="function">COERCE</code></a> a <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>.
  When <a href="#fixnum-char-ansi" title="4.7.1.&#xA0;Function COERCE"><code class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><code class="function">COERCE</code></a>s <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>s to
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s via <a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a>.
  When <a href="#fixnum-char-ansi" title="4.7.1.&#xA0;Function COERCE"><code class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>s cannot be
  <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><code class="function">COERCE</code></a>d to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="data"></a>Chapter 5. Data and Control Flow
   <a href="http://www.lisp.org/HyperSpec/Body/chap-5.html" target="_top">[CLHS-5]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#flow-dict">5.1. The Data and Control Flow Dictionary
   [CLHS-5.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#defconstant">5.1.1. Macro <code class="function">DEFCONSTANT</code></a></span></dt><dt><span class="section"><a href="#fcase">5.1.2. Macro <code class="function">EXT:FCASE</code></a></span></dt><dt><span class="section"><a href="#xor">5.1.3. Function <code class="function">EXT:XOR</code></a></span></dt><dt><span class="section"><a href="#eq">5.1.4. Function <code class="function">EQ</code></a></span></dt><dt><span class="section"><a href="#sym-fun">5.1.5. Function <code class="function">SYMBOL-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#setf">5.1.6. Macro <code class="function">SETF</code></a></span></dt><dt><span class="section"><a href="#func">5.1.7. Special Operator <code class="function">FUNCTION</code></a></span></dt><dt><span class="section"><a href="#def-sym-mac">5.1.8. Macro <code class="function">DEFINE-SYMBOL-MACRO</code></a></span></dt><dt><span class="section"><a href="#lambda">5.1.9. Macro <code class="function">LAMBDA</code></a></span></dt><dt><span class="section"><a href="#defun">5.1.10. Macros <code class="function">DEFUN</code> &amp; <code class="function">DEFMACRO</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="flow-dict"></a>5.1. The Data and Control Flow Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_data__w_dictionary.html" target="_top">[CLHS-5.3]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#defconstant">5.1.1. Macro <code class="function">DEFCONSTANT</code></a></span></dt><dt><span class="section"><a href="#fcase">5.1.2. Macro <code class="function">EXT:FCASE</code></a></span></dt><dt><span class="section"><a href="#xor">5.1.3. Function <code class="function">EXT:XOR</code></a></span></dt><dt><span class="section"><a href="#eq">5.1.4. Function <code class="function">EQ</code></a></span></dt><dt><span class="section"><a href="#sym-fun">5.1.5. Function <code class="function">SYMBOL-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#setf">5.1.6. Macro <code class="function">SETF</code></a></span></dt><dt><span class="section"><a href="#func">5.1.7. Special Operator <code class="function">FUNCTION</code></a></span></dt><dt><span class="section"><a href="#def-sym-mac">5.1.8. Macro <code class="function">DEFINE-SYMBOL-MACRO</code></a></span></dt><dt><span class="section"><a href="#lambda">5.1.9. Macro <code class="function">LAMBDA</code></a></span></dt><dt><span class="section"><a href="#defun">5.1.10. Macros <code class="function">DEFUN</code> &amp; <code class="function">DEFMACRO</code></a></span></dt></dl></div><p><a id="fle"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_function-_a-expression.html" target="_top"><code class="function">FUNCTION-LAMBDA-EXPRESSION</code></a>. </b>The <em class="replaceable"><code>name</code></em> of a <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a> is a <span class="emphasis"><em>string</em></span>
(the name of the underlying <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function), not a lisp <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a>.
</p><p><a id="des-bind"></a><b>Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_destructuring-bind.html" target="_top"><code class="function">DESTRUCTURING-BIND</code></a>. </b>This macro does not perform full error checking.</p><p><a id="macro-special"></a><b>Macros <a href="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html" target="_top"><code class="function">PROG1</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html" target="_top"><code class="function">PROG2</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_and.html" target="_top"><code class="function">AND</code></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><code class="function">OR</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_psetq.html" target="_top"><code class="function">PSETQ</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><code class="function">WHEN</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><code class="function">UNLESS</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_cond.html" target="_top"><code class="function">COND</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html" target="_top"><code class="function">CASE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html" target="_top"><code class="function">MULTIPLE-VALUE-LIST</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html" target="_top"><code class="function">MULTIPLE-VALUE-BIND</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-setq.html" target="_top"><code class="function">MULTIPLE-VALUE-SETQ</code></a>. </b>These macros are implemented as special operators (as permitted by
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-2-2.html" target="_top">Section 3.1.2.1.2.2</a>)
 and, as such, are rather efficient.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="defconstant"></a>5.1.1. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><code class="function">DEFCONSTANT</code></a></h3></div></div></div><p>The initial value is <span class="strong"><strong>not</strong></span> evaluated at compile time,
 just like with <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><code class="function">DEFVAR</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><code class="function">DEFPARAMETER</code></a>.
 Use <a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><code class="function">EVAL-WHEN</code></a> if you need the value at compile time.</p><p>It is an error if a <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><code class="function">DEFCONSTANT</code></a> variable is bound at the moment
 the <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><code class="function">DEFCONSTANT</code></a> is executed, but <a href="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html" target="_top"><code class="function">DEFCONSTANT</code></a> does not check
 this.</p><p><a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-3.html" target="_top">constant variable</a>s may not be bound dynamically or lexically.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcase"></a>5.1.2. Macro <code class="function">EXT:FCASE</code></h3></div></div></div><p>This macro allows specifying the test for <a href="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html" target="_top"><code class="function">CASE</code></a>, e.g.,
</p><pre class="programlisting">
(fcase string= (subseq foo 0 (position #\Space foo))
  ("first" 1)
  (("second" "two") 2)
  (("true" "yes") t)
  (otherwise nil))
</pre><p>
is the same as
</p><pre class="programlisting">
(let ((var (subseq foo 0 (position #\Space foo))))
  (cond ((string= var "first") 1)
        ((or (string= var "second") (string= var "two")) 2)
        ((or (string= var "true") (string= var "yes")) t)
        (t nil)))
</pre><p>
If you use a built-in <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a> test (see <a href="#ht-test" title="18.1.3.&#xA0;Function HASH-TABLE-TEST">Section 18.1.3, “Function <code class="function">HASH-TABLE-TEST</code>”</a>)
as the test (e.g., <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><code class="function">EQUAL</code></a> instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_stringeqc_ng-not-lessp.html" target="_top"><code class="function">STRING=</code></a> above, but not a test
defined using <a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><code class="function">EXT:DEFINE-HASH-TABLE-TEST</code></a>), the compiler will be able to optimize
the <code class="function">EXT:FCASE</code> form better than the corresponding
<a href="http://www.lisp.org/HyperSpec/Body/mac_cond.html" target="_top"><code class="function">COND</code></a> form.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="xor"></a>5.1.3. Function <code class="function">EXT:XOR</code></h3></div></div></div><p>This function checks that exactly one of its arguments is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
 and, if this is the case, returns its value and index in the argument
 list as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>, otherwise returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="eq"></a>5.1.4. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> compares <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s and <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>s as <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a> does.
 No unnecessary copies are made of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s and <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a>s.
 Nevertheless, one should use <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a> as it is more portable across <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>
 implementations.</p><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET</code></a> ((x y)) (<a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> x x))</code> always
 returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, regardless of <em class="replaceable"><code>y</code></em>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> x x)</code> might not be
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> for a <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> <em class="replaceable"><code>x</code></em>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="sym-fun"></a>5.1.5. Function <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><code class="function">SYMBOL-FUNCTION</code></a></h3></div></div></div><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><code class="function">SYMBOL-FUNCTION</code></a> <em class="replaceable"><code>symbol</code></em>) <em class="replaceable"><code>object</code></em>)</code>
 requires <em class="replaceable"><code>object</code></em> to be either a function, a <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><code class="function">SYMBOL-FUNCTION</code></a> return
 value, or a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a>.  The <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> is thereby immediately
 converted to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="setf"></a>5.1.6. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a></h3></div></div></div><p>Additional <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s:
</p><div class="variablelist"><dl><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a></span></dt><dd><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a> #'<em class="replaceable"><code>symbol</code></em> ...)
     <em class="replaceable"><code>object</code></em>)</code> and
    <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a> '<em class="replaceable"><code>symbol</code></em> ...) <em class="replaceable"><code>object</code></em>)</code>
    are equivalent to <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<em class="replaceable"><code>symbol</code></em> ...) <em class="replaceable"><code>object</code></em>)</code>.
 </dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><code class="function">PROGN</code></a></span></dt><dd><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><code class="function">PROGN</code></a> <em class="replaceable"><code>form</code></em> ... <em class="replaceable"><code>place</code></em>)
     <em class="replaceable"><code>object</code></em>)</code></dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html" target="_top"><code class="function">LOCALLY</code></a></span></dt><dd><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_locally.html" target="_top"><code class="function">LOCALLY</code></a> <em class="replaceable"><code>declaration</code></em> ...
     <em class="replaceable"><code>form</code></em> ... <em class="replaceable"><code>place</code></em>) <em class="replaceable"><code>object</code></em>)</code>
  </dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/speope_if.html" target="_top"><code class="function">IF</code></a></span></dt><dd><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_if.html" target="_top"><code class="function">IF</code></a> <em class="replaceable"><code>condition</code></em>
     <em class="replaceable"><code>place<sub>1</sub></code></em>
     <em class="replaceable"><code>place<sub>2</sub></code></em>)
     <em class="replaceable"><code>object</code></em>)</code></dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><code class="function">GET-DISPATCH-MACRO-CHARACTER</code></a></span></dt><dd><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><code class="function">GET-DISPATCH-MACRO-CHARACTER</code></a> ...)
     ...)</code> calls <a href="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html" target="_top"><code class="function">SET-DISPATCH-MACRO-CHARACTER</code></a>.
 </dd><dt><span class="term"><a href="#lfd"><code class="function">EXT:LONG-FLOAT-DIGITS</code></a>:</span></dt><dd><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="#lfd"><code class="function">EXT:LONG-FLOAT-DIGITS</code></a>) <em class="replaceable"><code>digits</code></em>)</code> sets the
    default mantissa length of <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a>s to <em class="replaceable"><code>digits</code></em> bits.
 </dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><code class="function">VALUES-LIST</code></a></span></dt><dd><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><code class="function">VALUES-LIST</code></a> <em class="replaceable"><code>list</code></em>) <em class="replaceable"><code>form</code></em>)</code>
    is equivalent to <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><code class="function">VALUES-LIST</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <em class="replaceable"><code>list</code></em>
     (<a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html" target="_top"><code class="function">MULTIPLE-VALUE-LIST</code></a> <em class="replaceable"><code>form</code></em>)))</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Note that this <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> is restricted: it can only be
     used in <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>, <a href="#letf" title="30.11.2.&#xA0;Macros EXT:LETF &amp; EXT:LETF*"><code class="function">EXT:LETF</code></a>, <a href="#letf" title="30.11.2.&#xA0;Macros EXT:LETF &amp; EXT:LETF*"><code class="function">EXT:LETF*</code></a>, not in other positions.
 </p></div></dd></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> markers in <a href="http://www.lisp.org/HyperSpec/Body/mac_defsetf.html" target="_top"><code class="function">DEFSETF</code></a> <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s are supported, but the
 corresponding keywords must appear literally in the program text.</p><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html" target="_top"><code class="function">GET-SETF-EXPANSION</code></a> <em class="replaceable"><code>form</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em>)</code>,
 <code class="code">(EXT:GET-SETF-METHOD <em class="replaceable"><code>form</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em>)</code>, and
 <code class="code">(EXT:GET-SETF-METHOD-MULTIPLE-VALUE <em class="replaceable"><code>form</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
  <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em>)</code> receive as optional argument <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em> the environment
  necessary for macro expansions. In <a href="http://www.lisp.org/HyperSpec/Body/mac_define-setf-expander.html" target="_top"><code class="function">DEFINE-SETF-EXPANDER</code></a>
  and <code class="function">EXT:DEFINE-SETF-METHOD</code> <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>s, one can
  specify <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;ENVIRONMENT</code></a> and a variable, which will be bound to the
  environment.  This environment should be passed to all calls of
  <a href="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html" target="_top"><code class="function">GET-SETF-EXPANSION</code></a>, <code class="function">EXT:GET-SETF-METHOD</code> and
 <code class="function">EXT:GET-SETF-METHOD-MULTIPLE-VALUE</code>.  If this is
 done, even local macros will be interpreted as places correctly.</p><p>Attempts to modify read-only data will <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.
 Program text and quoted constants loaded from files are considered
 read-only data.  This check is only performed for strings, not for
 conses, other kinds of arrays, and user-defined data types.</p><p>See also <a href="#letf" title="30.11.2.&#xA0;Macros EXT:LETF &amp; EXT:LETF*">Section 30.11.2, “Macros <code class="function">EXT:LETF</code> &amp; <code class="function">EXT:LETF*</code>”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="func"></a>5.1.7. Special Operator <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><code class="function">FUNCTION</code></a></h3></div></div></div><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><code class="function">FUNCTION</code></a> <em class="replaceable"><code>symbol</code></em>)</code> returns the local function
 definition established by <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><code class="function">FLET</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><code class="function">LABELS</code></a>, if it exists, otherwise
 the global function definition.</p><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_special-operator-p.html" target="_top"><code class="function">SPECIAL-OPERATOR-P</code></a> <em class="replaceable"><code>symbol</code></em>)</code> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.  If it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, then <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><code class="function">SYMBOL-FUNCTION</code></a>
  <em class="replaceable"><code>symbol</code></em>)</code> returns the (useless) special operator handler.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="def-sym-mac"></a>5.1.8. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="function">DEFINE-SYMBOL-MACRO</code></a></h3></div></div></div><p>The macro <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="function">DEFINE-SYMBOL-MACRO</code></a> establishes <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a>s with
 global scope (as opposed to <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a>s defined with
 <a href="http://www.lisp.org/HyperSpec/Body/speope_symbol-macrolet.html" target="_top"><code class="function">SYMBOL-MACROLET</code></a>, which have local scope):
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="function">DEFINE-SYMBOL-MACRO</code></a> <em class="replaceable"><code>symbol</code></em>
 <em class="replaceable"><code>expansion</code></em>)</code>.</p><p>The function
 <strong class="first"><em class="firstterm"><a href="#symbol-mex"><code class="function">EXT:SYMBOL-MACRO-EXPAND</code></a><a id="symbol-mex" class="indexterm"></a></em></strong>
 tests for a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a>: If <em class="replaceable"><code>symbol</code></em> is defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a>
 in the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-1.html" target="_top">global environment</a>, <code class="code">(<a href="#symbol-mex"><code class="function">EXT:SYMBOL-MACRO-EXPAND</code></a> <em class="replaceable"><code>symbol</code></em>)</code> returns two
 values, <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> and the expansion; otherwise it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p><p><a href="#symbol-mex"><code class="function">EXT:SYMBOL-MACRO-EXPAND</code></a> is a special case of <a href="http://www.lisp.org/HyperSpec/Body/fun_macroexpa_acroexpand-1.html" target="_top"><code class="function">MACROEXPAND-1</code></a>. <a href="http://www.lisp.org/HyperSpec/Body/fun_macroexpa_acroexpand-1.html" target="_top"><code class="function">MACROEXPAND-1</code></a>
 can also test whether a symbol is defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> in <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>s
 other than the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-1.html" target="_top">global environment</a>.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_boundp.html" target="_top"><code class="function">BOUNDP</code></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> returns
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html" target="_top"><code class="function">SYMBOL-VALUE</code></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a>
 returns the value of the expansion.  Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_set.html" target="_top"><code class="function">SET</code></a> on a symbol defined
 as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> calls <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> on the expansion.</p><p>Calling <a href="http://www.lisp.org/HyperSpec/Body/fun_makunbound.html" target="_top"><code class="function">MAKUNBOUND</code></a> on a symbol defined as a <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a>
 removes the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> definition.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="lambda"></a>5.1.9. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><code class="function">LAMBDA</code></a></h3></div></div></div><p><b>Constant <a href="http://www.lisp.org/HyperSpec/Body/convar_lambda_ist-keywords.html" target="_top"><code class="constant">LAMBDA-LIST-KEYWORDS</code></a>. </b><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;AUX</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;WHOLE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;ENVIRONMENT</code></a>)</code></p><div class="table"><a id="values-limits-table"></a><p class="title"><b>Table 5.1. Function call limits</b></p><table summary="Function call limits" border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_call-a_uments-limit.html" target="_top"><code class="constant">CALL-ARGUMENTS-LIMIT</code></a></td><td align="center">2<sup>12</sup>=4096</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_multip_values-limit.html" target="_top"><code class="constant">MULTIPLE-VALUES-LIMIT</code></a></td><td align="center">2<sup>7</sup>=128</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_lambda_meters-limit.html" target="_top"><code class="constant">LAMBDA-PARAMETERS-LIMIT</code></a></td><td align="center">2<sup>12</sup>=4096</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="defun"></a>5.1.10. Macros <a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><code class="function">DEFMACRO</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><code class="function">DEFMACRO</code></a> are allowed in non-toplevel positions. As
 an example, consider the old ([<a href="#CLtL1" title="[CLtL1]"><abbr class="abbrev">CLtL1</abbr></a>]) definition of <a href="http://www.lisp.org/HyperSpec/Body/fun_gensym.html" target="_top"><code class="function">GENSYM</code></a>:</p><pre class="programlisting">
(let ((gensym-prefix "G")
      (gensym-count 1))
  (defun gensym (&amp;optional (x nil s))
    (when s
      (cond ((stringp x) (setq gensym-prefix x))
            ((integerp x)
             (if (minusp x)
               (error "~S: index ~S is negative" 'gensym x)
               (setq gensym-count x)))
            (t (error "~S: argument ~S of wrong type" 'gensym x))))
    (prog1
      (make-symbol
        (concatenate 'string
          gensym-prefix
          (write-to-string gensym-count :base 10 :radix nil)))
      (incf gensym-count))))
</pre><p><a id="suppress-check-redef"></a><b>Variable <a href="#suppress-check-redef"><code class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</code></a>. </b>When <strong class="first"><em class="firstterm"><a href="#suppress-check-redef"><code class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</code></a></em></strong> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> issues a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a> when a function (macro, variable, class,
 etc) is redefined in a different file than its original definition.
 It is <span class="strong"><strong>not</strong></span> a good idea to set this variable to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.
</p><p><a id="defun-accept-spelalist"></a><b>Variable <a href="#defun-accept-spelalist"><code class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</code></a>. </b>When <strong class="first"><em class="firstterm"><a href="#defun-accept-spelalist"><code class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</code></a></em></strong> is
non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a> accepts <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html" target="_top">specialized lambda list</a>s, converting type-parameter
associations to type declarations:
</p><pre class="programlisting">(defun f ((x list) (y integer)) ...)</pre><p>
is equivalent to
</p><pre class="programlisting">(defun f (x y) (declare (type list x) (type integer y)) ...)</pre><p>
This extension is disabled by <a href="clisp.html#opt-ansi" class="olink"><code class="option">-ansi</code></a> and by setting <a href="impnotes.html#ansi" class="olink"><code class="varname">CUSTOM:*ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>,
but can be re-enabled by setting <a href="#defun-accept-spelalist"><code class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</code></a> explicitly.
</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="iteration"></a>Chapter 6. Iteration
  <a href="http://www.lisp.org/HyperSpec/Body/chap-6.html" target="_top">[CLHS-6]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#loop">6.1. The LOOP Facility
  [CLHS-6.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#loop-inter-var-finally">6.1.1. Iteration variables in the loop epilogue</a></span></dt><dt><span class="section"><a href="#loop-ansi">6.1.2. Backward Compatibility</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="loop"></a>6.1. The LOOP Facility
  <a href="http://www.lisp.org/HyperSpec/Body/sec_6-1.html" target="_top">[CLHS-6.1]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#loop-inter-var-finally">6.1.1. Iteration variables in the loop epilogue</a></span></dt><dt><span class="section"><a href="#loop-ansi">6.1.2. Backward Compatibility</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="loop-inter-var-finally"></a>6.1.1. Iteration variables in the loop epilogue</h3></div></div></div><p>The standard is unambiguous in that the iteration variables do
 still exist in the <a href="http://www.lisp.org/HyperSpec/Body/sec_6-1-7-2.html" target="_top"><code class="literal">FINALLY</code></a> clause, but <span class="strong"><strong>not</strong></span> as to what values
 these variables might have.
 Therefore the code which relies on the values of such variables, e.g.,
 </p><pre class="programlisting">(loop for x on y finally (return x))</pre><p>
 is inherently non-portable across <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> implementations,
 and should be avoided.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="loop-ansi"></a>6.1.2. Backward Compatibility</h3></div></div></div><p>There have been some tightening in the <a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a> syntax between
 [<a href="#CLtL2" title="[CLtL2]"><abbr class="abbrev">CLtL2</abbr></a>] and [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>], e.g., the following form is legal in the
 former but not the latter:</p><pre class="programlisting">
(loop initially for i from 1 to 5 do (print i) finally return i)
</pre><p>
When <strong class="first"><em class="firstterm"><a href="#loop-ansi" title="6.1.2.&#xA0;Backward Compatibility"><code class="varname">CUSTOM:*LOOP-ANSI*</code></a></em></strong> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, such forms are still
accepted in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> but elicit a warning at macro-expansion time.
When <a href="#loop-ansi" title="6.1.2.&#xA0;Backward Compatibility"><code class="varname">CUSTOM:*LOOP-ANSI*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="objects"></a>Chapter 7. Objects
   <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top">[CLHS-7]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#std-meth-combo">7.1. Standard Method Combination
  [CLHS-7.6.6.2]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="std-meth-combo"></a>7.1. Standard Method Combination
  <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-2.html" target="_top">[CLHS-7.6.6.2]</a></h2></div></div></div><p>Generic function
 <strong class="first"><em class="firstterm"><a href="#no-prim"><code class="function">CLOS:NO-PRIMARY-METHOD</code></a><a id="no-prim" class="indexterm"></a></em></strong>
 (similar to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-_cable-method.html" target="_top"><code class="function">NO-APPLICABLE-METHOD</code></a>) is called when there is an
 applicable method but no applicable <span class="emphasis"><em>primary</em></span>
 method.</p><p>The default methods for <a href="#no-prim"><code class="function">CLOS:NO-PRIMARY-METHOD</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-_cable-method.html" target="_top"><code class="function">NO-APPLICABLE-METHOD</code></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-next-method.html" target="_top"><code class="function">NO-NEXT-METHOD</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> of type
 <strong class="first"><em class="firstterm"><a href="#meth-call-err"><code class="classname">CLOS:METHOD-CALL-ERROR</code></a>
  <a id="meth-call-err" class="indexterm"></a></em></strong>.
 You can find out more information about the error using functions
 <code class="function">CLOS:METHOD-CALL-ERROR-GENERIC-FUNCTION</code>,
 <code class="function">CLOS:METHOD-CALL-ERROR-ARGUMENT-LIST</code>, and
 (only for <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_no-next-method.html" target="_top"><code class="function">NO-NEXT-METHOD</code></a>)
 <code class="function">CLOS:METHOD-CALL-ERROR-METHOD</code>.
 Moreover, when the generic function has only one <span class="emphasis"><em>dispatching
 argument</em></span>, (i.e., such an argument that not all the
 corresponding parameter specializers are <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>), an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> of type
 <strong class="first"><em class="firstterm"><a href="#meth-call-type-err"><code class="classname">CLOS:METHOD-CALL-TYPE-ERROR</code></a>
  <a id="meth-call-type-err" class="indexterm"></a></em></strong>
  is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed, additionally making <a href="http://www.lisp.org/HyperSpec/Body/fun_type-erro_xpected-type.html" target="_top"><code class="function">TYPE-ERROR-DATUM</code></a> and
  <a href="http://www.lisp.org/HyperSpec/Body/fun_type-erro_xpected-type.html" target="_top"><code class="function">TYPE-ERROR-EXPECTED-TYPE</code></a> available.</p></div>
<!--<section id="obj-dict"><title>The Objects Dictionary <ulink url="&clhs;/Body/sec_7-7.html">[CLHS-7.7]</ulink></title> </section>-->
</div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="structures"></a>Chapter 8. Structures
   <a href="http://www.lisp.org/HyperSpec/Body/chap-8.html" target="_top">[CLHS-8]</a></h2></div></div></div><p>The <code class="constant">:PRINT-FUNCTION</code> option should contain a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a>
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><code class="function">LAMBDA</code></a> (object stream depth) (declare (ignore depth)) ...)</code>
 This <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> names a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> whose task is to output the
 external representation of the <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a> <em class="replaceable"><code>object</code></em> onto the
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> <em class="replaceable"><code>stream</code></em>. This may be done by outputting text onto the
 stream using <a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html" target="_top"><code class="function">WRITE-CHAR</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_write-str_m_write-line.html" target="_top"><code class="function">WRITE-STRING</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">WRITE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRIN1</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRINC</code></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRINT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PPRINT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> and the like.
 The following rules must be obeyed:</p><div class="itemizedlist"><ul type="disc"><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html" target="_top"><code class="varname">*PRINT-ESCAPE*</code></a> must be
  respected.</li><li>The treatment of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><code class="varname">*PRINT-PRETTY*</code></a> is up to you.
 </li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-circlest.html" target="_top"><code class="varname">*PRINT-CIRCLE*</code></a> need not be
  respected.  This is managed by the system.  (But the print-circle
  mechanism handles only those objects that are direct or indirect
  components of the structure.)</li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><code class="varname">*PRINT-LEVEL*</code></a> is respected by
  <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">WRITE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRIN1</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRINC</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRINT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PPRINT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> instructions
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html" target="_top"><code class="literal">~A</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html" target="_top"><code class="literal">~S</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-3.html" target="_top"><code class="literal">~W</code></a>, and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> instructions
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><code class="literal">~R</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-2.html" target="_top"><code class="literal">~D</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-3.html" target="_top"><code class="literal">~B</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-4.html" target="_top"><code class="literal">~O</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-5.html" target="_top"><code class="literal">~X</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html" target="_top"><code class="literal">~F</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><code class="literal">~E</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><code class="literal">~G</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html" target="_top"><code class="literal">~$</code></a> with not-numerical arguments.
  Therefore the print-level mechanism works automatically if only these
  functions are used for outputting objects and if they are not called
  on objects with nesting level &gt; 1. (The print-level mechanism does
  not recognize how many parentheses you have output. It only counts how
  many times it was called recursively.)</li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><code class="varname">*PRINT-LENGTH*</code></a> must be respected,
  especially if you are outputting an arbitrary number of components.
 </li><li>The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a> must be
  respected. Remember that the values of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html" target="_top"><code class="varname">*PRINT-ESCAPE*</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><code class="varname">*PRINT-LEVEL*</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><code class="varname">*PRINT-LENGTH*</code></a> are ignored if
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a> is true.  The value of <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a> is
  respected by <a href="http://www.lisp.org/HyperSpec/Body/mac_print-unr_dable-object.html" target="_top"><code class="function">PRINT-UNREADABLE-OBJECT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">WRITE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRIN1</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRINC</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRINT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PPRINT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> instructions <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html" target="_top"><code class="literal">~A</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html" target="_top"><code class="literal">~S</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-3.html" target="_top"><code class="literal">~W</code></a>, and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> instructions <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><code class="literal">~R</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-2.html" target="_top"><code class="literal">~D</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-3.html" target="_top"><code class="literal">~B</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-4.html" target="_top"><code class="literal">~O</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-5.html" target="_top"><code class="literal">~X</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html" target="_top"><code class="literal">~F</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><code class="literal">~E</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><code class="literal">~G</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html" target="_top"><code class="literal">~$</code></a> with not-numerical arguments.  Therefore
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a> will be respected automatically if only these
  functions are used for printing objects.</li><li>You need not worry about the values of
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><code class="varname">*PRINT-BASE*</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><code class="varname">*PRINT-RADIX*</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-casest.html" target="_top"><code class="varname">*PRINT-CASE*</code></a>,
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-gensymst.html" target="_top"><code class="varname">*PRINT-GENSYM*</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><code class="varname">*PRINT-ARRAY*</code></a>, <a href="#pr-closure"><code class="varname">CUSTOM:*PRINT-CLOSURE*</code></a>,
  <a href="#pr-rpars"><code class="varname">CUSTOM:*PRINT-RPARS*</code></a>, <a href="#pr-indent"><code class="varname">CUSTOM:*PRINT-INDENT-LISTS*</code></a>.</li></ul></div><p><a id="defstruct-inherit"></a><b>Option <code class="constant">:INHERIT</code>. </b>The <code class="constant">:INHERIT</code> option is exactly like <code class="constant">:INCLUDE</code> except that it
 does not create new accessors for the inherited slots (this is a
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension).</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="conditions"></a>Chapter 9. Conditions
   <a href="http://www.lisp.org/HyperSpec/Body/chap-9.html" target="_top">[CLHS-9]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#cond-nl">9.1. Embedded Newlines in Condition Reports
   [CLHS-9.1.3.1.3]</a></span></dt><dt><span class="section"><a href="#cond-dict">9.2. The Conditions Dictionary
   [CLHS-9.2]</a></span></dt></dl></div><p>When an error occurred, you are in a break loop. You can evaluate
 forms as usual. The <span><strong class="command">help</strong></span> command (or help key if
 there is one) lists the available <a href="#debugger" title="25.1.&#xA0;Debugging Utilities&#10;   [CLHS-25.1.2]">debugging
 commands</a>.</p><p><a id="muffle-cerrors"></a><b>Macro <a href="#muffle-cerrors"><code class="function">EXT:MUFFLE-CERRORS</code></a>. </b>The macro <code class="code">(<a href="#muffle-cerrors"><code class="function">EXT:MUFFLE-CERRORS</code></a> {<em class="replaceable"><code>form</code></em>}*)</code>
 executes the <em class="replaceable"><code>form</code></em>s; when a <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> occurs whose <a href="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html" target="_top"><code class="function">CONTINUE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_restart.html" target="_top"><code class="classname">RESTART</code></a>
 can be invoked non-interactively (this includes all <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>s signaled
 by the function <a href="http://www.lisp.org/HyperSpec/Body/fun_cerror.html" target="_top"><code class="function">CERROR</code></a>), no message is printed, instead, the <a href="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html" target="_top"><code class="function">CONTINUE</code></a>
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_restart.html" target="_top"><code class="classname">RESTART</code></a> is invoked.</p><p><a id="appease-cerrors"></a><b>Macro <a href="impnotes.html#appease-cerrors" class="olink"><code class="function">EXT:APPEASE-CERRORS</code></a>. </b>The macro <code class="code">(<a href="impnotes.html#appease-cerrors" class="olink"><code class="function">EXT:APPEASE-CERRORS</code></a> {<em class="replaceable"><code>form</code></em>}*)</code>
 executes the <em class="replaceable"><code>form</code></em>s; when a <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> occurs whose <a href="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html" target="_top"><code class="function">CONTINUE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_restart.html" target="_top"><code class="classname">RESTART</code></a>
 can be invoked non-interactively (this includes all <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>s <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed
 by the function <a href="http://www.lisp.org/HyperSpec/Body/fun_cerror.html" target="_top"><code class="function">CERROR</code></a>), it is reported as a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a>, and the
 <a href="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html" target="_top"><code class="function">CONTINUE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_restart.html" target="_top"><code class="classname">RESTART</code></a> is invoked.</p><p><a id="abort-on-error"></a><b>Macro <a href="impnotes.html#abort-on-error" class="olink"><code class="function">EXT:ABORT-ON-ERROR</code></a>. </b>The macro <code class="code">(<a href="impnotes.html#abort-on-error" class="olink"><code class="function">EXT:ABORT-ON-ERROR</code></a> {<em class="replaceable"><code>form</code></em>}*)</code>
 executes the <em class="replaceable"><code>form</code></em>s; when an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> occurs,
 or when a <span><strong class="keycap">Control</strong></span>-<span class="keysym">C</span> interrupt occurs,
 the error message is printed and the <a href="http://www.lisp.org/HyperSpec/Body/res_abort.html" target="_top"><code class="function">ABORT</code></a> restart is invoked.
</p><p><a id="exit-on-error"></a><b>Macro <a href="impnotes.html#exit-on-error" class="olink"><code class="function">EXT:EXIT-ON-ERROR</code></a>. </b>The macro <code class="code">(<a href="impnotes.html#exit-on-error" class="olink"><code class="function">EXT:EXIT-ON-ERROR</code></a> {<em class="replaceable"><code>form</code></em>}*)</code>
 executes the <em class="replaceable"><code>form</code></em>s; when an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> occurs,
 or when a <span><strong class="keycap">Control</strong></span>-<span class="keysym">C</span> interrupt occurs,
 the error message is printed and <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> terminates with an error status.
</p><p><a id="err-pr-bt"></a><b>Variable <a href="impnotes.html#err-pr-bt" class="olink"><code class="varname">CUSTOM:*REPORT-ERROR-PRINT-BACKTRACE*</code></a>. </b>When this variable is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> the error message printed by
 <a href="impnotes.html#abort-on-error" class="olink"><code class="function">EXT:ABORT-ON-ERROR</code></a> and <a href="impnotes.html#exit-on-error" class="olink"><code class="function">EXT:EXIT-ON-ERROR</code></a> includes the backtrace (stack).
</p><p><a id="global-handler"></a><b>Function <a href="impnotes.html#global-handler" class="olink"><code class="function">EXT:SET-GLOBAL-HANDLER</code></a>. </b>The function <code class="code">(<a href="impnotes.html#global-handler" class="olink"><code class="function">EXT:SET-GLOBAL-HANDLER</code></a> <em class="replaceable"><code>condition</code></em> handler)</code>
 establishes a global handler for the <em class="replaceable"><code>condition</code></em>.
 The <em class="replaceable"><code>handler</code></em> should be <a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a>able (a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a>).  If it returns, the next applicable
 handler is invoked, so if you do not want to land in the debugger, it
 should <span class="strong"><strong>not</strong></span> return.
 E.g., the option <code class="option"><a href="clisp.html#opt-on-error" class="olink">-on-error</a></code> <code class="option">abort</code> and the macro
 <a href="impnotes.html#abort-on-error" class="olink"><code class="function">EXT:ABORT-ON-ERROR</code></a> are implemented by installing the following handler:
 </p><pre class="programlisting">(defun sys::abortonerror (condition)
  (sys::report-error condition)
  (invoke-restart (find-restart 'abort condition)))</pre><p>
 When <em class="replaceable"><code>handler</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the handler
 for <em class="replaceable"><code>condition</code></em> is removed and returned.
 When <em class="replaceable"><code>condition</code></em> is also <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, all global handlers are removed and returned
 as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>, which can then be passed to <a href="impnotes.html#global-handler" class="olink"><code class="function">EXT:SET-GLOBAL-HANDLER</code></a> as the
 first argument and the handlers re-established.</p><p><a id="without-global-handlers"></a><b>Macro <a href="impnotes.html#without-global-handlers" class="olink"><code class="function">EXT:WITHOUT-GLOBAL-HANDLERS</code></a>. </b>The macro <code class="code">(<a href="impnotes.html#without-global-handlers" class="olink"><code class="function">EXT:WITHOUT-GLOBAL-HANDLERS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a>
  <em class="replaceable"><code>body</code></em>)</code> removes all global handlers, executes <em class="replaceable"><code>body</code></em>, and
 then restores the handlers.</p><p><a id="with-restarts"></a><b>Macro <a href="#with-restarts"><code class="function">EXT:WITH-RESTARTS</code></a>. </b>The macro <a href="#with-restarts"><code class="function">EXT:WITH-RESTARTS</code></a> is like <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><code class="function">RESTART-CASE</code></a>, except that the
 forms are specified after the restart clauses instead of before them,
 and the restarts created are not implicitly associated with any <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><code class="classname">CONDITION</code></a>.
 <code class="code">(<a href="#with-restarts"><code class="function">EXT:WITH-RESTARTS</code></a> ({<em class="replaceable"><code>restart-clause</code></em>}*) {<em class="replaceable"><code>form</code></em>}*)</code> is
 therefore equivalent to <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><code class="function">RESTART-CASE</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><code class="function">PROGN</code></a> {<em class="replaceable"><code>form</code></em>}*)
 {<em class="replaceable"><code>restart-clause</code></em>}*)</code>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cond-nl"></a>9.1. Embedded Newlines in Condition Reports
   <a href="http://www.lisp.org/HyperSpec/Body/sec_9-1-3-1-3.html" target="_top">[CLHS-9.1.3.1.3]</a></h2></div></div></div><p>The error message prefix for the first line is “<span class="quote">*** - </span>”.
 All subsequent lines are indented by 6 characters.
 Long lines are broken on <a href="http://www.lisp.org/HyperSpec/Body/sec_2-1-4-7.html" target="_top">whitespace</a>
 (see <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM">Section 29.2.1, “Class <code class="classname">EXT:FILL-STREAM</code>”</a>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cond-dict"></a>9.2. The Conditions Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_condi_s_dictionary.html" target="_top">[CLHS-9.2]</a></h2></div></div></div><p><a id="restart-case"></a><b>Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><code class="function">RESTART-CASE</code></a>. </b>In <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><code class="function">RESTART-CASE</code></a> <em class="replaceable"><code>form</code></em> {<em class="replaceable"><code>restart-clause</code></em>}*)</code>,
  the argument list can also be specified after the keyword/value pairs
  instead of before them, i.e., each <em class="replaceable"><code>restart-clause</code></em> can be either
  <code class="code">(<code class="varname">restart-name</code> <a href="impnotes.html#script-exec" class="olink"><code class="varname">EXT:*ARGS*</code></a>
   {<em class="replaceable"><code>keyword-value-pair</code></em>}* {<em class="replaceable"><code>form</code></em>}*)</code>
  or <code class="code">(<em class="replaceable"><code>restart-name</code></em>
   {<em class="replaceable"><code>keyword-value-pair</code></em>}* <a href="impnotes.html#script-exec" class="olink"><code class="varname">EXT:*ARGS*</code></a> {<em class="replaceable"><code>form</code></em>}*)</code>.
</p><p><a id="compute-restarts"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_compute-restarts.html" target="_top"><code class="function">COMPUTE-RESTARTS</code></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_compute-restarts.html" target="_top"><code class="function">COMPUTE-RESTARTS</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_find-restart.html" target="_top"><code class="function">FIND-RESTART</code></a> behave as specified in
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]: If the optional <em class="replaceable"><code>condition</code></em> argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
 only restarts associated with that condition
 and restarts associated with no condition at all are considered.
 Therefore the effect of associating a restart to a condition is not to
 activate it, but to hide it from other conditions.
 This makes the syntax-dependent implicit association performed by
 <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><code class="function">RESTART-CASE</code></a> nearly obsolete.</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="symbols"></a>Chapter 10. Symbols
   <a href="http://www.lisp.org/HyperSpec/Body/chap-10.html" target="_top">[CLHS-10]</a></h2></div></div></div><p>No notes.</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="packages"></a>Chapter 11. Packages
   <a href="http://www.lisp.org/HyperSpec/Body/chap-11.html" target="_top">[CLHS-11]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#pack-lock">11.1. Constraints on the <strong class="package">“<span class="quote">COMMON-LISP</span>”</strong> Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></span></dt><dt><span class="section"><a href="#clupack">11.2. The
  <strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong> Package
  [CLHS-11.1.2.2]</a></span></dt><dt><span class="section"><a href="#imppack">11.3. Implementation-Defined Packages
   [CLHS-11.1.2.4]</a></span></dt><dt><span class="section"><a href="#package-case">11.4. Package Case-Sensitivity</a></span></dt><dd><dl><dt><span class="section"><a href="#cs-clu">11.4.1. User Package for the Case-sensitive World</a></span></dt><dt><span class="section"><a href="#cs-pack-name">11.4.2. Package Names</a></span></dt><dt><span class="section"><a href="#cs-gensym-kwd">11.4.3. Gensyms and Keywords</a></span></dt><dt><span class="section"><a href="#case-sensitive-migration">11.4.4. Migration Tips</a></span></dt><dt><span class="section"><a href="#case-sensitive-startup">11.4.5. Using case-sensitive packages by default</a></span></dt></dl></dd><dt><span class="section"><a href="#pack-dict">11.5. The Packages Dictionary
   [CLHS-11.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-pack">11.5.1. Function <code class="function">MAKE-PACKAGE</code></a></span></dt><dt><span class="section"><a href="#defpack">11.5.2. Macro <code class="function">DEFPACKAGE</code></a></span></dt><dt><span class="section"><a href="#re-export">11.5.3. Function <code class="function">EXT:RE-EXPORT</code></a></span></dt><dt><span class="section"><a href="#pack-inverted">11.5.4. Function <code class="function">EXT:PACKAGE-CASE-INVERTED-P</code></a></span></dt><dt><span class="section"><a href="#pack-sensitive">11.5.5. Function <code class="function">EXT:PACKAGE-CASE-SENSITIVE-P</code></a></span></dt></dl></dd></dl></div><div class="variablelist"><p class="title"><b>The [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] packages present in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></b></p><dl><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a></span></dt><dd>with the nicknames <strong class="package">“<span class="quote">CL</span>”</strong>
    and <strong class="package">“<span class="quote">LISP</span>”</strong></dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a></span></dt><dd>with the nicknames <strong class="package">“<span class="quote">CL-USER</span>”</strong>
    and <strong class="package">“<span class="quote">USER</span>”</strong></dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-3.html" target="_top"><strong class="package">“<span class="quote">KEYWORD</span>”</strong></a></span></dt><dd>with no nicknames
 </dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="pack-lock"></a>11.1. Constraints on the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> Package
  for Conforming Programs - package locking
 <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1-2.html" target="_top">[CLHS-11.1.2.1.2]</a></h2></div></div></div><p><b>Function <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><code class="function">EXT:PACKAGE-LOCK</code></a>. </b><a id="pack-lock-f" class="indexterm"></a>
 Packages can be “<span class="quote">locked</span>”.
When a package is locked, attempts to change its symbol table or
redefine functions which its symbols name result in a <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>
(continuing overrides locking for this operation).
When <a href="#suppress-check-redef"><code class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> (<span class="strong"><strong>not</strong></span> a good idea!), the <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>
is not <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed for redefine operations.
Function <code class="code">(<a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><code class="function">EXT:PACKAGE-LOCK</code></a> <em class="replaceable"><code>package</code></em>)</code>
returns the generalized boolean indicating whether the <em class="replaceable"><code>package</code></em> is locked.
A package (or a list thereof) can be locked using <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>
 (<a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><code class="function">EXT:PACKAGE-LOCK</code></a> <em class="replaceable"><code>package-or-list</code></em>) <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)</code>.
<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> locks its system packages (specified in the variable
<a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><code class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</code></a>).</p><p><b>Macro <a href="#without-pack-lock"><code class="function">EXT:WITHOUT-PACKAGE-LOCK</code></a>. </b>If you want to evaluate some forms with certain packages unlocked,
 you can use
 <strong class="first"><em class="firstterm"><a href="#without-pack-lock"><code class="function">EXT:WITHOUT-PACKAGE-LOCK</code></a>
  <a id="without-pack-lock" class="indexterm"></a></em></strong>:
</p><pre class="programlisting">
(<a href="#without-pack-lock"><code class="function">EXT:WITHOUT-PACKAGE-LOCK</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a> <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a>)
  (defun restart () ...))
</pre><p>
or
</p><pre class="programlisting">
(<a href="#without-pack-lock"><code class="function">EXT:WITHOUT-PACKAGE-LOCK</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>) (trace read-line))
</pre><p>
<code class="code">(<a href="#without-pack-lock"><code class="function">EXT:WITHOUT-PACKAGE-LOCK</code></a> () ...)</code>
temporarily unlocks all packages in <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><code class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</code></a>.</p><p><b>Variable <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><code class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</code></a>. </b>This variable specifies the default packages to be locked by <a href="impnotes.html#image" class="olink"><code class="function">EXT:SAVEINITMEM</code></a>
 and unlocked by <a href="#without-pack-lock"><code class="function">EXT:WITHOUT-PACKAGE-LOCK</code></a> as a list of package names.
 You may add names to this list, e.g., a module will add its package,
 but you should <span class="strong"><strong>not</strong></span> remove <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> internal packages from this list.
</p><p><b>Discussion - see also
  <a href="http://groups.google.com/groups?hl=en&amp;lr=&amp;ie=UTF-8&amp;selm=3C3E7F57.7F80395%40pacbell.net" target="_top">the USENET posting</a> by
  <span class="author"><span class="firstname">Steven M.</span> <span class="surname">Haflich</span></span>. </b>This should prevent you from accidentally hosing yourself with
</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><code class="function">DEFSTRUCT</code></a> instance ...)
</pre><p>
and allow enforcing modularity.
Note that you will also get the <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> when you try to
assign (with <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_psetq.html" target="_top"><code class="function">PSETQ</code></a>, etc.) a value to an internal special
variable living in a locked package and not accessible in your current
<a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><code class="varname">*PACKAGE*</code></a>, but only in the interpreted code and during compilation.
There is no check for package locks in compiled code because of the
performance considerations.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clupack"></a>11.2. The
  <strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong> Package
  <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top">[CLHS-11.1.2.2]</a></h2></div></div></div><p>The <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> package uses the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> and <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a> packages.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="imppack"></a>11.3. Implementation-Defined Packages
   <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-4.html" target="_top">[CLHS-11.1.2.4]</a></h2></div></div></div><p>The following additional packages exist:</p><div class="variablelist"><p class="title"><b>Implementation-Defined Packages</b></p><dl><dt><span class="term"><a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><code class="function">EXPORT</code></a>s all <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>-specific symbols, including some
    <a href="#clos-diff" title="4.3.&#xA0;Deviations from ANSI CL standard">additional symbols</a>.
 </dd><dt><a id="sys-pac"></a><span class="term"><a href="#sys-pac"><strong class="package">“<span class="quote">SYSTEM</span>”</strong></a></span></dt><dd>has the nicknames <strong class="package">“<span class="quote">SYS</span>”</strong>
    and <strong class="package">“<span class="quote">COMPILER</span>”</strong>, and has no
    <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><code class="function">EXPORT</code></a>ed symbols.  It defines many system internals.
 </dd><dt><a id="ext-pac"></a><span class="term"><a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a></span></dt><dd>
    is the umbrella package for all extensions: it imports and <a href="#re-export" title="11.5.3.&#xA0;Function EXT:RE-EXPORT"><code class="function">EXT:RE-EXPORT</code></a>s
    all the external symbols in all <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extensions, so a simple
    <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><code class="function">USE-PACKAGE</code></a> "EXT")</code> is enough to
    make all the extensions available in the current package.
    This package uses packages (in addition to <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>):
    <a href="#dir-key" title="32.3.&#xA0;Directory Access"><strong class="package">“<span class="quote">LDAP</span>”</strong></a>, <a href="#syscalls" title="32.11.&#xA0;System Calls"><strong class="package">“<span class="quote">POSIX</span>”</strong></a>, <a href="#socket" title="31.5.&#xA0;Socket Streams"><strong class="package">“<span class="quote">SOCKET</span>”</strong></a>, <a href="#gstream" title="30.6.&#xA0;Generic streams"><strong class="package">“<span class="quote">GSTREAM</span>”</strong></a>, <a href="#gray" title="29.2.&#xA0;Gray streams"><strong class="package">“<span class="quote">GRAY</span>”</strong></a>,
    <a href="#i18n" title="30.4.&#xA0;Internationalization of CLISP"><strong class="package">“<span class="quote">I18N</span>”</strong></a>, <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior"><strong class="package">“<span class="quote">CUSTOM</span>”</strong></a>.</dd><dt><span class="term"><a href="#encoding" title="30.5.&#xA0;Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a></span></dt><dd>defines and <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><code class="function">EXPORT</code></a>s some character sets, for use with
    <a href="#make-encoding" title="30.5.4.&#xA0;Function EXT:MAKE-ENCODING"><code class="function">EXT:MAKE-ENCODING</code></a> and as <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> argument.
 </dd><dt><span class="term"><a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a></span></dt><dd>implements the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility">foreign function
     interface</a>.  Some platforms only.
 </dd><dt><span class="term"><a href="#screen" title="31.1.&#xA0;Random Screen Access"><strong class="package">“<span class="quote">SCREEN</span>”</strong></a></span></dt><dd>defines an API for <a href="#screen" title="31.1.&#xA0;Random Screen Access">random screen
     access</a>.  Some platforms only.
 </dd><dt><span class="term"><a href="impnotes.html#package-case" class="olink"><strong class="package">“<span class="quote">CS-COMMON-LISP</span>”</strong></a><br /></span><span class="term"><a href="impnotes.html#cs-clu" class="olink"><strong class="package">“<span class="quote">CS-COMMON-LISP-USER</span>”</strong></a></span></dt><dd>case-sensitive versions of <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> and <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a>.
    See <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity">Section 11.4, “Package Case-Sensitivity”</a>.</dd></dl></div><p>All pre-existing packages except <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> belong to the
 implementation, in the sense that the programs that do not follow
 <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1-2.html" target="_top">Section 11.1.2.1.2</a>
 ("Constraints on the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> Package for Conforming Programs")
 cause undefined behavior.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="package-case"></a>11.4. Package Case-Sensitivity</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#cs-clu">11.4.1. User Package for the Case-sensitive World</a></span></dt><dt><span class="section"><a href="#cs-pack-name">11.4.2. Package Names</a></span></dt><dt><span class="section"><a href="#cs-gensym-kwd">11.4.3. Gensyms and Keywords</a></span></dt><dt><span class="section"><a href="#case-sensitive-migration">11.4.4. Migration Tips</a></span></dt><dt><span class="section"><a href="#case-sensitive-startup">11.4.5. Using case-sensitive packages by default</a></span></dt></dl></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> supports programs written with case sensitive symbols. For
example, with case sensitive symbols, the symbols <code class="literal">cdr</code>
(the function equivalent to <a href="http://www.lisp.org/HyperSpec/Body/acc_rest.html" target="_top"><code class="function">REST</code></a>) and the symbol <code class="literal">CDR</code>
(a user-defined type denoting a Call Data Record) are different and unrelated.
</p><p>There are some incompatibilities between programs assuming case
sensitive symbols and programs assuming the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] case insensitive symbols.
For example, <code class="code">(eq 'KB 'Kb)</code> evaluates to false in a case
sensitive world and to true in a case insensitive world. However, unlike some
commercial <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> implementations, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> allows both kinds of programs to
coexist in the same process and interoperate with each other. Example:
</p><div class="variablelist"><dl><dt><span class="term"><code class="filename">OLD.lisp</code></span></dt><dd><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><code class="function">IN-PACKAGE</code></a> "OLD")
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a> FOO () ...)
</pre></dd><dt><span class="term"><code class="filename">modern.lisp</code></span></dt><dd><pre class="programlisting">
(in-package "NEW")
(defun bar () (old:foo))
(symbol-name 'bar) ; ⇒ <code class="computeroutput">"bar"</code>
</pre></dd></dl></div><p>This is achieved through specification of the symbol case policy at
the package level. A <strong class="first"><em class="firstterm">modern package
  <a id="pack-modern" class="indexterm"></a></em></strong>
 is one that is declared to be both case-sensitive and case-inverted and
 which use the symbols from the <a href="impnotes.html#package-case" class="olink"><strong class="package">“<span class="quote">CS-COMMON-LISP</span>”</strong></a> package.</p><p>A <strong class="first"><em class="firstterm">case-sensitive package
  <a id="pack-case-sensitive" class="indexterm"></a>
 </em></strong> is one whose <a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> declaration (or <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><code class="function">MAKE-PACKAGE</code></a>
 creation form) has the option <code class="code">(<a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:CASE-SENSITIVE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)</code>.
 In a case-sensitive package, the reader does <span class="strong"><strong>not</strong></span> uppercase the
 symbol name before calling <a href="http://www.lisp.org/HyperSpec/Body/fun_intern.html" target="_top"><code class="function">INTERN</code></a>.  Similarly, the printer, when
 printing the <a href="http://www.lisp.org/HyperSpec/Body/fun_symbol-name.html" target="_top"><code class="function">SYMBOL-NAME</code></a> part of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> (i.e. the part after
 the package markers), behaves as if the readtable's case were set
 to <code class="constant">:PRESERVE</code>.
 See also <a href="#pack-sensitive" title="11.5.5.&#xA0;Function EXT:PACKAGE-CASE-SENSITIVE-P">Section 11.5.5, “Function <code class="function">EXT:PACKAGE-CASE-SENSITIVE-P</code>”</a>.</p><p>A <strong class="first"><em class="firstterm">case-inverted package
  <a id="pack-case-inverted" class="indexterm"></a>
 </em></strong> is one whose <a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> declaration (or <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><code class="function">MAKE-PACKAGE</code></a>
 creation form) has the option <code class="code">(<a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:CASE-INVERTED</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)</code>.
 In the context of a case-inverted package, symbol names are
 case-inverted: upper case characters are mapped to lower case, lower
 case characters are mapped to upper case, and other characters are left
 untouched.  Every symbol thus conceptually has two symbol names: an
 old-world symbol name and a modern-world symbol name, which is the
 case-inverted old-world name.  The first symbol name is returned by the
 function <a href="http://www.lisp.org/HyperSpec/Body/fun_symbol-name.html" target="_top"><code class="function">SYMBOL-NAME</code></a>, the modern one by the
 function <code class="function">cs-cl:symbol-name</code>.  The internal
 functions for creating or looking up symbols in a package, which
 traditionally took a string argument, now conceptually take two string
 arguments: old-style-string and inverted-string.  Actually, a function
 like <a href="http://www.lisp.org/HyperSpec/Body/fun_intern.html" target="_top"><code class="function">INTERN</code></a> takes the old-style-string as argument and computes the
 inverted-string from it; whereas the
 function <code class="function">cs-cl:intern</code> takes the inverted-string as
 argument and computes the old-style-string from it.
 See also <a href="#pack-inverted" title="11.5.4.&#xA0;Function EXT:PACKAGE-CASE-INVERTED-P">Section 11.5.4, “Function <code class="function">EXT:PACKAGE-CASE-INVERTED-P</code>”</a>.</p><p>For a few built-in functions, a variant for the case-inverted
world is defined in the <a href="impnotes.html#package-case" class="olink"><strong class="package">“<span class="quote">CS-COMMON-LISP</span>”</strong></a> package, which has the nickname
 <strong class="package">“<span class="quote">CS-CL</span>”</strong>:</p><div class="variablelist"><dl><dt><span class="term"><code class="function">cs-cl:symbol-name</code></span></dt><dd>returns the case-inverted symbol name.
  </dd><dt><span class="term"><code class="function">cs-cl:intern</code><br /></span><span class="term"><code class="function">cs-cl:find-symbol</code></span></dt><dd>work consistently with
     <code class="function">cs-cl:symbol-name</code>.</dd><dt><span class="term"><code class="function">cs-cl:shadow</code><br /></span><span class="term"><code class="function">cs-cl:find-all-symbols</code><br /></span><span class="term"><code class="function">cs-cl:string=</code><br /></span><span class="term"><code class="function">cs-cl:string/=</code><br /></span><span class="term"><code class="function">cs-cl:string&lt;</code><br /></span><span class="term"><code class="function">cs-cl:string&gt;</code><br /></span><span class="term"><code class="function">cs-cl:string&lt;=</code><br /></span><span class="term"><code class="function">cs-cl:string&gt;=</code><br /></span><span class="term"><code class="function">cs-cl:string-trim</code><br /></span><span class="term"><code class="function">cs-cl:string-left-trim</code><br /></span><span class="term"><code class="function">cs-cl:string-right-trim</code></span></dt><dd>convert a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> and therefore
     exist in a variant that uses <code class="function">cs-cl:symbol-name</code>
     instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_symbol-name.html" target="_top"><code class="function">SYMBOL-NAME</code></a>.</dd><dt><span class="term"><code class="function">cs-cl:make-package</code></span></dt><dd>creates a case-inverted <a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><code class="classname">PACKAGE</code></a>.
</dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="cs-clu"></a>11.4.1. User Package for the Case-sensitive World</h3></div></div></div><p>A package <a href="impnotes.html#cs-clu" class="olink"><strong class="package">“<span class="quote">CS-COMMON-LISP-USER</span>”</strong></a> is provided for the user to modify and work in.
It plays the same role as <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a>, but for the case-sensitive
world.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="cs-pack-name"></a>11.4.2. Package Names</h3></div></div></div><p>The handling of package names is unchanged.  Package names are
 still usually uppercase.  The package names are also subject to
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><code class="function">READTABLE-CASE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/var_streadtablest.html" target="_top"><code class="varname">*READTABLE*</code></a>)</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="cs-gensym-kwd"></a>11.4.3. Gensyms and Keywords</h3></div></div></div><p>Note that gensyms and keywords are still treated traditionally:
even in a case-sensitive package, <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> #:FooBar #:foobar)</code>
and <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> ':KeyWord ':keyword)</code> evaluate to true.  We
believe this has limited negative impact for the moment, but can be
changed a few years from now.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="case-sensitive-migration"></a>11.4.4. Migration Tips</h3></div></div></div><p>The following practices will pose no problems when migrating to a
modern case-sensitive world:
</p><div class="itemizedlist"><ul type="disc"><li>Using [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] symbols in lowercase.</li><li>Macros that create symbols by suffixing or prefixing given
  symbols.</li><li>Comparing symbol names as in
  <code class="code">(string= (symbol-name x) (symbol-name y))</code>.</li></ul></div><p>The following practices will not work in a case-sensitive world or
can give problems:
</p><div class="itemizedlist"><ul type="disc"><li>Accessing the same symbol in both upper- and
  lowercase from the same source file.</li><li>Macros that create symbols in other packages than the
  original symbols.</li><li>Comparing symbol-name return values with <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>.
</li><li>Comparing <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_symbol-name.html" target="_top"><code class="function">SYMBOL-NAME</code></a> x)</code> with
  <code class="code">(cs-cl:symbol-name y)</code>.</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="case-sensitive-startup"></a>11.4.5. Using case-sensitive packages by default</h3></div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> supports a command-line option <code class="option"><a href="clisp.html#opt-modern" class="olink">-modern</a></code> that
 sets the <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><code class="varname">*PACKAGE*</code></a> initially to the <a href="impnotes.html#cs-clu" class="olink"><strong class="package">“<span class="quote">CS-COMMON-LISP-USER</span>”</strong></a> package, and
 <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><code class="varname">*PRINT-BASE*</code></a> to <code class="constant">:DOWNCASE</code>.</p><p>For packages to be located in the “<span class="quote">modern</span>”
 (case-sensitive) world, you need to augment their <a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a>
 declaration by adding the option <code class="code">(<a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:MODERN</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)</code>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="pack-dict"></a>11.5. The Packages Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_packa_s_dictionary.html" target="_top">[CLHS-11.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#make-pack">11.5.1. Function <code class="function">MAKE-PACKAGE</code></a></span></dt><dt><span class="section"><a href="#defpack">11.5.2. Macro <code class="function">DEFPACKAGE</code></a></span></dt><dt><span class="section"><a href="#re-export">11.5.3. Function <code class="function">EXT:RE-EXPORT</code></a></span></dt><dt><span class="section"><a href="#pack-inverted">11.5.4. Function <code class="function">EXT:PACKAGE-CASE-INVERTED-P</code></a></span></dt><dt><span class="section"><a href="#pack-sensitive">11.5.5. Function <code class="function">EXT:PACKAGE-CASE-SENSITIVE-P</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-pack"></a>11.5.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><code class="function">MAKE-PACKAGE</code></a></h3></div></div></div><p>The default value of the <code class="constant">:USE</code> argument is
 <span class="data"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>)</code></span>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><code class="function">MAKE-PACKAGE</code></a> accepts additional keyword arguments
 <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:CASE-SENSITIVE</code></a> and <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:CASE-INVERTED</code></a> (but <span class="strong"><strong>not</strong></span> <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:MODERN</code></a>!)
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="defpack"></a>11.5.2. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> accepts additional options <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:CASE-SENSITIVE</code></a>,
 <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:CASE-INVERTED</code></a>, and <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:MODERN</code></a>.</p><p>When the package being defined already exists, it is modified as
 follows (and in this order):</p><div class="variablelist"><dl><dt><span class="term"><a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:CASE-SENSITIVE</code></a></span></dt><dd>adjusted with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="#pack-sensitive" title="11.5.5.&#xA0;Function EXT:PACKAGE-CASE-SENSITIVE-P"><code class="function">EXT:PACKAGE-CASE-SENSITIVE-P</code></a>)</code>
     (with a warning)</dd><dt><span class="term"><a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:CASE-INVERTED</code></a></span></dt><dd>adjusted with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="#pack-inverted" title="11.5.4.&#xA0;Function EXT:PACKAGE-CASE-INVERTED-P"><code class="function">EXT:PACKAGE-CASE-INVERTED-P</code></a>)</code>
     (with a warning)</dd><dt><span class="term"><a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:MODERN</code></a></span></dt><dd><p>if <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> is being used, it is un-used and
     <a href="impnotes.html#package-case" class="olink"><strong class="package">“<span class="quote">CS-COMMON-LISP</span>”</strong></a> is used instead; also, <a href="impnotes.html#package-case" class="olink"><strong class="package">“<span class="quote">CS-COMMON-LISP</span>”</strong></a> is used instead of <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a>
     throughout the <a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> form, e.g.,</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> "FOO"
  (<a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:MODERN</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)
  (<code class="constant">:USE</code> "COMMON-LISP" "EXT"))
</pre><p>is equivalent to</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> "FOO"
  (<a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:CASE-SENSITIVE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)
  (<a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:CASE-INVERTED</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)
  (<code class="constant">:USE</code> "CS-COMMON-LISP" "EXT"))
</pre><p><code class="code">(<a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:MODERN</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>)</code> reverts the
      effects of <code class="code">(<a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:MODERN</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)</code>.</p></dd><dt><span class="term"><code class="constant">:NICKNAMES</code></span></dt><dd>adjusted with <a href="http://www.lisp.org/HyperSpec/Body/fun_rename-package.html" target="_top"><code class="function">RENAME-PACKAGE</code></a>
  </dd><dt><span class="term"><code class="constant">:DOCUMENTATION</code></span></dt><dd>reset to the new value with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>
      <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><code class="function">DOCUMENTATION</code></a>)</code></dd><dt><span class="term"><code class="constant">:SHADOW</code></span></dt><dd>adjusted with <a href="http://www.lisp.org/HyperSpec/Body/fun_shadow.html" target="_top"><code class="function">SHADOW</code></a>
  </dd><dt><span class="term"><code class="constant">:SHADOWING-IMPORT-FROM</code></span></dt><dd>adjusted with <a href="http://www.lisp.org/HyperSpec/Body/fun_shadowing-import.html" target="_top"><code class="function">SHADOWING-IMPORT</code></a>
  </dd><dt><span class="term"><code class="constant">:USE</code></span></dt><dd>adjusted with <a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><code class="function">USE-PACKAGE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_unuse-package.html" target="_top"><code class="function">UNUSE-PACKAGE</code></a>
  </dd><dt><span class="term"><code class="constant">:IMPORT-FROM</code></span></dt><dd>adjusted with <a href="http://www.lisp.org/HyperSpec/Body/fun_import.html" target="_top"><code class="function">IMPORT</code></a>
  </dd><dt><span class="term"><code class="constant">:INTERN</code></span></dt><dd>adjusted with <a href="http://www.lisp.org/HyperSpec/Body/fun_intern.html" target="_top"><code class="function">INTERN</code></a> (but <span class="strong"><strong>not</strong></span> <a href="http://www.lisp.org/HyperSpec/Body/fun_unintern.html" target="_top"><code class="function">UNINTERN</code></a>)
  </dd><dt><span class="term"><code class="constant">:EXPORT</code></span></dt><dd>adjusted with <a href="http://www.lisp.org/HyperSpec/Body/fun_intern.html" target="_top"><code class="function">INTERN</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><code class="function">EXPORT</code></a> (but <span class="strong"><strong>not</strong></span>
     <a href="http://www.lisp.org/HyperSpec/Body/fun_unexport.html" target="_top"><code class="function">UNEXPORT</code></a>)</dd><dt><span class="term"><code class="constant">:SIZE</code></span></dt><dd>ignored</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="re-export"></a>11.5.3. Function <a href="#re-export" title="11.5.3.&#xA0;Function EXT:RE-EXPORT"><code class="function">EXT:RE-EXPORT</code></a></h3></div></div></div><p>The function <code class="code">(<a href="#re-export" title="11.5.3.&#xA0;Function EXT:RE-EXPORT"><code class="function">EXT:RE-EXPORT</code></a> <em class="replaceable"><code>FROM-PACK</code></em>
  <em class="replaceable"><code>TO-PACK</code></em>)</code> re-<a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><code class="function">EXPORT</code></a>s all external
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>s from <em class="replaceable"><code>FROM-PACK</code></em> also from
 <em class="replaceable"><code>TO-PACK</code></em>, provided it already uses
 <em class="replaceable"><code>FROM-PACK</code></em>; and <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> otherwise.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pack-inverted"></a>11.5.4. Function <a href="#pack-inverted" title="11.5.4.&#xA0;Function EXT:PACKAGE-CASE-INVERTED-P"><code class="function">EXT:PACKAGE-CASE-INVERTED-P</code></a></h3></div></div></div><p>Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if the argument is a
  <a href="#pack-case-inverted">case-inverted package</a>.
  This function is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>able, although it is probably not a good idea
  to change the case-inverted status of an existing package.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pack-sensitive"></a>11.5.5. Function <a href="#pack-sensitive" title="11.5.5.&#xA0;Function EXT:PACKAGE-CASE-SENSITIVE-P"><code class="function">EXT:PACKAGE-CASE-SENSITIVE-P</code></a></h3></div></div></div><p>Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if the argument is a
  <a href="#pack-case-sensitive">case-sensitive package</a>.
  This function is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>able, although it is probably not a good idea
  to change the case-sensitive status of an existing package.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="numbers"></a>Chapter 12. Numbers
   <a href="http://www.lisp.org/HyperSpec/Body/chap-12.html" target="_top">[CLHS-12]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#num-types">12.1. Numeric Types</a></span></dt><dt><span class="section"><a href="#num-concepts">12.2. Number Concepts
   [CLHS-12.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-type">12.2.1. Byte Operations on Integers
   [CLHS-12.1.1.3.2]</a></span></dt><dt><span class="section"><a href="#float-subst">12.2.2. Rule of Float Substitutability
   [CLHS-12.1.3.3]</a></span></dt><dt><span class="section"><a href="#float-comp">12.2.3. Floating-point Computations
   [CLHS-12.1.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#flocont">12.2.3.1. Rule of Float Precision Contagion
   [CLHS-12.1.4.4]</a></span></dt><dt><span class="section"><a href="#floratcont">12.2.3.2. Rule of Float and Rational Contagion
   [CLHS-12.1.4.1]</a></span></dt></dl></dd><dt><span class="section"><a href="#complex-comp">12.2.4. Complex Computations
   [CLHS-12.1.5]</a></span></dt><dt><span class="section"><a href="#complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   [CLHS-12.1.5.3]</a></span></dt></dl></dd><dt><span class="section"><a href="#num-dict">12.3. The Numbers Dictionary
   [CLHS-12.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#random-state">12.3.1. Random Numbers</a></span></dt><dt><span class="section"><a href="#int-func-ext">12.3.2. Additional Integer Functions</a></span></dt><dt><span class="section"><a href="#float-notes">12.3.3. Floating Point Arithmetics</a></span></dt><dt><span class="section"><a href="#float-decode">12.3.4. Float Decoding
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bool-ops">12.3.5. Boolean Operations
  [CLHS]</a></span></dt><dt><span class="section"><a href="#fixnum-lim">12.3.6. Fixnum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bignum-lim">12.3.7. Bignum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-lim">12.3.8. Float Limits
  [CLHS]</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-types"></a>12.1. Numeric Types</h2></div></div></div><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><code class="classname">REAL</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#exhaustive_partition" target="_top">“<span class="quote">exhaustive
 partition</span>”</a>)</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><code class="classname">REAL</code></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><code class="classname">RATIONAL</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><code class="classname">FLOAT</code></a>.</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><code class="classname">RATIONAL</code></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html" target="_top"><code class="classname">RATIO</code></a>.</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html" target="_top"><code class="classname">BIGNUM</code></a>.</p><p>The type <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><code class="classname">FLOAT</code></a> is the disjoint union of the types
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-concepts"></a>12.2. Number Concepts
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1.html" target="_top">[CLHS-12.1]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#byte-type">12.2.1. Byte Operations on Integers
   [CLHS-12.1.1.3.2]</a></span></dt><dt><span class="section"><a href="#float-subst">12.2.2. Rule of Float Substitutability
   [CLHS-12.1.3.3]</a></span></dt><dt><span class="section"><a href="#float-comp">12.2.3. Floating-point Computations
   [CLHS-12.1.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#flocont">12.2.3.1. Rule of Float Precision Contagion
   [CLHS-12.1.4.4]</a></span></dt><dt><span class="section"><a href="#floratcont">12.2.3.2. Rule of Float and Rational Contagion
   [CLHS-12.1.4.1]</a></span></dt></dl></dd><dt><span class="section"><a href="#complex-comp">12.2.4. Complex Computations
   [CLHS-12.1.5]</a></span></dt><dt><span class="section"><a href="#complex-rational">12.2.5. Rule of
   Canonical Representation for Complex Rationals
   [CLHS-12.1.5.3]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="byte-type"></a>12.2.1. Byte Operations on Integers
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-1-3-2.html" target="_top">[CLHS-12.1.1.3.2]</a></h3></div></div></div><p>Byte specifiers are objects of built-in type <a href="#byte-type" title="12.2.1.&#xA0;Byte Operations on Integers&#10;   [CLHS-12.1.1.3.2]"><span class="type">BYTE</span></a>,
 not <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-subst"></a>12.2.2. Rule of Float Substitutability
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-3-3.html" target="_top">[CLHS-12.1.3.3]</a></h3></div></div></div><p>When a mathematical function may return an exact (<a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><code class="classname">RATIONAL</code></a>) or
 inexact (<a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><code class="classname">FLOAT</code></a>) result, it always returns the exact result.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-comp"></a>12.2.3. Floating-point Computations
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4.html" target="_top">[CLHS-12.1.4]</a></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#flocont">12.2.3.1. Rule of Float Precision Contagion
   [CLHS-12.1.4.4]</a></span></dt><dt><span class="section"><a href="#floratcont">12.2.3.2. Rule of Float and Rational Contagion
   [CLHS-12.1.4.1]</a></span></dt></dl></div><p>There are four floating point types: <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a>:
</p><div class="informaltable"><a id="floating-types-table"></a><table border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center">type</th><th align="center">sign</th><th align="center">mantissa</th><th align="center">exponent</th><th align="center">comment</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a></td><td align="center">1 bit</td><td align="center">16+1 bits</td><td align="center">8 bits</td><td align="center">immediate</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a></td><td align="center">1 bit</td><td align="center">23+1 bits</td><td align="center">8 bits</td><td align="center"><a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a></td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a></td><td align="center">1 bit</td><td align="center">52+1 bits</td><td align="center">11 bits</td><td align="center"><a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a></td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a></td><td align="center">1 bit</td><td align="center">&gt;=64 bits</td><td align="center">32 bits</td><td align="center">variable
 length</td></tr></tbody></table></div><p>The single and double float formats are those of the <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a>
 “<span class="quote">Standard for Binary Floating-Point Arithmetic</span>”,
 except that <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> does not support features like
 <code class="literal">±0</code>, <code class="literal">±inf</code>,
 <code class="literal">NaN</code>, gradual underflow, etc.
 <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> does not make use of these features, so, to reduce portability
 problems, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> by design returns the same floating point results on
 all platforms (<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has a floating-point emulation built in for
 platforms that do not support <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a>).  Note that
 </p><div class="itemizedlist"><ul type="disc"><li>When you got a <code class="literal">NaN</code>
    in your program, your program is broken, so you will spend time
    determining where the <code class="literal">NaN</code> came from.
    It is better to <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> in this case.</li><li>When you got unnormalized floats in your program,
    your results will have a greatly reduced accuracy anyway.
    Since <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has the means to cope with this - <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a>s of
    <a href="#lfd">variable precision</a> - it does not
    need unnormalized floats.</li></ul></div><p>
 This is why <a href="impnotes.html#features" class="olink"><code class="varname">*FEATURES*</code></a> does not contain the
 <code class="constant">:IEEE-FLOATING-POINT</code> keyword.</p><p><a id="lfd"></a><b>Arbitrary Precision Floats. </b><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a>s have variable mantissa length, which is a
 multiple of 16 (or 32, depending on the word size of the processor).
 The default length used when <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a>s are <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><code class="function">READ</code></a> is given by the
 <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> <code class="code">(<a href="#lfd"><code class="function">EXT:LONG-FLOAT-DIGITS</code></a>)</code>.  It can be set by <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="#lfd"><code class="function">EXT:LONG-FLOAT-DIGITS</code></a>) <em class="replaceable"><code>n</code></em>)</code>,
 where <em class="replaceable"><code>n</code></em> is a positive <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>.  E.g., <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="#lfd"><code class="function">EXT:LONG-FLOAT-DIGITS</code></a>)
 3322)</code> sets the default precision of <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a>s to about
 1000 decimal digits.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="flocont"></a>12.2.3.1. Rule of Float Precision Contagion
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html" target="_top">[CLHS-12.1.4.4]</a></h4></div></div></div><p>The floating point contagion is controlled by the variable
 <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><code class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</code></a>.  When it is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, contagion is done as per the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]: <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a> →
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a>.</p><div class="variablelist"><dl><dt><span class="term">Rationale:</span></dt><dd>See it pragmatically: save what you can and let
  others worry about the rest.</dd><dt><span class="term">Brief:</span></dt><dd><a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> knows the number's precision, not accuracy, so
  preserving the precision can be accomplished reliably, while anything
  relating to the accuracy is just a speculation - only the user
  (programmer) knows what it is in each case.
 </dd><dt><span class="term">Detailed:</span></dt><dd>A computer float is an approximation of a real number.
  One can think of it as a random variable with the mean equal to
  itself and standard deviation equal to half the last significant digit.
  E.g., <code class="literal">1.5</code> is actually <code class="literal">1.5±0.05</code>.
  Consider adding <code class="literal">1.5</code> and <code class="literal">1.75</code>.
  [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requires that <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_pl.html" target="_top"><code class="function">+</code></a> 1.5 1.75)</code>
  return <code class="literal">3.25</code>, while traditional <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> would return
  <code class="literal">3.3</code>.  The implied random variables are:
  <code class="literal">3.25±0.005</code> and <code class="literal">3.3±0.05</code>.
  Note that the traditional <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> way <span class="strong"><strong>does</strong></span>
  lie about the mean: the mean <span class="strong"><strong>is</strong></span> <code class="literal">3.25</code> and
  nothing else, while the standard way
  <span class="strong"><strong>could</strong></span> be lying about the deviation
  (accuracy): if the implied accuracy of <code class="literal">1.5 (0.05)</code>
  is its actual accuracy, then the accuracy of the result cannot be
  smaller that that.  Therefore, since <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> has no way of knowing the
  actual accuracy, [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] (and all the other standard engineering
  programming languages, like <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, FORTRAN etc) decides that
  keeping the accuracy correct is the business of the programmer, while
  the language should preserve what it can - the precision.
  </dd><dt><span class="term">Experience:</span></dt><dd> Rounding errors accumulate, and if a computation
  is conducted with insufficient precision, an outright incorrect
  result can be returned.
  (E.g., <code class="code">E(x<sup>2</sup>) -
  E(x)<sup>2</sup></code> can be negative!)
  The user should not mix floats of different precision (that's what
  <a href="#warn-fpc" title="Variable CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*"><code class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</code></a> is for), but one should not be penalized for this too
  harshly.</dd></dl></div><p>When <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><code class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the traditional <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> method is used,
 namely the result of an arithmetic operation whose arguments are of
 different float types is rounded to the float format of the shortest
 (least precise) of the arguments: <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><code class="classname">RATIONAL</code></a> →
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a> → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a>
 → <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a> (in contrast to <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html" target="_top">12.1.4.4 Rule of Float Precision
 Contagion</a>!)</p><div class="variablelist"><dl><dt><span class="term">Rationale:</span></dt><dd> See it mathematically.  Add intervals:
  <code class="code">{1.0 ± 1e-8} + {1.0 ± 1e-16} = {2.0 ±
  1e-8}</code>.  So, if we add <code class="literal">1.0s0</code> and
  <code class="literal">1.0d0</code>, we should get <code class="literal">2.0s0</code>.
  </dd><dt><span class="term">Brief:</span></dt><dd>Do not suggest accuracy of a result by giving it a
  precision that is greater than its accuracy.
  </dd><dt><span class="term">Example:</span></dt><dd><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_-.html" target="_top"><code class="function">-</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_pl.html" target="_top"><code class="function">+</code></a> 1.7 <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><code class="constant">PI</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><code class="constant">PI</code></a>)</code>
  should not return <code class="literal">1.700000726342836417234L0</code>, it
  should return <code class="literal">1.7f0</code> (or
  <code class="literal">1.700001f0</code> if there were rounding errors).
  </dd><dt><span class="term">Experience:</span></dt><dd>If in a computation using thousands of <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a>s,
  a <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a> (like <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><code class="constant">PI</code></a>) happens to be used, the long precision
  should not propagate throughout all the intermediate values.
  Otherwise, the long result would look precise, but its accuracy is
  only that of a <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a>; furthermore much computation time
  would be lost by calculating with <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a>s when only
  <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a>s would be needed.
  </dd></dl></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="warn-fpc"></a>Variable <a href="#warn-fpc" title="Variable CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*"><code class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</code></a></h5></div></div></div><p>If the variable <a href="#warn-fpc" title="Variable CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*"><code class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a> is emitted for
 every coercion involving different floating-point types.
 As explained above, float precision contagion is not a good idea.
 You can avoid the contagion by doing all your computations with the
 same floating-point type (and using <a href="http://www.lisp.org/HyperSpec/Body/fun_float.html" target="_top"><code class="function">FLOAT</code></a> to convert all constants,
 e.g., <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><code class="constant">PI</code></a>, to your preferred type).</p><p>This variable helps you eliminate all occurrences of float
 precision contagion: set it to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> to have <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> a
 <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a> on float precision contagion; set it to <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><code class="function">ERROR</code></a> to have
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> on float precision contagion, so that you
 can look at the stack backtrace.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="floratcont"></a>12.2.3.2. Rule of Float and Rational Contagion
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-1.html" target="_top">[CLHS-12.1.4.1]</a></h4></div></div></div><p>The contagion between floating point and rational numbers is controlled
 by the variable <a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><code class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</code></a>.  When it is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, contagion is done as per
 the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]: <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><code class="classname">RATIONAL</code></a> → <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><code class="classname">FLOAT</code></a>.</p><p>When <a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><code class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the traditional <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> method is used,
 namely if the result is mathematically an exact rational number, this
 rational number is returned (in contrast to <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-1.html" target="_top">12.1.4.1 Rule of Float and Rational
 Contagion</a>!)</p><p><a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><code class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</code></a> has an effect only in those few cases when the mathematical
 result is exact although one of the arguments is a floating-point number,
 such as <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_st.html" target="_top"><code class="function">*</code></a> 0 1.618)</code>, <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_sl.html" target="_top"><code class="function">/</code></a> 0 1.618)</code>,
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_asincm_acoscm_atan.html" target="_top"><code class="function">ATAN</code></a> 0 1.0)</code>, <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html" target="_top"><code class="function">EXPT</code></a> 2.0 0)</code>,
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_phase.html" target="_top"><code class="function">PHASE</code></a> 2.718)</code>.</p><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="warn-fprc"></a>Variable <a href="#warn-fprc" title="Variable CUSTOM:*WARN-ON-FLOATING-POINT-RATIONAL-CONTAGION*"><code class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-RATIONAL-CONTAGION*</code></a></h5></div></div></div><p>If the variable <a href="#warn-fprc" title="Variable CUSTOM:*WARN-ON-FLOATING-POINT-RATIONAL-CONTAGION*"><code class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-RATIONAL-CONTAGION*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a> is emitted for
 every avoidable coercion from a rational number to a floating-point number.
 You can avoid such coercions by calling <a href="http://www.lisp.org/HyperSpec/Body/fun_float.html" target="_top"><code class="function">FLOAT</code></a> to convert the particular
 rational numbers to your preferred floating-point type.</p><p>This variable helps you eliminate all occurrences of avoidable
 coercions to a floating-point number when a rational number result
 would be possible: set it to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> to have <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a>
 in such situations; set it to <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><code class="function">ERROR</code></a> to have <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> an
 <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> in such situations, so that you can look at the stack
 backtrace.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="phasecont"></a>Variable <a href="#phasecont" title="Variable CUSTOM:*PHASE-ANSI*"><code class="varname">CUSTOM:*PHASE-ANSI*</code></a></h5></div></div></div><p>A similar variable, <a href="#phasecont" title="Variable CUSTOM:*PHASE-ANSI*"><code class="varname">CUSTOM:*PHASE-ANSI*</code></a>, controls the return
 value of <a href="http://www.lisp.org/HyperSpec/Body/fun_phase.html" target="_top"><code class="function">PHASE</code></a> when the argument is an exact nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><code class="classname">REAL</code></a>.
 Namely, if <a href="#phasecont" title="Variable CUSTOM:*PHASE-ANSI*"><code class="varname">CUSTOM:*PHASE-ANSI*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, it returns a floating-point zero;
 if <a href="#phasecont" title="Variable CUSTOM:*PHASE-ANSI*"><code class="varname">CUSTOM:*PHASE-ANSI*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, it returns an exact zero.  Example:
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_phase.html" target="_top"><code class="function">PHASE</code></a> 2/3)</code></p></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="complex-comp"></a>12.2.4. Complex Computations
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-5.html" target="_top">[CLHS-12.1.5]</a></h3></div></div></div><p>Complex numbers can have a real part and an imaginary part of
 different types. For example, <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html" target="_top"><code class="function">SQRT</code></a> -9.0)</code> evaluates to
 the number <span class="data"><code class="literal">#C(0 3.0)</code></span>,
 which has a real part of exactly <code class="literal">0</code>,
 not only <span class="data"><code class="literal">0.0</code></span>
 (which would mean “<span class="quote">approximately 0</span>”).</p><p>The type specifier for this is <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a>)</code></span>, and <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> <code class="varname">type-of-real-part</code>
 <code class="varname">type-of-imaginary-part</code>)</code></span> in general.</p><p>The type specifier <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a>
 <em class="replaceable"><code>type</code></em>)</code></span> is equivalent to <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> <em class="replaceable"><code>type</code></em> <em class="replaceable"><code>type</code></em>)</code></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="complex-rational"></a>12.2.5. Rule of
   Canonical Representation for Complex Rationals
   <a href="http://www.lisp.org/HyperSpec/Body/sec_12-1-5-3.html" target="_top">[CLHS-12.1.5.3]</a></h3></div></div></div><p>Complex numbers can have a real part and an imaginary part of
 different types.  If the imaginary part is <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a> to <code class="literal">0</code>,
 the number is automatically converted to a real number.</p><p>This has the advantage that
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET</code></a> ((x (<a href="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html" target="_top"><code class="function">SQRT</code></a> -9.0))) (* x x))</code> - instead of
 evaluating to <span class="data"><code class="literal">#C(-9.0 0.0)</code></span>, with <em class="replaceable"><code>x</code></em>
 = <span class="data"><code class="literal">#C(0.0 3.0)</code></span> - evaluates to
 <span class="data"><code class="literal">#C(-9.0 0)</code></span> =
 <span class="data"><code class="literal">-9.0</code></span>,
 with <em class="replaceable"><code>x</code></em> = <span class="data"><code class="literal">#C(0 3.0)</code></span>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-dict"></a>12.3. The Numbers Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_numbers_dictionary.html" target="_top">[CLHS-12.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#random-state">12.3.1. Random Numbers</a></span></dt><dt><span class="section"><a href="#int-func-ext">12.3.2. Additional Integer Functions</a></span></dt><dt><span class="section"><a href="#float-notes">12.3.3. Floating Point Arithmetics</a></span></dt><dt><span class="section"><a href="#float-decode">12.3.4. Float Decoding
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bool-ops">12.3.5. Boolean Operations
  [CLHS]</a></span></dt><dt><span class="section"><a href="#fixnum-lim">12.3.6. Fixnum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#bignum-lim">12.3.7. Bignum Limits
  [CLHS]</a></span></dt><dt><span class="section"><a href="#float-lim">12.3.8. Float Limits
  [CLHS]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="random-state"></a>12.3.1. Random Numbers</h3></div></div></div><p>To ease reproducibility, the variable <a href="http://www.lisp.org/HyperSpec/Body/var_strandom-statest.html" target="_top"><code class="varname">*RANDOM-STATE*</code></a> is
 initialized to the same value on each invocation, so that
 </p><pre class="screen"><code class="prompt">$</code> clisp -norc <code class="option"><a href="clisp.html#opt-exec-expr" class="olink">-x</a></code> '(<a href="http://www.lisp.org/HyperSpec/Body/fun_random.html" target="_top"><code class="function">RANDOM</code></a> 1s0)'</pre><p>
 will always print the same number.</p><p>If you want a new random state on each invocation, you can arrange
 for that by using <a href="impnotes.html#image" class="olink">init function</a>: </p><pre class="screen">
<code class="prompt">$</code> clisp -norc <code class="option"><a href="clisp.html#opt-exec-expr" class="olink">-x</a></code> '(<a href="impnotes.html#image" class="olink"><code class="function">EXT:SAVEINITMEM</code></a> "foo" :init-function (<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><code class="function">LAMBDA</code></a> () (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> <a href="http://www.lisp.org/HyperSpec/Body/var_strandom-statest.html" target="_top"><code class="varname">*RANDOM-STATE*</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-random-state.html" target="_top"><code class="function">MAKE-RANDOM-STATE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>))))'
<code class="prompt">$</code> clisp -norc <code class="option"><a href="clisp.html#opt-memfile" class="olink">-M</a></code> foo.mem <code class="option"><a href="clisp.html#opt-exec-expr" class="olink">-x</a></code> '(<a href="http://www.lisp.org/HyperSpec/Body/fun_random.html" target="_top"><code class="function">RANDOM</code></a> 1s0)'
</pre><p> or by placing <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> <a href="http://www.lisp.org/HyperSpec/Body/var_strandom-statest.html" target="_top"><code class="varname">*RANDOM-STATE*</code></a>
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-random-state.html" target="_top"><code class="function">MAKE-RANDOM-STATE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>))</code> into your <a href="clisp.html#opt-norc" class="olink">RC file</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="int-func-ext"></a>12.3.2. Additional Integer Functions</h3></div></div></div><p><a id="factorial"></a><b>Function <code class="function">EXT:!</code> </b><code class="code">(<code class="function">EXT:!</code> <em class="replaceable"><code>n</code></em>)</code> returns the
 factorial of <em class="replaceable"><code>n</code></em>, <em class="replaceable"><code>n</code></em> being a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>.</p><p><a id="exquo"></a><b>Function <code class="function">EXT:EXQUO</code>. </b><code class="code">(<code class="function">EXT:EXQUO</code> <em class="replaceable"><code>x</code></em> <em class="replaceable"><code>y</code></em>)</code> returns
 the integer quotient <code class="varname">x/y</code> of two integers
 <em class="replaceable"><code>x</code></em>,<em class="replaceable"><code>y</code></em>, and <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> when the quotient is not
 integer.  (This is more efficient than <a href="http://www.lisp.org/HyperSpec/Body/fun_sl.html" target="_top"><code class="function">/</code></a>.)</p><p><a id="xgcd"></a><b>Function <code class="function">EXT:XGCD</code>. </b><code class="code">(<code class="function">EXT:XGCD</code> <em class="replaceable"><code>x<sub>1</sub></code></em> ... <em class="replaceable"><code>x<sub>n</sub></code></em>)</code>
 returns the values <em class="replaceable"><code>l</code></em>, <em class="replaceable"><code>k<sub>1</sub></code></em>, ..., <em class="replaceable"><code>k<sub>n</sub></code></em>, where <em class="replaceable"><code>l</code></em> is the
 greatest common divisor of the integers <em class="replaceable"><code>x<sub>1</sub></code></em>, ..., <em class="replaceable"><code>x<sub>n</sub></code></em>, and
 <em class="replaceable"><code>k<sub>1</sub></code></em>, ..., <em class="replaceable"><code>k<sub>n</sub></code></em> are the integer coefficients such that
</p><pre class="programlisting">
<em class="replaceable"><code>l</code></em> = (<a href="http://www.lisp.org/HyperSpec/Body/fun_gcd.html" target="_top"><code class="function">GCD</code></a> <em class="replaceable"><code>x<sub>1</sub></code></em> ... <em class="replaceable"><code>x<sub>n</sub></code></em>)
  = (+ (* <em class="replaceable"><code>k<sub>1</sub></code></em> <em class="replaceable"><code>x<sub>1</sub></code></em>) ... (* <em class="replaceable"><code>k<sub>n</sub></code></em> <em class="replaceable"><code>x<sub>n</sub></code></em>))
</pre><p><a id="mod-expt"></a><b>Function <code class="function">EXT:MOD-EXPT</code>. </b><code class="code">(<code class="function">EXT:MOD-EXPT</code> <em class="replaceable"><code>k</code></em> <em class="replaceable"><code>l</code></em> <em class="replaceable"><code>m</code></em>)</code>
 is equivalent to <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_modcm_rem.html" target="_top"><code class="function">MOD</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html" target="_top"><code class="function">EXPT</code></a> <em class="replaceable"><code>k</code></em> <em class="replaceable"><code>l</code></em>) <em class="replaceable"><code>m</code></em>)</code>
 except it is more efficient for very large arguments.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-notes"></a>12.3.3. Floating Point Arithmetics</h3></div></div></div><p><a id="expt"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html" target="_top"><code class="function">EXPT</code></a>. </b><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html" target="_top"><code class="function">EXPT</code></a> <em class="replaceable"><code>base</code></em> <em class="replaceable"><code>exponent</code></em>)</code>
 is not very precise if <em class="replaceable"><code>exponent</code></em> has a large
 absolute value.</p><p><a id="log"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_log.html" target="_top"><code class="function">LOG</code></a>. </b><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_log.html" target="_top"><code class="function">LOG</code></a> <em class="replaceable"><code>number</code></em> <em class="replaceable"><code>base</code></em>)</code> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> if
 <code class="literal"><em class="replaceable"><code>base</code></em> = 1</code>.</p><p><a id="pi"></a><b>Constant <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><code class="constant">PI</code></a>. </b>The value of <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><code class="constant">PI</code></a> is a <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a> with the precision given
  by <code class="code">(<a href="#lfd"><code class="function">EXT:LONG-FLOAT-DIGITS</code></a>)</code>.  When this precision is changed, the value of <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><code class="constant">PI</code></a> is
  automatically recomputed.  Therefore <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><code class="constant">PI</code></a> is <span class="strong"><strong>not</strong></span> a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-3.html" target="_top">constant variable</a>.
</p><p><a id="ucpt"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_upgraded-_ex-part-type.html" target="_top"><code class="function">UPGRADED-COMPLEX-PART-TYPE</code></a>. </b>When the argument is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_r.html#recognizable_subtype" target="_top">recognizable subtype</a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><code class="classname">REAL</code></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_upgraded-_ex-part-type.html" target="_top"><code class="function">UPGRADED-COMPLEX-PART-TYPE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>, otherwise it
 returns its argument (even though a <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> number in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can
 always have <a href="http://www.lisp.org/HyperSpec/Body/fun_realpartcm_imagpart.html" target="_top"><code class="function">REALPART</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_realpartcm_imagpart.html" target="_top"><code class="function">IMAGPART</code></a> of any type) because it allows
 the most precise type inference.</p><p><a id="default-float-format"></a><b>Variable <a href="#default-float-format"><code class="varname">CUSTOM:*DEFAULT-FLOAT-FORMAT*</code></a>. </b>When rational numbers are to be converted to floats (due to
 <a href="http://www.lisp.org/HyperSpec/Body/fun_float.html" target="_top"><code class="function">FLOAT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><code class="function">COERCE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html" target="_top"><code class="function">SQRT</code></a> or a transcendental function), the result
 type is given by the variable <a href="#default-float-format"><code class="varname">CUSTOM:*DEFAULT-FLOAT-FORMAT*</code></a>.</p><p><a id="no-underflow"></a><b>Macro <a href="#no-underflow"><code class="function">EXT:WITHOUT-FLOATING-POINT-UNDERFLOW</code></a>. </b>The macro <code class="code">(<a href="#no-underflow"><code class="function">EXT:WITHOUT-FLOATING-POINT-UNDERFLOW</code></a> {<em class="replaceable"><code>form</code></em>}*)</code> executes the
 <em class="replaceable"><code>form</code></em>s, with errors of type <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_nt-underflow.html" target="_top"><code class="classname">FLOATING-POINT-UNDERFLOW</code></a> inhibited.
 Floating point operations will silently return zero instead of
 <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ing an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> of type <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_nt-underflow.html" target="_top"><code class="classname">FLOATING-POINT-UNDERFLOW</code></a>.
</p><p><a id="float-invalid-op"></a><b>Condition <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_id-operation.html" target="_top"><code class="classname">FLOATING-POINT-INVALID-OPERATION</code></a>. </b>This <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><code class="classname">CONDITION</code></a> is never <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed by <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p><p><a id="float-inexact"></a><b>Condition <a href="http://www.lisp.org/HyperSpec/Body/contyp_floati_oint-inexact.html" target="_top"><code class="classname">FLOATING-POINT-INEXACT</code></a>. </b>This <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><code class="classname">CONDITION</code></a> is never <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed by <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-decode"></a>12.3.4. Float Decoding
  <a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top">[CLHS]</a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><code class="function">FLOAT-RADIX</code></a> always returns <span class="returnvalue">2</span>.</p><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><code class="function">FLOAT-DIGITS</code></a> <em class="replaceable"><code>number</code></em> <em class="replaceable"><code>digits</code></em>)</code> coerces
 <em class="replaceable"><code>number</code></em> (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><code class="classname">REAL</code></a>) to a floating point number with at least
 <em class="replaceable"><code>digits</code></em> mantissa digits.  The following always evaluates to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>:
 </p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><code class="function">&gt;=</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><code class="function">FLOAT-DIGITS</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html" target="_top"><code class="function">FLOAT-DIGITS</code></a> <em class="replaceable"><code>number</code></em> <em class="replaceable"><code>digits</code></em>)) <em class="replaceable"><code>digits</code></em>)
</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bool-ops"></a>12.3.5. Boolean Operations
  <a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top">[CLHS]</a></h3></div></div></div><div class="table"><a id="bool-op-table"></a><p class="title"><b>Table 12.1. Boolean operations</b></p><table summary="Boolean operations" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left">constant</th><th align="left">value</th></tr></thead><tbody><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-CLR</code></a></td><td align="left">0</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-SET</code></a></td><td align="left">15</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-1</code></a></td><td align="left">10</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-2</code></a></td><td align="left">12</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-C1</code></a></td><td align="left">5</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-C2</code></a></td><td align="left">3</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-AND</code></a></td><td align="left">8</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-IOR</code></a></td><td align="left">14</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-XOR</code></a></td><td align="left">6</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-EQV</code></a></td><td align="left">9</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-NAND</code></a></td><td align="left">7</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-NOR</code></a></td><td align="left">1</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-ANDC1</code></a></td><td align="left">4</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-ANDC2</code></a></td><td align="left">2</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-ORC1</code></a></td><td align="left">13</td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html" target="_top"><code class="constant">BOOLE-ORC2</code></a></td><td align="left">11</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fixnum-lim"></a>12.3.6. Fixnum Limits
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top">[CLHS]</a></h3></div></div></div><div class="table"><a id="fixnum-lim-table"></a><p class="title"><b>Table 12.2. Fixnum limits</b></p><table summary="Fixnum limits" border="1"><colgroup><col align="center" /><col align="center" /><col align="center" /></colgroup><thead><tr><th align="center">CPU type</th><th align="center">32-bit CPU</th><th align="center">64-bit CPU</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><code class="constant">MOST-POSITIVE-FIXNUM</code></a></td><td align="center">2<sup>24</sup>-1 = 16777215</td><td align="center">2<sup>48</sup>-1 = 281474976710655</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html" target="_top"><code class="constant">MOST-NEGATIVE-FIXNUM</code></a></td><td align="center">-2<sup>24</sup> = -16777216</td><td align="center">-2<sup>48</sup> = -281474976710656</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bignum-lim"></a>12.3.7. Bignum Limits
  <a href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html" target="_top">[CLHS]</a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html" target="_top"><code class="classname">BIGNUM</code></a>s are limited in size.  Their maximum size is
 <code class="literal">32*(2<sup>16</sup>-2)=2097088</code> bits.
 The largest representable <a href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html" target="_top"><code class="classname">BIGNUM</code></a> is therefore
 <code class="literal">2<sup>2097088</sup>-1</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="float-lim"></a>12.3.8. Float Limits
  <a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top">[CLHS]</a></h3></div></div></div><p>Together with <a href="http://www.lisp.org/HyperSpec/Body/convar_pi.html" target="_top"><code class="constant">PI</code></a>, the other <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a> constants
  </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><code class="constant">LEAST-NEGATIVE-LONG-FLOAT</code></a></td><td><a href="http://www.lisp.org/HyperSpec/Body/convar_short-_tive-epsilon.html" target="_top"><code class="constant">LONG-FLOAT-EPSILON</code></a></td></tr><tr><td><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><code class="constant">LEAST-NEGATIVE-NORMALIZED-LONG-FLOAT</code></a></td><td><a href="http://www.lisp.org/HyperSpec/Body/convar_short-_tive-epsilon.html" target="_top"><code class="constant">LONG-FLOAT-NEGATIVE-EPSILON</code></a></td></tr><tr><td><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><code class="constant">LEAST-POSITIVE-LONG-FLOAT</code></a></td><td><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><code class="constant">MOST-NEGATIVE-LONG-FLOAT</code></a></td></tr><tr><td><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><code class="constant">LEAST-POSITIVE-NORMALIZED-LONG-FLOAT</code></a></td><td><a href="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html" target="_top"><code class="constant">MOST-POSITIVE-LONG-FLOAT</code></a></td></tr></table><p>
  are recomputed whenever <code class="code">(<a href="#lfd"><code class="function">EXT:LONG-FLOAT-DIGITS</code></a>)</code> is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>ed.
  They are <span class="strong"><strong>not</strong></span> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-3.html" target="_top">constant variable</a>s.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="characters"></a>Chapter 13. Characters
   <a href="http://www.lisp.org/HyperSpec/Body/chap-13.html" target="_top">[CLHS-13]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#char-script">13.1. Character Scripts
   [CLHS-13.1.2.1]</a></span></dt><dt><span class="section"><a href="#char-attrib">13.2. Character Attributes
   [CLHS-13.1.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#input-char">13.2.1. Input Characters</a></span></dt></dl></dd><dt><span class="section"><a href="#graph-char">13.3. Graphic Characters
   [CLHS-13.1.4.1]</a></span></dt><dt><span class="section"><a href="#alpha-char">13.4. Alphabetic Characters
   [CLHS-13.1.4.2]</a></span></dt><dt><span class="section"><a href="#char-case">13.5. Characters With Case
   [CLHS-13.1.4.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#char-invertcase">13.5.1. Function <code class="function">EXT:CHAR-INVERTCASE</code></a></span></dt><dt><span class="section"><a href="#char-ext">13.5.2. Case of Implementation-Defined Characters
  [CLHS-13.1.4.3.4]</a></span></dt></dl></dd><dt><span class="section"><a href="#num-char">13.6. Numeric Characters
   [CLHS-13.1.4.4]</a></span></dt><dt><span class="section"><a href="#char-ord">13.7. Ordering of Characters
   [CLHS-13.1.6]</a></span></dt><dt><span class="section"><a href="#clhs-newline">13.8. Treatment of Newline during Input and Output
   [CLHS-13.1.8]</a></span></dt><dt><span class="section"><a href="#char-int">13.9. Character Encodings
   [CLHS-13.1.9]</a></span></dt><dt><span class="section"><a href="#script-ext">13.10. Documentation
   of Implementation-Defined Scripts
   [CLHS-13.1.10]</a></span></dt><dt><span class="section"><a href="#char-dict">13.11. The Characters Dictionary
   [CLHS-13.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#char-code">13.11.1. Function <code class="function">CHAR-CODE</code></a></span></dt><dt><span class="section"><a href="#base-char">13.11.2. Type <code class="classname">BASE-CHAR</code></a></span></dt><dt><span class="section"><a href="#char-width">13.11.3. Function <code class="function">EXT:CHAR-WIDTH</code></a></span></dt></dl></dd><dt><span class="section"><a href="#char-platform-dep">13.12. Platform-Dependent Characters</a></span></dt><dt><span class="section"><a href="#char-bits">13.13. Obsolete Constants</a></span></dt></dl></div><p>The characters are ordered according to a superset of the
 <a href="#charset-ASCII">ASCII character set</a>.</p>
<!--#ifdef UNICODE-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep">Only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built <span class="strong"><strong>with</strong></span> compile-time flag <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a></span></span></span></dt><dd>More precisely, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses the 21-bit <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> 3.2
 character set (ISO 10646, also known as UCS-4).
</dd></dl></div>
<!--#endif-->
<!--#if defined(ISOLATIN_CHS) && !defined(UNICODE)-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> (except <a href="http://www.next.com/" target="_top"><span class="strong"><strong>NeXTstep</strong></span></a>),
   <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only, and only in
   <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built <span class="strong"><strong>without</strong></span> compile-time flag <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a>.</span></span></span></dt><dd><p>More precisely, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses the ISO Latin-1 (ISO
 8859-1) character set:
</p><div class="informaltable"><a id="latin-1-table"></a><table border="1"><colgroup><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center">#x0</th><th align="center">#x1</th><th align="center">#x2</th><th align="center">#x3</th><th align="center">#x4</th><th align="center">#x5</th><th align="center">#x6</th><th align="center">#x7</th><th align="center">#x8</th><th align="center">#x9</th><th align="center">#xA</th><th align="center">#xB</th><th align="center">#xC</th><th align="center">#xD</th><th align="center">#xE</th><th align="center">#xF</th></tr></thead><tbody><tr><td align="center">#x00</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x10</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x20</td><td align="center"> </td><td align="center">!</td><td align="center">"</td><td align="center">#</td><td align="center">$</td><td align="center">%</td><td align="center">&amp;</td><td align="center">'</td><td align="center">(</td><td align="center">)</td><td align="center">*</td><td align="center">+</td><td align="center">,</td><td align="center">-</td><td align="center">.</td><td align="center">/</td></tr><tr><td align="center">#x30</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">:</td><td align="center">;</td><td align="center">&lt;</td><td align="center">=</td><td align="center">&gt;</td><td align="center">?</td></tr><tr><td align="center">#x40</td><td align="center">@</td><td align="center">A</td><td align="center">B</td><td align="center">C</td><td align="center">D</td><td align="center">E</td><td align="center">F</td><td align="center">G</td><td align="center">H</td><td align="center">I</td><td align="center">J</td><td align="center">K</td><td align="center">L</td><td align="center">M</td><td align="center">N</td><td align="center">O</td></tr><tr><td align="center">#x50</td><td align="center">P</td><td align="center">Q</td><td align="center">R</td><td align="center">S</td><td align="center">T</td><td align="center">U</td><td align="center">V</td><td align="center">W</td><td align="center">X</td><td align="center">Y</td><td align="center">Z</td><td align="center">[</td><td align="center">\</td><td align="center">]</td><td align="center">^</td><td align="center">_</td></tr><tr><td align="center">#x60</td><td align="center">`</td><td align="center">a</td><td align="center">b</td><td align="center">c</td><td align="center">d</td><td align="center">e</td><td align="center">f</td><td align="center">g</td><td align="center">h</td><td align="center">i</td><td align="center">j</td><td align="center">k</td><td align="center">l</td><td align="center">m</td><td align="center">n</td><td align="center">o</td></tr><tr><td align="center">#x70</td><td align="center">p</td><td align="center">q</td><td align="center">r</td><td align="center">s</td><td align="center">t</td><td align="center">u</td><td align="center">v</td><td align="center">w</td><td align="center">x</td><td align="center">y</td><td align="center">z</td><td align="center">{</td><td align="center">|</td><td align="center">}</td><td align="center">~</td><td align="center"> </td></tr><tr><td align="center">#x80</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">
   </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">#x90</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center">
   </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">#xA0</td><td align="center"> </td><td align="center">¡</td><td align="center">¢</td><td align="center">£</td><td align="center">¤</td><td align="center">¥</td><td align="center">¦</td><td align="center">§</td><td align="center">¨</td><td align="center">©</td><td align="center">ª</td><td align="center">«</td><td align="center">¬</td><td align="center">­</td><td align="center">®</td><td align="center">¯</td></tr><tr><td align="center">#xB0</td><td align="center">°</td><td align="center">±</td><td align="center">²</td><td align="center">³</td><td align="center">´</td><td align="center">µ</td><td align="center">¶</td><td align="center">·</td><td align="center">¸</td><td align="center">¹</td><td align="center">º</td><td align="center">»</td><td align="center">¼</td><td align="center">½</td><td align="center">¾</td><td align="center">¿</td></tr><tr><td align="center">#xC0</td><td align="center">À</td><td align="center">Á</td><td align="center">Â</td><td align="center">Ã</td><td align="center">Ä</td><td align="center">Å</td><td align="center">Æ</td><td align="center">Ç</td><td align="center">È</td><td align="center">É</td><td align="center">Ê</td><td align="center">Ë</td><td align="center">Ì</td><td align="center">Í</td><td align="center">Î</td><td align="center">Ï</td></tr><tr><td align="center">#xD0</td><td align="center">Ð</td><td align="center">Ñ</td><td align="center">Ò</td><td align="center">Ó</td><td align="center">Ô</td><td align="center">Õ</td><td align="center">Ö</td><td align="center">×</td><td align="center">Ø</td><td align="center">Ù</td><td align="center">Ú</td><td align="center">Û</td><td align="center">Ü</td><td align="center">Ý</td><td align="center">Þ</td><td align="center">ß</td></tr><tr><td align="center">#xE0</td><td align="center">à</td><td align="center">á</td><td align="center">â</td><td align="center">ã</td><td align="center">ä</td><td align="center">å</td><td align="center">æ</td><td align="center">ç</td><td align="center">è</td><td align="center">é</td><td align="center">ê</td><td align="center">ë</td><td align="center">ì</td><td align="center">í</td><td align="center">î</td><td align="center">ï</td></tr><tr><td align="center">#xF0</td><td align="center">ð</td><td align="center">ñ</td><td align="center">ò</td><td align="center">ó</td><td align="center">ô</td><td align="center">õ</td><td align="center">ö</td><td align="center">÷</td><td align="center">ø</td><td align="center">ù</td><td align="center">ú</td><td align="center">û</td><td align="center">ü</td><td align="center">ý</td><td align="center">þ</td><td align="center">ÿ</td></tr></tbody></table></div><p>
Here ** are control characters, not graphic
  characters.  (The characters left blank here cannot be represented in
  this character set).
</p></dd></dl></div>
<!--#endif-->
<!--#if defined(NEXTSTEP_CHS) && !defined(UNICODE)-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.next.com/" target="_top"><span class="strong"><strong>NeXTstep</strong></span></a> platforms
 only, and only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built <span class="strong"><strong>without</strong></span> compile-time flag
 <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a>.</span></span></span></dt><dd><p>More precisely, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses the <a href="http://www.next.com/" target="_top"><span class="strong"><strong>NeXTstep</strong></span></a> character set:
</p><div class="informaltable"><a id="next-charset-table"></a><table border="1"><colgroup><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center">#x0</th><th align="center">#x1</th><th align="center">#x2</th><th align="center">#x3</th><th align="center">#x4</th><th align="center">#x5</th><th align="center">#x6</th><th align="center">#x7</th><th align="center">#x8</th><th align="center">#x9</th><th align="center">#xA</th><th align="center">#xB</th><th align="center">#xC</th><th align="center">#xD</th><th align="center">#xE</th><th align="center">#xF</th></tr></thead><tbody><tr><td align="center">#x00</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x10</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td><td align="center">**</td></tr><tr><td align="center">#x20</td><td align="center"> </td><td align="center">!</td><td align="center">"</td><td align="center">#</td><td align="center">$</td><td align="center">%</td><td align="center">&amp;</td><td align="center">'</td><td align="center">(</td><td align="center">)</td><td align="center">*</td><td align="center">+</td><td align="center">,</td><td align="center">-</td><td align="center">.</td><td align="center">/</td></tr><tr><td align="center">#x30</td><td align="center">0</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">:</td><td align="center">;</td><td align="center">&lt;</td><td align="center">=</td><td align="center">&gt;</td><td align="center">?</td></tr><tr><td align="center">#x40</td><td align="center">@</td><td align="center">A</td><td align="center">B</td><td align="center">C</td><td align="center">D</td><td align="center">E</td><td align="center">F</td><td align="center">G</td><td align="center">H</td><td align="center">I</td><td align="center">J</td><td align="center">K</td><td align="center">L</td><td align="center">M</td><td align="center">N</td><td align="center">O</td></tr><tr><td align="center">#x50</td><td align="center">P</td><td align="center">Q</td><td align="center">R</td><td align="center">S</td><td align="center">T</td><td align="center">U</td><td align="center">V</td><td align="center">W</td><td align="center">X</td><td align="center">Y</td><td align="center">Z</td><td align="center">[</td><td align="center">\</td><td align="center">]</td><td align="center">^</td><td align="center">_</td></tr><tr><td align="center">#x60</td><td align="center">`</td><td align="center">a</td><td align="center">b</td><td align="center">c</td><td align="center">d</td><td align="center">e</td><td align="center">f</td><td align="center">g</td><td align="center">h</td><td align="center">i</td><td align="center">j</td><td align="center">k</td><td align="center">l</td><td align="center">m</td><td align="center">n</td><td align="center">o</td></tr><tr><td align="center">#x70</td><td align="center">p</td><td align="center">q</td><td align="center">r</td><td align="center">s</td><td align="center">t</td><td align="center">u</td><td align="center">v</td><td align="center">w</td><td align="center">x</td><td align="center">y</td><td align="center">z</td><td align="center">{</td><td align="center">|</td><td align="center">}</td><td align="center">~</td><td align="center"> </td></tr><tr><td align="center">#x80</td><td align="center"> </td><td align="center">À</td><td align="center">Á</td><td align="center">Â</td><td align="center">Ã</td><td align="center">Ä</td><td align="center">Å</td><td align="center">Ç</td><td align="center">È</td><td align="center">É</td><td align="center">Ê</td><td align="center">Ë</td><td align="center">Ì</td><td align="center">Í</td><td align="center">Î</td><td align="center">Ï</td></tr><tr><td align="center">#x90</td><td align="center">Ð</td><td align="center">Ñ</td><td align="center">Ò</td><td align="center">Ó</td><td align="center">Ô</td><td align="center">Õ</td><td align="center">Ö</td><td align="center">Ù</td><td align="center">Ú</td><td align="center">Û</td><td align="center">Ü</td><td align="center">Ý</td><td align="center">Þ</td><td align="center">µ</td><td align="center">×</td><td align="center">÷</td></tr><tr><td align="center">#xA0</td><td align="center">©</td><td align="center">¡</td><td align="center">¢</td><td align="center">£</td><td align="center">⁄</td><td align="center">¥</td><td align="center">ƒ</td><td align="center">§</td><td align="center">¤</td><td align="center">’</td><td align="center">“</td><td align="center">«</td><td align="center">‹</td><td align="center">›</td><td align="center">ﬁ</td><td align="center">ﬂ</td></tr><tr><td align="center">#xB0</td><td align="center">®</td><td align="center">–</td><td align="center">†</td><td align="center">‡</td><td align="center">·</td><td align="center">¦</td><td align="center">¶</td><td align="center">•</td><td align="center">‚</td><td align="center">„</td><td align="center">”</td><td align="center">»</td><td align="center">…</td><td align="center">‰</td><td align="center">¬</td><td align="center">¿</td></tr><tr><td align="center">#xC0</td><td align="center">¹</td><td align="center">ˋ</td><td align="center">´</td><td align="center">^</td><td align="center">˜</td><td align="center">¯</td><td align="center">˘</td><td align="center">˙</td><td align="center">¨</td><td align="center">²</td><td align="center">˚</td><td align="center">¸</td><td align="center">³</td><td align="center">˝</td><td align="center">˛</td><td align="center">ˇ</td></tr><tr><td align="center">#xD0</td><td align="center">—</td><td align="center">±</td><td align="center">¼</td><td align="center">½</td><td align="center">¾</td><td align="center">à</td><td align="center">á</td><td align="center">â</td><td align="center">ã</td><td align="center">ä</td><td align="center">å</td><td align="center">ç</td><td align="center">è</td><td align="center">é</td><td align="center">ê</td><td align="center">ë</td></tr><tr><td align="center">#xE0</td><td align="center">ì</td><td align="center">Æ</td><td align="center">í</td><td align="center">ª</td><td align="center">î</td><td align="center">ï</td><td align="center">ð</td><td align="center">ñ</td><td align="center">Ł</td><td align="center">Ø</td><td align="center">Œ</td><td align="center">º</td><td align="center">ò</td><td align="center">ó</td><td align="center">ô</td><td align="center">õ</td></tr><tr><td align="center">#xF0</td><td align="center">ö</td><td align="center">æ</td><td align="center">ù</td><td align="center">ú</td><td align="center">û</td><td align="center">ı</td><td align="center">ü</td><td align="center">ý</td><td align="center">ł</td><td align="center">ø</td><td align="center">œ</td><td align="center">ß</td><td align="center">þ</td><td align="center">ÿ</td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div><p>
Here ** are control characters, not graphic
  characters.  (The characters left blank here cannot be represented in
  this character set).
</p></dd></dl></div>
<!--#endif-->
<div class="table"><a id="standard-char-table"></a><p class="title"><b>Table 13.1. Standard characters</b></p><table summary="Standard characters" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\Space</span></td><td align="center"><span class="keycode">#x20</span></td></tr><tr><td align="center"><span class="keysym">#\Newline</span></td><td align="center"><span class="keycode">#x0A</span></td></tr></tbody></table></div><div class="table"><a id="semi-standard-char-table"></a><p class="title"><b>Table 13.2. Semi-standard characters</b></p><table summary="Semi-standard characters" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\Backspace</span></td><td align="center"><span class="keycode">#x08</span></td></tr><tr><td align="center"><span class="keysym">#\Tab</span></td><td align="center"><span class="keycode">#x09</span></td></tr><tr><td align="center"><span class="keysym">#\Linefeed</span></td><td align="center"><span class="keycode">#x0A</span></td></tr><tr><td align="center"><span class="keysym">#\Page</span></td><td align="center"><span class="keycode">#x0C</span></td></tr><tr><td align="center"><span class="keysym">#\Return</span></td><td align="center"><span class="keycode">#x0D</span></td></tr></tbody></table></div><p><span class="keysym">#\Newline</span> is the <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a>.</p><div class="table"><a id="extra-named-chars-table"></a><p class="title"><b>Table 13.3. Additional Named Characters</b></p><table summary="Additional Named Characters" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\Null</span></td><td align="center"><span class="keycode">#x00</span></td></tr><tr><td align="center"><span class="keysym">#\Bell</span></td><td align="center"><span class="keycode">#x07</span></td></tr><tr><td align="center"><span class="keysym">#\Escape</span></td><td align="center"><span class="keycode">#x1B</span></td></tr></tbody></table></div><div class="table"><a id="ctrl-char-table"></a><p class="title"><b>Table 13.4. Additional syntax for characters with code from
   <span class="keycode">#x00</span> to <span class="keycode">#x1F</span>:</b></p><table summary="Additional syntax for characters with code from&#10;   #x00 to #x1F:" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">character</th><th align="center">code</th></tr></thead><tbody><tr><td align="center"><span class="keysym">#\^@</span></td><td align="center"><span class="keycode">#x00</span></td></tr><tr><td align="center"><span class="keysym">#\^A</span> … <span class="keysym">#\^Z</span></td><td align="center"><span class="keycode">#x01</span> …
                   <span class="keycode">#x1A</span></td></tr><tr><td align="center"><span class="keysym">#\^[</span></td><td align="center"><span class="keycode">#x1B</span></td></tr><tr><td align="center"><span class="keysym">#\^\</span></td><td align="center"><span class="keycode">#x1C</span></td></tr><tr><td align="center"><span class="keysym">#\^]</span></td><td align="center"><span class="keycode">#x1D</span></td></tr><tr><td align="center"><span class="keysym">#\^^</span></td><td align="center"><span class="keycode">#x1E</span></td></tr><tr><td align="center"><span class="keysym">#\^_</span></td><td align="center"><span class="keycode">#x1F</span></td></tr></tbody></table></div><p>See also <a href="#chario" title="23.1.&#xA0;Characters">Section 23.1, “Characters”</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-script"></a>13.1. Character Scripts
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-2-1.html" target="_top">[CLHS-13.1.2.1]</a></h2></div></div></div><p>The only defined character script is the type <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>
 itself.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-attrib"></a>13.2. Character Attributes
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-3.html" target="_top">[CLHS-13.1.3]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#input-char">13.2.1. Input Characters</a></span></dt></dl></div><p>Characters have no implementation-defined or [<a href="#CLtL1" title="[CLtL1]"><abbr class="abbrev">CLtL1</abbr></a>] font and bit
 attributes.  All characters are simple characters.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="input-char"></a>13.2.1. Input Characters</h3></div></div></div><p>For backward compatibility, there is a class <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><code class="classname">SYS::INPUT-CHARACTER</code></a>
 representing either a character with font and bits, or a keystroke.
 The following functions work with objects of types <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>
 and <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><code class="classname">SYS::INPUT-CHARACTER</code></a>.
 Note that <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><code class="function">EQUAL</code></a> are equivalent to <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> on objects of type
 <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><code class="classname">SYS::INPUT-CHARACTER</code></a>.</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">EXT:CHAR-FONT-LIMIT</code> = 16</span></dt><dd>The system uses only font 0.
  </dd><dt><span class="term"><code class="constant">EXT:CHAR-BITS-LIMIT</code> = 16</span></dt><dd><p>Character bits:
    </p><div class="informaltable"><a id="bit-table"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">key</th><th align="center">value</th></tr></thead><tbody><tr><td align="center"><code class="constant">:CONTROL</code></td><td align="center"><a href="#char-bits" title="13.13.&#xA0;Obsolete Constants"><code class="constant">EXT:CHAR-CONTROL-BIT</code></a></td></tr><tr><td align="center"><code class="constant">:META</code></td><td align="center"><a href="#char-bits" title="13.13.&#xA0;Obsolete Constants"><code class="constant">EXT:CHAR-META-BIT</code></a></td></tr><tr><td align="center"><code class="constant">:SUPER</code></td><td align="center"><a href="#char-bits" title="13.13.&#xA0;Obsolete Constants"><code class="constant">EXT:CHAR-SUPER-BIT</code></a></td></tr><tr><td align="center"><code class="constant">:HYPER</code></td><td align="center"><a href="#char-bits" title="13.13.&#xA0;Obsolete Constants"><code class="constant">EXT:CHAR-HYPER-BIT</code></a></td></tr></tbody></table></div></dd><dt><span class="term"><code class="code">(<code class="function">EXT:CHAR-FONT</code>
  <em class="replaceable"><code>object</code></em>)</code></span></dt><dd>returns the font of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> or <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><code class="classname">SYS::INPUT-CHARACTER</code></a>.
  </dd><dt><span class="term"><code class="code">(<code class="function">EXT:CHAR-BITS</code>
  <em class="replaceable"><code>object</code></em>)</code></span></dt><dd>returns the bits of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> or <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><code class="classname">SYS::INPUT-CHARACTER</code></a>.
  </dd><dt><span class="term"><code class="code">(<code class="function">EXT:MAKE-CHAR</code>
     <em class="replaceable"><code>char</code></em> [<em class="replaceable"><code>bits</code></em>
            [<em class="replaceable"><code>font</code></em>]])</code></span></dt><dd>returns a new <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><code class="classname">SYS::INPUT-CHARACTER</code></a>, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if such a
 character cannot be created.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:CHAR-BIT</code>
  <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>name</code></em>)</code></span></dt><dd>returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if the named bit is set in <em class="replaceable"><code>object</code></em>,
  else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:SET-CHAR-BIT</code>
  <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>new-value</code></em>)</code></span></dt><dd>returns a new <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><code class="classname">SYS::INPUT-CHARACTER</code></a> with the named bit set or
   unset, depending on the <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a> <em class="replaceable"><code>new-value</code></em>.
 </dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><a href="#input-char" title="13.2.1.&#xA0;Input Characters"><code class="classname">SYS::INPUT-CHARACTER</code></a> is <span class="strong"><strong>not</strong></span> a subtype of
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>.</p></div>
<!--#ifdef KEYBOARD-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></span></dt><dd>The system itself uses this <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><code class="classname">SYS::INPUT-CHARACTER</code></a> type only to
 mention special keys and <span><strong class="keycap">Control</strong></span>/<span><strong class="keycap">Alternate</strong></span>/<span><strong class="keycap">Shift</strong></span> key status on return from
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> <a href="impnotes.html#with-kbd" class="olink"><code class="varname">EXT:*KEYBOARD-INPUT*</code></a>)</code>.</dd></dl></div>
<!--#endif-->
</div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="graph-char"></a>13.3. Graphic Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-1.html" target="_top">[CLHS-13.1.4.1]</a></h2></div></div></div><p>The <a href="http://www.lisp.org/HyperSpec/Body/glo_g.html#graphic" target="_top">graphic</a> characters are those <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> characters which are
 defined by the <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> standard, excluding the ranges
 <span class="keycode">U0000</span> … <span class="keycode">U001F</span> and
 <span class="keycode">U007F</span> … <span class="keycode">U009F</span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="alpha-char"></a>13.4. Alphabetic Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-2.html" target="_top">[CLHS-13.1.4.2]</a></h2></div></div></div><p>The alphabetic characters are those <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> characters which are
 defined as letters by the <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> standard, e.g., the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> characters
</p><div class="literallayout"><p>             ABCDEFGHIJKLMNOPQRSTUVWXYZ<br />
             abcdefghijklmnopqrstuvwxyz<br />
</p></div><p>
and the international alphabetic characters from the character set:
</p><div class="literallayout"><p>             ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜßáíóúñÑªºãõØøÀÃÕ etc.<br />
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-case"></a>13.5. Characters With Case
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-3.html" target="_top">[CLHS-13.1.4.3]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#char-invertcase">13.5.1. Function <code class="function">EXT:CHAR-INVERTCASE</code></a></span></dt><dt><span class="section"><a href="#char-ext">13.5.2. Case of Implementation-Defined Characters
  [CLHS-13.1.4.3.4]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="char-invertcase"></a>13.5.1. Function <a href="#char-invertcase" title="13.5.1.&#xA0;Function EXT:CHAR-INVERTCASE"><code class="function">EXT:CHAR-INVERTCASE</code></a></h3></div></div></div><p><code class="code">(<a href="#char-invertcase" title="13.5.1.&#xA0;Function EXT:CHAR-INVERTCASE"><code class="function">EXT:CHAR-INVERTCASE</code></a> <em class="replaceable"><code>char</code></em>)</code> returns the corresponding
 character in the other case for <a href="http://www.lisp.org/HyperSpec/Body/acc_charcm_schar.html" target="_top"><code class="function">CHAR</code></a>, i.e., <a href="http://www.lisp.org/HyperSpec/Body/fun_char-upca_har-downcase.html" target="_top"><code class="function">CHAR-UPCASE</code></a> for a
 lowercase character and <a href="http://www.lisp.org/HyperSpec/Body/fun_char-upca_har-downcase.html" target="_top"><code class="function">CHAR-DOWNCASE</code></a> for an uppercase character; for
 a character that does not have a case attribute, the argument is returned.
 See also <a href="#string-invertcase" title="16.1.3.&#xA0;Functions EXT:STRING-INVERTCASE&#10;  and EXT:NSTRING-INVERTCASE"><code class="function">EXT:STRING-INVERTCASE</code></a> and <a href="#string-invertcase" title="16.1.3.&#xA0;Functions EXT:STRING-INVERTCASE&#10;  and EXT:NSTRING-INVERTCASE"><code class="function">EXT:NSTRING-INVERTCASE</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="char-ext"></a>13.5.2. Case of Implementation-Defined Characters
  <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-3-4.html" target="_top">[CLHS-13.1.4.3.4]</a></h3></div></div></div><p>The characters with case are those <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> characters <em class="replaceable"><code>c</code></em>, for
 which the upper case mapping <em class="replaceable"><code>uc</code></em> and the lower case mapping <em class="replaceable"><code>lc</code></em>
 have the following properties:
</p><div class="itemizedlist"><ul type="disc"><li><em class="replaceable"><code>uc</code></em> and <em class="replaceable"><code>lc</code></em> are different</li><li><em class="replaceable"><code>c</code></em> is one of <em class="replaceable"><code>uc</code></em> and <em class="replaceable"><code>lc</code></em></li><li>the upper case mapping of <em class="replaceable"><code>uc</code></em> and of <em class="replaceable"><code>lc</code></em>
   is <em class="replaceable"><code>uc</code></em></li><li>the lower case mapping of <em class="replaceable"><code>uc</code></em> and of <em class="replaceable"><code>lc</code></em>
   is <em class="replaceable"><code>lc</code></em></li></ul></div><p>The titlecase property of <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> characters has no equivalent in
 <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="num-char"></a>13.6. Numeric Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-4.html" target="_top">[CLHS-13.1.4.4]</a></h2></div></div></div><p>The numeric characters are those <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> characters which are
 defined as digits by the <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> standard.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-ord"></a>13.7. Ordering of Characters
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-6.html" target="_top">[CLHS-13.1.6]</a></h2></div></div></div><p>The characters are ordered according to their <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> code.</p><p>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><code class="function">CHAR-EQUAL</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><code class="function">CHAR-NOT-EQUAL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><code class="function">CHAR-LESSP</code></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><code class="function">CHAR-GREATERP</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><code class="function">CHAR-NOT-GREATERP</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><code class="function">CHAR-NOT-LESSP</code></a> ignore bits and
 font attributes of their arguments.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clhs-newline"></a>13.8. Treatment of Newline during Input and Output
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-8.html" target="_top">[CLHS-13.1.8]</a></h2></div></div></div><p>Newlines are written according to the stream's <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a>, see the
 function <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-external-format.html" target="_top"><code class="function">STREAM-EXTERNAL-FORMAT</code></a> and the description of <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a>s,
 in particular, <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a>s.
 The default behavior is as follows:</p>
<!--#if defined(WIN32) || (defined(UNIX) && (O_BINARY != 0))-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span></span></dt><dd>When writing to a file, <span class="keysym">#\Newline</span> is converted to
 <span class="keycode">CR</span>/<span class="keycode">LF</span>. (This is the usual convention on <a href="http://www.freedos.org/" target="_top"><span class="strong"><strong>DOS</strong></span></a>.)
 For example, <span class="keysym">#\Return</span>+<span class="keysym">#\Newline</span> is written as <span class="keycode">CR</span>/<span class="keycode">CR</span>/<span class="keycode">LF</span>.
</dd></dl></div>
<!--#endif-->
<p>When reading from a file, <span class="keycode">CR</span>/<span class="keycode">LF</span> is converted to <span class="keysym">#\Newline</span>
 (the usual convention on <a href="http://www.freedos.org/" target="_top"><span class="strong"><strong>DOS</strong></span></a>), and <span class="keycode">CR</span> not followed by <span class="keycode">LF</span> is
 converted to <span class="keysym">#\Newline</span> as well (the usual conversion on MacOS, also used
 by some programs on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>).
 If you do not want this, i.e., if you really want to distinguish
 <span class="keycode">LF</span>, <span class="keycode">CR</span> and <span class="keycode">CR</span>/<span class="keycode">LF</span>, you have to resort to
 binary input (function <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a>).</p><p><b>Justification. </b><a href="http://www.unicode.org/reports/tr13/tr13-9.html" target="_top">Unicode
  Newline Guidelines</a> say: “<span class="quote">Even if you know which
  characters represents NLF on your particular platform, on input and in
  interpretation, treat CR, LF, CRLF, and NEL the same. Only on output do
  you need to distinguish between them.</span>”</p><p><b>Rationale. </b>In <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, <span class="keysym">#\Newline</span> is identical to <span class="keysym">#\Linefeed</span>
 (which is specifically permitted by [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] in section
 <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-7.html" target="_top">13.1.7 “<span class="quote">Character
   Names</span>”</a>).
 Consider a file containing exactly this string:
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_concatenate.html" target="_top"><code class="function">CONCATENATE</code></a> '<a href="http://www.lisp.org/HyperSpec/Body/any_string.html" target="_top"><code class="literal">STRING</code></a> "foo" (<a href="http://www.lisp.org/HyperSpec/Body/fun_string.html" target="_top"><code class="function">STRING</code></a> <span class="keysym">#\Linefeed</span>)
  "bar" (<a href="http://www.lisp.org/HyperSpec/Body/fun_string.html" target="_top"><code class="function">STRING</code></a> <span class="keysym">#\Return</span>) (<a href="http://www.lisp.org/HyperSpec/Body/fun_string.html" target="_top"><code class="function">STRING</code></a> <span class="keysym">#\Linefeed</span>))</code>
 Suppose we open it with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a> "foo" <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <code class="constant">:DOS</code>)</code>.
 What should <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><code class="function">READ-LINE</code></a> return?
 Right now, it returns <span class="returnvalue">"foo"</span>
 (the second <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><code class="function">READ-LINE</code></a> returns <span class="returnvalue">"bar"</span>
 and reaches <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>).
 If our i/o were “<span class="quote">faithful</span>”, <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><code class="function">READ-LINE</code></a> would have
 returned the string <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_concatenate.html" target="_top"><code class="function">CONCATENATE</code></a> '<a href="http://www.lisp.org/HyperSpec/Body/any_string.html" target="_top"><code class="literal">STRING</code></a> "foo" (<a href="http://www.lisp.org/HyperSpec/Body/fun_string.html" target="_top"><code class="function">STRING</code></a>
  <span class="keysym">#\Linefeed</span>) "bar")</code>, i.e., a string with an embedded <span class="keysym">#\Newline</span>
 between <span class="returnvalue">"foo"</span>
 and <span class="returnvalue">"bar"</span> (because a single <span class="keysym">#\Linefeed</span> is not a
 <span class="keysym">#\Newline</span> in the specified <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a>, it will not make <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><code class="function">READ-LINE</code></a> return,
 but it <span class="strong"><strong>is</strong></span> a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <span class="keysym">#\Newline</span>!)  Even though the specification for
 <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><code class="function">READ-LINE</code></a> does not explicitly forbids newlines inside the returned
 string, such behavior would be quite surprising, to say the least.
 Moreover, this line (with an embedded <span class="keysym">#\Newline</span>) would be written as two
 lines (when writing to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> of <code class="constant">:DOS</code>), because
 the embedded <span class="keysym">#\Newline</span> would be written as <span class="keycode">CR</span>+<span class="keycode">LF</span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-int"></a>13.9. Character Encodings
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-9.html" target="_top">[CLHS-13.1.9]</a></h2></div></div></div><p>The integer returned by <a href="http://www.lisp.org/HyperSpec/Body/fun_char-int.html" target="_top"><code class="function">CHAR-INT</code></a> is the same as the character's
 code (<a href="http://www.lisp.org/HyperSpec/Body/fun_char-code.html" target="_top"><code class="function">CHAR-CODE</code></a>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="script-ext"></a>13.10. Documentation
   of Implementation-Defined Scripts
   <a href="http://www.lisp.org/HyperSpec/Body/sec_13-1-10.html" target="_top">[CLHS-13.1.10]</a></h2></div></div></div><p>See <a href="#encoding" title="30.5.&#xA0;Encodings">Section 30.5, “Encodings”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-dict"></a>13.11. The Characters Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_chara_s_dictionary.html" target="_top">[CLHS-13.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#char-code">13.11.1. Function <code class="function">CHAR-CODE</code></a></span></dt><dt><span class="section"><a href="#base-char">13.11.2. Type <code class="classname">BASE-CHAR</code></a></span></dt><dt><span class="section"><a href="#char-width">13.11.3. Function <code class="function">EXT:CHAR-WIDTH</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="char-code"></a>13.11.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_char-code.html" target="_top"><code class="function">CHAR-CODE</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_char-code.html" target="_top"><code class="function">CHAR-CODE</code></a> takes values from <code class="literal">0</code> (inclusive) to
 <a href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html" target="_top"><code class="constant">CHAR-CODE-LIMIT</code></a> (exclusive), i.e., the implementation
 supports exactly <a href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html" target="_top"><code class="constant">CHAR-CODE-LIMIT</code></a> characters.</p><div class="table"><a id="char-code-limit-table"></a><p class="title"><b>Table 13.5. Number of characters</b></p><table summary="Number of characters" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">binaries built</th><th align="center"><span class="strong"><strong>without</strong></span> <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> support</th><th align="center"><span class="strong"><strong>with</strong></span> <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> support</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html" target="_top"><code class="constant">CHAR-CODE-LIMIT</code></a></td><td align="center">2<sup>8</sup> = 256</td><td align="center">17 * 2<sup>16</sup> = 1114112</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="base-char"></a>13.11.2. Type <a href="http://www.lisp.org/HyperSpec/Body/typ_base-char.html" target="_top"><code class="classname">BASE-CHAR</code></a></h3></div></div></div><p>The types <code class="classname">EXT:STRING-CHAR</code> (removed by
 <a href="http://www.lisp.org/HyperSpec/Issues/iss026.html" target="_top">CHARACTER-PROPOSAL:2</a>) and <a href="http://www.lisp.org/HyperSpec/Body/typ_base-char.html" target="_top"><code class="classname">BASE-CHAR</code></a> are equivalent to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="char-width"></a>13.11.3. Function <a href="#char-width" title="13.11.3.&#xA0;Function EXT:CHAR-WIDTH"><code class="function">EXT:CHAR-WIDTH</code></a></h3></div></div></div><p><code class="code">(<a href="#char-width" title="13.11.3.&#xA0;Function EXT:CHAR-WIDTH"><code class="function">EXT:CHAR-WIDTH</code></a> <em class="replaceable"><code>char</code></em>)</code> returns the number of screen
 columns occupied by <em class="replaceable"><code>char</code></em>.
 This is 0 for non-spacing characters
 (such as control characters and many combining characters),
 2 for double-width East Asian characters,
 and 1 for all other characters.
 See also function <a href="#string-width" title="16.1.2.&#xA0;Function EXT:STRING-WIDTH"><code class="function">EXT:STRING-WIDTH</code></a>.
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-platform-dep"></a>13.12. Platform-Dependent Characters</h2></div></div></div><p>The characters that are not <a href="http://www.lisp.org/HyperSpec/Body/glo_g.html#graphic" target="_top">graphic</a> chars and the space character
 have names:</p>
<!--#ifdef WIN32_CHARNAMES-->
<div class="table"><a id="dos-win32-chars-table"></a><p class="title"><b>Table 13.6. Additional characters (<span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span>)</b></p><table summary="Additional characters (Win32 platform only.)" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">code</th><th align="center">char</th></tr></thead><tbody><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x00)</code></td><td align="center"><span class="keysym">#\Null</span></td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x07)</code></td><td align="center"><span class="keysym">#\Bell</span></td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x08)</code></td><td align="center"><span class="keysym">#\Backspace</span></td><td align="center"><span class="keysym">#\Rubout</span></td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x09)</code></td><td align="center"><span class="keysym">#\Tab</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x0A)</code></td><td align="center"><span class="keysym">#\Newline</span></td><td align="center"><span class="keysym">#\Linefeed</span></td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x0B)</code></td><td align="center"><span class="keysym">#\Code11</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x0C)</code></td><td align="center"><span class="keysym">#\Page</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x0D)</code></td><td align="center"><span class="keysym">#\Return</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x1A)</code></td><td align="center"><span class="keysym">#\Code26</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x1B)</code></td><td align="center"><span class="keysym">#\Escape</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x20)</code></td><td align="center"><span class="keysym">#\Space</span></td><td class="auto-generated"> </td></tr></tbody></table></div>
<!--#endif-->
<!--#ifdef UNIX_CHARNAMES-->
<div class="table"><a id="unix-chars-table"></a><p class="title"><b>Table 13.7. Additional characters (<span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span>)</b></p><table summary="Additional characters (UNIX platform only.)" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">code</th><th align="center">char</th></tr></thead><tbody><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x00)</code></td><td align="center"><span class="keysym">#\Null</span></td><td align="center"><span class="keysym">#\Nul</span></td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x01)</code></td><td align="center"><span class="keysym">#\Soh</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x02)</code></td><td align="center"><span class="keysym">#\Stx</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x03)</code></td><td align="center"><span class="keysym">#\Etx</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x04)</code></td><td align="center"><span class="keysym">#\Eot</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x05)</code></td><td align="center"><span class="keysym">#\Enq</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x06)</code></td><td align="center"><span class="keysym">#\Ack</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x07)</code></td><td align="center"><span class="keysym">#\Bell</span></td><td align="center"><span class="keysym">#\Bel</span></td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x08)</code></td><td align="center"><span class="keysym">#\Backspace</span></td><td align="center"><span class="keysym">#\Bs</span></td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x09)</code></td><td align="center"><span class="keysym">#\Tab</span></td><td align="center"><span class="keysym">#\Ht</span></td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x0A)</code></td><td align="center"><span class="keysym">#\Newline</span></td><td align="center"><span class="keysym">#\Nl</span></td><td align="center"><span class="keysym">#\Linefeed</span></td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x0B)</code></td><td align="center"><span class="keysym">#\Vt</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x0C)</code></td><td align="center"><span class="keysym">#\Page</span></td><td align="center"><span class="keysym">#\Np</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x0D)</code></td><td align="center"><span class="keysym">#\Return</span></td><td align="center"><span class="keysym">#\Cr</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x0E)</code></td><td align="center"><span class="keysym">#\So</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x0F)</code></td><td align="center"><span class="keysym">#\Si</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x10)</code></td><td align="center"><span class="keysym">#\Dle</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x11)</code></td><td align="center"><span class="keysym">#\Dc1</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x12)</code></td><td align="center"><span class="keysym">#\Dc2</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x13)</code></td><td align="center"><span class="keysym">#\Dc3</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x14)</code></td><td align="center"><span class="keysym">#\Dc4</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x15)</code></td><td align="center"><span class="keysym">#\Nak</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x16)</code></td><td align="center"><span class="keysym">#\Syn</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x17)</code></td><td align="center"><span class="keysym">#\Etb</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x18)</code></td><td align="center"><span class="keysym">#\Can</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x19)</code></td><td align="center"><span class="keysym">#\Em</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x1A)</code></td><td align="center"><span class="keysym">#\Sub</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x1B)</code></td><td align="center"><span class="keysym">#\Escape</span></td><td align="center"><span class="keysym">#\Esc</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x1C)</code></td><td align="center"><span class="keysym">#\Fs</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x1D)</code></td><td align="center"><span class="keysym">#\Gs</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x1E)</code></td><td align="center"><span class="keysym">#\Rs</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x1F)</code></td><td align="center"><span class="keysym">#\Us</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x20)</code></td><td align="center"><span class="keysym">#\Space</span></td><td align="center"><span class="keysym">#\Sp</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> #x7F)</code></td><td align="center"><span class="keysym">#\Rubout</span></td><td align="center"><span class="keysym">#\Delete</span></td><td align="center"><span class="keysym">#\Del</span></td></tr></tbody></table></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="char-bits"></a>13.13. Obsolete Constants</h2></div></div></div><div class="table"><a id="char-bits-table"></a><p class="title"><b>Table 13.8. Character bit constants (obsolete)</b></p><table summary="Character bit constants (obsolete)" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">constant</th><th align="center">value</th></tr></thead><tbody><tr><td align="center"><a href="#char-bits" title="13.13.&#xA0;Obsolete Constants"><code class="constant">EXT:CHAR-CONTROL-BIT</code></a></td><td align="center">1</td></tr><tr><td align="center"><a href="#char-bits" title="13.13.&#xA0;Obsolete Constants"><code class="constant">EXT:CHAR-META-BIT</code></a></td><td align="center">2</td></tr><tr><td align="center"><a href="#char-bits" title="13.13.&#xA0;Obsolete Constants"><code class="constant">EXT:CHAR-SUPER-BIT</code></a></td><td align="center">4</td></tr><tr><td align="center"><a href="#char-bits" title="13.13.&#xA0;Obsolete Constants"><code class="constant">EXT:CHAR-HYPER-BIT</code></a></td><td align="center">8</td></tr></tbody></table></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="conses"></a>Chapter 14. Conses
   <a href="http://www.lisp.org/HyperSpec/Body/chap-14.html" target="_top">[CLHS-14]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#cons-dict">14.1. The Conses Dictionary
   [CLHS-14.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#map-func">14.1.1. Mapping Functions</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cons-dict"></a>14.1. The Conses Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_conses_dictionary.html" target="_top">[CLHS-14.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#map-func">14.1.1. Mapping Functions</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="map-func"></a>14.1.1. Mapping Functions</h3></div></div></div><p><a id="mapcap"></a><b>Function <a href="#mapcap"><code class="function">EXT:MAPCAP</code></a>. </b>The function <a href="#mapcap"><code class="function">EXT:MAPCAP</code></a> is like <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><code class="function">MAPCAN</code></a>, except that it
 concatenates the resulting lists with <a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><code class="function">APPEND</code></a> instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><code class="function">NCONC</code></a>:
</p><pre class="programlisting">(<a href="#mapcap"><code class="function">EXT:MAPCAP</code></a> <em class="replaceable"><code>function</code></em> <em class="replaceable"><code>x<sub>1</sub></code></em> ... <em class="replaceable"><code>x<sub>n</sub></code></em>) ≡
(<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> #'<a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><code class="function">APPEND</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><code class="function">MAPCAR</code></a> <em class="replaceable"><code>function</code></em> <em class="replaceable"><code>x<sub>1</sub></code></em> ... <em class="replaceable"><code>x<sub>n</sub></code></em>))</pre><p>
(Actually a bit more efficient that this would have been.)</p><p><a id="maplap"></a><b>Function <a href="#mapcap"><code class="function">EXT:MAPLAP</code></a>. </b>The function <a href="#mapcap"><code class="function">EXT:MAPLAP</code></a> is like <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><code class="function">MAPCON</code></a>, except that it
 concatenates the resulting lists with <a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><code class="function">APPEND</code></a> instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><code class="function">NCONC</code></a>:
 </p><pre class="programlisting">(<a href="#mapcap"><code class="function">EXT:MAPLAP</code></a> <em class="replaceable"><code>function</code></em> <em class="replaceable"><code>x<sub>1</sub></code></em> ... <em class="replaceable"><code>x<sub>n</sub></code></em>) ≡
(<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> #'<a href="http://www.lisp.org/HyperSpec/Body/fun_append.html" target="_top"><code class="function">APPEND</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><code class="function">MAPLIST</code></a> <em class="replaceable"><code>function</code></em> <em class="replaceable"><code>x<sub>1</sub></code></em> ... <em class="replaceable"><code>x<sub>n</sub></code></em>))</pre><p>
 (Actually a bit more efficient that this would have been.)</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="arrays"></a>Chapter 15. Arrays
   <a href="http://www.lisp.org/HyperSpec/Body/chap-15.html" target="_top">[CLHS-15]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#array-elts">15.1. Array Elements
   [CLHS-15.1.1]</a></span></dt><dt><span class="section"><a href="#array-dict">15.2. The Arrays Dictionary
   [CLHS-15.2]</a></span></dt></dl></div><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><code class="function">MAKE-ARRAY</code></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><code class="function">MAKE-ARRAY</code></a> can return specialized arrays for the <a href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html" target="_top"><code class="function">ARRAY-ELEMENT-TYPE</code></a>s
 <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 2)</code></span>,
 <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 4)</code></span>,
 <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 16)</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 32)</code></span>, and, of course, the required
 specializations <a href="http://www.lisp.org/HyperSpec/Body/typ_nil.html" target="_top"><code class="classname">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_bit.html" target="_top"><code class="classname">BIT</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="array-elts"></a>15.1. Array Elements
   <a href="http://www.lisp.org/HyperSpec/Body/sec_15-1-1.html" target="_top">[CLHS-15.1.1]</a></h2></div></div></div><div class="table"><a id="array-limit-table"></a><p class="title"><b>Table 15.1. Array limits</b></p><table summary="Array limits" border="1"><colgroup><col align="center" /><col align="center" /><col align="center" /></colgroup><thead><tr><th align="center">CPU type</th><th align="center">32-bit CPU</th><th align="center">64-bit CPU</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_array-rank-limit.html" target="_top"><code class="constant">ARRAY-RANK-LIMIT</code></a></td><td colspan="2" align="center">2<sup>12</sup> = 4096</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_array-_ension-limit.html" target="_top"><code class="constant">ARRAY-DIMENSION-LIMIT</code></a></td><td align="center">2<sup>24</sup>-1 = 16777215</td><td align="center">2<sup>32</sup>-1 = 4294967295</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_array-_l-size-limit.html" target="_top"><code class="constant">ARRAY-TOTAL-SIZE-LIMIT</code></a></td><td align="center">2<sup>24</sup>-1 = 16777215</td><td align="center">2<sup>32</sup>-1 = 4294967295</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="array-dict"></a>15.2. The Arrays Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_arrays_dictionary.html" target="_top">[CLHS-15.2]</a></h2></div></div></div><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html" target="_top"><code class="function">ADJUST-ARRAY</code></a> for displaced arrays. </b>An array to which another array is displaced should not be shrunk
 (using <a href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html" target="_top"><code class="function">ADJUST-ARRAY</code></a>) in such a way that the other array points into
 void space.  This cannot be checked at the time <a href="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html" target="_top"><code class="function">ADJUST-ARRAY</code></a> is
 called!</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="strings"></a>Chapter 16. Strings
   <a href="http://www.lisp.org/HyperSpec/Body/chap-16.html" target="_top">[CLHS-16]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#string-dict">16.1. The Strings Dictionary
   [CLHS-16.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#string-comp">16.1.1. String Comparison</a></span></dt><dt><span class="section"><a href="#string-width">16.1.2. Function <code class="function">EXT:STRING-WIDTH</code></a></span></dt><dt><span class="section"><a href="#string-invertcase">16.1.3. Functions <code class="function">EXT:STRING-INVERTCASE</code>
  and <code class="function">EXT:NSTRING-INVERTCASE</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="string-dict"></a>16.1. The Strings Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_strings_dictionary.html" target="_top">[CLHS-16.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#string-comp">16.1.1. String Comparison</a></span></dt><dt><span class="section"><a href="#string-width">16.1.2. Function <code class="function">EXT:STRING-WIDTH</code></a></span></dt><dt><span class="section"><a href="#string-invertcase">16.1.3. Functions <code class="function">EXT:STRING-INVERTCASE</code>
  and <code class="function">EXT:NSTRING-INVERTCASE</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="string-comp"></a>16.1.1. String Comparison</h3></div></div></div><p>String comparison (<a href="http://www.lisp.org/HyperSpec/Body/fun_stringeqc_ng-not-lessp.html" target="_top"><code class="function">STRING&lt;</code></a> and friends) is based on the
 function <a href="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html" target="_top"><code class="function">CHAR&lt;=</code></a> (see <a href="#char-ord" title="13.7.&#xA0;Ordering of Characters&#10;   [CLHS-13.1.6]">Section 13.7, “Ordering of Characters
   [CLHS-13.1.6]”</a>).
 Therefore diphthongs do not obey the usual national rules.  Example:
 <code class="literal">o &lt; oe &lt; z &lt; ö</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="string-width"></a>16.1.2. Function <a href="#string-width" title="16.1.2.&#xA0;Function EXT:STRING-WIDTH"><code class="function">EXT:STRING-WIDTH</code></a></h3></div></div></div><p><code class="code">(<a href="#string-width" title="16.1.2.&#xA0;Function EXT:STRING-WIDTH"><code class="function">EXT:STRING-WIDTH</code></a> <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <em class="replaceable"><code>start</code></em>
  <em class="replaceable"><code>end</code></em>)</code> returns the number of screen columns occupied by
 <em class="replaceable"><code>string</code></em>.  This is computed as the sum of all <a href="#char-width" title="13.11.3.&#xA0;Function EXT:CHAR-WIDTH"><code class="function">EXT:CHAR-WIDTH</code></a>s of all
 of the <em class="replaceable"><code>string</code></em>'s characters:</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_reduce.html" target="_top"><code class="function">REDUCE</code></a> #'<a href="http://www.lisp.org/HyperSpec/Body/fun_pl.html" target="_top"><code class="function">+</code></a> <em class="replaceable"><code>string</code></em> <code class="constant">:KEY</code> #'<a href="#char-width" title="13.11.3.&#xA0;Function EXT:CHAR-WIDTH"><code class="function">EXT:CHAR-WIDTH</code></a>)
</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="string-invertcase"></a>16.1.3. Functions <a href="#string-invertcase" title="16.1.3.&#xA0;Functions EXT:STRING-INVERTCASE&#10;  and EXT:NSTRING-INVERTCASE"><code class="function">EXT:STRING-INVERTCASE</code></a>
  and <a href="#string-invertcase" title="16.1.3.&#xA0;Functions EXT:STRING-INVERTCASE&#10;  and EXT:NSTRING-INVERTCASE"><code class="function">EXT:NSTRING-INVERTCASE</code></a></h3></div></div></div><p><code class="code">(<a href="#string-invertcase" title="16.1.3.&#xA0;Functions EXT:STRING-INVERTCASE&#10;  and EXT:NSTRING-INVERTCASE"><code class="function">EXT:STRING-INVERTCASE</code></a> <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <em class="replaceable"><code>start</code></em> <em class="replaceable"><code>end</code></em>)</code>
 and <code class="code">(<a href="#string-invertcase" title="16.1.3.&#xA0;Functions EXT:STRING-INVERTCASE&#10;  and EXT:NSTRING-INVERTCASE"><code class="function">EXT:NSTRING-INVERTCASE</code></a> <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <em class="replaceable"><code>start</code></em> <em class="replaceable"><code>end</code></em>)</code>
 are similar to <a href="http://www.lisp.org/HyperSpec/Body/fun_string-up_g-capitalize.html" target="_top"><code class="function">STRING-UPCASE</code></a> et al: they use <a href="#char-invertcase" title="13.5.1.&#xA0;Function EXT:CHAR-INVERTCASE"><code class="function">EXT:CHAR-INVERTCASE</code></a> to
 invert the case of each characters in the argument string region.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="sequences"></a>Chapter 17. Sequences
   <a href="http://www.lisp.org/HyperSpec/Body/chap-17.html" target="_top">[CLHS-17]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#seq-dict">17.1. The Sequences Dictionary
   [CLHS-17.3]</a></span></dt><dd><dl><dt><span class="section"><a href="#seq-macro-ext">17.1.1. Additional Macros</a></span></dt><dd><dl><dt><span class="section"><a href="#doseq">17.1.1.1. Macro <code class="function">EXT:DOSEQ</code></a></span></dt></dl></dd><dt><span class="section"><a href="#nreverse-nreconc">17.1.2. Functions <code class="function">NREVERSE</code> &amp; <code class="function">NRECONC</code></a></span></dt><dt><span class="section"><a href="#rem-del">17.1.3. Functions <code class="function">REMOVE</code> &amp; <code class="function">DELETE</code></a></span></dt><dt><span class="section"><a href="#sorting">17.1.4. Functions <code class="function">SORT</code> &amp; <code class="function">STABLE-SORT</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="seq-dict"></a>17.1. The Sequences Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_seque_s_dictionary.html" target="_top">[CLHS-17.3]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#seq-macro-ext">17.1.1. Additional Macros</a></span></dt><dd><dl><dt><span class="section"><a href="#doseq">17.1.1.1. Macro <code class="function">EXT:DOSEQ</code></a></span></dt></dl></dd><dt><span class="section"><a href="#nreverse-nreconc">17.1.2. Functions <code class="function">NREVERSE</code> &amp; <code class="function">NRECONC</code></a></span></dt><dt><span class="section"><a href="#rem-del">17.1.3. Functions <code class="function">REMOVE</code> &amp; <code class="function">DELETE</code></a></span></dt><dt><span class="section"><a href="#sorting">17.1.4. Functions <code class="function">SORT</code> &amp; <code class="function">STABLE-SORT</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="seq-macro-ext"></a>17.1.1. Additional Macros</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#doseq">17.1.1.1. Macro <code class="function">EXT:DOSEQ</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="doseq"></a>17.1.1.1. Macro <a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><code class="function">EXT:DOSEQ</code></a></h4></div></div></div><p>For iteration through a sequence, a macro <a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><code class="function">EXT:DOSEQ</code></a>,
 similar to <a href="http://www.lisp.org/HyperSpec/Body/mac_dolist.html" target="_top"><code class="function">DOLIST</code></a>, may be used instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_map.html" target="_top"><code class="function">MAP</code></a>:</p><pre class="programlisting">
(<a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><code class="function">EXT:DOSEQ</code></a> (<em class="replaceable"><code>variable</code></em> <em class="replaceable"><code>seqform</code></em> [<em class="replaceable"><code>resultform</code></em>])
  {<em class="replaceable"><code>declaration</code></em>}*
  {<em class="replaceable"><code>tag</code></em>|<em class="replaceable"><code>form</code></em>}*)
</pre><p><a href="#doseq" title="17.1.1.1.&#xA0;Macro EXT:DOSEQ"><code class="function">EXT:DOSEQ</code></a> forms are <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#iteration_form" target="_top">iteration form</a>s.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="nreverse-nreconc"></a>17.1.2. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><code class="function">NREVERSE</code></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html" target="_top"><code class="function">NRECONC</code></a></h3></div></div></div><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><code class="function">NREVERSE</code></a>. </b>The result of <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><code class="function">NREVERSE</code></a> is always <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> to the argument.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><code class="function">NREVERSE</code></a> on a <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> swaps pairs of elements.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html" target="_top"><code class="function">NREVERSE</code></a> on a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> swaps the first and the last
 element and reverses the list chaining between them.</p><p><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html" target="_top"><code class="function">NRECONC</code></a>. </b>The result of <a href="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html" target="_top"><code class="function">NRECONC</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> to the first argument unless it is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, in which case the result is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> to the second argument.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="rem-del"></a>17.1.3. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><code class="function">REMOVE</code></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><code class="function">DELETE</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><code class="function">REMOVE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><code class="function">REMOVE-IF</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><code class="function">REMOVE-IF-NOT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_remove-du_e-duplicates.html" target="_top"><code class="function">REMOVE-DUPLICATES</code></a> return
 their argument unchanged, if no element has to be removed.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><code class="function">DELETE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><code class="function">DELETE-IF</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><code class="function">DELETE-IF-NOT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_remove-du_e-duplicates.html" target="_top"><code class="function">DELETE-DUPLICATES</code></a>
 destructively modify their argument: If the argument is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>,
 the <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a> parts are modified.  If the argument is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> with
 fill pointer, the fill pointer is lowered and the remaining elements are
 compacted below the new fill pointer.</p><p><a id="count-ansi"></a><b>Variable <a href="#count-ansi"><code class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</code></a>. </b>Contrary to the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue <a href="http://www.lisp.org/HyperSpec/Issues/iss283.html" target="_top">RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER</a>,
 negative <code class="constant">:COUNT</code> keyword arguments are not allowed unless you set
 <a href="#count-ansi"><code class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</code></a> to a non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> value, in which case “<span class="quote">using a
 negative integer value is functionally equivalent to using a value of
 zero</span>”, as per the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="sorting"></a>17.1.4. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><code class="function">SORT</code></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><code class="function">STABLE-SORT</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><code class="function">SORT</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><code class="function">STABLE-SORT</code></a> accept two additional keyword arguments
 <code class="constant">:START</code> and <code class="constant">:END</code>:</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><code class="function">SORT</code></a> <em class="replaceable"><code>sequence</code></em> <em class="replaceable"><code>predicate</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:KEY</code> <code class="constant">:START</code> <code class="constant">:END</code>)
(<a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><code class="function">STABLE-SORT</code></a> <em class="replaceable"><code>sequence</code></em> <em class="replaceable"><code>predicate</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:KEY</code> <code class="constant">:START</code> <code class="constant">:END</code>)
</pre><p><a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><code class="function">SORT</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><code class="function">STABLE-SORT</code></a> are identical.
 They implement the mergesort algorithm.
 Worst case complexity: <code class="varname">O(n*log(n))</code> comparisons,
 where <em class="replaceable"><code>n</code></em> is the <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a> of the subsequence bounded
 by the <code class="constant">:START</code> and <code class="constant">:END</code> arguments.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="hash"></a>Chapter 18. Hash Tables
   <a href="http://www.lisp.org/HyperSpec/Body/chap-18.html" target="_top">[CLHS-18]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#hash-dict">18.1. The Hash Tables Dictionary
   [CLHS-18.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#make-hash">18.1.1. Function <code class="function">MAKE-HASH-TABLE</code></a></span></dt><dd><dl><dt><span class="section"><a href="#hashtable-gc-rehash">18.1.1.1. Interaction between <code class="classname">HASH-TABLE</code>s and garbage-collection</a></span></dt></dl></dd><dt><span class="section"><a href="#defhash">18.1.2. Macro <code class="function">EXT:DEFINE-HASH-TABLE-TEST</code></a></span></dt><dt><span class="section"><a href="#ht-test">18.1.3. Function <code class="function">HASH-TABLE-TEST</code></a></span></dt><dt><span class="section"><a href="#dohash">18.1.4. Macro <code class="function">EXT:DOHASH</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="hash-dict"></a>18.1. The Hash Tables Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_hash__s_dictionary.html" target="_top">[CLHS-18.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#make-hash">18.1.1. Function <code class="function">MAKE-HASH-TABLE</code></a></span></dt><dd><dl><dt><span class="section"><a href="#hashtable-gc-rehash">18.1.1.1. Interaction between <code class="classname">HASH-TABLE</code>s and garbage-collection</a></span></dt></dl></dd><dt><span class="section"><a href="#defhash">18.1.2. Macro <code class="function">EXT:DEFINE-HASH-TABLE-TEST</code></a></span></dt><dt><span class="section"><a href="#ht-test">18.1.3. Function <code class="function">HASH-TABLE-TEST</code></a></span></dt><dt><span class="section"><a href="#dohash">18.1.4. Macro <code class="function">EXT:DOHASH</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-hash"></a>18.1.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><code class="function">MAKE-HASH-TABLE</code></a></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#hashtable-gc-rehash">18.1.1.1. Interaction between <code class="classname">HASH-TABLE</code>s and garbage-collection</a></span></dt></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><code class="function">MAKE-HASH-TABLE</code></a> accepts two additional keyword arguments
 <code class="constant">:INITIAL-CONTENTS</code> and <code class="constant">:WEAK</code>:</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><code class="function">MAKE-HASH-TABLE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :TEST :INITIAL-CONTENTS :SIZE
                 :REHASH-SIZE :REHASH-THRESHOLD
                 :WARN-IF-NEEDS-REHASH-AFTER-GC :WEAK)
</pre><p>The <code class="constant">:TEST</code> argument can be, other than one of the symbols <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><code class="function">EQUAL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_equalp.html" target="_top"><code class="function">EQUALP</code></a>, one of the symbols <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:FASTHASH-EQ</code></a> and
 <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:STABLEHASH-EQ</code></a>.  Both of these tests use <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> as the comparison
 function; they differ in their performance characteristics.
 </p><div class="variablelist"><dl><dt><span class="term"><a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:FASTHASH-EQ</code></a></span></dt><dd>This uses the fastest possible hash function.
     Its drawback is that its hash codes become invalid at every <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion
     (except if all keys are <a href="#immediate-o">immediate object</a>s),
     thus requiring a reorganization of the hash table at the first
     access after each <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion. Especially when generational <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion is used,
     which leads to frequent small <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ions, large hash table with this test
     can lead to scalability problems.</dd><dt><span class="term"><a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:STABLEHASH-EQ</code></a></span></dt><dd>This uses a slower hash function that has the
     property that its hash codes for instances of the classes <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>,
     <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="classname">EXT:STANDARD-STABLEHASH</code></a> (subclass of <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a>) and
     <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="classname">EXT:STRUCTURE-STABLEHASH</code></a> (subclass of <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a>) are
     stable across GCs.
     This test can thus avoid the scalability problems if all keys,
     other than <a href="#immediate-o">immediate object</a>s, are <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>, <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="classname">EXT:STANDARD-STABLEHASH</code></a> or
     <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="classname">EXT:STRUCTURE-STABLEHASH</code></a> instances.</dd></dl></div><p>
 One can recommend to use <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:FASTHASH-EQ</code></a> for short-lived hash tables.
 For tables with a longer lifespan which can be big or accessed
 frequently, it is recommended to use <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:STABLEHASH-EQ</code></a>, and to modify the
 objects that are used as its keys to become instances of
 <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="classname">EXT:STANDARD-STABLEHASH</code></a> or <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="classname">EXT:STRUCTURE-STABLEHASH</code></a>.
</p><p>When the symbol <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> or the function <code class="literal">#'eq</code> is
used as a <code class="constant">:TEST</code> argument, the value of the variable
<code class="varname">CUSTOM:*EQ-HASHFUNCTION*</code> is used instead.
This value must be one of <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:FASTHASH-EQ</code></a>, <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:STABLEHASH-EQ</code></a>.</p><p>Similarly, the <code class="constant">:TEST</code> argument can also be one
 of the symbols <code class="constant">EXT:FASTHASH-EQL</code>,
 <code class="constant">EXT:STABLEHASH-EQL</code>,
 <code class="constant">EXT:FASTHASH-EQUAL</code>,
 <code class="constant">EXT:STABLEHASH-EQUAL</code>.
 The same remarks apply as for <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:FASTHASH-EQ</code></a> and <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:STABLEHASH-EQ</code></a>.
 When the symbol <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a> or the function <code class="literal">#'eql</code> is used
 as a <code class="constant">:TEST</code> argument, the value of the variable
 <code class="varname">CUSTOM:*EQL-HASHFUNCTION*</code> is used instead;
 this value must be one of <code class="constant">EXT:FASTHASH-EQL</code>,
 <code class="constant">EXT:STABLEHASH-EQL</code>.
 Similarly, when the symbol <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><code class="function">EQUAL</code></a> or the function <code class="literal">#'equal</code>
 is used as a <code class="constant">:TEST</code> argument, the value of the variable
 <code class="varname">CUSTOM:*EQUAL-HASHFUNCTION*</code> is used instead;
 this value must be one of <code class="constant">EXT:FASTHASH-EQUAL</code>,
 <code class="constant">EXT:STABLEHASH-EQUAL</code>.</p><p>The <code class="constant">:WARN-IF-NEEDS-REHASH-AFTER-GC</code> argument,
if true, causes a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a> to be <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed when an object is stored
into the table which will force table reorganizations at the first
access of the table after each <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion.
This keyword argument can be used to check whether <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:STABLEHASH-EQ</code></a>
should be preferred over <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:FASTHASH-EQ</code></a> for a particular table.
Use <code class="function">HASH-TABLE-WARN-IF-NEEDS-REHASH-AFTER-GC</code>
to check and <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> this parameter after the table has been created.</p><p>The <code class="constant">:INITIAL-CONTENTS</code> argument is an
 <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> that is used to initialize the new hash table.</p><p>The <code class="constant">:REHASH-THRESHOLD</code> argument is ignored.</p><p>The <code class="constant">:WEAK</code> argument can take the following values:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (default)</td></tr><tr><td><code class="constant">:KEY</code></td></tr><tr><td><code class="constant">:VALUE</code></td></tr><tr><td><code class="constant">:KEY-AND-VALUE</code></td></tr><tr><td><code class="constant">:KEY-OR-VALUE</code></td></tr></table><p>
and specifies whether the <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a> is <span class="emphasis"><em>weak</em></span>:
if the key, value, either or both are not accessible for the <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion
purposes, i.e., if they are only accessible via weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>s
and <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><code class="classname">EXT:WEAK-POINTER</code></a>s, it is <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed and removed from the weak
<a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>.</p><p>The <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>able predicate <code class="function">EXT:HASH-TABLE-WEAK-P</code>
checks whether the <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a> is weak.</p><p>Note that the only test that makes sense for weak hash tables are
<a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> and its variants <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:FASTHASH-EQ</code></a> and <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:STABLEHASH-EQ</code></a>.</p><p>Just like all other <a href="#weak" title="30.7.&#xA0;Weak Objects">weak objects</a>, weak
<a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>s cannot be printed readably.</p><p>See also <a href="#weak-ht" title="30.7.9.&#xA0;Weak Hash Tables">Section 30.7.9, “Weak Hash Tables”</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="hashtable-gc-rehash"></a>18.1.1.1. Interaction between <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>s and <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion</h4></div></div></div><p>When a hash table contains keys to be compared by identity - such
 as <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a>s in <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>s with the <a href="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html" target="_top"><code class="function">HASH-TABLE-TEST</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>;
 or <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a>es in tables which test with <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a>;
 or <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>s in tables which test with <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><code class="function">EQUAL</code></a>;
 or <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a> instances in tables which
 test with <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><code class="function">EQUAL</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_equalp.html" target="_top"><code class="function">EQUALP</code></a>;
 - the hash code will in general depend on the object's address in
 memory.  Therefore it will in general be invalidated after a <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion,
 and the hash table's internal structure must be recomputed at the next
 table access.</p><p>While <code class="constant">:WARN-IF-NEEDS-REHASH-AFTER-GC</code> can help
 checking the efficiency of a particular <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>, the variable
<strong class="first"><em class="firstterm"><a href="#hashtable-gc-rehash-warn"><code class="varname">CUSTOM:*WARN-ON-HASHTABLE-NEEDING-REHASH-AFTER-GC*</code></a>
 <a id="hashtable-gc-rehash-warn" class="indexterm"></a></em></strong>
 achieves the same effect for all <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>s in the system at once:
 when <a href="#hashtable-gc-rehash-warn"><code class="varname">CUSTOM:*WARN-ON-HASHTABLE-NEEDING-REHASH-AFTER-GC*</code></a> is true and a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a> needs to be rehashed after a <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion, a warning is
 issued that shows the inefficient <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>.</p><p>What can be done to avoid the inefficiencies detected by these warnings?
 </p><div class="orderedlist"><ol type="1"><li>In many cases you can solve the problem
    by using the <code class="function">STABLEHASH</code> variant of the hash
    test.</li><li>In other cases, namely <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a> or
    <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a> instances, you can solve the problem by making
    the key object classes inherit from <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="classname">EXT:STANDARD-STABLEHASH</code></a> or
    <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="classname">EXT:STRUCTURE-STABLEHASH</code></a>, respectively.</li><li>In the remaining cases, you should store a hash key
    inside the object, of which you can guarantee uniqueness through
    your application (for example the ID of an object in a database, or
    the serial number of an object), and use this key as hash key
    instead of the original object.</li></ol></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="defhash"></a>18.1.2. Macro <a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><code class="function">EXT:DEFINE-HASH-TABLE-TEST</code></a></h3></div></div></div><p>You can define a new hash table test using the macro
 <a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><code class="function">EXT:DEFINE-HASH-TABLE-TEST</code></a>: <code class="code">(<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><code class="function">EXT:DEFINE-HASH-TABLE-TEST</code></a> test-name <em class="replaceable"><code>test-function</code></em> <em class="replaceable"><code>hash-function</code></em>)</code>, after
 which <em class="replaceable"><code>test-name</code></em> can be passed as the
 <code class="constant">:TEST</code> argument to <a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><code class="function">MAKE-HASH-TABLE</code></a>.
 E.g.: </p><pre class="programlisting">(<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><code class="function">EXT:DEFINE-HASH-TABLE-TEST</code></a> string <a href="http://www.lisp.org/HyperSpec/Body/fun_stringeqc_ng-not-lessp.html" target="_top"><code class="function">STRING=</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><code class="function">SXHASH</code></a>)
 (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html" target="_top"><code class="function">MAKE-HASH-TABLE</code></a> :test 'string)</pre><p>
(which is not too useful because it is equivalent to an <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><code class="function">EQUAL</code></a>
<a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a> but less efficient).</p><p>The fundamental requirement is that the <em class="replaceable"><code>test-function</code></em> and <em class="replaceable"><code>hash-function</code></em> are
 consistent: </p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a> <em class="replaceable"><code>test-function</code></em> <em class="replaceable"><code>x</code></em> <em class="replaceable"><code>y</code></em>) ⇒
(<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><code class="function">=</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a> <em class="replaceable"><code>hash-function</code></em> <em class="replaceable"><code>x</code></em>) (<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a> <em class="replaceable"><code>hash-function</code></em> <em class="replaceable"><code>y</code></em>))
 </pre><p>
 This means that the following definition: </p><pre class="programlisting">
(<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><code class="function">EXT:DEFINE-HASH-TABLE-TEST</code></a> number <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><code class="function">=</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><code class="function">SXHASH</code></a>) <em class="lineannotation"><span class="lineannotation">; broken!</span></em>
 </pre><p>
 is <span class="strong"><strong>not</strong></span> correct because <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><code class="function">=</code></a> 1 1d0)</code> is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> but <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><code class="function">=</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><code class="function">SXHASH</code></a> 1) (<a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><code class="function">SXHASH</code></a> 1d0))</code>
 is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.  The correct way is, e.g.: </p><pre class="programlisting">
(<a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><code class="function">EXT:DEFINE-HASH-TABLE-TEST</code></a> number <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><code class="function">=</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><code class="function">LAMBDA</code></a> (x) (<a href="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html" target="_top"><code class="function">SXHASH</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><code class="function">COERCE</code></a> x '<a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a>))))
 </pre><p>
 (note that <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><code class="function">COERCE</code></a> <em class="replaceable"><code>x</code></em> <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a>)</code> does <span class="strong"><strong>not</strong></span>
 cons up <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> objects while <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><code class="function">COERCE</code></a> <em class="replaceable"><code>x</code></em>
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a>)</code> does).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ht-test"></a>18.1.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html" target="_top"><code class="function">HASH-TABLE-TEST</code></a></h3></div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html" target="_top"><code class="function">HASH-TABLE-TEST</code></a> returns either one of <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:FASTHASH-EQ</code></a>,
 <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="constant">EXT:STABLEHASH-EQ</code></a>, <code class="constant">EXT:FASTHASH-EQL</code>,
 <code class="constant">EXT:STABLEHASH-EQL</code>,
 <code class="constant">EXT:FASTHASH-EQUAL</code>,
 <code class="constant">EXT:STABLEHASH-EQUAL</code>, <a href="http://www.lisp.org/HyperSpec/Body/fun_equalp.html" target="_top"><code class="function">EQUALP</code></a> (but not <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a>
 nor <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><code class="function">EQUAL</code></a> anymore), or, for <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>s
 created with a user-defined <a href="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html" target="_top"><code class="function">HASH-TABLE-TEST</code></a> (see macro <a href="#defhash" title="18.1.2.&#xA0;Macro EXT:DEFINE-HASH-TABLE-TEST"><code class="function">EXT:DEFINE-HASH-TABLE-TEST</code></a>),
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a> cell <span class="data"><code class="literal">(<em class="replaceable"><code>test-function</code></em> . <em class="replaceable"><code>hash-function</code></em>)</code></span>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dohash"></a>18.1.4. Macro <a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><code class="function">EXT:DOHASH</code></a></h3></div></div></div><p>For iteration through a <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>, a macro <a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><code class="function">EXT:DOHASH</code></a>,
 similar to <a href="http://www.lisp.org/HyperSpec/Body/mac_dolist.html" target="_top"><code class="function">DOLIST</code></a>, can be used instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_maphash.html" target="_top"><code class="function">MAPHASH</code></a>:</p><pre class="programlisting">
(<a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><code class="function">EXT:DOHASH</code></a> (<em class="replaceable"><code>key-var</code></em> <em class="replaceable"><code>value-var</code></em> <em class="replaceable"><code>hash-table-form</code></em> [<em class="replaceable"><code>resultform</code></em>])
  {<em class="replaceable"><code>declaration</code></em>}*
  {<em class="replaceable"><code>tag</code></em>|<em class="replaceable"><code>form</code></em>}*)
</pre><p><a href="#dohash" title="18.1.4.&#xA0;Macro EXT:DOHASH"><code class="function">EXT:DOHASH</code></a> forms are <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#iteration_form" target="_top">iteration form</a>s.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="filenames"></a>Chapter 19. Filenames
   <a href="http://www.lisp.org/HyperSpec/Body/chap-19.html" target="_top">[CLHS-19]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#path-components">19.1. Pathname Components
   [CLHS-19.2.1]</a></span></dt><dd><dl><dt><span class="section"><a href="#path-dir-canon">19.1.1. Directory canonicalization</a></span></dt><dt><span class="section"><a href="#path-platform-specific">19.1.2. Platform-specific issues</a></span></dt></dl></dd><dt><span class="section"><a href="#unspecific">19.2. :UNSPECIFIC as a Component Value
 [CLHS-19.2.2.2.3]</a></span></dt><dt><span class="section"><a href="#path-external-notation">19.3. External notation</a></span></dt><dt><span class="section"><a href="#log-path">19.4. Logical Pathnames
  [CLHS-19.3]</a></span></dt><dt><span class="section"><a href="#filename-dict">19.5. The Filenames Dictionary
   [CLHS-19.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#translate-pathname">19.5.1. Function <code class="function">TRANSLATE-PATHNAME</code></a></span></dt><dt><span class="section"><a href="#translate-logpath">19.5.2. Function <code class="function">TRANSLATE-LOGICAL-PATHNAME</code></a></span></dt><dt><span class="section"><a href="#parsename">19.5.3. Function <code class="function">PARSE-NAMESTRING</code></a></span></dt><dt><span class="section"><a href="#pathmerge">19.5.4. Function <code class="function">MERGE-PATHNAMES</code></a></span></dt><dt><span class="section"><a href="#load-lpt">19.5.5. Function <code class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</code></a></span></dt><dt><span class="section"><a href="#absolute-pathname">19.5.6. Function <code class="function">EXT:ABSOLUTE-PATHNAME</code></a></span></dt></dl></dd></dl></div><p>For most operations, pathnames denoting files and pathnames
 denoting directories cannot be used interchangeably.</p><div class="variablelist">
<!--#if defined(PATHNAME_UNIX)-->
<dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></span></dt><dd>For example, <code class="filename">#P"foo/bar"</code> denotes
 the file <code class="filename">#P"bar"</code> in the directory <code class="filename">#P"foo"</code>,
 while <code class="filename">#P"foo/bar/"</code> denotes the subdirectory
 <code class="filename">#P"bar"</code> of the directory <code class="filename">#P"foo"</code>.
</dd>
<!--#endif-->
<!--#ifdef PATHNAME_WIN32-->
<dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span></span></dt><dd>For example, <code class="filename">#P"foo\\bar"</code>
 denotes the file <code class="filename">#P"bar"</code> in the directory <code class="filename">#P"foo"</code>,
 while <code class="filename">#P"foo\\bar\\"</code> denotes the subdirectory
 <code class="filename">#P"bar"</code> of the directory <code class="filename">#P"foo"</code>.
</dd>
<!--#endif-->
<!--#if defined(PATHNAME_WIN32) || defined(UNIX_CYGWIN32)-->
<dt><a id="device-prefix"></a><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>
   and <a href="http://cygwin.com/" target="_top"><span class="strong"><strong>Cygwin</strong></span></a> platforms only.</span></span></span></dt><dd>User variable <strong class="first"><em class="firstterm"><a href="#device-prefix"><code class="varname">CUSTOM:*DEVICE-PREFIX*</code></a></em></strong>
  controls translation between <a href="http://cygwin.com/" target="_top"><span class="strong"><strong>Cygwin</strong></span></a> pathnames
  (e.g., <code class="filename">#P"/cygdrive/c/gnu/clisp/"</code>) and native
  <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> pathnames (e.g., <code class="filename">#P"C:\\gnu\\clisp\\"</code>)
  When it is set to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, no translations occur and the <a href="http://cygwin.com/" target="_top"><span class="strong"><strong>Cygwin</strong></span></a> port
  will not understand the native paths and the native <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> port will
  not understand the <a href="http://cygwin.com/" target="_top"><span class="strong"><strong>Cygwin</strong></span></a> paths.
  When its value is a string, it is used by <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><code class="function">PARSE-NAMESTRING</code></a> to
  translate into the appropriate platform-specific representation,
  so that on <a href="http://cygwin.com/" target="_top"><span class="strong"><strong>Cygwin</strong></span></a>,
  <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><code class="function">PARSE-NAMESTRING</code></a> "c:/gnu/clisp/")</code>
  returns <code class="filename">#P"/cygdrive/c/gnu/clisp/"</code>,
  while on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>
  <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><code class="function">PARSE-NAMESTRING</code></a> "/cygdrive/c/gnu/clisp/")</code>
  returns <code class="filename">#P"C:/gnu/clisp/"</code>.
  The initial value is <code class="literal">"cygdrive"</code>, you should edit
  <a href="#config-lisp"><code class="filename">config.lisp</code></a> to change it.</dd>
<!--#endif-->
</dl></div><p>This is especially important for the
 <a href="#dir" title="Function EXT:DIR">directory-handling functions</a>.</p><div class="table"><a id="min-filename-syntax-table"></a><p class="title"><b>Table 19.1. The minimum filename syntax that may be used portably</b></p><table summary="The minimum filename syntax that may be used portably" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left">pathname</th><th align="left">meaning</th></tr></thead><tbody><tr><td align="left"><code class="filename">"xxx"</code></td><td align="left">for a file with name <em class="replaceable"><code>xxx</code></em></td></tr><tr><td align="left"><code class="filename">"xxx.yy"</code></td><td align="left">for a file with name <em class="replaceable"><code>xxx</code></em> and type
   <em class="replaceable"><code>yy</code></em></td></tr><tr><td align="left"><code class="filename">".yy"</code></td><td align="left">for a pathname with type <em class="replaceable"><code>yy</code></em> and no
    name or with name <em class="replaceable"><code>.yy</code></em> and no type,
    depending on the value of <a href="#name-type-split"><code class="varname">CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</code></a>.</td></tr></tbody></table></div><p>Hereby <em class="replaceable"><code>xxx</code></em> denotes 1 to 8 characters,
 and <em class="replaceable"><code>yy</code></em> denotes 1 to 3 characters, each of
 which being either an alphanumeric character or the underscore
 <span class="keysym">#\_</span>.  Other properties of pathname syntax vary between
 operating systems.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="path-components"></a>19.1. Pathname Components
   <a href="http://www.lisp.org/HyperSpec/Body/sec_19-2-1.html" target="_top">[CLHS-19.2.1]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#path-dir-canon">19.1.1. Directory canonicalization</a></span></dt><dt><span class="section"><a href="#path-platform-specific">19.1.2. Platform-specific issues</a></span></dt></dl></div><p>When a pathname is to be fully specified (no wildcards), that
 means that no <code class="constant">:WILD</code>, <code class="constant">:WILD-INFERIORS</code> is allowed, no wildcard
 characters are allowed in the strings, and <em class="replaceable"><code>name</code></em> <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> may not
 be allowed either.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="path-dir-canon"></a>19.1.1. Directory canonicalization</h3></div></div></div><p>As permitted by the <a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><code class="function">MAKE-PATHNAME</code></a> specification, the <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a>
 directory component is canonicalized when the pathname is constructed:
 </p><div class="orderedlist"><ol type="1"><li><code class="filename">""</code> and
    <code class="filename">"."</code> are removed</li><li><code class="filename">".."</code>,
    <code class="filename">"*"</code>, and <code class="filename">"**"</code> are converted
    to <code class="constant">:UP</code>, <code class="constant">:WILD</code> and <code class="constant">:WILD-INFERIORS</code>,
    respectively</li><li>patterns <code class="filename">foo/../</code> are
    collapsed</li></ol></div><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="path-platform-specific"></a>19.1.2. Platform-specific issues</h3></div></div></div>
<!--#ifdef PATHNAME_UNIX-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></span></dt><dd><div class="variablelist"><p class="title"><b>Pathname components</b></p><dl><dt><span class="term"><em class="replaceable"><code>host</code></em></span></dt><dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></dd><dt><span class="term"><em class="replaceable"><code>device</code></em></span></dt><dd>always <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></dd><dt><span class="term"><code class="code"><em class="replaceable"><code>directory</code></em> = (<em class="replaceable"><code>startpoint</code></em>
  . <em class="replaceable"><code>subdirs</code></em>)</code></span></dt><dd><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">element</th><th align="center">values</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center"><em class="replaceable"><code>startpoint</code></em></td><td align="center"><code class="constant">:RELATIVE</code> | <code class="constant">:ABSOLUTE</code></td><td align="center"> </td></tr><tr><td align="center"><em class="replaceable"><code>subdirs</code></em></td><td align="center"><span class="data"><code class="literal">()</code></span> | <span class="data"><code class="literal">(<em class="replaceable"><code>subdir</code></em>
      . <em class="replaceable"><code>subdirs</code></em>)</code></span></td><td align="center"> </td></tr><tr><td align="center"><em class="replaceable"><code>subdir</code></em></td><td align="center"><code class="constant">:WILD-INFERIORS</code></td><td align="center"><code class="filename">**</code> or
     <code class="filename">...</code>, all subdirectories</td></tr><tr><td align="center"><em class="replaceable"><code>subdir</code></em></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><code class="classname">SIMPLE-STRING</code></a>,
     may contain wildcard characters <code class="filename">"?"</code> and
  <code class="filename">"*"</code> (may also be specified as <code class="constant">:WILD</code>)</td><td align="center"> </td></tr></tbody></table></div></dd><dt><span class="term"><em class="replaceable"><code>name</code></em><br /></span><span class="term"><em class="replaceable"><code>type</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><code class="classname">SIMPLE-STRING</code></a>, may contain wildcard characters <code class="filename">"?"</code> and
  <code class="filename">"*"</code> (may also be specified as <code class="constant">:WILD</code>)
 </dd><dt><span class="term"><em class="replaceable"><code>version</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or <code class="constant">:WILD</code> or <code class="constant">:NEWEST</code>
    (after merging the defaults)</dd></dl></div><p>A <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> filename is <a href="#name-type-split">split into name and type</a>.</p><div class="informaltable"><a id="unix-filename-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">External notation:</td><td align="center">
  <code class="filename">"server:sub1.typ/sub2.typ/name.typ"</code></td></tr><tr><td align="center">using defaults:</td><td align="center">
  <code class="filename">       "sub1.typ/sub2.typ/name.typ"</code></td></tr><tr><td align="center">or</td><td align="center">
  <code class="filename">                         "name.typ"</code></td></tr><tr><td align="center">or</td><td align="center">
  <code class="filename">       "sub1.typ/**/sub3.typ/x*.lisp"</code></td></tr><tr><td align="center">or similar.</td><td align="center"> </td></tr></tbody></table></div></dd></dl></div>
<!--#endif-->
<!--#if defined(PATHNAME_WIN32)-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span></span></dt><dd><div class="variablelist"><p class="title"><b>Pathname components</b></p><dl><dt><span class="term"><em class="replaceable"><code>host</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><code class="classname">SIMPLE-STRING</code></a>, wildcard characters may
   occur but do not act as wildcards</dd><dt><span class="term"><em class="replaceable"><code>device</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or <code class="constant">:WILD</code> or <code class="filename">A</code>|...|<code class="filename">Z</code>
 </dd><dt><span class="term"><code class="code"><em class="replaceable"><code>directory</code></em> = (<em class="replaceable"><code>startpoint</code></em>
  . <em class="replaceable"><code>subdirs</code></em>)</code></span></dt><dd><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">element</th><th align="center">values</th><th align="center">meaning</th></tr></thead><tbody><tr><td align="center"><em class="replaceable"><code>startpoint</code></em></td><td align="center"><code class="constant">:RELATIVE</code> | <code class="constant">:ABSOLUTE</code></td><td align="center"> </td></tr><tr><td align="center"><em class="replaceable"><code>subdirs</code></em></td><td align="center"><span class="data"><code class="literal">()</code></span> | <span class="data"><code class="literal">(<em class="replaceable"><code>subdir</code></em>
      . <em class="replaceable"><code>subdirs</code></em>)</code></span></td><td align="center"> </td></tr><tr><td align="center"><em class="replaceable"><code>subdir</code></em></td><td align="center"><code class="constant">:WILD-INFERIORS</code></td><td align="center"><code class="filename">**</code> or
     <code class="filename">...</code>, all subdirectories</td></tr><tr><td align="center"><em class="replaceable"><code>subdir</code></em></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><code class="classname">SIMPLE-STRING</code></a>,
     may contain wildcard characters <code class="filename">"?"</code> and
  <code class="filename">"*"</code> (may also be specified as <code class="constant">:WILD</code>)</td><td align="center"> </td></tr></tbody></table></div></dd><dt><span class="term"><em class="replaceable"><code>name</code></em><br /></span><span class="term"><em class="replaceable"><code>type</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><code class="classname">SIMPLE-STRING</code></a>, may contain wildcard characters <code class="filename">"?"</code> and
  <code class="filename">"*"</code> (may also be specified as <code class="constant">:WILD</code>)
 </dd><dt><span class="term"><em class="replaceable"><code>version</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or <code class="constant">:WILD</code> or <code class="constant">:NEWEST</code>
    (after merging the defaults)</dd></dl></div><p>If <em class="replaceable"><code>host</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <em class="replaceable"><code>device</code></em> must be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p><p>A <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> filename is <a href="#name-type-split">split into name and type</a>.</p><div class="informaltable"><a id="win32-filename-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">External notation:</td><td align="center"><code class="filename">"A:\sub1.typ\sub2.typ\name.typ"</code></td></tr><tr><td align="center">using defaults:</td><td align="center"><code class="filename">  "\sub1.typ\sub2.typ\name.typ"</code></td></tr><tr><td align="center">or</td><td align="center"><code class="filename">                     "name.typ"</code></td></tr><tr><td align="center">or</td><td align="center"><code class="filename">"*:\sub1.typ\**\sub3.typ\x*.lisp"</code></td></tr><tr><td align="center">or similar.</td><td align="center"> </td></tr></tbody></table></div><p>Instead of <code class="filename">"\"</code> one may use <code class="filename">"/"</code>, as usual for DOS
 calls.</p><p>If <em class="replaceable"><code>host</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and the <em class="replaceable"><code>directory</code></em>'s <em class="replaceable"><code>startpoint</code></em>
 is not <code class="constant">:ABSOLUTE</code>, <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><code class="function">PARSE-NAMESTRING</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><code class="function">NAMESTRING</code></a>
 <em class="replaceable"><code>pathname</code></em>))</code> will not be the same as <em class="replaceable"><code>pathname</code></em>.</p></dd></dl></div>
<!--#endif-->
<!--#ifdef PATHNAME_NOEXT-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></span></dt><dd>The wildcard characters: <code class="filename">"*"</code> matches any
 sequence of characters, <code class="filename">"?"</code> matches any one character.
 </dd></dl></div>
<!--#endif-->
<!--#ifdef PATHNAME_NOEXT-->
<p><a id="name-type-split"></a><b>Name/type namestring split. </b></p><div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></span></dt><dd><p>A filename is split into name and type according to the
 following rule: </p><div class="itemizedlist"><ul type="disc"><li>if there is no <code class="filename">"."</code> in the filename, then the
   <em class="replaceable"><code>name</code></em> is everything, <em class="replaceable"><code>type</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>;</li><li>if there is a <code class="filename">"."</code>, then <em class="replaceable"><code>name</code></em> is the part
   before and <em class="replaceable"><code>type</code></em> the part after the last dot.</li><li><p>if the only <code class="filename">"."</code> is the first character, then
   the behavior depends on the value of the user variable
    <strong class="first"><em class="firstterm"><a href="#name-type-split"><code class="varname">CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</code></a></em></strong>
   which can be either
   </p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:TYPE</code></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> <em class="replaceable"><code>name</code></em>, everything after the <code class="filename">"."</code>
     is the <em class="replaceable"><code>type</code></em>; or</dd><dt><span class="term"><code class="constant">:NAME</code></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> <em class="replaceable"><code>type</code></em>, everything is the
     <em class="replaceable"><code>name</code></em></dd></dl></div><p>
   </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Due to this name/type splitting rule, there are pathnames
   that cannot result from <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><code class="function">PARSE-NAMESTRING</code></a>.
   To get a pathname whose type contains a dot or whose name contains a
   dot and whose type is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><code class="function">MAKE-PATHNAME</code></a> must be used.  Example:
   <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><code class="function">MAKE-PATHNAME</code></a> <code class="constant">:NAME</code> "foo.bar")</code>.</p></div></dd></dl></div>
<!--#endif-->
</div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="unspecific"></a>19.2. :UNSPECIFIC as a Component Value
 <a href="http://www.lisp.org/HyperSpec/Body/sec_19-2-2-2-3.html" target="_top">[CLHS-19.2.2.2.3]</a></h2></div></div></div><p>The symbol <code class="constant">:UNSPECIFIC</code> is not permitted as a
 pathname component for any slot of any pathname.
 It is also illegal to pass it as an argument to <a href="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html" target="_top"><code class="function">MAKE-PATHNAME</code></a>,
 although it <span class="strong"><strong>is</strong></span> a legal argument (treated as <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>)
 to <a href="http://www.lisp.org/HyperSpec/Body/fun_user-homedir-pathname.html" target="_top"><code class="function">USER-HOMEDIR-PATHNAME</code></a>.</p><p>The only use for <code class="constant">:UNSPECIFIC</code> is that it is
 returned by <a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-_name-version.html" target="_top"><code class="function">PATHNAME-DEVICE</code></a> for <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><code class="classname">LOGICAL-PATHNAME</code></a>s, as required by
 <a href="http://www.lisp.org/HyperSpec/Body/sec_19-3-2-1.html" target="_top">[CLHS-19.3.2.1] Unspecific
  Components of a Logical Pathname</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="path-external-notation"></a>19.3. External notation</h2></div></div></div><p>External notation of pathnames (cf. <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><code class="function">PARSE-NAMESTRING</code></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><code class="function">NAMESTRING</code></a>), of course without spaces, [,],{,}:</p><div class="variablelist">
<!--#ifdef PATHNAME_UNIX-->
<dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></span></dt><dd><div class="informaltable"><a id="unix-path-external-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">[ <code class="filename">"/"</code> ]</td><td align="center"><code class="filename">"/"</code> denotes absolute pathnames</td></tr><tr><td align="center">{ <em class="replaceable"><code>name</code></em> <code class="filename">"/"</code> }</td><td align="center">each <em class="replaceable"><code>name</code></em> is a subdirectory</td></tr><tr><td align="center">[ <em class="replaceable"><code>name</code></em> [<code class="filename">"."</code> <em class="replaceable"><code>type</code></em>] ]</td><td align="center">filename with type (extension)</td></tr></tbody></table></div><p>Name and type may be <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s of any <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a>
 (consisting of <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#printing" target="_top">printing</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s, except <code class="filename">"/"</code>).</p></dd>
<!--#endif-->
<!--#ifdef PATHNAME_WIN32-->
<dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span></span></dt><dd><div class="informaltable"><a id="win32-path-external-table"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="center">[ [<em class="replaceable"><code>drivespec</code></em>] : ]</td><td align="center">a letter <code class="filename">"*"</code>|<code class="filename">a</code>|...|<code class="filename">z</code>|<code class="filename">A</code>|...|<code class="filename">Z</code></td></tr><tr><td align="center">{ <em class="replaceable"><code>name</code></em> [. <em class="replaceable"><code>type</code></em>] \ }</td><td align="center">each <em class="replaceable"><code>name</code></em> is a subdirectory, <code class="filename">"\"</code> may be
     replaced by <code class="filename">"/"</code></td></tr><tr><td align="center">[ <em class="replaceable"><code>name</code></em> [. <em class="replaceable"><code>type</code></em>] ]</td><td align="center">filename with type (extension)</td></tr></tbody></table></div><p>Name and type may be <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s of any <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a>
 (consisting of <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#printing" target="_top">printing</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s, except <code class="filename">"/"</code>,
 <code class="filename">"\"</code>, <code class="filename">":"</code>).</p></dd>
<!--#endif-->
</dl></div></div>
<!--#ifdef LOGICAL_PATHNAMES-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="log-path"></a>19.4. Logical Pathnames
  <a href="http://www.lisp.org/HyperSpec/Body/sec_19-3.html" target="_top">[CLHS-19.3]</a></h2></div></div></div><p>No notes.</p></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="filename-dict"></a>19.5. The Filenames Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_filen_s_dictionary.html" target="_top">[CLHS-19.4]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#translate-pathname">19.5.1. Function <code class="function">TRANSLATE-PATHNAME</code></a></span></dt><dt><span class="section"><a href="#translate-logpath">19.5.2. Function <code class="function">TRANSLATE-LOGICAL-PATHNAME</code></a></span></dt><dt><span class="section"><a href="#parsename">19.5.3. Function <code class="function">PARSE-NAMESTRING</code></a></span></dt><dt><span class="section"><a href="#pathmerge">19.5.4. Function <code class="function">MERGE-PATHNAMES</code></a></span></dt><dt><span class="section"><a href="#load-lpt">19.5.5. Function <code class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</code></a></span></dt><dt><span class="section"><a href="#absolute-pathname">19.5.6. Function <code class="function">EXT:ABSOLUTE-PATHNAME</code></a></span></dt></dl></div><p><a id="path-des"></a><b>Pathname Designators. </b>When <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><code class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> is also treated as a
  <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#pathname_designator" target="_top">pathname
   designator</a>, namely its <a href="http://www.lisp.org/HyperSpec/Body/fun_symbol-name.html" target="_top"><code class="function">SYMBOL-NAME</code></a> is converted to the
  operating system's preferred pathname case.</p><p><a id="path-match"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html" target="_top"><code class="function">PATHNAME-MATCH-P</code></a>. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html" target="_top"><code class="function">PATHNAME-MATCH-P</code></a> does not interpret missing components as
  wild.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="translate-pathname"></a>19.5.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><code class="function">TRANSLATE-PATHNAME</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><code class="function">TRANSLATE-PATHNAME</code></a> accepts three additional keyword arguments:
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><code class="function">TRANSLATE-PATHNAME</code></a> <em class="replaceable"><code>source</code></em>
 <em class="replaceable"><code>from-wildname</code></em>
 <em class="replaceable"><code>to-wildname</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:ALL</code>
 <code class="constant">:MERGE</code> <code class="constant">:ABSOLUTE</code>)</code></p><p>If <code class="constant">:ALL</code> is specified and non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, a list of all resulting
 pathnames, corresponding to all matches of <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html" target="_top"><code class="function">PATHNAME-MATCH-P</code></a>
  <em class="replaceable"><code>source</code></em> <em class="replaceable"><code>from-wildname</code></em>)</code>, is
 returned.</p><p>If <code class="constant">:MERGE</code> is specified and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, unspecified pieces of
 <em class="replaceable"><code>to-pathname</code></em> are not replaced by
 corresponding pieces of <em class="replaceable"><code>source</code></em>.</p><p>If <code class="constant">:ABSOLUTE</code> is specified and non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the returned
 pathnames are converted to absolute by merging in the current process'
 directory, therefore rendering pathnames suitable for the OS and
 external programs.  So, to pass a pathname to an external program, you
 do <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><code class="function">NAMESTRING</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html" target="_top"><code class="function">TRANSLATE-PATHNAME</code></a> <em class="replaceable"><code>pathname</code></em>
 #P"" #P"" <code class="constant">:ABSOLUTE</code> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>))</code> or <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html" target="_top"><code class="function">NAMESTRING</code></a>
 (<a href="#absolute-pathname" title="19.5.6.&#xA0;Function EXT:ABSOLUTE-PATHNAME"><code class="function">EXT:ABSOLUTE-PATHNAME</code></a> <em class="replaceable"><code>pathname</code></em>))</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="translate-logpath"></a>19.5.2. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_translate_cal-pathname.html" target="_top"><code class="function">TRANSLATE-LOGICAL-PATHNAME</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_translate_cal-pathname.html" target="_top"><code class="function">TRANSLATE-LOGICAL-PATHNAME</code></a> accepts an additional keyword
 argument <code class="constant">:ABSOLUTE</code>, similar to <a href="#translate-pathname" title="19.5.1.&#xA0;Function TRANSLATE-PATHNAME">Section 19.5.1, “Function <code class="function">TRANSLATE-PATHNAME</code>”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="parsename"></a>19.5.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><code class="function">PARSE-NAMESTRING</code></a></h3></div></div></div><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html" target="_top"><code class="function">PARSE-NAMESTRING</code></a> <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
   <em class="replaceable"><code>host</code></em> <em class="replaceable"><code>defaults</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <em class="replaceable"><code>start</code></em> <em class="replaceable"><code>end</code></em>
   <em class="replaceable"><code>junk-allowed</code></em>)</code>
 returns a logical pathname only if <em class="replaceable"><code>host</code></em> is a
 <a href="http://www.lisp.org/HyperSpec/Body/glo_l.html#logical_host" target="_top">logical host</a>
 or <em class="replaceable"><code>host</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and <em class="replaceable"><code>defaults</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><code class="classname">LOGICAL-PATHNAME</code></a>.
 To construct a logical pathname from a string, the function
 <a href="http://www.lisp.org/HyperSpec/Body/fun_logical-pathname.html" target="_top"><code class="function">LOGICAL-PATHNAME</code></a> can be used.</p><p>The [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] behavior of recognizing logical pathnames when
 the <em class="replaceable"><code>string</code></em> begins with some alphanumeric characters followed by a
 colon (<span class="keysym">#\:</span>) can be very confusing
 (cf. <code class="filename">"c:/autoexec.bat"</code>,
 <code class="filename">"home:.clisprc"</code> and
 <code class="filename">"prep:/pub/gnu"</code>)
 and therefore is disabled by default. To enable the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] behavior,
 you should set <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><code class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</code></a> to non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
 Note that this also disables treating <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>s as <a href="#path-des">pathname designator</a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pathmerge"></a>19.5.4. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a></h3></div></div></div><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a> <em class="replaceable"><code>pathname</code></em>
   [<em class="replaceable"><code>default-pathname</code></em>])</code> returns a
   logical pathname only if
 <em class="replaceable"><code>default-pathname</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html" target="_top"><code class="classname">LOGICAL-PATHNAME</code></a>.
 To construct a logical pathname from a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>, the function
 <a href="http://www.lisp.org/HyperSpec/Body/fun_logical-pathname.html" target="_top"><code class="function">LOGICAL-PATHNAME</code></a> can be used.</p><p>When both <em class="replaceable"><code>pathname</code></em> and <em class="replaceable"><code>default-pathname</code></em>
 are relative pathnames, the behavior depends on <a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><code class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</code></a>: when it is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, then <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> retains its traditional behavior:
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a> #P"x/" #P"y/")</code>
 evaluates to <code class="filename">#P"x/"</code></p><p><b>Rationale. </b><a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a> is used to specify default components for
 pathnames, so there is some analogy between
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a> a b)</code> and
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><code class="function">OR</code></a> a b)</code>.  Obviously, putting in the
 same default a second time should do the same as putting it in once:
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><code class="function">OR</code></a> a b b)</code> is the same as <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><code class="function">OR</code></a> a b)</code>, so
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a> a b) b)</code>
 should be the same as <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a> a b)</code>.
</p><p>(This question actually does matter because in <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> there is no
 distinction between “<span class="quote">pathnames with defaults merged-in</span>” and
 “<span class="quote">pathnames with defaults not yet applied</span>”.)</p><p>Now, <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a> #P"x/" #P"y/")
  #P"y/")</code> and <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a> #P"x/" #P"y/")</code> are
 <a href="http://www.lisp.org/HyperSpec/Body/fun_equal.html" target="_top"><code class="function">EQUAL</code></a> in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> (when <a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><code class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>), but not in
 implementations that strictly follow the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] spec.
 In fact, the above <span class="emphasis"><em>twice-default = once-default</em></span>
 rule holds for all pathnames in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p><p>Conversely, when <a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><code class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the normal [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]
 behavior is exhibited: <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html" target="_top"><code class="function">MERGE-PATHNAMES</code></a> #P"x/" #P"y/")</code>
 evaluates to <code class="filename">#P"y/x/"</code>.</p><p><b>Rationale. </b>“<span class="quote">merge</span>” is <span class="emphasis"><em>merge</em></span> and
 not <span class="emphasis"><em>or</em></span>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="load-lpt"></a>19.5.5. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html" target="_top"><code class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</code></a></h3></div></div></div><p>When the <em class="replaceable"><code>host</code></em> argument to <a href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html" target="_top"><code class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</code></a>
is not a defined logical host yet, we proceed as follows:
</p><div class="orderedlist"><ol type="1"><li>If both <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a>s
  <code class="envar">LOGICAL_HOST_<em class="replaceable"><code>host</code></em>_FROM</code> and
  <code class="envar">LOGICAL_HOST_<em class="replaceable"><code>host</code></em>_TO</code> exist, then their values
  define the map of the <em class="replaceable"><code>host</code></em>.</li><li>If the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a>
  <code class="envar">LOGICAL_HOST_<em class="replaceable"><code>host</code></em></code> exists, its value is read from,
  and the result is passed to <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>
  <a href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html" target="_top"><code class="function">LOGICAL-PATHNAME-TRANSLATIONS</code></a>)</code>.</li><li>Variable <a href="impnotes.html#load-lpt" class="olink"><code class="varname">CUSTOM:*LOAD-LOGICAL-PATHNAME-TRANSLATIONS-DATABASE*</code></a> is consulted.
  Its value should be a list of files and/or directories,
  which are searched for in the <a href="#load-paths"><code class="varname">CUSTOM:*LOAD-PATHS*</code></a>, just like for <a href="impnotes.html#loadfile" class="olink"><code class="function">LOAD</code></a>.
  When the element is a file, it is <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><code class="function">READ</code></a> from,
  <a href="http://www.franz.com/support/documentation/6.0/doc/pathnames.htm#load-logical-pathname-translations-2" target="_top">Allegro CL-style</a>,
  odd objects being host names and even object being their
  <a href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html" target="_top"><code class="function">LOGICAL-PATHNAME-TRANSLATIONS</code></a>.
  When the element is a directory, a file, named <code class="filename"><em class="replaceable"><code>host</code></em></code>
  or <code class="filename"><em class="replaceable"><code>host</code></em>.host</code>, in that directory, is <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><code class="function">READ</code></a>
from once, <a href="http://common-lisp.net/project/cmucl/doc/cmu-user/extensions.html#logical-pathnames" target="_top">CMUCL-style</a>,
  the object read being the <a href="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html" target="_top"><code class="function">LOGICAL-PATHNAME-TRANSLATIONS</code></a> of the
  <em class="replaceable"><code>host</code></em>.</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="absolute-pathname"></a>19.5.6. Function <a href="#absolute-pathname" title="19.5.6.&#xA0;Function EXT:ABSOLUTE-PATHNAME"><code class="function">EXT:ABSOLUTE-PATHNAME</code></a></h3></div></div></div><p><code class="code">(<a href="#absolute-pathname" title="19.5.6.&#xA0;Function EXT:ABSOLUTE-PATHNAME"><code class="function">EXT:ABSOLUTE-PATHNAME</code></a> <em class="replaceable"><code>pathname</code></em>)</code> converts the <em class="replaceable"><code>pathname</code></em>
 to a physical pathname, then - if its directory component is not
 absolute - converts it to an absolute pathname, by merging in the
 current process' directory. This is like <a href="http://www.lisp.org/HyperSpec/Body/fun_truename.html" target="_top"><code class="function">TRUENAME</code></a>, except that it
 does not verify that a file named by the <em class="replaceable"><code>pathname</code></em> exists, not even that
 its directory exists. It does no filesystem accesses, except to
 determine the current directory. This function is useful when you want
 to save a pathname over time, or pass a pathname to an external
 program.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="files"></a>Chapter 20. Files
   <a href="http://www.lisp.org/HyperSpec/Body/chap-20.html" target="_top">[CLHS-20]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#file-dict">20.1. The Files Dictionary
   [CLHS-20.2]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="file-dict"></a>20.1. The Files Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_files_dictionary.html" target="_top">[CLHS-20.2]</a></h2></div></div></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="probe-file"></a>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html" target="_top"><code class="function">PROBE-FILE</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html" target="_top"><code class="function">PROBE-FILE</code></a> cannot be used to check whether a directory exists.
 Use functions <a href="#probe-dir" title="Function EXT:PROBE-DIRECTORY"><code class="function">EXT:PROBE-DIRECTORY</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> for this.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="file-author"></a>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_file-author.html" target="_top"><code class="function">FILE-AUTHOR</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_file-author.html" target="_top"><code class="function">FILE-AUTHOR</code></a> always returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, because the operating systems
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is ported to do not store a file's author in the file system.
 Some operating systems, such as <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, have the notion of a file's
 <span class="emphasis"><em>owner</em></span>, and some other <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> implementations return
 the user name of the file owner.  <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> does not do this, because
 <span class="emphasis"><em>owner</em></span> and <span class="emphasis"><em>author</em></span> are not the
 same; in particular, authorship is preserved by copying, while
 ownership is not.</p><p>Use
 <a href="#file-owner"><code class="function">OS:FILE-OWNER</code></a>
 to find the owner of the file.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="probe-dir"></a>Function <a href="#probe-dir" title="Function EXT:PROBE-DIRECTORY"><code class="function">EXT:PROBE-DIRECTORY</code></a></h3></div></div></div><p><code class="code">(<a href="#probe-dir" title="Function EXT:PROBE-DIRECTORY"><code class="function">EXT:PROBE-DIRECTORY</code></a> <em class="replaceable"><code>pathname</code></em>)</code> tests whether <em class="replaceable"><code>pathname</code></em> exists
 and is a directory.
 It will, unlike <a href="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html" target="_top"><code class="function">PROBE-FILE</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_truename.html" target="_top"><code class="function">TRUENAME</code></a>, not <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>
 if the parent directory of <em class="replaceable"><code>pathname</code></em> does not exist.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="del-file"></a>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_delete-file.html" target="_top"><code class="function">DELETE-FILE</code></a></h3></div></div></div><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_delete-file.html" target="_top"><code class="function">DELETE-FILE</code></a> <em class="replaceable"><code>pathname</code></em>)</code> deletes the pathname
 <em class="replaceable"><code>pathname</code></em>, not its <a href="http://www.lisp.org/HyperSpec/Body/fun_truename.html" target="_top"><code class="function">TRUENAME</code></a>, and returns the absolute pathname it
 actually removed or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if <em class="replaceable"><code>pathname</code></em> did not exist.
 When <em class="replaceable"><code>pathname</code></em> points to a file which is currently open in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>,
 an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="directory"></a>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a></h3></div></div></div><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>pathname</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
  :FULL :CIRCLE <code class="constant">:IF-DOES-NOT-EXIST</code>)</code> can run in two modes:
</p><div class="itemizedlist"><ul type="disc"><li>If <em class="replaceable"><code>pathname</code></em> contains no name or type component, a
  list of all matching directories is produced.
  E.g., <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> "/etc/*/")</code> lists
  all subdirectories in the directory
  <code class="filename">#P"/etc/"</code>.</li><li>Otherwise a list of all matching files is returned.
  E.g., <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> "/etc/*")</code> lists all
  regular files in the directory <code class="filename">#P"/etc/"</code>.
  If the <code class="constant">:FULL</code> argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
  additional information is returned: for each matching file you get a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of at least four elements
   <span class="returnvalue">(<em class="replaceable"><code>file-pathname</code></em>
    <em class="replaceable"><code>file-truename</code></em>
    <em class="replaceable"><code>file-write-date-as-decoded-time</code></em>
    <em class="replaceable"><code>file-length</code></em>)</span>.
</li></ul></div><p>

If you want <span class="strong"><strong>all</strong></span> the files <span class="strong"><strong>and</strong></span>
subdirectories in the current directory, you should use
<code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><code class="function">NCONC</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> "*/") (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> "*"))</code>.
If you want all the files and subdirectories in all the subdirectories
under the current directory (similar to the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/ls.html"><span><strong class="command">ls
 <code class="option">-R</code></strong></span></a> <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> command),
use <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><code class="function">NCONC</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> "**/") (<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> "**/*"))</code>.


<!--#ifdef UNIX-->

</p><div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></span></dt><dd>If the <code class="constant">:CIRCLE</code> argument is
 non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the function avoids endless loops that may result from
 symbolic links.</dd></dl></div><p>

<!--#endif-->


The argument <code class="constant">:IF-DOES-NOT-EXIST</code> controls the treatment of links
pointing to non-existent files and can take the following values:
</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:DISCARD</code> (default)</span></dt><dd>discard the bad directory entries
</dd><dt><span class="term"><code class="constant">:ERROR</code></span></dt><dd>an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed on bad directory entries
   (this corresponds to the default behavior of <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> in <a href="http://www.cons.org/cmucl/" target="_top"><span><strong class="command">CMU CL</strong></span></a>)
</dd><dt><span class="term"><code class="constant">:KEEP</code></span></dt><dd>keep bad directory entries in the returned list
   (this roughly corresponds to the <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a>
    ... <code class="constant">:TRUNAMEP</code> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>)</code> call in <a href="http://www.cons.org/cmucl/" target="_top"><span><strong class="command">CMU CL</strong></span></a>)
</dd><dt><span class="term"><code class="constant">:IGNORE</code></span></dt><dd>Similar to <code class="constant">:DISCARD</code>, but also
   do not signal an error when a directory is unaccessible (contrary to
   the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] specification).</dd></dl></div></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dir"></a>Function <code class="function">EXT:DIR</code></h3></div></div></div><p><code class="code">(<code class="function">EXT:DIR</code> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
 <em class="replaceable"><code>pathname</code></em>)</code> is like <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a>, but displays the pathnames
 instead of returning them. <code class="code">(EXT:DIR)</code>
 shows the contents of the current directory.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="cd"></a>Function <a href="#cd" title="Function EXT:CD"><code class="function">EXT:CD</code></a></h3></div></div></div><p><code class="code">(<a href="#cd" title="Function EXT:CD"><code class="function">EXT:CD</code></a> <em class="replaceable"><code>pathname</code></em>)</code> sets it, <code class="code">(<a href="#cd" title="Function EXT:CD"><code class="function">EXT:CD</code></a>)</code> returns it.
</p><div class="variablelist">
<!--#if defined(PATHNAME_UNIX)-->
<dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></span></dt><dd><code class="code">(<a href="#cd" title="Function EXT:CD"><code class="function">EXT:CD</code></a> [<em class="replaceable"><code>pathname</code></em>])</code>
   manages the current directory.</dd>
<!--#else-->
<dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span></span></dt><dd><code class="code">(<a href="#cd" title="Function EXT:CD"><code class="function">EXT:CD</code></a> [<em class="replaceable"><code>pathname</code></em>])</code>
   manages the current device and the current directory.
   </dd>
<!--#endif-->
</dl></div></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="default-dir"></a>Function <code class="function">EXT:DEFAULT-DIRECTORY</code></h3></div></div></div><p><code class="code">(<code class="function">EXT:DEFAULT-DIRECTORY</code>)</code> is
 equivalent to <code class="code">(<a href="#cd" title="Function EXT:CD"><code class="function">EXT:CD</code></a>)</code>.
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<code class="function">EXT:DEFAULT-DIRECTORY</code>)
 <em class="replaceable"><code>pathname</code></em>)</code> is equivalent to <code class="code">(<a href="#cd" title="Function EXT:CD"><code class="function">EXT:CD</code></a> <em class="replaceable"><code>pathname</code></em>)</code>,
 except for the return value.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-dir"></a>Function <code class="function">EXT:MAKE-DIR</code></h3></div></div></div><p><code class="code">(<code class="function">EXT:MAKE-DIR</code>
 <em class="replaceable"><code>directory-pathname</code></em>)</code>
 creates a new subdirectory.</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="delete-dir"></a>Function <code class="function">EXT:DELETE-DIR</code></h3></div></div></div><p><code class="code">(<code class="function">EXT:DELETE-DIR</code>
 <em class="replaceable"><code>directory-pathname</code></em>)</code> removes an
 (empty) subdirectory.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="streams"></a>Chapter 21. Streams
   <a href="http://www.lisp.org/HyperSpec/Body/chap-21.html" target="_top">[CLHS-21]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#streams-interactive">21.1. Interactive Streams
 [CLHS-21.1.1.1.3]</a></span></dt><dt><span class="section"><a href="#terminal">21.2. Terminal interaction</a></span></dt><dd><dl><dt><span class="section"><a href="#readline">21.2.1. Command line editing with GNU readline</a></span></dt><dt><span class="section"><a href="#with-kbd">21.2.2. Macro <code class="function">EXT:WITH-KEYBOARD</code></a></span></dt></dl></dd><dt><span class="section"><a href="#stream-dict">21.3. The Streams Dictionary
   [CLHS-21.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#stream-eltype">21.3.1. Function <code class="function">STREAM-ELEMENT-TYPE</code></a></span></dt><dd><dl><dt><span class="section"><a href="#bin-stdio">21.3.1.1. Binary input from <code class="varname">*STANDARD-INPUT*</code></a></span></dt></dl></dd><dt><span class="section"><a href="#make-stream">21.3.2. Function <code class="function">EXT:MAKE-STREAM</code></a></span></dt><dt><span class="section"><a href="#bin-input">21.3.3. Binary input, <code class="function">READ-BYTE</code>,
  <code class="function">EXT:READ-INTEGER</code> &amp; <code class="function">EXT:READ-FLOAT</code></a></span></dt><dt><span class="section"><a href="#bin-output">21.3.4. Binary output, <code class="function">WRITE-BYTE</code>,
  <code class="function">EXT:WRITE-INTEGER</code> &amp; <code class="function">EXT:WRITE-FLOAT</code></a></span></dt><dt><span class="section"><a href="#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="#file-pos">21.3.7. Function <code class="function">FILE-POSITION</code></a></span></dt><dt><span class="section"><a href="#elastic-newline">21.3.8. Avoiding blank lines, <code class="function">EXT:ELASTIC-NEWLINE</code></a></span></dt><dt><span class="section"><a href="#open">21.3.9. Function <code class="function">OPEN</code></a></span></dt><dt><span class="section"><a href="#close">21.3.10. Function <code class="function">CLOSE</code></a></span></dt><dt><span class="section"><a href="#open-stream-p">21.3.11. Function <code class="function">OPEN-STREAM-P</code></a></span></dt><dt><span class="section"><a href="#broadcast-stream">21.3.12. Class <code class="classname">BROADCAST-STREAM</code></a></span></dt><dt><span class="section"><a href="#stream-buffer">21.3.13. Functions
  <code class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</code>
    and
  <code class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</code>
   </a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="streams-interactive"></a>21.1. Interactive Streams
 <a href="http://www.lisp.org/HyperSpec/Body/sec_21-1-1-1-3.html" target="_top">[CLHS-21.1.1.1.3]</a></h2></div></div></div><p>Interactive streams are those whose next input might depend on a
 prompt one might output.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="terminal"></a>21.2. Terminal interaction</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#readline">21.2.1. Command line editing with GNU readline</a></span></dt><dt><span class="section"><a href="#with-kbd">21.2.2. Macro <code class="function">EXT:WITH-KEYBOARD</code></a></span></dt></dl></div><p>See also <a href="#screen" title="31.1.&#xA0;Random Screen Access">Section 31.1, “Random Screen Access”</a>.</p>
<!--#ifdef GNU_READLINE-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="readline"></a>21.2.1. Command line editing with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a></h3></div><div><h4 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep">Only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> linked against the
   <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> library.</span></span></h4></div></div></div><p>Input through <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a> uses the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> library.
  Arrow keys can be used to move within the input history.
  The <span class="keysym">#\Tab</span> key completes the <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> name or
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a> that is being typed.
  See <a href="http://cnswww.cns.cwru.edu/~chet/readline/rluserman.html" target="_top">readline user manual</a> for general details and
  <a href="clisp.html#completion" class="olink">TAB key</a> for <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>-specific
  extensions.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>The <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> library is <span class="strong"><strong>not</strong></span> used (even when
   <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is linked against it) if the standard and standard output do
   not both refer to the same terminal.
   This is determined by the function <code class="function">stdio_same_tty_p</code>
   in file <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/stream.d"><code class="filename">src/stream.d</code></a>.
   In some exotic cases, e.g., when running under <a href="http://sources.redhat.com/gdb/" target="_top"><span><strong class="command">gdb</strong></span></a> in
   an <span><strong class="command">rxvt</strong></span> window under <a href="http://cygwin.com/" target="_top"><span class="strong"><strong>Cygwin</strong></span></a>, this may be
   determined incorrectly.</p></div><p>See also <a href="#readline-mod" title="32.10.&#xA0;Advanced Readline and History Functionality">Section 32.10, “Advanced Readline and History Functionality”</a>.</p><p><a id="readline-config"></a><b>Linking against <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a>. </b>For <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> to use <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> it has to be detected by
  the <code class="filename">configure</code> process.</p><div class="itemizedlist"><ul type="disc"><li>If you run it as <span><strong class="command">./configure
      --with-readline</strong></span>, it will fail if it cannot find a
     modern working <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> installation.</li><li>If you use the option
     <code class="option">--without-readline</code>, it will not even try to
     find <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a>.</li><li>The default behavior
     (<code class="option">--with-readline=default</code>) is to use <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> if
     it is found and link <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> without it otherwise.
  </li></ul></div><p>
  You can find out whether <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> has been detected by running
  </p><pre class="screen"><code class="prompt">$</code> grep HAVE_READLINE unixconf.h</pre><p>
  in your build directory.</p></div>
<!--#endif-->
<!--#if defined(KEYBOARD)-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="with-kbd"></a>21.2.2. Macro <a href="#with-kbd" title="21.2.2.&#xA0;Macro EXT:WITH-KEYBOARD"><code class="function">EXT:WITH-KEYBOARD</code></a></h3></div><div><h4 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></h4></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a> is not the only stream that
 communicates directly with the user: During execution of the body of a
 <code class="code">(<a href="#with-kbd" title="21.2.2.&#xA0;Macro EXT:WITH-KEYBOARD"><code class="function">EXT:WITH-KEYBOARD</code></a> . <em class="replaceable"><code>body</code></em>)</code> form,
 <strong class="first"><em class="firstterm"><a href="impnotes.html#with-kbd" class="olink"><code class="varname">EXT:*KEYBOARD-INPUT*</code></a></em></strong> is the <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> that reads the
 keystrokes from the keyboard.
 It returns every keystroke in detail as an <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><code class="classname">SYS::INPUT-CHARACTER</code></a> with the
 following slots (see <a href="#input-char" title="13.2.1.&#xA0;Input Characters">Section 13.2.1, “Input Characters”</a> for accessing them):
</p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>char</code></em></span></dt><dd><p>the <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> for standard keys
    (accessed with <a href="http://www.lisp.org/HyperSpec/Body/fun_character.html" target="_top"><code class="function">CHARACTER</code></a>)</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>For non-standard keys <a href="http://www.lisp.org/HyperSpec/Body/fun_character.html" target="_top"><code class="function">CHARACTER</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>, use <a href="#with-kbd" title="21.2.2.&#xA0;Macro EXT:WITH-KEYBOARD"><code class="function">EXT:CHAR-KEY</code></a>:
</p><pre class="programlisting">
(<a href="#with-kbd" title="21.2.2.&#xA0;Macro EXT:WITH-KEYBOARD"><code class="function">EXT:WITH-KEYBOARD</code></a>
 (<a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a> :for <em class="replaceable"><code>char</code></em> = (<a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> <a href="impnotes.html#with-kbd" class="olink"><code class="varname">EXT:*KEYBOARD-INPUT*</code></a>)
   :for <em class="replaceable"><code>key</code></em> = (<a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><code class="function">OR</code></a> (<a href="#with-kbd" title="21.2.2.&#xA0;Macro EXT:WITH-KEYBOARD"><code class="function">EXT:CHAR-KEY</code></a> <em class="replaceable"><code>char</code></em>) (<a href="http://www.lisp.org/HyperSpec/Body/fun_character.html" target="_top"><code class="function">CHARACTER</code></a> <em class="replaceable"><code>char</code></em>))
   :do (<a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRINT</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><code class="function">LIST</code></a> <em class="replaceable"><code>char</code></em> <em class="replaceable"><code>key</code></em>))
   :when (<a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a> <em class="replaceable"><code>key</code></em> #\Space) :return (<a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><code class="function">LIST</code></a> <em class="replaceable"><code>char</code></em> <em class="replaceable"><code>key</code></em>)))
</pre></div></dd><dt><span class="term"><em class="replaceable"><code>key</code></em></span></dt><dd><p>the key name, for non-standard keys
    (accessed with <a href="#with-kbd" title="21.2.2.&#xA0;Macro EXT:WITH-KEYBOARD"><code class="function">EXT:CHAR-KEY</code></a>):
    </p><div class="variablelist">
<!--#if defined(UNIX) || defined(WIN32)-->
<dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></span></dt><dd><div class="informaltable"><a id="unix-kbd-keys"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">key</th><th align="center">value</th></tr></thead><tbody><tr><td align="center"><span class="keycode">F1</span>..<span class="keycode">F12</span></td><td align="center"><code class="constant">:F1</code>..<code class="constant">:F12</code>
          </td></tr><tr><td align="center"><span class="keycode">Insert</span></td><td align="center"><code class="constant">:INSERT</code></td></tr><tr><td align="center"><span class="keycode">Delete</span></td><td align="center"><code class="constant">:DELETE</code></td></tr><tr><td align="center"><span class="keycode">Home</span></td><td align="center"><code class="constant">:HOME</code></td></tr><tr><td align="center"><span class="keycode">End</span></td><td align="center"><code class="constant">:END</code></td></tr><tr><td align="center"><span class="keycode">Center</span></td><td align="center"><code class="constant">:CENTER</code></td></tr><tr><td align="center"><span class="keycode">PgUp</span></td><td align="center"><code class="constant">:PGUP</code></td></tr><tr><td align="center"><span class="keycode">PgDn</span></td><td align="center"><code class="constant">:PGDN</code></td></tr><tr><td align="center">Arrow keys</td><td align="center"><code class="constant">:LEFT</code> <code class="constant">:RIGHT</code>
            <code class="constant">:UP</code> <code class="constant">:DOWN</code></td></tr></tbody></table></div></dd>
<!--#endif-->
</dl></div></dd><dt><span class="term"><em class="replaceable"><code>bits</code></em></span></dt><dd><div class="variablelist">
<!--#ifdef WIN32-->
<dl><dt><span class="term"><code class="constant">:HYPER</code></span></dt><dd>(<span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span>) if a non-standard key.
        These keys are:
        
<!--#ifdef WIN32-->

        <span class="emphasis"><em>[<a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>]:</em></span>
        Function keys, cursor keypads, numeric keypad.
        
<!--#endif-->

     </dd><dt><span class="term"><code class="constant">:SUPER</code></span></dt><dd>(<span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span>) if pressed together with <span><strong class="keycap">Shift</strong></span>
        key(s) and if the keystroke would have been different without
        <span><strong class="keycap">Shift</strong></span>.</dd>
<!--#endif-->
<dt><span class="term"><code class="constant">:CONTROL</code></span></dt><dd>if pressed together with the <span><strong class="keycap">Control</strong></span> key.
     </dd>
<!--#ifdef WIN32-->
<dt><span class="term"><code class="constant">:META</code></span></dt><dd>(<span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span>) if pressed together with the
        <span><strong class="keycap">Alternate</strong></span> key.</dd>
<!--#endif-->
</dl></div></dd><dt><span class="term"><em class="replaceable"><code>font</code></em></span></dt><dd>Always <code class="literal">0</code>.</dd></dl></div><p>
This keyboard input is not echoed on the screen.  During execution of a
<code class="code">(<a href="#with-kbd" title="21.2.2.&#xA0;Macro EXT:WITH-KEYBOARD"><code class="function">EXT:WITH-KEYBOARD</code></a> . <em class="replaceable"><code>body</code></em>)</code> form, no input from
<a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a> or any synonymous stream should be requested.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Since <a href="#input-char" title="13.2.1.&#xA0;Input Characters"><code class="classname">SYS::INPUT-CHARACTER</code></a> is <span class="strong"><strong>not</strong></span> a subtype of
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><code class="function">READ-LINE</code></a> on <a href="impnotes.html#with-kbd" class="olink"><code class="varname">EXT:*KEYBOARD-INPUT*</code></a> is illegal.</p></div></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="stream-dict"></a>21.3. The Streams Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_streams_dictionary.html" target="_top">[CLHS-21.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#stream-eltype">21.3.1. Function <code class="function">STREAM-ELEMENT-TYPE</code></a></span></dt><dd><dl><dt><span class="section"><a href="#bin-stdio">21.3.1.1. Binary input from <code class="varname">*STANDARD-INPUT*</code></a></span></dt></dl></dd><dt><span class="section"><a href="#make-stream">21.3.2. Function <code class="function">EXT:MAKE-STREAM</code></a></span></dt><dt><span class="section"><a href="#bin-input">21.3.3. Binary input, <code class="function">READ-BYTE</code>,
  <code class="function">EXT:READ-INTEGER</code> &amp; <code class="function">EXT:READ-FLOAT</code></a></span></dt><dt><span class="section"><a href="#bin-output">21.3.4. Binary output, <code class="function">WRITE-BYTE</code>,
  <code class="function">EXT:WRITE-INTEGER</code> &amp; <code class="function">EXT:WRITE-FLOAT</code></a></span></dt><dt><span class="section"><a href="#bulk-io">21.3.5. Bulk Input and Output</a></span></dt><dt><span class="section"><a href="#non-block-io">21.3.6. Non-Blocking Input and Output</a></span></dt><dt><span class="section"><a href="#file-pos">21.3.7. Function <code class="function">FILE-POSITION</code></a></span></dt><dt><span class="section"><a href="#elastic-newline">21.3.8. Avoiding blank lines, <code class="function">EXT:ELASTIC-NEWLINE</code></a></span></dt><dt><span class="section"><a href="#open">21.3.9. Function <code class="function">OPEN</code></a></span></dt><dt><span class="section"><a href="#close">21.3.10. Function <code class="function">CLOSE</code></a></span></dt><dt><span class="section"><a href="#open-stream-p">21.3.11. Function <code class="function">OPEN-STREAM-P</code></a></span></dt><dt><span class="section"><a href="#broadcast-stream">21.3.12. Class <code class="classname">BROADCAST-STREAM</code></a></span></dt><dt><span class="section"><a href="#stream-buffer">21.3.13. Functions
  <code class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</code>
    and
  <code class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</code>
   </a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="stream-eltype"></a>21.3.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#bin-stdio">21.3.1.1. Binary input from <code class="varname">*STANDARD-INPUT*</code></a></span></dt></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>able. The <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> of
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s created by the functions <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a>, <a href="#pipe" title="31.7.2.&#xA0;Pipes"><code class="function">EXT:MAKE-PIPE-INPUT-STREAM</code></a>
  <a href="#pipe" title="31.7.2.&#xA0;Pipes"><code class="function">EXT:MAKE-PIPE-OUTPUT-STREAM</code></a>, <a href="#pipe" title="31.7.2.&#xA0;Pipes"><code class="function">EXT:MAKE-PIPE-IO-STREAM</code></a>, <a href="#so-accept"><code class="function">SOCKET:SOCKET-ACCEPT</code></a>, <a href="#so-connect"><code class="function">SOCKET:SOCKET-CONNECT</code></a>
  can be modified, if the old and the new <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>s are either
 </p><div class="itemizedlist"><ul type="disc"><li>both equivalent to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> or
    <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span>; or</li><li>both equivalent to <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span>, with the
    same <em class="replaceable"><code>n</code></em>.</li></ul></div><p>Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> and <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>)</code> are <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>s, see
 <a href="#gray" title="29.2.&#xA0;Gray streams">Section 29.2, “Gray streams”</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="bin-stdio"></a>21.3.1.1. Binary input from <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-INPUT*</code></a></h4></div></div></div><p>Note that you cannot change <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> for some
 built-in streams, such as <a href="#terminal" title="21.2.&#xA0;Terminal interaction">terminal streams</a>,
 which is normally the value of <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a>.
 Since <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-INPUT*</code></a> normally is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html" target="_top"><code class="classname">SYNONYM-STREAM</code></a> pointing
 to <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a>, you cannot use <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> in the it.</p><p>Since <a href="http://hoohoo.ncsa.uiuc.edu/cgi/" target="_top">CGI</a>
 (Common Gateway Interface) provides the form data for
 <span><strong class="command">METHOD="POST"</strong></span> on the stdin,
 and the server will <span class="strong"><strong>not</strong></span> send you an <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> on the end of the data,
 you will need to use
 <code class="code">(<a href="#getenv" title="31.8.&#xA0;Operating System Environment"><code class="function">EXT:GETENV</code></a> <code class="envar">"CONTENT_LENGTH"</code>)</code>
 to determine how much data you should read from stdin.
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will detect that stdin is not a terminal and create a regular
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a> which can be passed to <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>)</code>.
 To test this functionality interactively,
 you will need to open the standard input in the binary mode:
</p><pre class="programlisting">
(let ((buf (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><code class="function">MAKE-ARRAY</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-integer.html" target="_top"><code class="function">PARSE-INTEGER</code></a> (<a href="#getenv" title="31.8.&#xA0;Operating System Environment"><code class="function">EXT:GETENV</code></a> "CONTENT_LENGTH"))
                       :element-type '<span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>)))
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><code class="function">WITH-OPEN-STREAM</code></a> (in (<a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a> <code class="constant">:INPUT</code> <a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a> '<span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>))
    (<a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><code class="function">READ-SEQUENCE</code></a> buf in))
  buf)
</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-stream"></a>21.3.2. Function <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a></h3></div></div></div><p>Function <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a> creates a Lisp stream out of an OS <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>:
 <code class="code">(<a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a> <em class="replaceable"><code>object</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:DIRECTION</code>
  <a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a> <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <a href="#buffered"><code class="constant">:BUFFERED</code></a>)</code></p><p><em class="replaceable"><code>object</code></em> designates an OS handle (a <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>),
 and should be one of the following: </p><div class="variablelist"><dl><dt><span class="term">number</span></dt><dd>denotes the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a> of this value
  </dd><dt><span class="term"><code class="constant">:INPUT</code></span></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> process standard input
  </dd><dt><span class="term"><code class="constant">:OUTPUT</code></span></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> process standard output
  </dd><dt><span class="term"><code class="constant">:ERROR</code></span></dt><dd>denotes <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> process standard error
  </dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a></span></dt><dd>denotes the handle of this stream, which should be
     a <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a> or a <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a></dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="make-stream-warn-buffering"></a>Beware of buffering!</h3><p>When there are several Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s backed by the same OS
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>, the behavior may be highly confusing when some of the
  Lisp streams are <a href="#buffered"><code class="constant">:BUFFERED</code></a>.  Use <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FORCE-OUTPUT</code></a> for <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s,
  and <a href="#bulk-io" title="21.3.5.&#xA0;Bulk Input and Output">bulk input</a> for <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s.</p></div><p>The handle is duplicated (with <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html"><code class="function">dup</code></a>),
 so it is safe to <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> returned by <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bin-input"></a>21.3.3. Binary input, <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a>,
  <a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><code class="function">EXT:READ-INTEGER</code></a> &amp; <a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><code class="function">EXT:READ-FLOAT</code></a></h3></div></div></div><p>The function <code class="code">(<a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><code class="function">EXT:READ-INTEGER</code></a> <em class="replaceable"><code>stream</code></em>
    <em class="replaceable"><code>element-type</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="#endianness"><em class="replaceable"><code>ENDIANNESS</code></em></a> <em class="replaceable"><code>eof-error-p</code></em> <em class="replaceable"><code>eof-value</code></em>)</code>
 reads a multi-byte <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> from <em class="replaceable"><code>stream</code></em>, which should be a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.
 <em class="replaceable"><code>element-type</code></em> should be <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span>,
 where <em class="replaceable"><code>n</code></em> is a multiple of 8.</p><p><code class="code">(<a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><code class="function">EXT:READ-INTEGER</code></a> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>element-type</code></em>)</code> is like
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> <em class="replaceable"><code>stream</code></em>)</code> if <em class="replaceable"><code>stream</code></em>'s
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> were set to <em class="replaceable"><code>element-type</code></em>,
 except that <em class="replaceable"><code>stream</code></em>'s <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><code class="function">FILE-POSITION</code></a> will increase by
 <sup><em class="replaceable"><code>n</code></em></sup>/<sub>8</sub>
 instead of 1.</p><p>Together with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>)</code>, this
 function permits mixed character/binary input from a stream.</p><p>The function <code class="code">(<a href="#bin-input" title="21.3.3.&#xA0;Binary input, READ-BYTE,&#10;  EXT:READ-INTEGER &amp; EXT:READ-FLOAT"><code class="function">EXT:READ-FLOAT</code></a> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>element-type</code></em>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="#endianness"><em class="replaceable"><code>ENDIANNESS</code></em></a> <em class="replaceable"><code>eof-error-p</code></em> <em class="replaceable"><code>eof-value</code></em>)</code> reads a
 floating-point number in <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a> binary representation from
 <em class="replaceable"><code>stream</code></em>, which should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.  <em class="replaceable"><code>element-type</code></em> should be
 <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a>.</p><p><a id="endianness"></a><b>Endianness. </b><strong class="first"><em class="firstterm"><a href="#endianness"><em class="replaceable"><code>ENDIANNESS</code></em></a>
   <a id="endianness-i" class="indexterm"></a></em></strong>
  can be <code class="constant">:LITTLE</code> or <code class="constant">:BIG</code>.
  The default is <code class="constant">:LITTLE</code>, which corresponds
  to the <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> behavior in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bin-output"></a>21.3.4. Binary output, <a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><code class="function">WRITE-BYTE</code></a>,
  <a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><code class="function">EXT:WRITE-INTEGER</code></a> &amp; <a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><code class="function">EXT:WRITE-FLOAT</code></a></h3></div></div></div><p>The function <code class="code">(<a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><code class="function">EXT:WRITE-INTEGER</code></a> <em class="replaceable"><code>integer</code></em> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>element-type</code></em>
  <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="#endianness"><em class="replaceable"><code>ENDIANNESS</code></em></a>)</code> writes a multi-byte <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> to
 <em class="replaceable"><code>stream</code></em>, which should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.  <em class="replaceable"><code>element-type</code></em> should be
 <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span>, where <em class="replaceable"><code>n</code></em> is a multiple of 8.</p><p><code class="code">(<a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><code class="function">EXT:WRITE-INTEGER</code></a> <em class="replaceable"><code>integer</code></em> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>element-type</code></em>)</code> is
 like <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><code class="function">WRITE-BYTE</code></a> <em class="replaceable"><code>integer</code></em> <em class="replaceable"><code>stream</code></em>)</code> if <em class="replaceable"><code>stream</code></em>'s
 <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> were set to <em class="replaceable"><code>element-type</code></em>, except that <em class="replaceable"><code>stream</code></em>'s
 <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><code class="function">FILE-POSITION</code></a> will increase by
 <sup><em class="replaceable"><code>n</code></em></sup>/<sub>8</sub>
 instead of 1.</p><p>Together with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>)</code>, this
  function permits mixed character/binary output to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>.</p><p>The function <code class="code">(<a href="#bin-output" title="21.3.4.&#xA0;Binary output, WRITE-BYTE,&#10;  EXT:WRITE-INTEGER &amp; EXT:WRITE-FLOAT"><code class="function">EXT:WRITE-FLOAT</code></a> <em class="replaceable"><code>float</code></em>
  <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>element-type</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="#endianness"><em class="replaceable"><code>ENDIANNESS</code></em></a>)</code> writes a
 floating-point number in <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a> binary representation to
 <em class="replaceable"><code>stream</code></em>, which should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>
 <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.  <em class="replaceable"><code>element-type</code></em> should be
 <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent" target="_top">type equivalent</a> to <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bulk-io"></a>21.3.5. Bulk Input and Output</h3></div></div></div><p><a id="read-seq"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><code class="function">READ-SEQUENCE</code></a>. </b>In addition to <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><code class="function">READ-SEQUENCE</code></a>, the following two
 functions are provided:
</p><div class="variablelist"><dl><dt><a id="rd-by-seq"></a><span class="term"><a href="#rd-by-seq"><code class="function">EXT:READ-BYTE-SEQUENCE</code></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> operations:</span></dt><dd><p><code class="code">(<a href="#rd-by-seq"><code class="function">EXT:READ-BYTE-SEQUENCE</code></a> <em class="replaceable"><code>sequence</code></em>
   <em class="replaceable"><code>stream</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:START</code> <code class="constant">:END</code> :NO-HANG :INTERACTIVE)</code>
   fills the subsequence of <em class="replaceable"><code>sequence</code></em> specified by <code class="constant">:START</code> and <code class="constant">:END</code>
   with <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s consecutively read from <em class="replaceable"><code>stream</code></em>.  It returns the
   index of the first element of <em class="replaceable"><code>sequence</code></em> that was not updated (=
   <em class="replaceable"><code>end</code></em> or &lt; <em class="replaceable"><code>end</code></em> if the <em class="replaceable"><code>stream</code></em> reached its end).
   When <em class="replaceable"><code>no-hang</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, it does not block: it treats input
   unavailability as <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>. When <em class="replaceable"><code>no-hang</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and <em class="replaceable"><code>interactive</code></em> is
   non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, it can block for reading the first byte but does not block
   for any further bytes.</p><p>This function is especially efficient if <em class="replaceable"><code>sequence</code></em> is a
   <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span> and <em class="replaceable"><code>stream</code></em> is a <a href="#open" title="21.3.9.&#xA0;Function OPEN">file</a>/<a href="#pipe" title="31.7.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>
   with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.
 </p></dd><dt><a id="rd-ch-seq"></a><span class="term"><a href="#rd-ch-seq"><code class="function">EXT:READ-CHAR-SEQUENCE</code></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> operations:</span></dt><dd><p><code class="code">(<a href="#rd-ch-seq"><code class="function">EXT:READ-CHAR-SEQUENCE</code></a> <em class="replaceable"><code>sequence</code></em> <em class="replaceable"><code>stream</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    <code class="constant">:START</code> <code class="constant">:END</code>)</code> fills the subsequence of <em class="replaceable"><code>sequence</code></em>
   specified by <code class="constant">:START</code> and <code class="constant">:END</code> with characters consecutively read
   from <em class="replaceable"><code>stream</code></em>.  It returns the index of the first element of
   <em class="replaceable"><code>sequence</code></em> that was not updated (= <em class="replaceable"><code>end</code></em> or &lt; <em class="replaceable"><code>end</code></em> if the
   <em class="replaceable"><code>stream</code></em> reached its end).</p><p>This function is especially efficient if <em class="replaceable"><code>sequence</code></em> is a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> and <em class="replaceable"><code>stream</code></em> is a <a href="#open" title="21.3.9.&#xA0;Function OPEN">file</a>/<a href="#pipe" title="31.7.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> or an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html" target="_top"><code class="classname">STRING-STREAM</code></a>.
 </p></dd></dl></div><p><a id="write-seq"></a><b>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><code class="function">WRITE-SEQUENCE</code></a>. </b>In addition to <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><code class="function">WRITE-SEQUENCE</code></a>, the following two
functions are provided:
</p><div class="variablelist"><dl><dt><a id="wr-by-seq"></a><span class="term"><a href="#wr-by-seq"><code class="function">EXT:WRITE-BYTE-SEQUENCE</code></a>
   performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html" target="_top"><code class="function">WRITE-BYTE</code></a> operations:</span></dt><dd><p><code class="code">(<a href="#wr-by-seq"><code class="function">EXT:WRITE-BYTE-SEQUENCE</code></a> <em class="replaceable"><code>sequence</code></em> <em class="replaceable"><code>stream</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
  <code class="constant">:START</code> <code class="constant">:END</code> :NO-HANG)</code> outputs the <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s of the
  subsequence of <em class="replaceable"><code>sequence</code></em> specified by <code class="constant">:START</code> and <code class="constant">:END</code> to
  <em class="replaceable"><code>stream</code></em>.  When <code class="constant">:NO-HANG</code> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, does not
  block.  Returns two values: <em class="replaceable"><code>sequence</code></em> and the index of the first
  byte that was not output.</p><p>This function is especially efficient if <em class="replaceable"><code>sequence</code></em> is a
  <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span> and <em class="replaceable"><code>stream</code></em> is a <a href="#open" title="21.3.9.&#xA0;Function OPEN">file</a>/<a href="#pipe" title="31.7.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with
  <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>.</p></dd><dt><a id="wr-ch-seq"></a><span class="term"><a href="#wr-ch-seq"><code class="function">EXT:WRITE-CHAR-SEQUENCE</code></a>
  performs multiple <a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html" target="_top"><code class="function">WRITE-CHAR</code></a> operations:</span></dt><dd><p><code class="code">(<a href="#wr-ch-seq"><code class="function">EXT:WRITE-CHAR-SEQUENCE</code></a> <em class="replaceable"><code>sequence</code></em> <em class="replaceable"><code>stream</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
  <code class="constant">:START</code> <code class="constant">:END</code>)</code> outputs the characters of the subsequence of
  <em class="replaceable"><code>sequence</code></em> specified by <code class="constant">:START</code> and <code class="constant">:END</code> to <em class="replaceable"><code>stream</code></em>.
  Returns the <em class="replaceable"><code>sequence</code></em> argument.</p><p>This function is especially efficient if <em class="replaceable"><code>sequence</code></em> is a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> and <em class="replaceable"><code>stream</code></em> is a <a href="#open" title="21.3.9.&#xA0;Function OPEN">file</a>/<a href="#pipe" title="31.7.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> with
  <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>.</p></dd></dl></div><p><a id="bulk-io-rationale"></a><b>Rationale. </b>The rationale for <a href="#rd-ch-seq"><code class="function">EXT:READ-CHAR-SEQUENCE</code></a>, <a href="#rd-by-seq"><code class="function">EXT:READ-BYTE-SEQUENCE</code></a>, <a href="#wr-ch-seq"><code class="function">EXT:WRITE-CHAR-SEQUENCE</code></a> and
 <a href="#wr-by-seq"><code class="function">EXT:WRITE-BYTE-SEQUENCE</code></a> is that some <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s support both character and binary
 i/o, and when you read into a <a href="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html" target="_top"><code class="classname">SEQUENCE</code></a> that can hold both (e.g.,
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a>) you cannot determine which kind of
 input to use.  In such situation <a href="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html" target="_top"><code class="function">READ-SEQUENCE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html" target="_top"><code class="function">WRITE-SEQUENCE</code></a>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>, while <a href="#rd-ch-seq"><code class="function">EXT:READ-CHAR-SEQUENCE</code></a>, <a href="#rd-by-seq"><code class="function">EXT:READ-BYTE-SEQUENCE</code></a>, <a href="#wr-ch-seq"><code class="function">EXT:WRITE-CHAR-SEQUENCE</code></a> and
 <a href="#wr-by-seq"><code class="function">EXT:WRITE-BYTE-SEQUENCE</code></a> work just fine.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="non-block-io"></a>21.3.6. Non-Blocking Input and Output</h3></div></div></div><p>In addition to the standard functions <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html" target="_top"><code class="function">READ-CHAR-NO-HANG</code></a>, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> provides the following functionality
 facilitating non-blocking input and output, both binary and
 character.</p><div class="variablelist"><dl><dt><a id="rcwhp"></a><span class="term"><code class="code">(<a href="#rcwhp"><code class="function">EXT:READ-CHAR-WILL-HANG-P</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p><a href="#rcwhp"><code class="function">EXT:READ-CHAR-WILL-HANG-P</code></a> queries the stream's input status.
  It returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_peek-char.html" target="_top"><code class="function">PEEK-CHAR</code></a> with a
  <em class="replaceable"><code>peek-type</code></em> of <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> will return immediately.
  Otherwise it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.  (In the latter case the standard
  <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a> function would return <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.)</p><p>Note the difference with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_not.html" target="_top"><code class="function">NOT</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a>
  <em class="replaceable"><code>stream</code></em>))</code>: When the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> is reached, <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a> returns
  <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, whereas <a href="#rcwhp"><code class="function">EXT:READ-CHAR-WILL-HANG-P</code></a> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p><p>Note also that <a href="#rcwhp"><code class="function">EXT:READ-CHAR-WILL-HANG-P</code></a> is not a good way to test for <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>:
  If <a href="#rcwhp"><code class="function">EXT:READ-CHAR-WILL-HANG-P</code></a> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, this does not mean that the <em class="replaceable"><code>stream</code></em> will
  deliver more characters.  It only means that it is not known at this
  moment whether the <em class="replaceable"><code>stream</code></em> is already at <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>, or will deliver
  more characters.</p></dd><dt><a id="rbla"></a><span class="term"><code class="code">(<a href="#rbla"><code class="function">EXT:READ-BYTE-LOOKAHEAD</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>To be called only if <em class="replaceable"><code>stream</code></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> would return immediately with an
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> result.
   Returns <code class="constant">:EOF</code> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> is already known to be reached.
   If <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a>'s value is not available immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
   instead of waiting.</dd><dt><a id="rbwhp"></a><span class="term"><code class="code">(<a href="#rbwhp"><code class="function">EXT:READ-BYTE-WILL-HANG-P</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>To be called only if <em class="replaceable"><code>stream</code></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a> will return immediately.
   Otherwise it returns true.</dd><dt><a id="rbnh"></a><span class="term"><code class="code">(<a href="#rbnh"><code class="function">EXT:READ-BYTE-NO-HANG</code></a> <em class="replaceable"><code>stream</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
    <em class="replaceable"><code>eof-error-p</code></em> <em class="replaceable"><code>eof-value</code></em>)</code></span></dt><dd>To be called only if <em class="replaceable"><code>stream</code></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span>.
   Returns an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> or does <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> handling, like <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a>,
   if that would return immediately.
   If <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a>'s value is not available immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
   instead of waiting.</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="file-pos"></a>21.3.7. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><code class="function">FILE-POSITION</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><code class="function">FILE-POSITION</code></a> works on any <a href="#buffered"><code class="constant">:BUFFERED</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a>.</p>
<!--#if defined(WIN32) || (defined(UNIX) && (O_BINARY!= 0))-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span></span></dt><dd>When a <span class="keysym">#\Newline</span> is output to (respectively input from)
  a file stream, its file position is increased by 2 since <span class="keysym">#\Newline</span> is
  encoded as <span class="keycode">CR</span>/<span class="keycode">LF</span> in the file.
</dd></dl></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="elastic-newline"></a>21.3.8. Avoiding blank lines, <a href="#elastic-newline" title="21.3.8.&#xA0;Avoiding blank lines, EXT:ELASTIC-NEWLINE"><code class="function">EXT:ELASTIC-NEWLINE</code></a></h3></div></div></div><p>The function <code class="code">(<a href="#elastic-newline" title="21.3.8.&#xA0;Avoiding blank lines, EXT:ELASTIC-NEWLINE"><code class="function">EXT:ELASTIC-NEWLINE</code></a> [<em class="replaceable"><code>stream</code></em>])</code> is like
 <a href="http://www.lisp.org/HyperSpec/Body/fun_terpricm_fresh-line.html" target="_top"><code class="function">FRESH-LINE</code></a> but the other way around: It outputs a conditional newline
 on <em class="replaceable"><code>stream</code></em>, which is canceled if the <span class="emphasis"><em>next</em></span>
 output on <em class="replaceable"><code>stream</code></em> happens to be a newline.  More precisely, it
 causes a newline to be output right before the next character is
 written on <em class="replaceable"><code>stream</code></em>, if this character is not a newline.
 The newline is also output if the next operation on the stream is
 <a href="http://www.lisp.org/HyperSpec/Body/fun_terpricm_fresh-line.html" target="_top"><code class="function">FRESH-LINE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FINISH-OUTPUT</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FORCE-OUTPUT</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a>.</p><p>The functionality of <a href="#elastic-newline" title="21.3.8.&#xA0;Avoiding blank lines, EXT:ELASTIC-NEWLINE"><code class="function">EXT:ELASTIC-NEWLINE</code></a> is also available through
 the <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> directive <a href="#format-dot">~.</a>.</p><p>A technique for avoiding unnecessary blank lines in output is to
 begin each chunk of output with a call to <a href="http://www.lisp.org/HyperSpec/Body/fun_terpricm_fresh-line.html" target="_top"><code class="function">FRESH-LINE</code></a> and to terminate it
 with a call to <a href="#elastic-newline" title="21.3.8.&#xA0;Avoiding blank lines, EXT:ELASTIC-NEWLINE"><code class="function">EXT:ELASTIC-NEWLINE</code></a>.</p><p>See also
 <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/Newline-Convention.txt"><code class="filename">doc/Newline-Convention.txt</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="open"></a>21.3.9. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a> accepts an additional keyword <a href="#buffered"><code class="constant">:BUFFERED</code></a>.</p><div class="variablelist"><p class="title"><b>The acceptable values for the arguments to the
   <a href="#open" title="21.3.9.&#xA0;Function OPEN">file</a>/<a href="#pipe" title="31.7.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> functions</b></p><dl><dt><a id="eltype"></a><span class="term"><a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a></span></dt><dd><p>types equivalent to <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> or
    <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span>, <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> <em class="replaceable"><code>n</code></em>)</code></span>; if the stream is to be
    un<a href="#buffered"><code class="constant">:BUFFERED</code></a>, <em class="replaceable"><code>n</code></em> must be a multiple of 8.</p><p>If <em class="replaceable"><code>n</code></em> is not a multiple of 8, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will use the
    specified number of bits for i/o, and write the file length
    (as a number of <em class="replaceable"><code>n</code></em>-bit bytes) in the preamble.</p><p>This is done to ensure the input/output consistency:
    suppose you open a file with <a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a> of <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 3)</code></span> and write 7 bytes
    (i.e., 21 bit) there.
    The underlying OS can do input/output only in whole 8-bit bytes.
    Thus the OS will report the size of the file as 3 (8-bit) bytes.
    Without the preamble <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will have no way to know how many
    3-bit bytes to read from this file - 6, 7 or 8.
   </p></dd><dt><a id="extfmt"></a><span class="term"><a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a></span></dt><dd><a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a>s, (constant) <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>s in the
    <a href="#encoding" title="30.5.&#xA0;Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a> package, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s (denoting <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"><code class="function">iconv</code></a>-based encodings),
    the symbol <code class="constant">:DEFAULT</code>, and the <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a> keywords
    <code class="constant">:UNIX</code>, <code class="constant">:MAC</code>, <code class="constant">:DOS</code>.  The default encoding is <a href="impnotes.html#def-file-enc" class="olink"><code class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</code></a>.
    This argument determines how the lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> data is
    converted to/from the 8-bit bytes that the underlying OS uses.
  </dd><dt><a id="buffered"></a><span class="term"><a href="#buffered"><code class="constant">:BUFFERED</code></a></span></dt><dd><p><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, or <code class="constant">:DEFAULT</code>.
    Have <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> manage an internal buffer for input or output (in
    addition to the buffering that might be used by the underlying OS).
    Buffering is a known general technique to significantly speed up i/o.
  </p><div class="itemizedlist"><ul type="disc"><li>for functions that create <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>s and
    <a href="#pipe" title="31.7.2.&#xA0;Pipes">pipes</a>, <code class="constant">:DEFAULT</code> is equivalent to
    <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> on the input side and to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> on the output side; it you are
    transmitting a lot of data then using buffering
    will significantly speed up your i/o;</li><li>for functions that <a href="#open" title="21.3.9.&#xA0;Function OPEN">open</a>
    files, <code class="constant">:DEFAULT</code> means that buffered file streams will be returned
    for regular files and (on <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>) block-devices, and unbuffered file
    streams for special files.</li></ul></div><p>
  Note that some files, notably those on the <code class="filename">/proc</code>
  filesystem (on <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> systems), are actually, despite their innocuous
  appearance, special files, so you might need to supply an explicit
  <a href="#buffered"><code class="constant">:BUFFERED</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> argument for them.  Actually, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> detects that
  the file is a <code class="filename">/proc</code> file, so that one is covered,
  but there are probably more strange beasts there!
</p></dd></dl></div><p>When an already opened file is opened again, a <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is
 <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed, unless both the existing and the new <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s are read-only
 (i.e., <code class="constant">:DIRECTION</code> is <code class="constant">:INPUT</code> or <code class="constant">:INPUT-IMMUTABLE</code>).
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="close"></a>21.3.10. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a></h3></div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>, see
 <a href="#gray" title="29.2.&#xA0;Gray streams">Section 29.2, “Gray streams”</a>.</p><p>When the <code class="constant">:ABORT</code> argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> will not
 <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> even when the underlying OS call fails.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_get-outpu_tream-string.html" target="_top"><code class="function">GET-OUTPUT-STREAM-STRING</code></a> returns the same value after
 <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> as it would before it.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> on an already closed <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> does nothing and returns
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</p><p>If you do not <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> your <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> explicitly, it will be
 closed at <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion time automatically.
 This is not recommended though because <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion is not deterministic.
 Please use <a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><code class="function">WITH-OPEN-STREAM</code></a> etc.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="open-stream-p"></a>21.3.11. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><code class="function">OPEN-STREAM-P</code></a></h3></div></div></div><p>Function <a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><code class="function">OPEN-STREAM-P</code></a> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>, see
 <a href="#gray" title="29.2.&#xA0;Gray streams">Section 29.2, “Gray streams”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="broadcast-stream"></a>21.3.12. Class <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><code class="classname">BROADCAST-STREAM</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><code class="function">INPUT-STREAM-P</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_interactive-stream-p.html" target="_top"><code class="function">INTERACTIVE-STREAM-P</code></a> return false for
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html" target="_top"><code class="classname">BROADCAST-STREAM</code></a>s.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="stream-buffer"></a>21.3.13. Functions
  <strong class="first"><em class="firstterm"><code class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</code>
   <a id="stream-buffer-i" class="indexterm"></a></em></strong> and
  <strong class="first"><em class="firstterm"><code class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</code>
   <a id="stream-buffer-o" class="indexterm"></a></em></strong></h3></div></div></div><p><b><code class="code">(EXT:MAKE-BUFFERED-OUTPUT-STREAM
   <em class="replaceable"><code>function</code></em>)</code>. </b>Returns a buffered <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>.
 <em class="replaceable"><code>function</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> expecting one argument, a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><code class="classname">SIMPLE-STRING</code></a>.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_write-char.html" target="_top"><code class="function">WRITE-CHAR</code></a> collects the <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s in a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>, until a
 newline character is written or <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FORCE-OUTPUT</code></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FINISH-OUTPUT</code></a> is called.
 Then <em class="replaceable"><code>function</code></em> is called with a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><code class="classname">SIMPLE-STRING</code></a> as argument,
 that contains the characters collected so far.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">CLEAR-OUTPUT</code></a> discards the characters collected so far.</p><p><b><code class="code">(EXT:MAKE-BUFFERED-INPUT-STREAM <em class="replaceable"><code>function</code></em>
   <em class="replaceable"><code>mode</code></em>)</code>. </b>Returns a buffered <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>.
 <em class="replaceable"><code>function</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> of 0 arguments that returns
 either <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (stands for <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>) or up to three values
 <em class="replaceable"><code>string</code></em>, <em class="replaceable"><code>start</code></em>, <em class="replaceable"><code>end</code></em>.
 <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> returns the <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s of the current <em class="replaceable"><code>string</code></em> one
 after another, as delimited by <em class="replaceable"><code>start</code></em> and <em class="replaceable"><code>end</code></em>, which default to
 <code class="literal">0</code> and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, respectively.
 When the <em class="replaceable"><code>string</code></em> is consumed, <em class="replaceable"><code>function</code></em> is called again.
 The <em class="replaceable"><code>string</code></em> returned by <em class="replaceable"><code>function</code></em> should not be changed by the user.
 <em class="replaceable"><code>function</code></em> should copy the <em class="replaceable"><code>string</code></em> with <a href="http://www.lisp.org/HyperSpec/Body/fun_copy-seq.html" target="_top"><code class="function">COPY-SEQ</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/acc_subseq.html" target="_top"><code class="function">SUBSEQ</code></a> before
 returning if the original <em class="replaceable"><code>string</code></em> is to be modified.
 <em class="replaceable"><code>mode</code></em> determines the behavior of <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a>
 when the current <em class="replaceable"><code>string</code></em> buffer is empty:
 </p><div class="variablelist"><dl><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></span></dt><dd>the stream acts like a <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a>,
     i.e. <em class="replaceable"><code>function</code></em> is called</dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></span></dt><dd>the stream acts like an interactive stream without
     <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a>, i.e. one can assume that further characters will always
     arrive, without calling <em class="replaceable"><code>function</code></em></dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a></span></dt><dd>this <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> tells, upon call, if further
     non-empty <em class="replaceable"><code>string</code></em>s are to be expected.</dd></dl></div><p>
 <a href="http://www.lisp.org/HyperSpec/Body/fun_clear-input.html" target="_top"><code class="function">CLEAR-INPUT</code></a> discards the rest of the current <em class="replaceable"><code>string</code></em>,
 so <em class="replaceable"><code>function</code></em> will be called upon the next <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> operation.
</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="printer"></a>Chapter 22. Printer
   <a href="http://www.lisp.org/HyperSpec/Body/chap-22.html" target="_top">[CLHS-22]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#multi-rep">22.1. Multiple Possible Textual Representations
   [CLHS-22.1.1.1]</a></span></dt><dt><span class="section"><a href="#sym-pack-prefix">22.2. Package Prefixes for Symbols
  [CLHS-22.1.3.3.1]</a></span></dt><dt><span class="section"><a href="#print-vector">22.3. Printing Other Vectors
   [CLHS-22.1.3.7]</a></span></dt><dt><span class="section"><a href="#print-array">22.4. Printing Other Arrays
   [CLHS-22.1.3.8]</a></span></dt><dt><span class="section"><a href="#clpp">22.5. The Lisp Pretty Printer
   [CLHS-22.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#pp-dispatch">22.5.1. Pretty Print Dispatch Table
   [CLHS-22.2.1.4]</a></span></dt></dl></dd><dt><span class="section"><a href="#print-formatted">22.6. Formatted Output
  [CLHS-22.3]</a></span></dt><dt><span class="section"><a href="#print-dict">22.7. The Printer Dictionary
   [CLHS-22.4]</a></span></dt><dd><dl><dt><span class="section"><a href="#write">22.7.1. Functions <code class="function">WRITE</code> &amp; <code class="function">WRITE-TO-STRING</code></a></span></dt><dt><span class="section"><a href="#print-unreadable-object">22.7.2. Macro <code class="function">PRINT-UNREADABLE-OBJECT</code></a></span></dt><dt><span class="section"><a href="#pathprint">22.7.3. Pathnames</a></span></dt><dt><span class="section"><a href="#spacecharprint">22.7.4. Characters</a></span></dt><dt><span class="section"><a href="#print-misc">22.7.5. Miscellaneous Issues</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="multi-rep"></a>22.1. Multiple Possible Textual Representations
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-1-1.html" target="_top">[CLHS-22.1.1.1]</a></h2></div></div></div><p><a id="pr-closure"></a><b>Variable <a href="#pr-closure"><code class="varname">CUSTOM:*PRINT-CLOSURE*</code></a>. </b>An additional variable <a href="#pr-closure"><code class="varname">CUSTOM:*PRINT-CLOSURE*</code></a> controls whether compiled and
 interpreted functions (closures) are output in detailed form.
 If <a href="#pr-closure"><code class="varname">CUSTOM:*PRINT-CLOSURE*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, compiled closures are output in
 <span class="keysym">#Y</span> syntax which the reader understands.
 <a href="#pr-closure"><code class="varname">CUSTOM:*PRINT-CLOSURE*</code></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p><p><a id="pr-rpars"></a><b>Variable <a href="#pr-rpars"><code class="varname">CUSTOM:*PRINT-RPARS*</code></a>. </b>An additional variable <a href="#pr-rpars"><code class="varname">CUSTOM:*PRINT-RPARS*</code></a> controls
 the output of the right (closing) parentheses.
 If <a href="#pr-rpars"><code class="varname">CUSTOM:*PRINT-RPARS*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, closing parentheses which do not fit onto
 the same line as the the corresponding opening parenthesis are output
 just below their corresponding opening parenthesis, in the same column.
 <a href="#pr-rpars"><code class="varname">CUSTOM:*PRINT-RPARS*</code></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p><p><a id="pr-indent"></a><b>Variable <a href="#pr-indent"><code class="varname">CUSTOM:*PRINT-INDENT-LISTS*</code></a>. </b>An additional variable <a href="#pr-indent"><code class="varname">CUSTOM:*PRINT-INDENT-LISTS*</code></a> controls the indentation of
 lists that span more than one line.
 It specifies by how many characters items within the list will be
 indented relative to the beginning of the list.
 <a href="#pr-indent"><code class="varname">CUSTOM:*PRINT-INDENT-LISTS*</code></a> is initially set to <code class="literal">1</code>.</p><p><a id="ppr-first-newline"></a><b>Variable <a href="#ppr-first-newline"><code class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</code></a>. </b>An additional variable <a href="#ppr-first-newline"><code class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</code></a> controls
 pretty-printing of multi-line objects.
 When <a href="#ppr-first-newline"><code class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
 and the current line already has some characters on it,
 and the next object will be printed on several lines,
 and it does not start with a <span class="keysym">#\Newline</span>,
 then a <span class="keysym">#\Newline</span> is printed before the object.
 <a href="#ppr-first-newline"><code class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</code></a> has no effect if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><code class="varname">*PRINT-PRETTY*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
 <a href="#ppr-first-newline"><code class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</code></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sym-pack-prefix"></a>22.2. Package Prefixes for Symbols
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-3-1.html" target="_top">[CLHS-22.1.3.3.1]</a></h2></div></div></div><p><a id="pr-sym-pack-prefix"></a><b>Variable <a href="#pr-sym-pack-prefix"><code class="function">CUSTOM:*PRINT-SYMBOL-PACKAGE-PREFIX-SHORTEST*</code></a>. </b>When <a href="#pr-sym-pack-prefix"><code class="function">CUSTOM:*PRINT-SYMBOL-PACKAGE-PREFIX-SHORTEST*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the package
  prefix is not the <a href="http://www.lisp.org/HyperSpec/Body/fun_package-name.html" target="_top"><code class="function">PACKAGE-NAME</code></a> but the shortest (nick)name as
  returned by <a href="#package-shortest-name"><code class="function">EXT:PACKAGE-SHORTEST-NAME</code></a>.  This variable is ignored when
  <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="print-vector"></a>22.3. Printing Other Vectors
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-7.html" target="_top">[CLHS-22.1.3.7]</a></h2></div></div></div><p>When <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a> is true, other vectors are written as
 follows: if the <a href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html" target="_top"><code class="function">ARRAY-ELEMENT-TYPE</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>, the syntax
 <code class="computeroutput">#(<em class="replaceable"><code>x<sub>0</sub></code></em>
  ... <em class="replaceable"><code>x<sub>n-1</sub></code></em>)</code>
 is used.  Otherwise, the syntax <code class="computeroutput">#A(<em class="replaceable"><code>element-type</code></em>
 <em class="replaceable"><code>dimensions</code></em> <em class="replaceable"><code>contents</code></em>)</code> is used.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="print-array"></a>22.4. Printing Other Arrays
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-8.html" target="_top">[CLHS-22.1.3.8]</a></h2></div></div></div><p>When <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a> is true, other arrays are written as
 follows: if the <a href="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html" target="_top"><code class="function">ARRAY-ELEMENT-TYPE</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>, the syntax
 <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-12" target="_top"><span class="data"><code class="literal">#<em class="replaceable"><code>rank</code></em>A</code></span></a> <em class="replaceable"><code>contents</code></em></code> is used.
 Otherwise, the syntax <code class="computeroutput">#A(<em class="replaceable"><code>element-type</code></em> <em class="replaceable"><code>dimensions</code></em>
 <em class="replaceable"><code>contents</code></em>)</code> is used.</p><p>As explicitly permitted by this section, specialized <a href="http://www.lisp.org/HyperSpec/Body/typ_bit.html" target="_top"><code class="classname">BIT</code></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a>s are printed with the innermost lists generated
 by the printing algorithm being instead printed using <a href="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html" target="_top"><code class="classname">BIT-VECTOR</code></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> syntax, respectively.</p><p><a id="pr-empty-arr-ansi"></a><b>Variable <a href="#pr-empty-arr-ansi"><code class="varname">CUSTOM:*PRINT-EMPTY-ARRAYS-ANSI*</code></a>. </b>Empty <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a>s, i.e., arrays with no elements and zero
 <a href="http://www.lisp.org/HyperSpec/Body/fun_array-total-size.html" target="_top"><code class="function">ARRAY-TOTAL-SIZE</code></a> (because one of its dimensions is zero) are printed
 with the readable syntax <code class="computeroutput">#A(<em class="replaceable"><code>element-type</code></em> <em class="replaceable"><code>dimensions</code></em>
 <em class="replaceable"><code>contents</code></em>)</code>, unless the variable <a href="#pr-empty-arr-ansi"><code class="varname">CUSTOM:*PRINT-EMPTY-ARRAYS-ANSI*</code></a> is
 non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, in which case the arrays are printed using the
 [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]-prescribed syntax <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-12" target="_top"><span class="data"><code class="literal">#<em class="replaceable"><code>rank</code></em>A</code></span></a> <em class="replaceable"><code>contents</code></em></code>
 which often loses the dimension information.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="clpp"></a>22.5. The Lisp Pretty Printer
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-2.html" target="_top">[CLHS-22.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#pp-dispatch">22.5.1. Pretty Print Dispatch Table
   [CLHS-22.2.1.4]</a></span></dt></dl></div><p>The Lisp Pretty Printer implementation is <span class="strong"><strong>not</strong></span> perfect yet.
 <a href="http://www.lisp.org/HyperSpec/Body/mac_pprint-logical-block.html" target="_top"><code class="function">PPRINT-LOGICAL-BLOCK</code></a> does not respect <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-linesst.html" target="_top"><code class="varname">*PRINT-LINES*</code></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pp-dispatch"></a>22.5.1. Pretty Print Dispatch Table
   <a href="http://www.lisp.org/HyperSpec/Body/sec_22-2-1-4.html" target="_top">[CLHS-22.2.1.4]</a></h3></div></div></div><p>A <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#pprint_dispatch_table" target="_top">pprint
 dispatch table</a> is a <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><code class="function">CONS</code></a> of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>
 <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-p_t-dispatchst.html" target="_top"><code class="varname">*PRINT-PPRINT-DISPATCH*</code></a> and an <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> which maps types into
 priorities and print functions.
 Their use is strongly discouraged because of the performance issues:
 when <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-p_t-dispatchst.html" target="_top"><code class="varname">*PRINT-PPRINT-DISPATCH*</code></a> is non-trivial and <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><code class="varname">*PRINT-PRETTY*</code></a>
 is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, printing of every object requires a lookup in the table,
 which entails many calls to <a href="http://www.lisp.org/HyperSpec/Body/fun_typep.html" target="_top"><code class="function">TYPEP</code></a> (which cannot be made fast
 enough).</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="print-formatted"></a>22.6. Formatted Output
  <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3.html" target="_top">[CLHS-22.3]</a></h2></div><div><h3 class="subtitle">Function <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a></h3></div></div></div><p>The additional <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> instruction
 <strong class="first"><em class="firstterm">~!<a id="format-bang" class="indexterm"></a></em></strong>
 is similar to <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-5-4.html" target="_top"><code class="literal">~/</code></a>, but avoids putting a function name into a
 string, thus, even if the function is not interned in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a>
 package, you might not need to specify the package explicitly.
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <em class="replaceable"><code>stream</code></em> "~arguments!" <em class="replaceable"><code>function</code></em> <em class="replaceable"><code>object</code></em>)</code> is
  equivalent to <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a> <em class="replaceable"><code>function</code></em> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>object</code></em>
  <em class="replaceable"><code>colon-modifier-p</code></em>
  <em class="replaceable"><code>atsign-modifier-p</code></em> <em class="replaceable"><code>arguments</code></em>)</code>.</p><p>The additional <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> instruction
 <strong class="first"><em class="firstterm">~.<a id="format-dot" class="indexterm"></a></em></strong>
 is a kind of opposite to <code class="code">~&amp;</code>: It outputs a conditional
 newline, by calling the function <a href="#elastic-newline" title="21.3.8.&#xA0;Avoiding blank lines, EXT:ELASTIC-NEWLINE"><code class="function">EXT:ELASTIC-NEWLINE</code></a>.
 <code class="code">~<em class="replaceable"><code>n</code></em>.</code> outputs
 <em class="replaceable"><code>n-1</code></em> newlines followed by an <a href="#elastic-newline" title="21.3.8.&#xA0;Avoiding blank lines, EXT:ELASTIC-NEWLINE"><code class="function">EXT:ELASTIC-NEWLINE</code></a>.
 <code class="code">~0.</code> does nothing.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><code class="literal">~R</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html" target="_top"><code class="literal">~:R</code></a> can output only
 integers in the range <code class="varname">|n| &lt;
 <em class="replaceable"><code>10<sup>66</sup></code></em></code>.
 The output is in English, according to the American conventions, and
 these conventions are identical to the British conventions only in the
 range <code class="varname">|n| &lt;
 <em class="replaceable"><code>10<sup>9</sup></code></em></code>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-1-1.html" target="_top"><code class="literal">~:@C</code></a> does not output the character itself, only the
 instruction how to type the character.</p><p>For <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><code class="literal">~E</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><code class="literal">~G</code></a>, the value of
 <a href="http://www.lisp.org/HyperSpec/Body/var_stread-de_oat-formatst.html" target="_top"><code class="varname">*READ-DEFAULT-FLOAT-FORMAT*</code></a> does not matter if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a>
 is true.</p><p><a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-6-1.html" target="_top"><code class="literal">~T</code></a> can determine the current column of any
 built-in stream.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="print-dict"></a>22.7. The Printer Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_printer_dictionary.html" target="_top">[CLHS-22.4]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#write">22.7.1. Functions <code class="function">WRITE</code> &amp; <code class="function">WRITE-TO-STRING</code></a></span></dt><dt><span class="section"><a href="#print-unreadable-object">22.7.2. Macro <code class="function">PRINT-UNREADABLE-OBJECT</code></a></span></dt><dt><span class="section"><a href="#pathprint">22.7.3. Pathnames</a></span></dt><dt><span class="section"><a href="#spacecharprint">22.7.4. Characters</a></span></dt><dt><span class="section"><a href="#print-misc">22.7.5. Miscellaneous Issues</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="write"></a>22.7.1. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">WRITE</code></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_write-to-_nc-to-string.html" target="_top"><code class="function">WRITE-TO-STRING</code></a></h3></div></div></div><p>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">WRITE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_write-to-_nc-to-string.html" target="_top"><code class="function">WRITE-TO-STRING</code></a> have an additional
 keyword argument <code class="constant">:CLOSURE</code> which is used to bind
 <a href="#pr-closure"><code class="varname">CUSTOM:*PRINT-CLOSURE*</code></a>.</p></div>
<!--//Commented out from the source code. <section id="print-object"><title>Generic Function &print-object;</title> <para>The function &print-object; verifies the &ansi-cl; requirement that its return value is the same as its first argument. It issues a warning if one of the &print-object; methods yields a wrong return value. To get rid of such a warning, you need to fix the source code of the incriminated method.</para> </section>-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="print-unreadable-object"></a>22.7.2. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_print-unr_dable-object.html" target="_top"><code class="function">PRINT-UNREADABLE-OBJECT</code></a></h3></div></div></div><p><a id="pr-unreadable-ansi"></a><b>Variable <a href="#pr-unreadable-ansi"><code class="varname">CUSTOM:*PRINT-UNREADABLE-ANSI*</code></a>. </b>The macro <a href="http://www.lisp.org/HyperSpec/Body/mac_print-unr_dable-object.html" target="_top"><code class="function">PRINT-UNREADABLE-OBJECT</code></a>, when invoked without body forms,
 suppresses the trailing space if only the type is to be printed, and
 suppresses the leading space if only the identity is to be printed.  This
 behaviour can be turned off set setting the variable <a href="#pr-unreadable-ansi"><code class="varname">CUSTOM:*PRINT-UNREADABLE-ANSI*</code></a>
 to a non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> value: in this case, a trailing or leading space are output,
 as prescribed by [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pathprint"></a>22.7.3. Pathnames</h3></div></div></div><p>Pathnames are printed as follows: If <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html" target="_top"><code class="varname">*PRINT-ESCAPE*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
 only the namestring is printed; otherwise it is printed with the
 <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-14" target="_top"><span class="data"><code class="literal">#P</code></span></a> syntax, as per the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issue <a href="http://www.lisp.org/HyperSpec/Issues/iss276.html" target="_top">PRINT-READABLY-BEHAVIOR:CLARIFY</a>.
 But, if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a> is true, we are in trouble as <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-14" target="_top"><span class="data"><code class="literal">#P</code></span></a> is
 ambiguous (which is verboten when <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a> is true), while
 being mandated by the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
 Therefore, in this case, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>'s behavior is determined by the value
 of <a href="#pathprint" title="22.7.3.&#xA0;Pathnames"><code class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</code></a>: when it is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, we print pathnames like this:
<code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-18" target="_top"><span class="data"><code class="literal">#-</code></span></a>CLISP <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-14" target="_top"><span class="data"><code class="literal">#P</code></span></a>"..."
<a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-17" target="_top"><span class="data"><code class="literal">#+</code></span></a>CLISP <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-13" target="_top"><span class="data"><code class="literal">#S</code></span></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a> ...)</code>.
 Otherwise, when the variable <a href="#pathprint" title="22.7.3.&#xA0;Pathnames"><code class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the
 <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-14" target="_top"><span class="data"><code class="literal">#P</code></span></a> notation is used as per <a href="http://www.lisp.org/HyperSpec/Body/sec_1-5-1-4-1.html" target="_top">1.5.1.4.1 Resolution of Apparent
 Conflicts in Exceptional Situations</a>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>When both <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a> and <a href="#pathprint" title="22.7.3.&#xA0;Pathnames"><code class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</code></a> are
  non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and the namestring will be parsed to a dissimilar object
  (with the current value of <a href="#name-type-split"><code class="varname">CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</code></a>), an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> of type
  <a href="http://www.lisp.org/HyperSpec/Body/contyp_print-not-readable.html" target="_top"><code class="classname">PRINT-NOT-READABLE</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="spacecharprint"></a>22.7.4. Characters</h3></div></div></div><p>Characters are printed as specified in [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] using
 <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-1" target="_top"><span class="data"><code class="literal">#\</code></span></a>, with one exception: when <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#printer_escaping" target="_top">printer escaping</a> is in effect,
 the space character is printed as
 “<span class="quote"><code class="computeroutput">#\Space</code></span>” when the
 variable <a href="#spacecharprint" title="22.7.4.&#xA0;Characters"><code class="varname">CUSTOM:*PRINT-SPACE-CHAR-ANSI*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
 When <a href="#spacecharprint" title="22.7.4.&#xA0;Characters"><code class="varname">CUSTOM:*PRINT-SPACE-CHAR-ANSI*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, it is printed as
 “<span class="quote"><code class="computeroutput">#\ </code></span>”; this is how
 <a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-2.html" target="_top">22.1.3.2 Printing Characters</a>
 specifies it.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="print-misc"></a>22.7.5. Miscellaneous Issues</h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-casest.html" target="_top"><code class="varname">*PRINT-CASE*</code></a> controls the output not only of symbols, but also
 of characters and some unreadable <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-20" target="_top"><span class="data"><code class="literal">#&lt;</code></span></a> objects.</p><p>In the absence of
 <strong class="first"><em class="firstterm"><a href="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-1-3.html" target="_top"><code class="function">SYS::WRITE-FLOAT-DECIMAL</code></a>
  <a id="write-float-decimal" class="indexterm"></a></em></strong>,
 floating point numbers are output in radix 2.  This function is defined
 in <a href="#floatprint-lisp"><code class="filename">floatprint.lisp</code></a> and is not available if you run
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> without a <a href="impnotes.html#image" class="olink">memory image</a> (which you should never do anyway!)</p><p>If <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html" target="_top"><code class="varname">*PRINT-READABLY*</code></a> is true, <a href="http://www.lisp.org/HyperSpec/Body/var_stread-de_oat-formatst.html" target="_top"><code class="varname">*READ-DEFAULT-FLOAT-FORMAT*</code></a>
 has no influence on the way floating point numbers are printed.</p><div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html" target="_top"><code class="varname">*PRINT-PRETTY*</code></a> is initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> but set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>
 in <a href="#config-lisp"><code class="filename">config.lisp</code></a>.  This makes screen output prettier.
 </dd></dl></div><p><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><code class="varname">*PRINT-ARRAY*</code></a> is initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="reader"></a>Chapter 23. Reader
   <a href="http://www.lisp.org/HyperSpec/Body/chap-23.html" target="_top">[CLHS-23]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#chario">23.1. Characters</a></span></dt><dt><span class="section"><a href="#read-dispatch-ext">23.2. Additional read dispatch macros</a></span></dt><dt><span class="section"><a href="#rt-case">23.3. Function <code class="function">READTABLE-CASE</code></a></span></dt></dl></div><p>This is the list of objects whose external representation cannot
  be meaningfully read in:
</p><div class="table"><a id="unreadable-objects-table"></a><p class="title"><b>Table 23.1. Unreadable objects</b></p><table summary="Unreadable objects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left">format</th><th align="left">meaning</th></tr></thead><tbody><tr><td align="left"><code class="literal">#&lt;<em class="replaceable"><code>type</code></em> ...&gt;</code></td><td align="left">all <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a>s lacking a keyword constructor</td></tr><tr><td align="left"><code class="literal">#&lt;ARRAY <em class="replaceable"><code>type</code></em> <em class="replaceable"><code>dimensions</code></em>&gt;</code></td><td align="left">all <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a>s except <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s, if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><code class="varname">*PRINT-ARRAY*</code></a> is
   <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td></tr><tr><td align="left"><code class="literal">#&lt;SYSTEM-FUNCTION <em class="replaceable"><code>name</code></em>&gt;</code></td><td align="left">built-in function written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a></td></tr><tr><td align="left"><code class="literal">#&lt;ADD-ON-SYSTEM-FUNCTION
    <em class="replaceable"><code>name</code></em>&gt;</code></td><td align="left"><a href="#modules" title="31.2.&#xA0;External Modules">module</a> function written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a></td></tr><tr><td align="left"><code class="literal">#&lt;SPECIAL-OPERATOR <em class="replaceable"><code>name</code></em>&gt;</code></td><td align="left">special operator handler</td></tr><tr><td align="left"><code class="literal">#&lt;COMPILED-CLOSURE <em class="replaceable"><code>name</code></em>&gt;</code></td><td align="left">compiled function, if <a href="#pr-closure"><code class="varname">CUSTOM:*PRINT-CLOSURE*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td></tr><tr><td align="left"><code class="literal">#&lt;CLOSURE <em class="replaceable"><code>name</code></em> ...&gt;</code></td><td align="left">interpreted function</td></tr><tr><td align="left"><code class="literal">#&lt;FRAME-POINTER #x...&gt;</code></td><td align="left">pointer to a stack frame</td></tr><tr><td align="left"><code class="literal">#&lt;DISABLED POINTER&gt;</code></td><td align="left">frame pointer which has become invalid on exit from the
   corresponding <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><code class="function">BLOCK</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a></td></tr><tr><td align="left"><code class="literal">#&lt;...STREAM...&gt;</code></td><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a></td></tr><tr><td align="left"><code class="literal">#&lt;PACKAGE <em class="replaceable"><code>name</code></em>&gt;</code></td><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><code class="classname">PACKAGE</code></a></td></tr><tr><td align="left"><code class="literal">#&lt;HASH-TABLE #x...&gt;</code></td><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>, if <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html" target="_top"><code class="varname">*PRINT-ARRAY*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td></tr><tr><td align="left"><code class="literal">#&lt;READTABLE #x...&gt;</code></td><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html" target="_top"><code class="classname">READTABLE</code></a></td></tr><tr><td align="left"><code class="literal">#&lt;SYMBOL-MACRO <em class="replaceable"><code>form</code></em>&gt;</code></td><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> handler</td></tr><tr><td align="left"><code class="literal">#&lt;MACRO <em class="replaceable"><code>function</code></em>&gt;</code></td><td align="left">macro expander (defined by <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><code class="function">DEFMACRO</code></a> and friends)</td></tr><tr><td align="left"><code class="literal">#&lt;<a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a> #x...&gt;</code></td><td align="left">foreign pointer (<span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span>)</td></tr><tr><td align="left"><code class="literal">#&lt;<a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a> #x...&gt;</code></td><td align="left">foreign address (<span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span>)</td></tr><tr><td align="left"><code class="literal">#&lt;<a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a>
    <em class="replaceable"><code>name</code></em> #x...&gt;</code></td><td align="left">foreign variable (<span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span>)</td></tr><tr><td align="left"><code class="literal">#&lt;<a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a>
    <em class="replaceable"><code>name</code></em> #x...&gt;</code></td><td align="left">foreign function (<span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span>)</td></tr><tr><td align="left"><code class="literal">#&lt;UNBOUND&gt;</code></td><td align="left">“<span class="quote">value</span>” of an unbound symbol, an unsupplied
   optional or keyword argument</td></tr><tr><td align="left"><code class="literal">#&lt;SPECIAL REFERENCE&gt;</code></td><td align="left">environment marker for variables declared <a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><code class="literal">SPECIAL</code></a>
 </td></tr><tr><td align="left"><code class="literal">#&lt;DOT&gt;</code></td><td align="left">internal <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><code class="function">READ</code></a> result for “<span class="quote">.</span>”</td></tr><tr><td align="left"><code class="literal">#&lt;END OF FILE&gt;</code></td><td align="left">internal <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><code class="function">READ</code></a> result, when the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> is reached
 </td></tr><tr><td align="left"><code class="literal">#&lt;READ-LABEL ...&gt;</code></td><td align="left">intermediate <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><code class="function">READ</code></a> result for <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-16" target="_top"><span class="data"><code class="literal">#n#</code></span></a></td></tr><tr><td align="left"><code class="literal">#&lt;ADDRESS #x...&gt;</code></td><td align="left">machine address, should not occur</td></tr><tr><td align="left"><code class="literal">#&lt;SYSTEM-POINTER #x...&gt;</code></td><td align="left">should not occur</td></tr></tbody></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="chario"></a>23.1. Characters</h2></div></div></div><p><span class="keysym">#\Code</span> allows input of characters of arbitrary code:
 e.g., <span class="keysym">#\Code231</span> reads as the character
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> 231.)</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="read-dispatch-ext"></a>23.2. Additional read dispatch macros</h2></div></div></div><div class="itemizedlist"><ul type="disc"><li><span class="keysym">#Y</span> is used to read compiled
  functions and to set the current <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>'s <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a>.
  </li><li><p><code class="filename">#""</code> is used to read pathnames:
  <code class="filename">#"test.lisp"</code> is the value of <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_pathname.html" target="_top"><code class="function">PATHNAME</code></a>
   "test.lisp")</code></p><div class="variablelist">
<!--#if defined(WIN32)-->
<dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span></span></dt><dd>As in all strings, backslashes must be written twice
  here: <code class="filename">#"A:\\programs\\test.lisp"</code>
  </dd>
<!--#endif-->
</dl></div></li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="rt-case"></a>23.3. Function <a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><code class="function">READTABLE-CASE</code></a></h2></div></div></div><p>When the value of <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><code class="function">READTABLE-CASE</code></a>
 <em class="replaceable"><code>readtable</code></em>)</code> is
 <code class="constant">:INVERT</code>, it applies to the package name and the
 symbol name of a symbol separately (not to the entire token at once).
 An alternative to the use of <a href="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html" target="_top"><code class="function">READTABLE-CASE</code></a> is the use of the
 <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity"><code class="constant">:CASE-SENSITIVE</code></a> option of <a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><code class="function">MAKE-PACKAGE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a>.</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="system"></a>Chapter 24. System Construction
   <a href="http://www.lisp.org/HyperSpec/Body/chap-24.html" target="_top">[CLHS-24]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#system-dict">24.1. The System Construction Dictionary
   [CLHS-24.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#compilefile">24.1.1. Function <code class="function">COMPILE-FILE</code></a></span></dt><dt><span class="section"><a href="#compile-file-path">24.1.2. Function <code class="function">COMPILE-FILE-PATHNAME</code></a></span></dt><dt><span class="section"><a href="#require">24.1.3. Function <code class="function">REQUIRE</code></a></span></dt><dt><span class="section"><a href="#loadfile">24.1.4. Function <code class="function">LOAD</code></a></span></dt><dt><span class="section"><a href="#features">24.1.5. Variable <code class="varname">*FEATURES*</code></a></span></dt><dt><span class="section"><a href="#featurep">24.1.6. Function <code class="function">EXT:FEATUREP</code>
  [CLRFI-1]</a></span></dt><dt><span class="section"><a href="#compiled-file-p">24.1.7. Function
  <code class="function">EXT:COMPILED-FILE-P</code>
  [CLRFI-2]</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="system-dict"></a>24.1. The System Construction Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_syste_n_dictionary.html" target="_top">[CLHS-24.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#compilefile">24.1.1. Function <code class="function">COMPILE-FILE</code></a></span></dt><dt><span class="section"><a href="#compile-file-path">24.1.2. Function <code class="function">COMPILE-FILE-PATHNAME</code></a></span></dt><dt><span class="section"><a href="#require">24.1.3. Function <code class="function">REQUIRE</code></a></span></dt><dt><span class="section"><a href="#loadfile">24.1.4. Function <code class="function">LOAD</code></a></span></dt><dt><span class="section"><a href="#features">24.1.5. Variable <code class="varname">*FEATURES*</code></a></span></dt><dt><span class="section"><a href="#featurep">24.1.6. Function <code class="function">EXT:FEATUREP</code>
  [CLRFI-1]</a></span></dt><dt><span class="section"><a href="#compiled-file-p">24.1.7. Function
  <code class="function">EXT:COMPILED-FILE-P</code>
  [CLRFI-2]</a></span></dt></dl></div><p>The compiler can be called not only by the functions <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><code class="function">COMPILE</code></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><code class="function">DISASSEMBLE</code></a>, but also by the declaration
 <a href="#compile-decl" title="3.3.3.&#xA0;Declaration (COMPILE)"><code class="code">(COMPILE)</code></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compilefile"></a>24.1.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a> compiles a file to a platform-independent
 <a href="impnotes.html#bytecode" class="olink">bytecode</a>:
</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a> <em class="replaceable"><code>filename</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:OUTPUT-FILE</code> :LISTING <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a>
                            ((<code class="constant">:WARNINGS</code> <a href="#compilefile" title="24.1.1.&#xA0;Function COMPILE-FILE"><code class="varname">CUSTOM:*COMPILE-WARNINGS*</code></a>) <a href="#compilefile" title="24.1.1.&#xA0;Function COMPILE-FILE"><code class="varname">CUSTOM:*COMPILE-WARNINGS*</code></a>)
                            ((<code class="constant">:VERBOSE</code> <a href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html" target="_top"><code class="varname">*COMPILE-VERBOSE*</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html" target="_top"><code class="varname">*COMPILE-VERBOSE*</code></a>)
                            ((<code class="constant">:PRINT</code> <a href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html" target="_top"><code class="varname">*COMPILE-PRINT*</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html" target="_top"><code class="varname">*COMPILE-PRINT*</code></a>))
</pre><div class="variablelist"><a id="compile-file-arguments"></a><p class="title"><b>Options for <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a></b></p><dl><dt><span class="term"><em class="replaceable"><code>filename</code></em></span></dt><dd>the file to be compiled, should be a <a href="#path-des">pathname designator</a>.
 </dd><dt><span class="term"><code class="constant">:OUTPUT-FILE</code></span></dt><dd>should be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> or a <a href="#path-des">pathname designator</a> or an
   <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>.  The default is <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</dd><dt><span class="term"><code class="constant">:LISTING</code></span></dt><dd>should be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> or a <a href="#path-des">pathname designator</a> or an
   <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>.  The default is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><span class="term"><a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a></span></dt><dd>the <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a> of the <em class="replaceable"><code>filename</code></em>.
</dd><dt><span class="term"><code class="constant">:WARNINGS</code></span></dt><dd>specifies whether warnings should also appear on the
   screen.</dd><dt><span class="term"><code class="constant">:VERBOSE</code></span></dt><dd>specifies whether error messages should also appear
   on the screen.</dd><dt><span class="term"><code class="constant">:PRINT</code></span></dt><dd>specifies whether an indication which forms are
   being compiled should appear on the screen.
</dd></dl></div><p>The variables <strong class="first"><em class="firstterm"><a href="#compilefile" title="24.1.1.&#xA0;Function COMPILE-FILE"><code class="varname">CUSTOM:*COMPILE-WARNINGS*</code></a></em></strong>,
 <a href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html" target="_top"><code class="varname">*COMPILE-VERBOSE*</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html" target="_top"><code class="varname">*COMPILE-PRINT*</code></a> provide defaults for the
 <code class="constant">:WARNINGS</code>, <code class="constant">:VERBOSE</code>, <code class="constant">:PRINT</code> keyword arguments, respectively,
 and are bound by <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a> to the values of the arguments, i.e.,
 these arguments are recursive.</p><p>For each input file (default file type: <code class="filename">#P".lisp"</code>)
 the following files are generated:
</p><div class="informaltable"><a id="compile-file-new-files-table"></a><table border="1"><colgroup><col /><col /><col /><col align="left" /></colgroup><thead><tr><th align="center">File</th><th align="center">When</th><th align="center">Default file type</th><th align="left">Contents</th></tr></thead><tbody><tr><td align="center">output file</td><td align="center">only if <code class="constant">:OUTPUT-FILE</code> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td><td align="center"><code class="filename">#P".fas"</code></td><td align="left">can be loaded using the <a href="impnotes.html#loadfile" class="olink"><code class="function">LOAD</code></a> function</td></tr><tr><td align="center">auxiliary output file</td><td align="center">only if <code class="constant">:OUTPUT-FILE</code> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td><td align="center"><a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><code class="filename">#P".lib"</code></a></td><td align="left">used by <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a> when compiling a <a href="impnotes.html#require" class="olink"><code class="function">REQUIRE</code></a> form referring
    to the input file</td></tr><tr><td align="center">listing file</td><td align="center">only if <code class="constant">:LISTING</code> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td><td align="center"><code class="filename">#P".lis"</code></td><td align="left">disassembly of the output file</td></tr><tr><td align="center"><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> output file</td><td align="center">only if <code class="constant">:OUTPUT-FILE</code> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td><td align="center"><code class="filename">#P".c"</code></td><td align="left"><a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>; this file is created only if the source contains
    <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms</td></tr></tbody></table></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="c-file-overwrite"></a>Warning</h3><p>If you have two files in the same
directory - <code class="filename">#P"foo.lisp"</code> and <code class="filename">#P"foo.c"</code>, and you
compile the first file with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, the second file will be
<span class="emphasis"><em>clobbered</em></span> if you have any <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms in
the first one!</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compile-file-path"></a>24.1.2. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file-pathname.html" target="_top"><code class="function">COMPILE-FILE-PATHNAME</code></a></h3></div></div></div><p>The default for the <code class="constant">:OUTPUT-FILE</code> argument is
 <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, which means <code class="filename">#P".fas"</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="require"></a>24.1.3. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><code class="function">REQUIRE</code></a></h3></div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><code class="function">REQUIRE</code></a> receives as the optional argument either
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a>s: files to be <a href="impnotes.html#loadfile" class="olink"><code class="function">LOAD</code></a>ed
 if the required module is not already present.</p><p>At compile time, <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><code class="function">REQUIRE</code></a> <code class="filename">#P"foo"</code>)</code>
forms are treated specially: <a href="#load-paths"><code class="varname">CUSTOM:*LOAD-PATHS*</code></a> is searched for
<code class="filename">#P"foo.lisp"</code> <span class="strong"><strong>and</strong></span> <code class="filename">#P"foo.lib"</code>.
If the latest such file is a <code class="filename">#P".lisp"</code>, it is compiled;
otherwise the <a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><code class="filename">#P".lib"</code></a> is loaded.</p><p>The <a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><code class="filename">#P".lib"</code></a> is a “<span class="quote">header</span>” file which contains the
constant, variable, inline and macro definitions necessary for
compilation of the files that <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><code class="function">REQUIRE</code></a> this file, but not the function
definitions and calls that are not necessary for that.
Thus it is <span class="strong"><strong>not</strong></span> necessary to either enclose <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><code class="function">REQUIRE</code></a> forms in
<a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><code class="function">EVAL-WHEN</code></a> or to load the required files in the makefiles: if you have
two files, <code class="filename">#P"foo.lisp"</code> and <code class="filename">#P"bar.lisp"</code>, and the
latter requires the former, you can write in your <code class="filename">Makefile</code>:
</p><pre class="programlisting">
all: foo.fas bar.fas

foo.fas: foo.lisp
	clisp -c foo

bar.fas: bar.lisp foo.fas
	clisp -c bar
</pre><p>
instead of the more cumbersome (and slower, since <a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><code class="filename">#P".lib"</code></a>s are
usually smaller and load faster that <code class="filename">#P".fas"</code>s):
</p><pre class="programlisting">
bar.fas: bar.lisp foo.fas
        clisp -i foo -c bar
</pre><p>
Thus, you do not need to <code class="code">(<a href="impnotes.html#loadfile" class="olink"><code class="function">LOAD</code></a> <code class="filename">#P"foo"</code>)</code> in order
to <code class="code">(<a href="impnotes.html#compilefile" class="olink"><code class="function">COMPILE-FILE</code></a> <code class="filename">#P"bar.lisp"</code>)</code>.
If memory is tight, and if <code class="filename">#P"foo.lisp"</code> contains only a few inline
functions, macros, constants or variables, this is a space and time
saver.  If <code class="filename">#P"foo.lisp"</code> does a lot of initializations or side effects
when being loaded, this is important as well.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="loadfile"></a>24.1.4. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><code class="function">LOAD</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><code class="function">LOAD</code></a> accepts four additional keyword arguments <code class="constant">:ECHO</code>,
 <code class="constant">:COMPILING</code>, <code class="constant">:EXTRA-FILE-TYPES</code>, and <code class="constant">:OBSOLETE-ACTION</code>.</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><code class="function">LOAD</code></a> <em class="replaceable"><code>filename</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> ((<code class="constant">:VERBOSE</code> <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><code class="varname">*LOAD-VERBOSE*</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><code class="varname">*LOAD-VERBOSE*</code></a>)
                    ((<code class="constant">:PRINT</code> <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><code class="varname">*LOAD-PRINT*</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><code class="varname">*LOAD-PRINT*</code></a>)
                    ((<code class="constant">:ECHO</code> <a href="impnotes.html#loadfile" class="olink"><code class="varname">CUSTOM:*LOAD-ECHO*</code></a>) <a href="impnotes.html#loadfile" class="olink"><code class="varname">CUSTOM:*LOAD-ECHO*</code></a>) <code class="constant">:IF-DOES-NOT-EXIST</code>
                    ((<code class="constant">:COMPILING</code> <a href="impnotes.html#loadfile" class="olink"><code class="varname">CUSTOM:*LOAD-COMPILING*</code></a>) <a href="impnotes.html#loadfile" class="olink"><code class="varname">CUSTOM:*LOAD-COMPILING*</code></a>) <code class="constant">:EXTRA-FILE-TYPES</code>
                    ((<code class="constant">:OBSOLETE-ACTION</code> <a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><code class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</code></a>) <a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><code class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</code></a>))
</pre><div class="variablelist"><dl><dt><span class="term"><code class="constant">:VERBOSE</code></span></dt><dd>causes <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><code class="function">LOAD</code></a> to emit a short message that a file is
    being loaded.  The default is <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><code class="varname">*LOAD-VERBOSE*</code></a>, which is initially
    <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, but can be changed by the <code class="option"><a href="clisp.html#opt-verbose" class="olink">-v</a></code> option.
 </dd><dt><span class="term"><code class="constant">:PRINT</code></span></dt><dd>causes <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><code class="function">LOAD</code></a> to print the value of each form.  The
    default is <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><code class="varname">*LOAD-PRINT*</code></a>, which is initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, but can be
    changed by the <code class="option"><a href="clisp.html#opt-verbose" class="olink">-v</a></code> option.</dd><dt><span class="term"><code class="constant">:ECHO</code></span></dt><dd>causes the input from the file to be echoed to
    <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-OUTPUT*</code></a> (normally to the screen).  Should there be an
    error in the file, you can see at one glance where it is.
    The default is <strong class="first"><em class="firstterm"><a href="impnotes.html#loadfile" class="olink"><code class="varname">CUSTOM:*LOAD-ECHO*</code></a></em></strong>, which is
    initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, but can be changed by the <code class="option"><a href="clisp.html#opt-verbose" class="olink">-v</a></code> option.
 </dd><dt><span class="term"><code class="constant">:COMPILING</code></span></dt><dd>causes each form read to be compiled on the fly.
    The compiled code is executed at once and - in contrast to
    <a href="impnotes.html#compilefile" class="olink"><code class="function">COMPILE-FILE</code></a> - not written to a file.
    The default is <strong class="first"><em class="firstterm"><a href="impnotes.html#loadfile" class="olink"><code class="varname">CUSTOM:*LOAD-COMPILING*</code></a></em></strong>, which is initially
    <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, but can be changed by the <code class="option"><a href="clisp.html#opt-load-comp" class="olink">-C</a></code> option.
 </dd><dt><span class="term"><code class="constant">:EXTRA-FILE-TYPES</code></span></dt><dd><p>Specifies the <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of additional file types
    considered for loading, in addition to <strong class="first"><em class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><code class="varname">CUSTOM:*SOURCE-FILE-TYPES*</code></a></em></strong>
    (which is initially <span class="data"><code class="literal">("lisp" "lsp" "cl")</code></span>)
    and <strong class="first"><em class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><code class="varname">CUSTOM:*COMPILED-FILE-TYPES*</code></a></em></strong>
    (which is initially <span class="data"><code class="literal">("fas")</code></span>).
   </p><p>When <em class="replaceable"><code>filename</code></em> does not specify a unique file
    (e.g., <em class="replaceable"><code>filename</code></em> is <code class="filename">#P"foo"</code> and both <code class="filename">#P"foo.lisp"</code>
    and <code class="filename">#P"foo.fas"</code> are found in the
    <a href="#load-paths"><code class="varname">CUSTOM:*LOAD-PATHS*</code></a>), then the <span class="emphasis"><em>newest</em></span> file is loaded.
 </p></dd><dt><span class="term"><code class="constant">:OBSOLETE-ACTION</code></span></dt><dd><p>Specifies the action to take when loading a
    <code class="filename">#P".fas"</code> with a different <a href="impnotes.html#bytecode" class="olink">bytecode</a> version from the one
    supported by this <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> version.  The possible actions are
    </p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:DELETE</code></span></dt><dd>delete the <code class="filename">#P".fas"</code>
     </dd><dt><span class="term"><code class="constant">:ERROR</code></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>
     </dd><dt><span class="term"><code class="constant">:COMPILE</code></span></dt><dd>recompile the source file
        (if <a href="#load-paths">present</a>)
     </dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (default)</span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_warn.html" target="_top"><code class="function">WARN</code></a> and <a href="#load-paths">look
         for another matching file</a>
    </dd></dl></div><p>
    If no file can be loaded and <code class="constant">:IF-DOES-NOT-EXIST</code> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.
    The default is <strong class="first"><em class="firstterm"><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><code class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</code></a></em></strong>,
    which is initially <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p></dd></dl></div><p>The variables <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><code class="varname">*LOAD-VERBOSE*</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html" target="_top"><code class="varname">*LOAD-PRINT*</code></a>,
<a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><code class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</code></a>, <a href="impnotes.html#loadfile" class="olink"><code class="varname">CUSTOM:*LOAD-COMPILING*</code></a>, and <a href="impnotes.html#loadfile" class="olink"><code class="varname">CUSTOM:*LOAD-ECHO*</code></a> are bound by <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><code class="function">LOAD</code></a> when it
receives a corresponding keyword argument (<code class="constant">:VERBOSE</code>, <code class="constant">:PRINT</code>,
<code class="constant">:OBSOLETE-ACTION</code>, <code class="constant">:COMPILING</code>, and <code class="constant">:ECHO</code>), i.e., these arguments
are recursive, just like the arguments <code class="constant">:WARNINGS</code>, <code class="constant">:VERBOSE</code>, and
<code class="constant">:PRINT</code> for <a href="impnotes.html#compilefile" class="olink"><code class="function">COMPILE-FILE</code></a>.</p><p>When evaluation of a read form <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>, two restarts are
 available:</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">SKIP</code></span></dt><dd>Skip this form and read the next one.
  </dd><dt><span class="term"><code class="literal">STOP</code></span></dt><dd>Stop loading the file.
</dd></dl></div><p><a id="load-paths"></a><b>Variable <a href="#load-paths"><code class="varname">CUSTOM:*LOAD-PATHS*</code></a>. </b>The variable <a href="#load-paths"><code class="varname">CUSTOM:*LOAD-PATHS*</code></a> contains a list of directories where the
 files are looked for - in addition to the specified or current
 directory - by <a href="impnotes.html#loadfile" class="olink"><code class="function">LOAD</code></a>, <a href="impnotes.html#require" class="olink"><code class="function">REQUIRE</code></a>, <a href="impnotes.html#compilefile" class="olink"><code class="function">COMPILE-FILE</code></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html" target="_top"><code class="function">LOAD-LOGICAL-PATHNAME-TRANSLATIONS</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="features"></a>24.1.5. Variable <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a></h3></div></div></div><p>The variable <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a> initially contains the following symbols
</p><div class="variablelist"><a id="features-table"></a><p class="title"><b>Default <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a></b></p><dl><dt><span class="term"><code class="constant">:CLISP</code></span></dt><dd>the name of this implementation
</dd><dt><span class="term"><code class="constant">:ANSI-CL</code></span></dt><dd><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
   <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#purports_to_conform" target="_top">purports to
    conform</a> to [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]</dd><dt><span class="term"><code class="constant">:COMMON-LISP</code></span></dt><dd>required by [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]</dd><dt><span class="term"><code class="constant">:INTERPRETER</code></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><code class="function">EVAL</code></a> is implemented</dd><dt><span class="term"><code class="constant">:COMPILER</code></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><code class="function">COMPILE</code></a> and <a href="impnotes.html#compilefile" class="olink"><code class="function">COMPILE-FILE</code></a> are implemented
</dd>
<!--#ifdef SOCKET_STREAMS-->
<dt><span class="term"><code class="constant">:SOCKETS</code></span></dt><dd>see <a href="#socket" title="31.5.&#xA0;Socket Streams">Section 31.5, “Socket Streams”</a>
</dd>
<!--#endif-->
<!--#ifdef GENERIC_STREAMS-->
<dt><span class="term"><code class="constant">:GENERIC-STREAMS</code></span></dt><dd>see <a href="#gstream" title="30.6.&#xA0;Generic streams">Section 30.6, “Generic streams”</a>
</dd>
<!--#endif-->
<!--#ifdef LOGICAL_PATHNAMES-->
<dt><span class="term"><code class="constant">:LOGICAL-PATHNAMES</code></span></dt><dd><a href="#log-path" title="19.4.&#xA0;Logical Pathnames&#10;  [CLHS-19.3]">Logical Pathnames</a>
   are implemented</dd>
<!--#endif-->
<!--#ifdef DYNAMIC_FFI-->
<dt><span class="term"><code class="constant">:FFI</code></span></dt><dd>if a foreign function interface
   (see <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility">Section 31.3, “The Foreign Function Call Facility”</a>) is supported
   (<span class="plat-dep">Platform Dependent: <span class="plat-dep">Many <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>
    platforms only</span></span>)</dd>
<!--#endif-->
<!--#ifdef GNU_GETTEXT-->
<dt><span class="term"><code class="constant">:GETTEXT</code></span></dt><dd>if internationalization (see <a href="#i18n" title="30.4.&#xA0;Internationalization of CLISP">Section 30.4, “Internationalization of <span><strong class="command">CLISP</strong></span>”</a>)
   using the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> package is supported
   (<span class="plat-dep">Platform Dependent: <span class="plat-dep">most <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platforms
    only</span></span>)</dd>
<!--#endif-->
<!--#ifdef UNICODE-->
<dt><span class="term"><code class="constant">:UNICODE</code></span></dt><dd>if <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> (ISO 10646) characters are supported
   (see <a href="#encoding" title="30.5.&#xA0;Encodings">Section 30.5, “Encodings”</a>)</dd>
<!--#endif-->
<dt><span class="term"><code class="constant">:LOOP</code></span></dt><dd>“<span class="quote">extended</span>” <a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a> form is implemented
</dd><dt><span class="term"><code class="constant">:CLOS</code></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> is implemented</dd><dt><span class="term"><code class="constant">:MOP</code></span></dt><dd><a href="#mop-chap" title="29.1.&#xA0;Meta-Object Protocol">Meta-Object Protocol</a> is implemented</dd><dt><span class="term"><code class="constant">:WIN32</code></span></dt><dd>if <em class="replaceable"><code>hardware</code></em> = PC (clone) and <em class="replaceable"><code>operating system</code></em> = <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>
  (Windows 95/98/Me/NT/2000/XP)</dd><dt><span class="term"><code class="constant">:PC386</code></span></dt><dd>if <em class="replaceable"><code>hardware</code></em> = PC (clone).  It can be used as an
   indicator for the mainstream hardware characteristics (such as the
   existence of a graphics card with a non-graphics text mode,
   or the presence of a keyboard with arrows and
   <span class="keysym">Insert</span>/<span class="keysym">Delete</span> keys,
   or an ISA/VLB/PCI bus) or software characteristics (such as the
   <span><strong class="keycap">Control</strong></span>-<span><strong class="keycap">Alternate</strong></span>-<span class="keysym">Delete</span> keyboard
   combination).</dd><dt><span class="term"><code class="constant">:UNIX</code></span></dt><dd>if <em class="replaceable"><code>operating system</code></em> = <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> (in this case the <em class="replaceable"><code>hardware</code></em> is irrelevant!)
</dd><dt><span class="term"><code class="constant">:BEOS</code></span></dt><dd>if <em class="replaceable"><code>operating system</code></em> = <a href="http://www.bebits.com/app/2680" target="_top"><span class="strong"><strong>BeOS</strong></span></a> (in that case <code class="constant">:UNIX</code> is also present)
</dd><dt><span class="term"><code class="constant">:CYGWIN</code></span></dt><dd>if <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is using the <a href="http://cygwin.com/" target="_top"><span class="strong"><strong>Cygwin</strong></span></a> <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>
   compatibility layer on top of <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>
   (in that case <code class="constant">:UNIX</code> is also present)
</dd><dt><span class="term"><code class="constant">:MACOS</code></span></dt><dd>if <em class="replaceable"><code>operating system</code></em> = <a href="http://www.apple.com/macosx/" target="_top"><span class="strong"><strong>Mac OS X</strong></span></a> (in that case <code class="constant">:UNIX</code> is also present)
</dd></dl></div><p>Each <a href="#modules" title="31.2.&#xA0;External Modules">module</a> should add the appropriate keyword, e.g.,
 <a href="#syscalls" title="32.11.&#xA0;System Calls"><code class="constant">:SYSCALLS</code></a>,
 <a href="#dir-key" title="32.3.&#xA0;Directory Access"><code class="constant">:DIR-KEY</code></a>,
 <a href="#regexp-mod" title="32.5.&#xA0;POSIX Regular Expressions"><code class="constant">:REGEXP</code></a>,
 <a href="#pcre" title="32.7.&#xA0;Perl Compatible Regular Expressions"><code class="constant">:PCRE</code></a>, etc.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="featurep"></a>24.1.6. Function <code class="function">EXT:FEATUREP</code>
  <a href="http://clrfi.alu.org/clrfi/clrfi-1-featurep" target="_top">[CLRFI-1]</a></h3></div></div></div><p><code class="code">(EXT:FEATUREP <em class="replaceable"><code>form</code></em>)</code> provides run-time access to
 the read-time conditionals <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-17" target="_top"><span class="data"><code class="literal">#+</code></span></a> and <a href="http://www.lisp.org/HyperSpec/Body/sec_2-4-8-18" target="_top"><span class="data"><code class="literal">#-</code></span></a>.
 <em class="replaceable"><code>form</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/sec_24-1-2-1.html" target="_top">feature exression</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="compiled-file-p"></a>24.1.7. Function
  <code class="function">EXT:COMPILED-FILE-P</code>
  <a href="http://clrfi.alu.org/clrfi/clrfi-2-compiled-file-p" target="_top">[CLRFI-2]</a></h3></div></div></div><p><code class="code">(EXT:COMPILED-FILE-P <em class="replaceable"><code>filename</code></em>)</code> returns non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
 when the file <em class="replaceable"><code>filename</code></em> exists, is readable, and appears to be a
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>-compiled <code class="filename">#P".fas"</code> file compatible with the currently used
 <a href="impnotes.html#bytecode" class="olink">bytecode</a> format.</p><p>System definition facilities (such as <a href="http://www.cliki.net/asdf" target="_top"><code class="function">asdf</code></a> or <a href="http://www.cliki.net/defsystem" target="_top"><code class="function">defsystem</code></a>) can
 use it to determine whether the file needs to be recompiled.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="environment"></a>Chapter 25. Environment
   <a href="http://www.lisp.org/HyperSpec/Body/chap-25.html" target="_top">[CLHS-25]</a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#debugger">25.1. Debugging Utilities
   [CLHS-25.1.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#user-commands">25.1.1. User-customizable Commands</a></span></dt></dl></dd><dt><span class="section"><a href="#environment-dict">25.2. The Environment Dictionary
   [CLHS-25.2]</a></span></dt><dd><dl><dt><span class="section"><a href="#disassemble">25.2.1. Function <code class="function">DISASSEMBLE</code></a></span></dt><dt><span class="section"><a href="#uncompile">25.2.2. Function <code class="function">EXT:UNCOMPILE</code></a></span></dt><dt><span class="section"><a href="#documentation">25.2.3. Function <code class="function">DOCUMENTATION</code></a></span></dt><dt><span class="section"><a href="#describe">25.2.4. Function <code class="function">DESCRIBE</code></a></span></dt><dt><span class="section"><a href="#trace">25.2.5. Macro <code class="function">TRACE</code></a></span></dt><dt><span class="section"><a href="#inspect">25.2.6. Function <code class="function">INSPECT</code></a></span></dt><dt><span class="section"><a href="#room">25.2.7. Function <code class="function">ROOM</code></a></span></dt><dt><span class="section"><a href="#time">25.2.8. Macro <code class="function">TIME</code></a></span></dt><dt><span class="section"><a href="#ed">25.2.9. Function <code class="function">ED</code></a></span></dt><dt><span class="section"><a href="#clock">25.2.10. Clock Time</a></span></dt><dt><span class="section"><a href="#machine">25.2.11. Machine</a></span></dt><dt><span class="section"><a href="#apropos">25.2.12. Functions <code class="function">APROPOS</code> &amp; <code class="function">APROPOS-LIST</code></a></span></dt><dt><span class="section"><a href="#dribble">25.2.13. Function <code class="function">DRIBBLE</code></a></span></dt><dd><dl><dt><span class="section"><a href="#dribble-script">25.2.13.1. Scripting and <code class="function">DRIBBLE</code></a></span></dt></dl></dd><dt><span class="section"><a href="#version">25.2.14. Function <code class="function">LISP-IMPLEMENTATION-VERSION</code></a></span></dt><dt><span class="section"><a href="#argv">25.2.15. Function <code class="function">EXT:ARGV</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="debugger"></a>25.1. Debugging Utilities
   <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-2.html" target="_top">[CLHS-25.1.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#user-commands">25.1.1. User-customizable Commands</a></span></dt></dl></div><p>The debugger may be invoked through the functions
 <a href="http://www.lisp.org/HyperSpec/Body/fun_invoke-debugger.html" target="_top"><code class="function">INVOKE-DEBUGGER</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_break.html" target="_top"><code class="function">BREAK</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><code class="function">ERROR</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_cerror.html" target="_top"><code class="function">CERROR</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_warn.html" target="_top"><code class="function">WARN</code></a>.
 The stepper is invoked through the macro <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><code class="function">STEP</code></a>.
 Debugger and stepper execute subordinate <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> (called "break loops")
 which are similar to the main <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> except for the
 <a href="#prompt" title="30.9.&#xA0;The Prompt">prompt</a> and the set of available commands.
 Commands must be typed literally, in any case,
 without surrounding quotes or <a href="http://www.lisp.org/HyperSpec/Body/sec_2-1-4-7.html" target="_top">whitespace</a>.
 Each command has a keyword abbreviation,
 indicated in the second column.</p><div class="table"><a id="debugger-main-deb-step"></a><p class="title"><b>Table 25.1. Commands common to the main loop, the debugger and the stepper</b></p><table summary="Commands common to the main loop, the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Help</strong></span></td><td align="center"><span><strong class="command">:h</strong></span></td><td align="center">prints a list of available commands</td></tr></tbody></table></div><div class="table"><a id="debugger-deb-step"></a><p class="title"><b>Table 25.2. Commands common to the debugger and the stepper</b></p><table summary="Commands common to the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Abort</strong></span></td><td align="center"><span><strong class="command">:a</strong></span></td><td align="center">abort to the next most recent <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr><tr><td align="center"><span><strong class="command">Unwind</strong></span></td><td align="center"><span><strong class="command">:uw</strong></span></td><td align="center">abort to the next most recent <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr><tr><td align="center"><span><strong class="command">Quit</strong></span></td><td align="center"><span><strong class="command">:q</strong></span></td><td align="center">quit to the top <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a></td></tr></tbody></table></div><p>The stack is organized into frames and other stack elements.
 Usually every invocation of an interpreted function and every
 evaluation of an interpreted form corresponds to one stack frame.
 Special forms such as <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET*</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><code class="function">CATCH</code></a>
 produce special kinds of stack frames.</p><p><a id="cur-frame"></a>In a break loop there is a
 <strong class="first"><em class="firstterm"><a href="#cur-frame">current stack frame</a></em></strong>, which is initially the most recent
 stack frame but can be moved using the debugger
 commands <span><strong class="command">Up</strong></span> and <span><strong class="command">Down</strong></span>.</p><p>Evaluation of forms in a break loop occurs in the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> of the
 <a href="#cur-frame">current stack frame</a> and <span class="emphasis"><em>at the same time</em></span> in the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-2.html" target="_top">dynamic environment</a>
 of the debugger's caller.  This means that to inspect or modify a
 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-1.html" target="_top">lexical variable</a> all you have to do is to move the <a href="#cur-frame">current stack frame</a> to be just
 below the frame that corresponds to the form or the function call that
 binds that variable.</p><p>There is a current <strong class="first"><em class="firstterm">stack mode</em></strong> which defines
 in how much detail the stack is shown by the stack-related debugger
 commands.</p><div class="table"><a id="debugger-deb-step-1"></a><p class="title"><b>Table 25.3. Commands common to the debugger and the stepper</b></p><table summary="Commands common to the debugger and the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Error</strong></span></td><td align="center"><span><strong class="command">:e</strong></span></td><td align="center">print the last error object.</td></tr><tr><td align="center"><span><strong class="command">Inspect</strong></span></td><td align="center"><span><strong class="command">:i</strong></span></td><td align="center"><a href="#inspect" title="25.2.6.&#xA0;Function INSPECT"><code class="function">INSPECT</code></a> the last error object.</td></tr><tr><td align="center"><span><strong class="command">Mode-1</strong></span></td><td align="center"><span><strong class="command">:m1</strong></span></td><td align="center">sets the current mode to 1: all the stack elements are considered.
    This mode works fine for debugging compiled functions.</td></tr><tr><td align="center"><span><strong class="command">Mode-2</strong></span></td><td align="center"><span><strong class="command">:m2</strong></span></td><td align="center">sets the current mode to 2: all the frames are considered.
     </td></tr><tr><td align="center"><span><strong class="command">Mode-3</strong></span></td><td align="center"><span><strong class="command">:m3</strong></span></td><td align="center">sets the current mode to 3: only lexical frames (frames that
    correspond to special forms that modify the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>) are
    considered.</td></tr><tr><td align="center"><span><strong class="command">Mode-4</strong></span></td><td align="center"><span><strong class="command">:m4</strong></span></td><td align="center">sets the current mode to 4 (the default): only <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><code class="function">EVAL</code></a> and
    <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> frames are considered. Every evaluation of a form in the
    interpreter corresponds to an EVAL frame.</td></tr><tr><td align="center"><span><strong class="command">Mode-5</strong></span></td><td align="center"><span><strong class="command">:m5</strong></span></td><td align="center">sets the current mode to 5: only <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> frames are
         considered. Every invocation of an interpreted function
         corresponds to one <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> frame.</td></tr><tr><td align="center"><span><strong class="command">Where</strong></span></td><td align="center"><span><strong class="command">:w</strong></span></td><td align="center">shows the <a href="#cur-frame">current stack frame</a>.</td></tr><tr><td align="center"><span><strong class="command">Up</strong></span></td><td align="center"><span><strong class="command">:u</strong></span></td><td align="center">goes up one frame, i.e., to the caller if in mode-5
    </td></tr><tr><td align="center"><span><strong class="command">Down</strong></span></td><td align="center"><span><strong class="command">:d</strong></span></td><td align="center">does down one frame, i.e., to the callee if in mode-5
    </td></tr><tr><td align="center"><span><strong class="command">Top</strong></span></td><td align="center"><span><strong class="command">:t</strong></span></td><td align="center">goes to top frame, i.e., to the top-level form if in mode-4
    </td></tr><tr><td align="center"><span><strong class="command">Bottom</strong></span></td><td align="center"><span><strong class="command">:b</strong></span></td><td align="center">goes to bottom (most recent) frame, i.e., most probably to the
         form or function that caused the debugger to be entered.
    </td></tr><tr><td align="center"><span><strong class="command">Backtrace</strong></span></td><td align="center"><span><strong class="command">:bt</strong></span></td><td align="center">lists the stack in current mode, bottom frame first, top frame
     last.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-1</strong></span></td><td align="center"><span><strong class="command">:bt1</strong></span></td><td align="center">lists the stack in mode 1.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-2</strong></span></td><td align="center"><span><strong class="command">:bt2</strong></span></td><td align="center">lists the stack in mode 2.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-3</strong></span></td><td align="center"><span><strong class="command">:bt3</strong></span></td><td align="center">lists the stack in mode 3.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-4</strong></span></td><td align="center"><span><strong class="command">:bt4</strong></span></td><td align="center">lists the stack in mode 4.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-5</strong></span></td><td align="center"><span><strong class="command">:bt5</strong></span></td><td align="center">lists the stack in mode 5.</td></tr><tr><td align="center"><span><strong class="command">Frame-limit</strong></span></td><td align="center"><span><strong class="command">:fl</strong></span></td><td align="center">set the frame-limit: this many frames will be printed in a
     backtrace at most.</td></tr><tr><td align="center"><span><strong class="command">Backtrace-l</strong></span></td><td align="center"><span><strong class="command">:bl</strong></span></td><td align="center">limit of frames to print will be prompted for.</td></tr></tbody></table></div><p>If the <a href="#cur-frame">current stack frame</a> is an <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><code class="function">EVAL</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> frame, the
  following commands are available as well:</p><div class="table"><a id="debugger-eval-apply"></a><p class="title"><b>Table 25.4. Commands specific to <a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><code class="function">EVAL</code></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a></b></p><table summary="Commands specific to EVAL/APPLY" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Break+</strong></span></td><td align="center"><span><strong class="command">:br+</strong></span></td><td align="center">sets a breakpoint in the current frame.  When the corresponding
     form or function will be left, the debugger will be entered again, with
     the variable <a href="#trace-val"><code class="varname">EXT:*TRACE-VALUES*</code></a> containing a list of its values.</td></tr><tr><td align="center"><span><strong class="command">Break-</strong></span></td><td align="center"><span><strong class="command">:br-</strong></span></td><td align="center">removes a breakpoint from the current frame.</td></tr><tr><td align="center"><span><strong class="command">Redo</strong></span></td><td align="center"><span><strong class="command">:rd</strong></span></td><td align="center">re-evaluates the corresponding form or function call. This
     command can be used to restart parts of a computation without
     aborting it entirely.</td></tr><tr><td align="center"><span><strong class="command">Return</strong></span></td><td align="center"><span><strong class="command">:rt</strong></span></td><td align="center">leaves the current frame.  You will be prompted for the return
     values.</td></tr></tbody></table></div><div class="table"><a id="debugger-deb"></a><p class="title"><b>Table 25.5. Commands specific to the debugger</b></p><table summary="Commands specific to the debugger" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Continue</strong></span></td><td align="center"><span><strong class="command">:c</strong></span></td><td align="center">continues evaluation of the program.</td></tr></tbody></table></div><div class="table"><a id="debugger-step"></a><p class="title"><b>Table 25.6. Commands specific to the stepper</b></p><table summary="Commands specific to the stepper" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">command</th><th align="center">abbreviation</th><th align="center">operation</th></tr></thead><tbody><tr><td align="center"><span><strong class="command">Step</strong></span></td><td align="center"><span><strong class="command">:s</strong></span></td><td align="center">step into a form: evaluate this form in single step mode
   </td></tr><tr><td align="center"><span><strong class="command">Next</strong></span></td><td align="center"><span><strong class="command">:n</strong></span></td><td align="center">step over a form: evaluate this form at once
   </td></tr><tr><td align="center"><span><strong class="command">Over</strong></span></td><td align="center"><span><strong class="command">:o</strong></span></td><td align="center">step over this level: evaluate at once up to the next return
   </td></tr><tr><td align="center"><span><strong class="command">Continue</strong></span></td><td align="center"><span><strong class="command">:c</strong></span></td><td align="center">switch off single step mode, continue evaluation
   </td></tr></tbody></table></div><p>The stepper is usually used like this: If some form returns a
 strange value or results in an error, call <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><code class="function">STEP</code></a>
 <em class="replaceable"><code>form</code></em>)</code> and navigate using the
 commands <span><strong class="command">Step</strong></span> and <span><strong class="command">Next</strong></span> until you
 reach the form you regard as responsible.  If you are too fast (execute
 <span><strong class="command">Next</strong></span> once and get the error), there is no way back;
 you have to restart the entire stepper session.  If you are too slow
 (stepped into a function or a form which certainly is OK), a couple of
 <span><strong class="command">Next</strong></span> commands or one <span><strong class="command">Over</strong></span> command
 will help.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="user-commands"></a>25.1.1. User-customizable Commands</h3></div></div></div><p>You can set <strong class="first"><em class="firstterm"><a href="#user-commands" title="25.1.1.&#xA0;User-customizable Commands"><code class="varname">CUSTOM:*USER-COMMANDS*</code></a></em></strong> to a list of
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a>s, each returning a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>
 of <strong class="first"><em class="firstterm">bindings</em></strong>, i.e., either a
</p><div class="variablelist"><dl><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a></span></dt><dd>the help string printed by <span><strong class="command">Help</strong></span>
  in addition to the standard <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> help</dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a>
  <span class="data"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> . <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a>)</code></span></span></dt><dd>the actual binding: when the user types the string,
  the function is called.
</dd></dl></div><p>
E.g.,
</p><pre class="programlisting">
(setq <a href="#user-commands" title="25.1.1.&#xA0;User-customizable Commands"><code class="varname">CUSTOM:*USER-COMMANDS*</code></a>
      (list (lambda () (list (format nil "~2%User-defined commands:")))
            (lambda ()
              (flet ((panic () (format t "don't panic, ~D~%" (random 42))))
                (list (format nil "~%panic   :p    hit the panic button!")
                      (cons "panic" #'panic)
                      (cons ":p" #'panic))))
            (lambda ()
              (let ((curses #("ouch" "yuk" "bletch")))
                (flet ((swear ()
                         (format t "~A!~%"
                                 (aref curses (random (length curses))))))
                  (list (format nil "~%swear   :e    curse")
                        (cons "swear" #'swear)
                        (cons ":e" #'swear)))))))
</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="environment-dict"></a>25.2. The Environment Dictionary
   <a href="http://www.lisp.org/HyperSpec/Body/sec_the_envir_t_dictionary.html" target="_top">[CLHS-25.2]</a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#disassemble">25.2.1. Function <code class="function">DISASSEMBLE</code></a></span></dt><dt><span class="section"><a href="#uncompile">25.2.2. Function <code class="function">EXT:UNCOMPILE</code></a></span></dt><dt><span class="section"><a href="#documentation">25.2.3. Function <code class="function">DOCUMENTATION</code></a></span></dt><dt><span class="section"><a href="#describe">25.2.4. Function <code class="function">DESCRIBE</code></a></span></dt><dt><span class="section"><a href="#trace">25.2.5. Macro <code class="function">TRACE</code></a></span></dt><dt><span class="section"><a href="#inspect">25.2.6. Function <code class="function">INSPECT</code></a></span></dt><dt><span class="section"><a href="#room">25.2.7. Function <code class="function">ROOM</code></a></span></dt><dt><span class="section"><a href="#time">25.2.8. Macro <code class="function">TIME</code></a></span></dt><dt><span class="section"><a href="#ed">25.2.9. Function <code class="function">ED</code></a></span></dt><dt><span class="section"><a href="#clock">25.2.10. Clock Time</a></span></dt><dt><span class="section"><a href="#machine">25.2.11. Machine</a></span></dt><dt><span class="section"><a href="#apropos">25.2.12. Functions <code class="function">APROPOS</code> &amp; <code class="function">APROPOS-LIST</code></a></span></dt><dt><span class="section"><a href="#dribble">25.2.13. Function <code class="function">DRIBBLE</code></a></span></dt><dd><dl><dt><span class="section"><a href="#dribble-script">25.2.13.1. Scripting and <code class="function">DRIBBLE</code></a></span></dt></dl></dd><dt><span class="section"><a href="#version">25.2.14. Function <code class="function">LISP-IMPLEMENTATION-VERSION</code></a></span></dt><dt><span class="section"><a href="#argv">25.2.15. Function <code class="function">EXT:ARGV</code></a></span></dt></dl></div>
<!--#ifdef HAVE_DISASSEMBLER-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="disassemble"></a>25.2.1. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><code class="function">DISASSEMBLE</code></a></h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><code class="function">DISASSEMBLE</code></a> can disassemble to machine code,
   provided that <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://sources.redhat.com/gdb/" target="_top"><span><strong class="command">gdb</strong></span></a> is present.
   In that case the argument may be a
   <code class="classname">EXT:SYSTEM-FUNCTION</code>, a <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a>, a
   special operator handler, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> denoting one of these, an
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> (address), or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>.
</dd></dl></div></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="uncompile"></a>25.2.2. Function <a href="#uncompile" title="25.2.2.&#xA0;Function EXT:UNCOMPILE"><code class="function">EXT:UNCOMPILE</code></a></h3></div></div></div><p>The function <a href="#uncompile" title="25.2.2.&#xA0;Function EXT:UNCOMPILE"><code class="function">EXT:UNCOMPILE</code></a> does the converse of
 <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><code class="function">COMPILE</code></a>: <code class="code">(<a href="#uncompile" title="25.2.2.&#xA0;Function EXT:UNCOMPILE"><code class="function">EXT:UNCOMPILE</code></a> <em class="replaceable"><code>function</code></em>)</code> reverts a compiled
 <em class="replaceable"><code>function</code></em> (name), that has been entered or loaded in the same session
 and then compiled, back to its interpreted form.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="documentation"></a>25.2.3. Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><code class="function">DOCUMENTATION</code></a></h3></div></div></div><p>No on-line documentation is available for the system functions
 (yet), but see <a href="#describe" title="25.2.4.&#xA0;Function DESCRIBE">Section 25.2.4, “Function <code class="function">DESCRIBE</code>”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="describe"></a>25.2.4. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_describe.html" target="_top"><code class="function">DESCRIBE</code></a></h3></div></div></div><p>When <a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="varname">CUSTOM:*BROWSER*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, and <a href="impnotes.html#clhs-root" class="olink"><code class="function">CUSTOM:CLHS-ROOT</code></a> returns a valid URL,
 <a href="http://www.lisp.org/HyperSpec/Body/fun_describe.html" target="_top"><code class="function">DESCRIBE</code></a> on a standard <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> symbol will point your web browser to the
 appropriate [<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>] page.</p><p>Also, when <a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="varname">CUSTOM:*BROWSER*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, and <a href="impnotes.html#impnotes-root" class="olink"><code class="function">CUSTOM:IMPNOTES-ROOT</code></a> returns a
 valid URL, <a href="http://www.lisp.org/HyperSpec/Body/fun_describe.html" target="_top"><code class="function">DESCRIBE</code></a> on symbols and packages documented in these
 implementation notes will point your web browser to the appropriate
 page.</p><p><a id="clhs-root"></a><b>Function <a href="impnotes.html#clhs-root" class="olink"><code class="function">CUSTOM:CLHS-ROOT</code></a>. </b>Function <a href="impnotes.html#clhs-root" class="olink"><code class="function">CUSTOM:CLHS-ROOT</code></a> is defined in <a href="#config-lisp"><code class="filename">config.lisp</code></a>.  By default it
 looks at <code class="code">(<a href="#getenv" title="31.8.&#xA0;Operating System Environment"><code class="function">EXT:GETENV</code></a> "CLHSROOT")</code> and <a href="#clhs-root"><code class="varname">CUSTOM:*CLHS-ROOT-DEFAULT*</code></a>,
 but you may redefine it in <a href="#config-lisp"><code class="filename">config.lisp</code></a> or <a href="clisp.html#opt-norc" class="olink">RC file</a>.
 The return value should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> terminated with a <code class="filename">"/"</code>,
 e.g., <a href="http://www.lisp.org/HyperSpec/" target="_top">http://www.lisp.org/HyperSpec/</a> or <code class="filename">/usr/doc/HyperSpec/</code>.
 If the return value is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the feature is completely disabled.
</p><p><a id="impnotes-root"></a><b>Function <a href="impnotes.html#impnotes-root" class="olink"><code class="function">CUSTOM:IMPNOTES-ROOT</code></a>. </b>Function <a href="impnotes.html#impnotes-root" class="olink"><code class="function">CUSTOM:IMPNOTES-ROOT</code></a> is defined in <a href="#config-lisp"><code class="filename">config.lisp</code></a>.  By default it
 looks at <code class="code">(<a href="#getenv" title="31.8.&#xA0;Operating System Environment"><code class="function">EXT:GETENV</code></a> "IMPNOTES")</code> and <a href="#impnotes-root"><code class="varname">CUSTOM:*IMPNOTES-ROOT-DEFAULT*</code></a>,
 but you may redefine it in <a href="#config-lisp"><code class="filename">config.lisp</code></a> or <a href="clisp.html#opt-norc" class="olink">RC file</a>.
 The return value should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> terminated with a <code class="filename">"/"</code>,
 e.g., <a href="http://clisp.cons.org/impnotes/" target="_top">http://clisp.cons.org/impnotes/</a>, or the path to
 the monolithic page, e.g., <a href="http://clisp.cons.org/impnotes.html" target="_top">http://clisp.cons.org/impnotes.html</a>
 or <code class="filename">/usr/doc/clisp/impnotes.html</code>.
 If the return value is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the feature is completely disabled.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="trace"></a>25.2.5. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><code class="function">TRACE</code></a></h3></div></div></div><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><code class="function">TRACE</code></a> <em class="replaceable"><code>function</code></em> ...)</code> makes the
 functions <em class="replaceable"><code>function</code></em>, ... traced.  <em class="replaceable"><code>function</code></em> should be either a symbol or
 a list <code class="code">(<em class="replaceable"><code>symbol</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
 <code class="constant">:SUPPRESS-IF</code> <code class="constant">:MAX-DEPTH</code>
 <code class="constant">:STEP-IF</code>
 <code class="constant">:PRE</code> <code class="constant">:POST</code>
 <code class="constant">:PRE-BREAK-IF</code> <code class="constant">:POST-BREAK-IF</code>
 <code class="constant">:PRE-PRINT</code> <code class="constant">:POST-PRINT</code>
 <code class="constant">:PRINT</code>)</code>, where</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:SUPPRESS-IF</code> <em class="replaceable"><code>form</code></em></span></dt><dd>no trace output as long as <em class="replaceable"><code>form</code></em> is true
  </dd><dt><span class="term"><code class="constant">:MAX-DEPTH</code> <em class="replaceable"><code>form</code></em></span></dt><dd>no trace output as long as <code class="code">(&gt;
  *trace-level* <em class="replaceable"><code>form</code></em>)</code>. This is useful for tracing functions that
  are use by the tracer itself, such as <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_print-object.html" target="_top"><code class="function">PRINT-OBJECT</code></a>, or otherwise when
  tracing would lead to an infinite recursion.
  </dd><dt><span class="term"><code class="constant">:STEP-IF</code> <em class="replaceable"><code>form</code></em></span></dt><dd>invokes the stepper as soon as <em class="replaceable"><code>form</code></em> is true
  </dd><dt><span class="term"><code class="constant">:PRE</code> <em class="replaceable"><code>form</code></em></span></dt><dd>evaluates <em class="replaceable"><code>form</code></em> before calling the function
  </dd><dt><span class="term"><code class="constant">:POST</code> <em class="replaceable"><code>form</code></em></span></dt><dd>evaluates <em class="replaceable"><code>form</code></em> after return from the function
  </dd><dt><span class="term"><code class="constant">:PRE-BREAK-IF</code> <em class="replaceable"><code>form</code></em></span></dt><dd>goes into the break loop before calling the
   function if <em class="replaceable"><code>form</code></em> is true</dd><dt><span class="term"><code class="constant">:POST-BREAK-IF</code> <em class="replaceable"><code>form</code></em></span></dt><dd>goes into the break loop after return from the
   function if <em class="replaceable"><code>form</code></em> is true</dd><dt><span class="term"><code class="constant">:PRE-PRINT</code> <em class="replaceable"><code>form</code></em></span></dt><dd>prints the values of <em class="replaceable"><code>form</code></em> before calling the
   function</dd><dt><span class="term"><code class="constant">:POST-PRINT</code> <em class="replaceable"><code>form</code></em></span></dt><dd>prints the values of <em class="replaceable"><code>form</code></em> after return from the
   function</dd><dt><span class="term"><code class="constant">:PRINT</code> <em class="replaceable"><code>form</code></em></span></dt><dd>prints the values of <em class="replaceable"><code>form</code></em> both before calling
   and after return from the function</dd></dl></div><p>In all these forms you can access the following variables:
</p><div class="variablelist"><dl><dt><span class="term"><code class="varname">EXT:*TRACE-FUNCTION*</code></span></dt><dd>the function itself
  </dd><dt><span class="term"><code class="varname">EXT:*TRACE-ARGS*</code></span></dt><dd>the arguments to the function
  </dd><dt><span class="term"><code class="varname">EXT:*TRACE-FORM*</code></span></dt><dd>the function/macro call as form
  </dd><dt><a id="trace-val"></a><span class="term"><a href="#trace-val"><code class="varname">EXT:*TRACE-VALUES*</code></a></span></dt><dd>after return from the function: the list of return
  values from the function call</dd></dl></div><p>
and you can leave the function call with specified values by using
<a href="http://www.lisp.org/HyperSpec/Body/mac_return.html" target="_top"><code class="function">RETURN</code></a>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><code class="function">TRACE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><code class="function">UNTRACE</code></a> are also applicable to functions
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <em class="replaceable"><code>symbol</code></em>)</code> and to macros, but not to
 locally defined functions and macros.</p><p><a id="trace-indent"></a><b>Variable <a href="#trace-indent"><code class="varname">CUSTOM:*TRACE-INDENT*</code></a>. </b>If you want the <a href="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html" target="_top"><code class="function">TRACE</code></a> level to be indicated by the indentation
in addition to the printed numbers, set <a href="#trace-indent"><code class="varname">CUSTOM:*TRACE-INDENT*</code></a> to non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
Initially it is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> since many nested traced calls will easily
exhaust the available line length.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="inspect"></a>25.2.6. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><code class="function">INSPECT</code></a></h3></div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><code class="function">INSPECT</code></a> takes a keyword argument
 <code class="constant">:FRONTEND</code>, which specifies the way <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will
 interact with the user, and defaults
 to <code class="varname">CUSTOM:*INSPECT-FRONTEND*</code>.
</p><div class="variablelist"><p class="title"><b>Available <code class="constant">:FRONTEND</code>s for
   <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><code class="function">INSPECT</code></a> in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></b></p><dl><dt><span class="term"><code class="constant">:TTY</code></span></dt><dd>The interaction is conducted via the <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a>
    stream.  Please use the <strong class="userinput"><code>:h</code></strong> command to get the
    list of all available commands.</dd><dt><span class="term"><code class="constant">:HTTP</code></span></dt><dd><p>A window in your Web browser (specified by the
    <a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="constant">:BROWSER</code></a> keyword argument) is opened and it is controlled by
    <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> via a <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>, using the <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> protocol.
    You should be able to use all the standard browser features.</p><p>Since <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is not multitasking at this time, you will not
    be able to do anything else during an <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><code class="function">INSPECT</code></a> session.  Please click on
    the <strong class="userinput"><code>quit</code></strong> link to terminate the session.</p><p>Please be aware though, that once you terminate an <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><code class="function">INSPECT</code></a>
    session, all links in all <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><code class="function">INSPECT</code></a> windows in your browser will become
    obsolete and using them in a new <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><code class="function">INSPECT</code></a> session will result in
    unpredictable behavior.</p></dd></dl></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><code class="function">INSPECT</code></a> also takes a keyword argument <a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="constant">:BROWSER</code></a>,
 which specifies the browser used by the <code class="constant">:HTTP</code>
 front-end and defaults to <code class="varname">CUSTOM:*INSPECT-BROWSER*</code>.</p><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_inspect.html" target="_top"><code class="function">INSPECT</code></a> binds some
 <a href="#clpp" title="22.5.&#xA0;The Lisp Pretty Printer&#10;   [CLHS-22.2]">pretty-printer</a> variables:
 </p><div class="informaltable"><a id="inspect-vars"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="left">Variable</th><th align="left">Bound to</th></tr></thead><tbody><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><code class="varname">*PRINT-LENGTH*</code></a></td><td align="left"><code class="varname">CUSTOM:*INSPECT-PRINT-LENGTH*</code></td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html" target="_top"><code class="varname">*PRINT-LEVEL*</code></a></td><td align="left"><code class="varname">CUSTOM:*INSPECT-PRINT-LEVEL*</code></td></tr><tr><td align="left"><a href="http://www.lisp.org/HyperSpec/Body/var_stprint-linesst.html" target="_top"><code class="varname">*PRINT-LINES*</code></a></td><td align="left"><code class="varname">CUSTOM:*INSPECT-PRINT-LINES*</code></td></tr></tbody></table></div><p>User variable
 <strong class="first"><em class="firstterm"><code class="varname">CUSTOM:*INSPECT-LENGTH*</code></em></strong>
 specifies the number of sequence elements printed in detail when a
 sequence is inspected.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="room"></a>25.2.7. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_room.html" target="_top"><code class="function">ROOM</code></a></h3></div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_room.html" target="_top"><code class="function">ROOM</code></a> returns two values: the number of bytes
 currently occupied by Lisp objects, and the number of bytes that can be
 allocated before the next regular <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion occurs.</p><p>The function
 <strong class="first"><em class="firstterm"><a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection"><code class="function">EXT:GC</code></a>
  <a id="gc-func" class="indexterm"></a></em></strong>
 starts a global <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion and its return value has the same meaning as
 the second value of <a href="http://www.lisp.org/HyperSpec/Body/fun_room.html" target="_top"><code class="function">ROOM</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="time"></a>25.2.8. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><code class="function">TIME</code></a></h3></div></div></div><p>The timing data printed by the macro <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><code class="function">TIME</code></a> includes:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td>the real time (“<span class="quote">wall</span>” time),</td></tr><tr><td>the run time (processor time for this process),</td></tr><tr><td>the number of bytes allocated, and</td></tr><tr><td>the number of <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ions performed, if any.</td></tr></table><p>The macro <strong class="first"><em class="firstterm"><a href="#time" title="25.2.8.&#xA0;Macro TIME"><code class="function">EXT:TIMES</code></a></em></strong> (mnemonic:
 “<span class="quote"><span class="emphasis"><em>TIME</em></span> and <span class="emphasis"><em>S</em></span>pace</span>”)
 is like the macro <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><code class="function">TIME</code></a>: <code class="code">(<a href="#time" title="25.2.8.&#xA0;Macro TIME"><code class="function">EXT:TIMES</code></a> <em class="replaceable"><code>form</code></em>)</code> evaluates the
 <em class="replaceable"><code>form</code></em>, and, as a side effect, outputs detailed information about the
 memory allocations caused by this evaluation.  It also prints
 everything printed by <a href="http://www.lisp.org/HyperSpec/Body/mac_time.html" target="_top"><code class="function">TIME</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ed"></a>25.2.9. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_ed.html" target="_top"><code class="function">ED</code></a></h3></div></div></div><p>The function <a href="http://www.lisp.org/HyperSpec/Body/fun_ed.html" target="_top"><code class="function">ED</code></a> calls the external editor specified by the value
 of <code class="code">(<a href="#getenv" title="31.8.&#xA0;Operating System Environment"><code class="function">EXT:GETENV</code></a> "EDITOR")</code>
 or, failing that, the value of the variable
 <strong class="first"><em class="firstterm"><a href="#ed" title="25.2.9.&#xA0;Function ED"><code class="varname">CUSTOM:*EDITOR*</code></a></em></strong> (set in <a href="#config-lisp"><code class="filename">config.lisp</code></a>).
 If the argument is a function name which was defined in the current
 session (not loaded from a file), the program text to be edited is a
 pretty-printed version (without comments) of the text which was used to
 define the function.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="clock"></a>25.2.10. Clock Time</h3></div></div></div>
<!--#if !(defined(UNIX) || defined(WIN32))-->
<div class="variablelist"><a id="default-tz"></a><p class="title"><b>Default Time Zone</b></p><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep">No platform supports this currently</span></span></span></dt><dd>The variable <strong class="first"><em class="firstterm"><a href="#default-tz"><code class="varname">CUSTOM:*DEFAULT-TIME-ZONE*</code></a></em></strong>
   contains the default time zone used by <a href="http://www.lisp.org/HyperSpec/Body/fun_encode-universal-time.html" target="_top"><code class="function">ENCODE-UNIVERSAL-TIME</code></a> and
   <a href="http://www.lisp.org/HyperSpec/Body/fun_decode-universal-time.html" target="_top"><code class="function">DECODE-UNIVERSAL-TIME</code></a>.  It is initially set to -1
   (which means 1 hour east of Greenwich, i.e., Mid European Time).
</dd></dl></div>
<!--#endif-->
<p>The <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html#time_zone" target="_top">time zone</a> in a <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-4-1.html" target="_top">decoded time</a> does not necessarily have be an
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>, but (as <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><code class="classname">FLOAT</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><code class="classname">RATIONAL</code></a> number)
 it should be a multiple of <span class="data"><code class="literal">1/3600</code></span>.</p><div class="table"><a id="internal-time-units-table"></a><p class="title"><b>Table 25.7. Time granularity</b></p><table summary="Time granularity" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">platform</th><th align="center"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a></th><th align="center"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a></th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_intern_s-per-second.html" target="_top"><code class="constant">INTERNAL-TIME-UNITS-PER-SECOND</code></a></td><td align="center">1,000,000</td><td align="center">10,000,000</td></tr></tbody></table></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_get-internal-run-time.html" target="_top"><code class="function">GET-INTERNAL-RUN-TIME</code></a> returns the amount of run time
 consumed by the current <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> process since its startup.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="machine"></a>25.2.11. Machine</h3></div></div></div><div class="variablelist">
<!--#ifdef MACHINE_KNOWN-->
<dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></span></dt><dd>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><code class="function">SHORT-SITE-NAME</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><code class="function">LONG-SITE-NAME</code></a>
   should be defined in a site-specific <a href="#config-lisp"><code class="filename">config.lisp</code></a> file.
   The default implementations try to read the value of the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a>
   <code class="envar">ORGANIZATION</code>, and, failing that,
   call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/uname.html"><code class="function">uname</code></a>.
</dd><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span></span></dt><dd>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><code class="function">SHORT-SITE-NAME</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><code class="function">LONG-SITE-NAME</code></a>
   should be defined in a site-specific <a href="#config-lisp"><code class="filename">config.lisp</code></a> file.
   The default implementations try to read the registry.
</dd>
<!--#else-->
<dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep">No platform supports this currently</span></span></span></dt><dd>The functions <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-type.html" target="_top"><code class="function">MACHINE-TYPE</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-version.html" target="_top"><code class="function">MACHINE-VERSION</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-instance.html" target="_top"><code class="function">MACHINE-INSTANCE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><code class="function">SHORT-SITE-NAME</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html" target="_top"><code class="function">LONG-SITE-NAME</code></a> should be
   defined by every user in his user-specific <a href="#config-lisp"><code class="filename">config.lisp</code></a> file.
</dd>
<!--#endif-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="apropos"></a>25.2.12. Functions <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><code class="function">APROPOS</code></a> &amp; <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><code class="function">APROPOS-LIST</code></a></h3></div></div></div><p>The search performed by <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><code class="function">APROPOS</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><code class="function">APROPOS-LIST</code></a> is
 case-insensitive.</p><p><b>Variable <a href="#apropos" title="25.2.12.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><code class="varname">CUSTOM:*APROPOS-DO-MORE*</code></a>. </b>You can make <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><code class="function">APROPOS</code></a> print more information about the symbols it
 found by setting <a href="#apropos" title="25.2.12.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><code class="varname">CUSTOM:*APROPOS-DO-MORE*</code></a> to a list containing some of
 <code class="constant">:FUNCTION</code>, <code class="constant">:VARIABLE</code>, <code class="constant">:TYPE</code>, and <code class="constant">:CLASS</code>
 or just set it to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> to get all of the values.</p><p><b>Variable <a href="#apropos" title="25.2.12.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><code class="varname">CUSTOM:*APROPOS-MATCHER*</code></a>. </b>You can make <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><code class="function">APROPOS</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><code class="function">APROPOS-LIST</code></a> be more flexible in
 their search by setting <a href="#apropos" title="25.2.12.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><code class="varname">CUSTOM:*APROPOS-MATCHER*</code></a> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> of one
 argument, a pattern (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>), returning a new <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> of one
 argument, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> name (also a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>),
 which returns non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> when the symbol name matches the pattern
 for the purposes of <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><code class="function">APROPOS</code></a>.
 When <a href="#apropos" title="25.2.12.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><code class="varname">CUSTOM:*APROPOS-MATCHER*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_search.html" target="_top"><code class="function">SEARCH</code></a> is used.
 Some <a href="#modules" title="31.2.&#xA0;External Modules">module</a>s come with functions which can be used for
 <a href="#apropos" title="25.2.12.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><code class="varname">CUSTOM:*APROPOS-MATCHER*</code></a>, e.g., <a href="#re-matcher"><code class="function">REGEXP:REGEXP-MATCHER</code></a>,
 <a href="#wildcard-matcher"><code class="function">WILDCARD:WILDCARD-MATCHER</code></a>,
 <a href="#pcre-matcher"><code class="function">PCRE:PCRE-MATCHER</code></a>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dribble"></a>25.2.13. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html" target="_top"><code class="function">DRIBBLE</code></a></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#dribble-script">25.2.13.1. Scripting and <code class="function">DRIBBLE</code></a></span></dt></dl></div><p>If <a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html" target="_top"><code class="function">DRIBBLE</code></a> is called with an argument, and dribbling is already
 enabled, a warning is printed, and the new dribbling request is
 ignored.</p><p>Dribbling is implemented via a kind (but <span class="strong"><strong>not</strong></span> a <a href="http://www.lisp.org/HyperSpec/Body/glo_r.html#recognizable_subtype" target="_top">recognizable subtype</a>)
 of <a href="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html" target="_top"><code class="classname">TWO-WAY-STREAM</code></a>, named <a href="#dribble" title="25.2.13.&#xA0;Function DRIBBLE"><code class="classname">EXT:DRIBBLE-STREAM</code></a>.
 If you have a <em class="replaceable"><code>source</code></em> <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> <em class="replaceable"><code>x</code></em> and you want all transactions
 (input and output) on <em class="replaceable"><code>x</code></em> to be copied to the <em class="replaceable"><code>target</code></em> <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> <em class="replaceable"><code>y</code></em>,
 you can do <a id="dribble-example"></a></p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html" target="_top"><code class="function">DEFVAR</code></a> *loggable* <em class="replaceable"><code>x</code></em>)
(<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> <em class="replaceable"><code>x</code></em> (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-synonym-stream.html" target="_top"><code class="function">MAKE-SYNONYM-STREAM</code></a> '*loggable*))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a> toggle-logging (<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> s)
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html" target="_top"><code class="function">MULTIPLE-VALUE-BIND</code></a> (so ta) (dribble-toggle *loggable* s)
    (<a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><code class="function">WHEN</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_streamp.html" target="_top"><code class="function">STREAMP</code></a> so) (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> *loggable* so))
    ta))
(toggle-logging <em class="replaceable"><code>y</code></em>)     ; start logging
...
(toggle-logging)       ; finish logging
...
(toggle-logging <em class="replaceable"><code>y</code></em>)     ; restart logging
...
(toggle-logging)       ; finish logging
(<a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> <em class="replaceable"><code>y</code></em>)
</pre><div class="variablelist"><dl><dt><a id="drist"></a><span class="term"><code class="code">
    (<code class="function">EXT:DRIBBLE-STREAM</code> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>When <em class="replaceable"><code>stream</code></em> is a <a href="#dribble" title="25.2.13.&#xA0;Function DRIBBLE"><code class="classname">EXT:DRIBBLE-STREAM</code></a>, returns two values:
    the <em class="replaceable"><code>source</code></em> and the <em class="replaceable"><code>target</code></em> streams.  Otherwise returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
 </dd><dt><a id="drist-p"></a><span class="term"><code class="code">
    (<code class="function">EXT:DRIBBLE-STREAM-P</code> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>When <em class="replaceable"><code>stream</code></em> is a <a href="#dribble" title="25.2.13.&#xA0;Function DRIBBLE"><code class="classname">EXT:DRIBBLE-STREAM</code></a>, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, otherwise
    returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><a id="drist-so"></a><span class="term"><code class="code">
    (<code class="function">EXT:DRIBBLE-STREAM-SOURCE</code> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>When <em class="replaceable"><code>stream</code></em> is a <a href="#dribble" title="25.2.13.&#xA0;Function DRIBBLE"><code class="classname">EXT:DRIBBLE-STREAM</code></a>, returns its
    <em class="replaceable"><code>source</code></em> stream, otherwise signals a <a href="http://www.lisp.org/HyperSpec/Body/contyp_type-error.html" target="_top"><code class="classname">TYPE-ERROR</code></a>.
 </dd><dt><a id="drist-ta"></a><span class="term"><code class="code">
    (<code class="function">EXT:DRIBBLE-STREAM-TARGET</code> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>When <em class="replaceable"><code>stream</code></em> is a <a href="#dribble" title="25.2.13.&#xA0;Function DRIBBLE"><code class="classname">EXT:DRIBBLE-STREAM</code></a>, returns its
    <em class="replaceable"><code>target</code></em> stream, otherwise signals a <a href="http://www.lisp.org/HyperSpec/Body/contyp_type-error.html" target="_top"><code class="classname">TYPE-ERROR</code></a>.
 </dd><dt><a id="mk-drist"></a><span class="term"><code class="code">
     (<code class="function">EXT:MAKE-DRIBBLE-STREAM</code>
     <em class="replaceable"><code>source</code></em> <em class="replaceable"><code>target</code></em>)</code></span></dt><dd>Create a new <a href="#dribble" title="25.2.13.&#xA0;Function DRIBBLE"><code class="classname">EXT:DRIBBLE-STREAM</code></a>.
 </dd><dt><a id="dri-toggle"></a><span class="term"><code class="code">
    (<code class="function">EXT:DRIBBLE-TOGGLE</code> <em class="replaceable"><code>stream</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>pathname</code></em>)</code></span></dt><dd>When <em class="replaceable"><code>stream</code></em> is a <a href="#dribble" title="25.2.13.&#xA0;Function DRIBBLE"><code class="classname">EXT:DRIBBLE-STREAM</code></a> and <em class="replaceable"><code>pathname</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
    writes a dribble termination note to the <em class="replaceable"><code>stream</code></em>'s <em class="replaceable"><code>target</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> and returns <em class="replaceable"><code>stream</code></em>'s <em class="replaceable"><code>source</code></em> and <em class="replaceable"><code>target</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s;
    when <em class="replaceable"><code>stream</code></em> is not a <a href="#dribble" title="25.2.13.&#xA0;Function DRIBBLE"><code class="classname">EXT:DRIBBLE-STREAM</code></a> and <em class="replaceable"><code>pathname</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
    creates a new <a href="#dribble" title="25.2.13.&#xA0;Function DRIBBLE"><code class="classname">EXT:DRIBBLE-STREAM</code></a>, dribbling from <em class="replaceable"><code>stream</code></em> to <em class="replaceable"><code>pathname</code></em>,
    writes a dribble initialization note to <em class="replaceable"><code>pathname</code></em>,
    and return the <a href="#dribble" title="25.2.13.&#xA0;Function DRIBBLE"><code class="classname">EXT:DRIBBLE-STREAM</code></a> (the second value is the <em class="replaceable"><code>target</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>);
    otherwise <a href="http://www.lisp.org/HyperSpec/Body/fun_warn.html" target="_top"><code class="function">WARN</code></a> that no appropriate action may be taken.
    <em class="replaceable"><code>pathname</code></em> may be an open <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> or a <a href="#path-des">pathname designator</a>.
    See <a href="#dribble-example">above</a> for the sample usage.
    See also <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/dribble.lisp"><code class="filename">src/dribble.lisp</code></a> in
    the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> source tree.
</dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="dribble-script"></a>25.2.13.1. Scripting and <a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html" target="_top"><code class="function">DRIBBLE</code></a></h4></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html" target="_top"><code class="function">DRIBBLE</code></a> works by operating on <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a>,
 thus is does <span class="strong"><strong>not</strong></span> work when <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> acts as a script interpreter
 (see <a href="#quickstart-unix" title="31.6.2.&#xA0;Scripting with CLISP">Section 31.6.2, “Scripting with <span><strong class="command">CLISP</strong></span>”</a>).</p><p>Traditionally, <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> implementations set <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-INPUT*</code></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-OUTPUT*</code></a>, and <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*ERROR-OUTPUT*</code></a> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html" target="_top"><code class="classname">SYNONYM-STREAM</code></a>
 pointing to <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a>, and <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is no exception.
 Thus changing <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a> to a dribble stream affects all
 standard i/o.</p><p>On the other hand, when <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> acts as a script interpreter,
 it adheres to the <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/stdio.h.html">&lt;<code class="filename">stdio.h</code>&gt;</a>
 <a href="#script-exec">conventions</a>, thus <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-INPUT*</code></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-OUTPUT*</code></a>, and <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*ERROR-OUTPUT*</code></a> are normal <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a>s,
 and thus are <span class="strong"><strong>not</strong></span> affected by <a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html" target="_top"><code class="function">DRIBBLE</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a> - and
 thus <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRINT</code></a> ... <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)</code> - <span class="strong"><strong>is</strong></span> still affected).
 The [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] explicitly permits this behavior by stating
 </p><div class="blockquote"><blockquote class="blockquote"><p><a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html" target="_top"><code class="function">DRIBBLE</code></a> is intended primarily for interactive
   debugging; its effect cannot be relied upon when used in a program.
</p></blockquote></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="version"></a>25.2.14. Function <a href="http://www.lisp.org/HyperSpec/Body/fun_lisp-impl_tion-version.html" target="_top"><code class="function">LISP-IMPLEMENTATION-VERSION</code></a></h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_lisp-impl_tion-version.html" target="_top"><code class="function">LISP-IMPLEMENTATION-VERSION</code></a> returns
 the numeric version (like <code class="literal">3.14</code>), and
 the release date (like <code class="literal">"1999-07-21"</code>).
 When running on the same machine on which <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> was built, it appends
  the binary build and <a href="impnotes.html#image" class="olink">memory image</a> dump date in <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-4-2.html" target="_top">universal time</a>
  (like <code class="literal">3141592654</code>).
 When running on a different machine, it appends the <a href="http://www.lisp.org/HyperSpec/Body/fun_machine-instance.html" target="_top"><code class="function">MACHINE-INSTANCE</code></a>
  of the machine on which it was built.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="argv"></a>25.2.15. Function <code class="function">EXT:ARGV</code></h3></div></div></div><p>This function will return a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a> of
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> command line arguments passed to the runtime, including
 those already processed by <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 Use <a href="impnotes.html#script-exec" class="olink"><code class="varname">EXT:*ARGS*</code></a> instead of this function to get the arguments for your program.
</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="glossary"></a>Chapter 26. Glossary
   <a href="http://www.lisp.org/HyperSpec/Body/chap-26.html" target="_top">[CLHS-26]</a></h2></div></div></div><p>No notes.</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="appendix"></a>Chapter 27. Appendix
   <a href="http://www.lisp.org/HyperSpec/Body/chap-a.html" target="_top">[CLHS-a]</a></h2></div></div></div><p>No notes.</p></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="issues"></a>Chapter 28. X3J13 Issue Index
   <a href="http://www.lisp.org/HyperSpec/Issues/Issues-Categorized.html" target="_top">[CLHS-ic]</a></h2></div></div></div><p>This is the list of [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] issues and their current status in
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, i.e., whether <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> supports code that makes use of the
 functionality specified by the vote.</p><div class="variablelist"><a id="issues-list"></a><p class="title"><b>X3J13 Issues</b></p><dl><dt><a id="iss001"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss001.html" target="_top">&amp;ENVIRONMENT-BINDING-ORDER:FIRST</a></span></dt><dd>yes</dd><dt><a id="iss002"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss002.html" target="_top">ACCESS-ERROR-NAME</a></span></dt><dd>yes</dd><dt><a id="iss003"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss003.html" target="_top">ADJUST-ARRAY-DISPLACEMENT</a></span></dt><dd>yes</dd><dt><a id="iss004"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss004.html" target="_top">ADJUST-ARRAY-FILL-POINTER</a></span></dt><dd>yes</dd><dt><a id="iss005"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss005.html" target="_top">ADJUST-ARRAY-NOT-ADJUSTABLE:IMPLICIT-COPY</a></span></dt><dd>yes</dd><dt><a id="iss006"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss006.html" target="_top">ALLOCATE-INSTANCE:ADD</a></span></dt><dd>yes</dd><dt><a id="iss007"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss007.html" target="_top">ALLOW-LOCAL-INLINE:INLINE-NOTINLINE</a></span></dt><dd>yes</dd><dt><a id="iss008"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss008.html" target="_top">ALLOW-OTHER-KEYS-NIL:PERMIT</a></span></dt><dd>yes</dd><dt><a id="iss009"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss009.html" target="_top">AREF-1D</a></span></dt><dd>yes</dd><dt><a id="iss010"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss010.html" target="_top">ARGUMENT-MISMATCH-ERROR-AGAIN:CONSISTENT</a></span></dt><dd>yes</dd><dt><a id="iss011"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss011.html" target="_top">ARGUMENT-MISMATCH-ERROR-MOON:FIX</a></span></dt><dd>yes</dd><dt><a id="iss012"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss012.html" target="_top">ARGUMENT-MISMATCH-ERROR:MORE-CLARIFICATIONS</a></span></dt><dd>yes, except for argument list checking in
    <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a> in compiled code (items 11,12)
 </dd><dt><a id="iss013"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss013.html" target="_top">ARGUMENTS-UNDERSPECIFIED:SPECIFY</a></span></dt><dd>yes</dd><dt><a id="iss014"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss014.html" target="_top">ARRAY-DIMENSION-LIMIT-IMPLICATIONS:ALL-FIXNUM</a></span></dt><dd>yes</dd><dt><a id="iss015"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss015.html" target="_top">ARRAY-TYPE-ELEMENT-TYPE-SEMANTICS:UNIFY-UPGRADING</a></span></dt><dd>yes</dd><dt><a id="iss016"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss016.html" target="_top">ASSERT-ERROR-TYPE:ERROR</a></span></dt><dd>yes</dd><dt><a id="iss017"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss017.html" target="_top">ASSOC-RASSOC-IF-KEY</a></span></dt><dd>yes</dd><dt><a id="iss018"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss018.html" target="_top">ASSOC-RASSOC-IF-KEY:YES</a></span></dt><dd>yes</dd><dt><a id="iss019"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss019.html" target="_top">BOA-AUX-INITIALIZATION:ERROR-ON-READ</a></span></dt><dd>yes</dd><dt><a id="iss020"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss020.html" target="_top">BREAK-ON-WARNINGS-OBSOLETE:REMOVE</a></span></dt><dd>yes</dd><dt><a id="iss021"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss021.html" target="_top">BROADCAST-STREAM-RETURN-VALUES:CLARIFY-MINIMALLY</a></span></dt><dd>yes</dd><dt><a id="iss022"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss022.html" target="_top">BUTLAST-NEGATIVE:SHOULD-SIGNAL</a></span></dt><dd>yes</dd><dt><a id="iss023"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss023.html" target="_top">CHANGE-CLASS-INITARGS:PERMIT</a></span></dt><dd>yes</dd><dt><a id="iss024"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss024.html" target="_top">CHAR-NAME-CASE:X3J13-MAR-91</a></span></dt><dd>yes</dd><dt><a id="iss025"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss025.html" target="_top">CHARACTER-LOOSE-ENDS:FIX</a></span></dt><dd>yes</dd><dt><a id="iss026"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss026.html" target="_top">CHARACTER-PROPOSAL:2</a></span></dt><dd>yes</dd><dt><a id="iss027"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss027.html" target="_top">CHARACTER-PROPOSAL:2-1-1</a></span></dt><dd>yes</dd><dt><a id="iss028"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss028.html" target="_top">CHARACTER-PROPOSAL:2-1-2</a></span></dt><dd>yes</dd><dt><a id="iss029"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss029.html" target="_top">CHARACTER-PROPOSAL:2-2-1</a></span></dt><dd>yes</dd><dt><a id="iss030"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss030.html" target="_top">CHARACTER-PROPOSAL:2-3-1</a></span></dt><dd>yes</dd><dt><a id="iss031"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss031.html" target="_top">CHARACTER-PROPOSAL:2-3-2</a></span></dt><dd>yes</dd><dt><a id="iss032"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss032.html" target="_top">CHARACTER-PROPOSAL:2-3-3</a></span></dt><dd>yes</dd><dt><a id="iss033"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss033.html" target="_top">CHARACTER-PROPOSAL:2-3-4</a></span></dt><dd>yes</dd><dt><a id="iss034"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss034.html" target="_top">CHARACTER-PROPOSAL:2-3-5</a></span></dt><dd>yes</dd><dt><a id="iss035"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss035.html" target="_top">CHARACTER-PROPOSAL:2-3-6</a></span></dt><dd>yes</dd><dt><a id="iss036"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss036.html" target="_top">CHARACTER-PROPOSAL:2-4-1</a></span></dt><dd>yes</dd><dt><a id="iss037"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss037.html" target="_top">CHARACTER-PROPOSAL:2-4-2</a></span></dt><dd>yes</dd><dt><a id="iss038"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss038.html" target="_top">CHARACTER-PROPOSAL:2-4-3</a></span></dt><dd>yes</dd><dt><a id="iss039"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss039.html" target="_top">CHARACTER-PROPOSAL:2-5-2</a></span></dt><dd>yes</dd><dt><a id="iss040"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss040.html" target="_top">CHARACTER-PROPOSAL:2-5-6</a></span></dt><dd>yes</dd><dt><a id="iss041"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss041.html" target="_top">CHARACTER-PROPOSAL:2-5-7</a></span></dt><dd>yes</dd><dt><a id="iss042"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss042.html" target="_top">CHARACTER-PROPOSAL:2-6-1</a></span></dt><dd>yes</dd><dt><a id="iss043"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss043.html" target="_top">CHARACTER-PROPOSAL:2-6-2</a></span></dt><dd>yes</dd><dt><a id="iss044"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss044.html" target="_top">CHARACTER-PROPOSAL:2-6-3</a></span></dt><dd>yes</dd><dt><a id="iss045"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss045.html" target="_top">CHARACTER-PROPOSAL:2-6-5</a></span></dt><dd>yes</dd><dt><a id="iss046"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss046.html" target="_top">CHARACTER-VS-CHAR:LESS-INCONSISTENT-SHORT</a></span></dt><dd>yes</dd><dt><a id="iss047"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss047.html" target="_top">CLASS-OBJECT-SPECIALIZER:AFFIRM</a></span></dt><dd>yes</dd><dt><a id="iss048"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss048.html" target="_top">CLOS-CONDITIONS-AGAIN:ALLOW-SUBSET</a></span></dt><dd>yes</dd><dt><a id="iss049"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss049.html" target="_top">CLOS-CONDITIONS:INTEGRATE</a></span></dt><dd>yes</dd><dt><a id="iss050"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss050.html" target="_top">CLOS-ERROR-CHECKING-ORDER:NO-APPLICABLE-METHOD-FIRST</a></span></dt><dd>yes</dd><dt><a id="iss051"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss051.html" target="_top">CLOS-MACRO-COMPILATION:MINIMAL</a></span></dt><dd>yes</dd><dt><a id="iss052"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss052.html" target="_top">CLOSE-CONSTRUCTED-STREAM:ARGUMENT-STREAM-ONLY</a></span></dt><dd>yes</dd><dt><a id="iss053"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss053.html" target="_top">CLOSED-STREAM-OPERATIONS:ALLOW-INQUIRY</a></span></dt><dd>yes</dd><dt><a id="iss054"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss054.html" target="_top">COERCING-SETF-NAME-TO-FUNCTION:ALL-FUNCTION-NAMES</a></span></dt><dd>yes</dd><dt><a id="iss055"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss055.html" target="_top">COLON-NUMBER</a></span></dt><dd>yes</dd><dt><a id="iss056"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss056.html" target="_top">COMMON-FEATURES:SPECIFY</a></span></dt><dd>yes</dd><dt><a id="iss057"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss057.html" target="_top">COMMON-TYPE:REMOVE</a></span></dt><dd>yes</dd><dt><a id="iss058"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss058.html" target="_top">COMPILE-ARGUMENT-PROBLEMS-AGAIN:FIX</a></span></dt><dd>yes</dd><dt><a id="iss059"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss059.html" target="_top">COMPILE-FILE-HANDLING-OF-TOP-LEVEL-FORMS:CLARIFY</a></span></dt><dd>yes</dd><dt><a id="iss060"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss060.html" target="_top">COMPILE-FILE-OUTPUT-FILE-DEFAULTS:INPUT-FILE</a></span></dt><dd>yes</dd><dt><a id="iss061"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss061.html" target="_top">COMPILE-FILE-PACKAGE</a></span></dt><dd>yes</dd><dt><a id="iss062"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss062.html" target="_top">COMPILE-FILE-PATHNAME-ARGUMENTS:MAKE-CONSISTENT</a></span></dt><dd>yes</dd><dt><a id="iss063"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss063.html" target="_top">COMPILE-FILE-SYMBOL-HANDLING:NEW-REQUIRE-CONSISTENCY</a></span></dt><dd>yes</dd><dt><a id="iss064"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss064.html" target="_top">COMPILED-FUNCTION-REQUIREMENTS:TIGHTEN</a></span></dt><dd>yes</dd><dt><a id="iss065"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss065.html" target="_top">COMPILER-DIAGNOSTICS:USE-HANDLER</a></span></dt><dd>no</dd><dt><a id="iss066"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss066.html" target="_top">COMPILER-LET-CONFUSION:ELIMINATE</a></span></dt><dd>yes</dd><dt><a id="iss067"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss067.html" target="_top">COMPILER-VERBOSITY:LIKE-LOAD</a></span></dt><dd>yes</dd><dt><a id="iss068"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss068.html" target="_top">COMPILER-WARNING-STREAM</a></span></dt><dd>yes</dd><dt><a id="iss069"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss069.html" target="_top">COMPLEX-ATAN-BRANCH-CUT:TWEAK</a></span></dt><dd>yes</dd><dt><a id="iss070"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss070.html" target="_top">COMPLEX-ATANH-BOGUS-FORMULA:TWEAK-MORE</a></span></dt><dd>yes</dd><dt><a id="iss071"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss071.html" target="_top">COMPLEX-RATIONAL-RESULT:EXTEND</a></span></dt><dd>yes</dd><dt><a id="iss072"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss072.html" target="_top">COMPUTE-APPLICABLE-METHODS:GENERIC</a></span></dt><dd>yes</dd><dt><a id="iss073"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss073.html" target="_top">CONCATENATE-SEQUENCE:SIGNAL-ERROR</a></span></dt><dd>yes</dd><dt><a id="iss074"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss074.html" target="_top">CONDITION-ACCESSORS-SETFABLE:NO</a></span></dt><dd>yes</dd><dt><a id="iss075"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss075.html" target="_top">CONDITION-RESTARTS:BUGGY</a></span></dt><dd>yes</dd><dt><a id="iss076"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss076.html" target="_top">CONDITION-RESTARTS:PERMIT-ASSOCIATION</a></span></dt><dd>yes</dd><dt><a id="iss077"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss077.html" target="_top">CONDITION-SLOTS:HIDDEN</a></span></dt><dd>yes</dd><dt><a id="iss078"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss078.html" target="_top">CONS-TYPE-SPECIFIER:ADD</a></span></dt><dd>yes</dd><dt><a id="iss079"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss079.html" target="_top">CONSTANT-CIRCULAR-COMPILATION:YES</a></span></dt><dd>yes</dd><dt><a id="iss080"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss080.html" target="_top">CONSTANT-COLLAPSING:GENERALIZE</a></span></dt><dd>yes</dd><dt><a id="iss081"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss081.html" target="_top">CONSTANT-COMPILABLE-TYPES:SPECIFY</a></span></dt><dd>yes</dd><dt><a id="iss082"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss082.html" target="_top">CONSTANT-FUNCTION-COMPILATION:NO</a></span></dt><dd><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can dump compiled functions defined in the
    global <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>. Interpreted functions can <span class="strong"><strong>not</strong></span> be dumped;
    this should not be a problem, because an
    <span class="emphasis"><em>interpreted</em></span> function in a
    <span class="emphasis"><em>compiled</em></span> file usually indicate a programmer
    error (often an extra <a href="http://www.lisp.org/HyperSpec/Body/speope_quote.html" target="_top"><code class="function">QUOTE</code></a>).</dd><dt><a id="iss083"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss083.html" target="_top">CONSTANT-MODIFICATION:DISALLOW</a></span></dt><dd>yes</dd><dt><a id="iss084"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss084.html" target="_top">CONSTANTP-DEFINITION:INTENTIONAL</a></span></dt><dd>yes</dd><dt><a id="iss085"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss085.html" target="_top">CONSTANTP-ENVIRONMENT:ADD-ARG</a></span></dt><dd>yes</dd><dt><a id="iss086"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss086.html" target="_top">CONTAGION-ON-NUMERICAL-COMPARISONS:TRANSITIVE</a></span></dt><dd>yes</dd><dt><a id="iss087"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss087.html" target="_top">COPY-SYMBOL-COPY-PLIST:COPY-LIST</a></span></dt><dd>yes</dd><dt><a id="iss088"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss088.html" target="_top">COPY-SYMBOL-PRINT-NAME:EQUAL</a></span></dt><dd>yes</dd><dt><a id="iss089"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss089.html" target="_top">DATA-IO:ADD-SUPPORT</a></span></dt><dd>yes</dd><dt><a id="iss090"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss090.html" target="_top">DATA-TYPES-HIERARCHY-UNDERSPECIFIED</a></span></dt><dd>yes</dd><dt><a id="iss091"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss091.html" target="_top">DEBUGGER-HOOK-VS-BREAK:CLARIFY</a></span></dt><dd>yes</dd><dt><a id="iss092"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss092.html" target="_top">DECLARATION-SCOPE:NO-HOISTING</a></span></dt><dd>yes</dd><dt><a id="iss093"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss093.html" target="_top">DECLARE-ARRAY-TYPE-ELEMENT-REFERENCES:RESTRICTIVE</a></span></dt><dd>yes</dd><dt><a id="iss094"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss094.html" target="_top">DECLARE-FUNCTION-AMBIGUITY:DELETE-FTYPE-ABBREVIATION</a></span></dt><dd>yes</dd><dt><a id="iss095"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss095.html" target="_top">DECLARE-MACROS:FLUSH</a></span></dt><dd>yes</dd><dt><a id="iss096"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss096.html" target="_top">DECLARE-TYPE-FREE:LEXICAL</a></span></dt><dd>yes</dd><dt><a id="iss097"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss097.html" target="_top">DECLS-AND-DOC</a></span></dt><dd>there is no writeup, but all affected
    operators are fully implemented as specified
 </dd><dt><a id="iss098"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss098.html" target="_top">DECODE-UNIVERSAL-TIME-DAYLIGHT:LIKE-ENCODE</a></span></dt><dd>yes</dd><dt><a id="iss099"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss099.html" target="_top">DEFCONSTANT-SPECIAL:NO</a></span></dt><dd>yes</dd><dt><a id="iss100"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss100.html" target="_top">DEFGENERIC-DECLARE:ALLOW-MULTIPLE</a></span></dt><dd>yes</dd><dt><a id="iss101"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss101.html" target="_top">DEFINE-COMPILER-MACRO:X3J13-NOV89</a></span></dt><dd>yes</dd><dt><a id="iss102"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss102.html" target="_top">DEFINE-CONDITION-SYNTAX:INCOMPATIBLY-MORE-LIKE-DEFCLASS+EMPHASIZE-READ-ONLY</a></span></dt><dd>yes</dd><dt><a id="iss103"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss103.html" target="_top">DEFINE-METHOD-COMBINATION-BEHAVIOR:CLARIFY</a></span></dt><dd>no</dd><dt><a id="iss104"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss104.html" target="_top">DEFINING-MACROS-NON-TOP-LEVEL:ALLOW</a></span></dt><dd>yes</dd><dt><a id="iss105"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss105.html" target="_top">DEFMACRO-BLOCK-SCOPE:EXCLUDES-BINDINGS</a></span></dt><dd>yes</dd><dt><a id="iss106"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss106.html" target="_top">DEFMACRO-LAMBDA-LIST:TIGHTEN-DESCRIPTION</a></span></dt><dd>yes</dd><dt><a id="iss107"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss107.html" target="_top">DEFMETHOD-DECLARATION-SCOPE:CORRESPONDS-TO-BINDINGS</a></span></dt><dd>yes</dd><dt><a id="iss108"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss108.html" target="_top">DEFPACKAGE:ADDITION</a></span></dt><dd>yes</dd><dt><a id="iss109"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss109.html" target="_top">DEFSTRUCT-CONSTRUCTOR-KEY-MIXTURE:ALLOW-KEY</a></span></dt><dd>yes</dd><dt><a id="iss110"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss110.html" target="_top">DEFSTRUCT-CONSTRUCTOR-OPTIONS:EXPLICIT</a></span></dt><dd>yes</dd><dt><a id="iss111"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss111.html" target="_top">DEFSTRUCT-CONSTRUCTOR-SLOT-VARIABLES:NOT-BOUND</a></span></dt><dd>yes</dd><dt><a id="iss112"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss112.html" target="_top">DEFSTRUCT-COPIER-ARGUMENT-TYPE:RESTRICT</a></span></dt><dd>yes</dd><dt><a id="iss113"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss113.html" target="_top">DEFSTRUCT-COPIER:ARGUMENT-TYPE</a></span></dt><dd>yes</dd><dt><a id="iss114"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss114.html" target="_top">DEFSTRUCT-DEFAULT-VALUE-EVALUATION:IFF-NEEDED</a></span></dt><dd>yes</dd><dt><a id="iss115"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss115.html" target="_top">DEFSTRUCT-INCLUDE-DEFTYPE:EXPLICITLY-UNDEFINED</a></span></dt><dd>yes</dd><dt><a id="iss116"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss116.html" target="_top">DEFSTRUCT-PRINT-FUNCTION-AGAIN:X3J13-MAR-93</a></span></dt><dd>yes</dd><dt><a id="iss117"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss117.html" target="_top">DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YES</a></span></dt><dd>yes</dd><dt><a id="iss118"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss118.html" target="_top">DEFSTRUCT-REDEFINITION:ERROR</a></span></dt><dd>yes</dd><dt><a id="iss119"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss119.html" target="_top">DEFSTRUCT-SLOTS-CONSTRAINTS-NAME:DUPLICATES-ERROR</a></span></dt><dd>yes</dd><dt><a id="iss120"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss120.html" target="_top">DEFSTRUCT-SLOTS-CONSTRAINTS-NUMBER</a></span></dt><dd>yes</dd><dt><a id="iss121"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss121.html" target="_top">DEFTYPE-DESTRUCTURING:YES</a></span></dt><dd>yes</dd><dt><a id="iss122"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss122.html" target="_top">DEFTYPE-KEY:ALLOW</a></span></dt><dd>yes</dd><dt><a id="iss123"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss123.html" target="_top">DEFVAR-DOCUMENTATION:UNEVALUATED</a></span></dt><dd>yes</dd><dt><a id="iss124"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss124.html" target="_top">DEFVAR-INIT-TIME:NOT-DELAYED</a></span></dt><dd>yes</dd><dt><a id="iss125"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss125.html" target="_top">DEFVAR-INITIALIZATION:CONSERVATIVE</a></span></dt><dd>yes</dd><dt><a id="iss126"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss126.html" target="_top">DEPRECATION-POSITION:LIMITED</a></span></dt><dd>yes</dd><dt><a id="iss127"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss127.html" target="_top">DESCRIBE-INTERACTIVE:NO</a></span></dt><dd>yes</dd><dt><a id="iss128"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss128.html" target="_top">DESCRIBE-UNDERSPECIFIED:DESCRIBE-OBJECT</a></span></dt><dd>yes</dd><dt><a id="iss129"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss129.html" target="_top">DESTRUCTIVE-OPERATIONS:SPECIFY</a></span></dt><dd>yes</dd><dt><a id="iss130"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss130.html" target="_top">DESTRUCTURING-BIND:NEW-MACRO</a></span></dt><dd>yes</dd><dt><a id="iss131"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss131.html" target="_top">DISASSEMBLE-SIDE-EFFECT:DO-NOT-INSTALL</a></span></dt><dd>yes</dd><dt><a id="iss132"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss132.html" target="_top">DISPLACED-ARRAY-PREDICATE:ADD</a></span></dt><dd>yes</dd><dt><a id="iss133"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss133.html" target="_top">DO-SYMBOLS-BLOCK-SCOPE:ENTIRE-FORM</a></span></dt><dd>yes</dd><dt><a id="iss134"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss134.html" target="_top">DO-SYMBOLS-DUPLICATES</a></span></dt><dd>yes</dd><dt><a id="iss135"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss135.html" target="_top">DOCUMENTATION-FUNCTION-BUGS:FIX</a></span></dt><dd>yes</dd><dt><a id="iss136"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss136.html" target="_top">DOCUMENTATION-FUNCTION-TANGLED:REQUIRE-ARGUMENT</a></span></dt><dd>yes</dd><dt><a id="iss137"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss137.html" target="_top">DOTIMES-IGNORE:X3J13-MAR91</a></span></dt><dd>yes</dd><dt><a id="iss138"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss138.html" target="_top">DOTTED-LIST-ARGUMENTS:CLARIFY</a></span></dt><dd>yes</dd><dt><a id="iss139"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss139.html" target="_top">DOTTED-MACRO-FORMS:ALLOW</a></span></dt><dd>yes</dd><dt><a id="iss140"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss140.html" target="_top">DRIBBLE-TECHNIQUE</a></span></dt><dd>yes</dd><dt><a id="iss141"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss141.html" target="_top">DYNAMIC-EXTENT-FUNCTION:EXTEND</a></span></dt><dd>yes</dd><dt><a id="iss142"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss142.html" target="_top">DYNAMIC-EXTENT:NEW-DECLARATION</a></span></dt><dd>yes</dd><dt><a id="iss143"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss143.html" target="_top">EQUAL-STRUCTURE:MAYBE-STATUS-QUO</a></span></dt><dd>yes</dd><dt><a id="iss144"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss144.html" target="_top">ERROR-TERMINOLOGY-WARNING:MIGHT</a></span></dt><dd>yes</dd><dt><a id="iss145"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss145.html" target="_top">EVAL-OTHER:SELF-EVALUATE</a></span></dt><dd>yes</dd><dt><a id="iss146"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss146.html" target="_top">EVAL-TOP-LEVEL:LOAD-LIKE-COMPILE-FILE</a></span></dt><dd>yes</dd><dt><a id="iss147"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss147.html" target="_top">EVAL-WHEN-NON-TOP-LEVEL:GENERALIZE-EVAL-NEW-KEYWORDS</a></span></dt><dd>yes</dd><dt><a id="iss148"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss148.html" target="_top">EVAL-WHEN-OBSOLETE-KEYWORDS:X3J13-MAR-1993</a></span></dt><dd>no</dd><dt><a id="iss149"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss149.html" target="_top">EVALHOOK-STEP-CONFUSION:FIX</a></span></dt><dd>yes</dd><dt><a id="iss150"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss150.html" target="_top">EVALHOOK-STEP-CONFUSION:X3J13-NOV-89</a></span></dt><dd>yes</dd><dt><a id="iss151"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss151.html" target="_top">EXIT-EXTENT-AND-CONDITION-SYSTEM:LIKE-DYNAMIC-BINDINGS</a></span></dt><dd>yes</dd><dt><a id="iss152"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss152.html" target="_top">EXIT-EXTENT:MINIMAL</a></span></dt><dd>yes, actually implement MEDIUM
 </dd><dt><a id="iss153"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss153.html" target="_top">EXPT-RATIO:P.211</a></span></dt><dd>yes</dd><dt><a id="iss154"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss154.html" target="_top">EXTENSIONS-POSITION:DOCUMENTATION</a></span></dt><dd>yes</dd><dt><a id="iss155"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss155.html" target="_top">EXTERNAL-FORMAT-FOR-EVERY-FILE-CONNECTION:MINIMUM</a></span></dt><dd>yes</dd><dt><a id="iss156"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss156.html" target="_top">EXTRA-RETURN-VALUES:NO</a></span></dt><dd>yes</dd><dt><a id="iss157"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss157.html" target="_top">FILE-OPEN-ERROR:SIGNAL-FILE-ERROR</a></span></dt><dd>yes</dd><dt><a id="iss158"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss158.html" target="_top">FIXNUM-NON-PORTABLE:TIGHTEN-DEFINITION</a></span></dt><dd>yes</dd><dt><a id="iss159"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss159.html" target="_top">FLET-DECLARATIONS</a></span></dt><dd>yes</dd><dt><a id="iss160"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss160.html" target="_top">FLET-DECLARATIONS:ALLOW</a></span></dt><dd>yes</dd><dt><a id="iss161"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss161.html" target="_top">FLET-IMPLICIT-BLOCK:YES</a></span></dt><dd>yes</dd><dt><a id="iss162"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss162.html" target="_top">FLOAT-UNDERFLOW:ADD-VARIABLES</a></span></dt><dd>yes</dd><dt><a id="iss163"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss163.html" target="_top">FLOATING-POINT-CONDITION-NAMES:X3J13-NOV-89</a></span></dt><dd>yes</dd><dt><a id="iss164"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss164.html" target="_top">FORMAT-ATSIGN-COLON</a></span></dt><dd>yes</dd><dt><a id="iss165"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss165.html" target="_top">FORMAT-COLON-UPARROW-SCOPE</a></span></dt><dd>yes</dd><dt><a id="iss166"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss166.html" target="_top">FORMAT-COMMA-INTERVAL</a></span></dt><dd>yes</dd><dt><a id="iss167"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss167.html" target="_top">FORMAT-E-EXPONENT-SIGN:FORCE-SIGN</a></span></dt><dd>yes</dd><dt><a id="iss168"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss168.html" target="_top">FORMAT-OP-C</a></span></dt><dd>yes</dd><dt><a id="iss169"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss169.html" target="_top">FORMAT-PRETTY-PRINT:YES</a></span></dt><dd>yes, except that <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html" target="_top"><code class="literal">~F</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html" target="_top"><code class="literal">~E</code></a>,
    <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html" target="_top"><code class="literal">~G</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html" target="_top"><code class="literal">~$</code></a> also bind <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><code class="varname">*PRINT-BASE*</code></a> to 10 and
    <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html" target="_top"><code class="varname">*PRINT-RADIX*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></dd><dt><a id="iss170"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss170.html" target="_top">FORMAT-STRING-ARGUMENTS:SPECIFY</a></span></dt><dd>yes</dd><dt><a id="iss171"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss171.html" target="_top">FUNCTION-CALL-EVALUATION-ORDER:MORE-UNSPECIFIED</a></span></dt><dd>yes</dd><dt><a id="iss172"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss172.html" target="_top">FUNCTION-COMPOSITION:JAN89-X3J13</a></span></dt><dd>yes</dd><dt><a id="iss173"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss173.html" target="_top">FUNCTION-DEFINITION:JAN89-X3J13</a></span></dt><dd>yes</dd><dt><a id="iss174"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss174.html" target="_top">FUNCTION-NAME:LARGE</a></span></dt><dd>yes</dd><dt><a id="iss175"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss175.html" target="_top">FUNCTION-TYPE</a></span></dt><dd>yes</dd><dt><a id="iss176"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss176.html" target="_top">FUNCTION-TYPE-ARGUMENT-TYPE-SEMANTICS:RESTRICTIVE</a></span></dt><dd>yes</dd><dt><a id="iss177"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss177.html" target="_top">FUNCTION-TYPE-KEY-NAME:SPECIFY-KEYWORD</a></span></dt><dd>yes</dd><dt><a id="iss178"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss178.html" target="_top">FUNCTION-TYPE-REST-LIST-ELEMENT:USE-ACTUAL-ARGUMENT-TYPE</a></span></dt><dd>yes</dd><dt><a id="iss179"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss179.html" target="_top">FUNCTION-TYPE:X3J13-MARCH-88</a></span></dt><dd>yes</dd><dt><a id="iss180"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss180.html" target="_top">GENERALIZE-PRETTY-PRINTER:UNIFY</a></span></dt><dd>no</dd><dt><a id="iss181"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss181.html" target="_top">GENERIC-FLET-POORLY-DESIGNED:DELETE</a></span></dt><dd>yes</dd><dt><a id="iss182"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss182.html" target="_top">GENSYM-NAME-STICKINESS:LIKE-TEFLON</a></span></dt><dd>yes</dd><dt><a id="iss183"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss183.html" target="_top">GENTEMP-BAD-IDEA:DEPRECATE</a></span></dt><dd>yes</dd><dt><a id="iss184"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss184.html" target="_top">GET-MACRO-CHARACTER-READTABLE:NIL-STANDARD</a></span></dt><dd>yes</dd><dt><a id="iss185"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss185.html" target="_top">GET-SETF-METHOD-ENVIRONMENT:ADD-ARG</a></span></dt><dd>yes</dd><dt><a id="iss186"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss186.html" target="_top">HASH-TABLE-ACCESS:X3J13-MAR-89</a></span></dt><dd>yes</dd><dt><a id="iss187"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss187.html" target="_top">HASH-TABLE-KEY-MODIFICATION:SPECIFY</a></span></dt><dd>yes</dd><dt><a id="iss188"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss188.html" target="_top">HASH-TABLE-PACKAGE-GENERATORS:ADD-WITH-WRAPPER</a></span></dt><dd>yes</dd><dt><a id="iss189"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss189.html" target="_top">HASH-TABLE-REHASH-SIZE-INTEGER</a></span></dt><dd>yes</dd><dt><a id="iss190"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss190.html" target="_top">HASH-TABLE-SIZE:INTENDED-ENTRIES</a></span></dt><dd>yes</dd><dt><a id="iss191"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss191.html" target="_top">HASH-TABLE-TESTS:ADD-EQUALP</a></span></dt><dd>yes</dd><dt><a id="iss192"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss192.html" target="_top">IEEE-ATAN-BRANCH-CUT:SPLIT</a></span></dt><dd>yes</dd><dt><a id="iss193"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss193.html" target="_top">IGNORE-USE-TERMINOLOGY:VALUE-ONLY</a></span></dt><dd>yes</dd><dt><a id="iss194"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss194.html" target="_top">IMPORT-SETF-SYMBOL-PACKAGE</a></span></dt><dd>yes</dd><dt><a id="iss195"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss195.html" target="_top">IN-PACKAGE-FUNCTIONALITY:MAR89-X3J13</a></span></dt><dd>yes</dd><dt><a id="iss196"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss196.html" target="_top">IN-SYNTAX:MINIMAL</a></span></dt><dd>yes</dd><dt><a id="iss197"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss197.html" target="_top">INITIALIZATION-FUNCTION-KEYWORD-CHECKING</a></span></dt><dd>yes</dd><dt><a id="iss198"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss198.html" target="_top">ISO-COMPATIBILITY:ADD-SUBSTRATE</a></span></dt><dd>yes</dd><dt><a id="iss199"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss199.html" target="_top">JUN90-TRIVIAL-ISSUES:11</a></span></dt><dd>yes</dd><dt><a id="iss200"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss200.html" target="_top">JUN90-TRIVIAL-ISSUES:14</a></span></dt><dd>yes</dd><dt><a id="iss201"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss201.html" target="_top">JUN90-TRIVIAL-ISSUES:24</a></span></dt><dd>yes</dd><dt><a id="iss202"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss202.html" target="_top">JUN90-TRIVIAL-ISSUES:25</a></span></dt><dd>yes</dd><dt><a id="iss203"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss203.html" target="_top">JUN90-TRIVIAL-ISSUES:27</a></span></dt><dd>yes for <a href="http://www.lisp.org/HyperSpec/Body/speope_the.html" target="_top"><code class="function">THE</code></a>, no for <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> (spec not clear)
 </dd><dt><a id="iss204"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss204.html" target="_top">JUN90-TRIVIAL-ISSUES:3</a></span></dt><dd>yes</dd><dt><a id="iss205"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss205.html" target="_top">JUN90-TRIVIAL-ISSUES:4</a></span></dt><dd>yes</dd><dt><a id="iss206"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss206.html" target="_top">JUN90-TRIVIAL-ISSUES:5</a></span></dt><dd>yes</dd><dt><a id="iss207"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss207.html" target="_top">JUN90-TRIVIAL-ISSUES:9</a></span></dt><dd>yes</dd><dt><a id="iss208"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss208.html" target="_top">KEYWORD-ARGUMENT-NAME-PACKAGE:ANY</a></span></dt><dd>yes</dd><dt><a id="iss209"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss209.html" target="_top">LAST-N</a></span></dt><dd>yes</dd><dt><a id="iss210"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss210.html" target="_top">LCM-NO-ARGUMENTS:1</a></span></dt><dd>yes</dd><dt><a id="iss211"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss211.html" target="_top">LEXICAL-CONSTRUCT-GLOBAL-DEFINITION:UNDEFINED</a></span></dt><dd>yes</dd><dt><a id="iss212"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss212.html" target="_top">LISP-PACKAGE-NAME:COMMON-LISP</a></span></dt><dd>yes</dd><dt><a id="iss213"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss213.html" target="_top">LISP-SYMBOL-REDEFINITION-AGAIN:MORE-FIXES</a></span></dt><dd>yes</dd><dt><a id="iss214"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss214.html" target="_top">LISP-SYMBOL-REDEFINITION:MAR89-X3J13</a></span></dt><dd>yes</dd><dt><a id="iss215"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss215.html" target="_top">LOAD-OBJECTS:MAKE-LOAD-FORM</a></span></dt><dd>yes</dd><dt><a id="iss216"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss216.html" target="_top">LOAD-TIME-EVAL:R**2-NEW-SPECIAL-FORM</a></span></dt><dd>obsolete</dd><dt><a id="iss217"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss217.html" target="_top">LOAD-TIME-EVAL:R**3-NEW-SPECIAL-FORM</a></span></dt><dd>yes</dd><dt><a id="iss218"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss218.html" target="_top">LOAD-TRUENAME:NEW-PATHNAME-VARIABLES</a></span></dt><dd>yes</dd><dt><a id="iss219"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss219.html" target="_top">LOCALLY-TOP-LEVEL:SPECIAL-FORM</a></span></dt><dd>yes</dd><dt><a id="iss220"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss220.html" target="_top">LOOP-AND-DISCREPANCY:NO-REITERATION</a></span></dt><dd>yes</dd><dt><a id="iss221"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss221.html" target="_top">LOOP-FOR-AS-ON-TYPO:FIX-TYPO</a></span></dt><dd>yes</dd><dt><a id="iss222"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss222.html" target="_top">LOOP-INITFORM-ENVIRONMENT:PARTIAL-INTERLEAVING-VAGUE</a></span></dt><dd>no</dd><dt><a id="iss223"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss223.html" target="_top">LOOP-MISCELLANEOUS-REPAIRS:FIX</a></span></dt><dd>yes</dd><dt><a id="iss224"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss224.html" target="_top">LOOP-NAMED-BLOCK-NIL:OVERRIDE</a></span></dt><dd>yes</dd><dt><a id="iss225"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss225.html" target="_top">LOOP-PRESENT-SYMBOLS-TYPO:FLUSH-WRONG-WORDS</a></span></dt><dd>yes</dd><dt><a id="iss226"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss226.html" target="_top">LOOP-SYNTAX-OVERHAUL:REPAIR</a></span></dt><dd>yes</dd><dt><a id="iss227"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss227.html" target="_top">MACRO-AS-FUNCTION:DISALLOW</a></span></dt><dd>yes</dd><dt><a id="iss228"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss228.html" target="_top">MACRO-DECLARATIONS:MAKE-EXPLICIT</a></span></dt><dd>yes</dd><dt><a id="iss229"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss229.html" target="_top">MACRO-ENVIRONMENT-EXTENT:DYNAMIC</a></span></dt><dd>yes</dd><dt><a id="iss230"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss230.html" target="_top">MACRO-FUNCTION-ENVIRONMENT</a></span></dt><dd>obsolete</dd><dt><a id="iss231"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss231.html" target="_top">MACRO-FUNCTION-ENVIRONMENT:YES</a></span></dt><dd>yes</dd><dt><a id="iss232"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss232.html" target="_top">MACRO-SUBFORMS-TOP-LEVEL-P:ADD-CONSTRAINTS</a></span></dt><dd>no</dd><dt><a id="iss233"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss233.html" target="_top">MACROEXPAND-HOOK-DEFAULT:EXPLICITLY-VAGUE</a></span></dt><dd>yes</dd><dt><a id="iss234"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss234.html" target="_top">MACROEXPAND-HOOK-INITIAL-VALUE:IMPLEMENTATION-DEPENDENT</a></span></dt><dd>yes</dd><dt><a id="iss235"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss235.html" target="_top">MACROEXPAND-RETURN-VALUE:TRUE</a></span></dt><dd>yes</dd><dt><a id="iss236"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss236.html" target="_top">MAKE-LOAD-FORM-CONFUSION:REWRITE</a></span></dt><dd>yes</dd><dt><a id="iss237"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss237.html" target="_top">MAKE-LOAD-FORM-SAVING-SLOTS:NO-INITFORMS</a></span></dt><dd>yes</dd><dt><a id="iss238"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss238.html" target="_top">MAKE-PACKAGE-USE-DEFAULT:IMPLEMENTATION-DEPENDENT</a></span></dt><dd>yes</dd><dt><a id="iss239"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss239.html" target="_top">MAP-INTO:ADD-FUNCTION</a></span></dt><dd>yes</dd><dt><a id="iss240"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss240.html" target="_top">MAPPING-DESTRUCTIVE-INTERACTION:EXPLICITLY-VAGUE</a></span></dt><dd>yes</dd><dt><a id="iss241"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss241.html" target="_top">METACLASS-OF-SYSTEM-CLASS:UNSPECIFIED</a></span></dt><dd>yes</dd><dt><a id="iss242"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss242.html" target="_top">METHOD-COMBINATION-ARGUMENTS:CLARIFY</a></span></dt><dd>no</dd><dt><a id="iss243"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss243.html" target="_top">METHOD-INITFORM:FORBID-CALL-NEXT-METHOD</a></span></dt><dd>no</dd><dt><a id="iss244"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss244.html" target="_top">MUFFLE-WARNING-CONDITION-ARGUMENT</a></span></dt><dd>yes</dd><dt><a id="iss245"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss245.html" target="_top">MULTIPLE-VALUE-SETQ-ORDER:LIKE-SETF-OF-VALUES</a></span></dt><dd>yes</dd><dt><a id="iss246"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss246.html" target="_top">MULTIPLE-VALUES-LIMIT-ON-VARIABLES:UNDEFINED</a></span></dt><dd>yes</dd><dt><a id="iss247"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss247.html" target="_top">NINTERSECTION-DESTRUCTION</a></span></dt><dd>yes</dd><dt><a id="iss248"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss248.html" target="_top">NINTERSECTION-DESTRUCTION:REVERT</a></span></dt><dd>yes</dd><dt><a id="iss249"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss249.html" target="_top">NOT-AND-NULL-RETURN-VALUE:X3J13-MAR-93</a></span></dt><dd>yes</dd><dt><a id="iss250"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss250.html" target="_top">NTH-VALUE:ADD</a></span></dt><dd>yes</dd><dt><a id="iss251"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss251.html" target="_top">OPTIMIZE-DEBUG-INFO:NEW-QUALITY</a></span></dt><dd>yes</dd><dt><a id="iss252"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss252.html" target="_top">PACKAGE-CLUTTER:REDUCE</a></span></dt><dd>yes</dd><dt><a id="iss253"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss253.html" target="_top">PACKAGE-DELETION:NEW-FUNCTION</a></span></dt><dd>yes</dd><dt><a id="iss254"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss254.html" target="_top">PACKAGE-FUNCTION-CONSISTENCY:MORE-PERMISSIVE</a></span></dt><dd>yes</dd><dt><a id="iss255"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss255.html" target="_top">PARSE-ERROR-STREAM:SPLIT-TYPES</a></span></dt><dd>yes</dd><dt><a id="iss256"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss256.html" target="_top">PATHNAME-COMPONENT-CASE:KEYWORD-ARGUMENT</a></span></dt><dd>yes</dd><dt><a id="iss257"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss257.html" target="_top">PATHNAME-COMPONENT-VALUE:SPECIFY</a></span></dt><dd>no</dd><dt><a id="iss258"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss258.html" target="_top">PATHNAME-HOST-PARSING:RECOGNIZE-LOGICAL-HOST-NAMES</a></span></dt><dd>yes when <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><code class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
 </dd><dt><a id="iss259"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss259.html" target="_top">PATHNAME-LOGICAL:ADD</a></span></dt><dd>yes</dd><dt><a id="iss260"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss260.html" target="_top">PATHNAME-PRINT-READ:SHARPSIGN-P</a></span></dt><dd>yes</dd><dt><a id="iss261"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss261.html" target="_top">PATHNAME-STREAM</a></span></dt><dd>yes</dd><dt><a id="iss262"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss262.html" target="_top">PATHNAME-STREAM:FILES-OR-SYNONYM</a></span></dt><dd>yes</dd><dt><a id="iss263"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss263.html" target="_top">PATHNAME-SUBDIRECTORY-LIST:NEW-REPRESENTATION</a></span></dt><dd>yes</dd><dt><a id="iss264"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss264.html" target="_top">PATHNAME-SYMBOL</a></span></dt><dd>yes when <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><code class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
 </dd><dt><a id="iss265"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss265.html" target="_top">PATHNAME-SYNTAX-ERROR-TIME:EXPLICITLY-VAGUE</a></span></dt><dd>yes</dd><dt><a id="iss266"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss266.html" target="_top">PATHNAME-UNSPECIFIC-COMPONENT:NEW-TOKEN</a></span></dt><dd>yes</dd><dt><a id="iss267"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss267.html" target="_top">PATHNAME-WILD:NEW-FUNCTIONS</a></span></dt><dd>yes</dd><dt><a id="iss268"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss268.html" target="_top">PEEK-CHAR-READ-CHAR-ECHO:FIRST-READ-CHAR</a></span></dt><dd>yes</dd><dt><a id="iss269"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss269.html" target="_top">PLIST-DUPLICATES:ALLOW</a></span></dt><dd>yes</dd><dt><a id="iss270"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss270.html" target="_top">PRETTY-PRINT-INTERFACE</a></span></dt><dd>yes</dd><dt><a id="iss271"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss271.html" target="_top">PRINC-READABLY:X3J13-DEC-91</a></span></dt><dd>yes</dd><dt><a id="iss272"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss272.html" target="_top">PRINT-CASE-BEHAVIOR:CLARIFY</a></span></dt><dd>yes</dd><dt><a id="iss273"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss273.html" target="_top">PRINT-CASE-PRINT-ESCAPE-INTERACTION:VERTICAL-BAR-RULE-NO-UPCASE</a></span></dt><dd>yes</dd><dt><a id="iss274"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss274.html" target="_top">PRINT-CIRCLE-SHARED:RESPECT-PRINT-CIRCLE</a></span></dt><dd>yes</dd><dt><a id="iss275"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss275.html" target="_top">PRINT-CIRCLE-STRUCTURE:USER-FUNCTIONS-WORK</a></span></dt><dd>yes</dd><dt><a id="iss276"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss276.html" target="_top">PRINT-READABLY-BEHAVIOR:CLARIFY</a></span></dt><dd>yes</dd><dt><a id="iss277"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss277.html" target="_top">PRINTER-WHITESPACE:JUST-ONE-SPACE</a></span></dt><dd>yes</dd><dt><a id="iss278"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss278.html" target="_top">PROCLAIM-ETC-IN-COMPILE-FILE:NEW-MACRO</a></span></dt><dd>yes</dd><dt><a id="iss279"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss279.html" target="_top">PUSH-EVALUATION-ORDER:FIRST-ITEM</a></span></dt><dd>yes</dd><dt><a id="iss280"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss280.html" target="_top">PUSH-EVALUATION-ORDER:ITEM-FIRST</a></span></dt><dd>yes</dd><dt><a id="iss281"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss281.html" target="_top">PUSHNEW-STORE-REQUIRED:UNSPECIFIED</a></span></dt><dd>yes</dd><dt><a id="iss282"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss282.html" target="_top">QUOTE-SEMANTICS:NO-COPYING</a></span></dt><dd>yes</dd><dt><a id="iss283"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss283.html" target="_top">RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER</a></span></dt><dd>yes, when <a href="#count-ansi"><code class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</code></a> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>;
    otherwise negative <code class="constant">:COUNT</code> values are not allowed.
 </dd><dt><a id="iss284"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss284.html" target="_top">RANGE-OF-START-AND-END-PARAMETERS:INTEGER-AND-INTEGER-NIL</a></span></dt><dd>yes</dd><dt><a id="iss285"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss285.html" target="_top">READ-AND-WRITE-BYTES:NEW-FUNCTIONS</a></span></dt><dd>yes</dd><dt><a id="iss286"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss286.html" target="_top">READ-CASE-SENSITIVITY:READTABLE-KEYWORDS</a></span></dt><dd>yes</dd><dt><a id="iss287"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss287.html" target="_top">READ-MODIFY-WRITE-EVALUATION-ORDER:DELAYED-ACCESS-STORES</a></span></dt><dd>no</dd><dt><a id="iss288"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss288.html" target="_top">READ-SUPPRESS-CONFUSING:GENERALIZE</a></span></dt><dd>yes, except that <a href="http://www.lisp.org/HyperSpec/Body/fun_read-delimited-list.html" target="_top"><code class="function">READ-DELIMITED-LIST</code></a> still
    constructs a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a></dd><dt><a id="iss289"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss289.html" target="_top">READER-ERROR:NEW-TYPE</a></span></dt><dd>yes</dd><dt><a id="iss290"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss290.html" target="_top">REAL-NUMBER-TYPE:X3J13-MAR-89</a></span></dt><dd>yes</dd><dt><a id="iss291"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss291.html" target="_top">RECURSIVE-DEFTYPE:EXPLICITLY-VAGUE</a></span></dt><dd>yes</dd><dt><a id="iss292"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss292.html" target="_top">REDUCE-ARGUMENT-EXTRACTION</a></span></dt><dd>yes</dd><dt><a id="iss293"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss293.html" target="_top">REMF-DESTRUCTION-UNSPECIFIED:X3J13-MAR-89</a></span></dt><dd>yes</dd><dt><a id="iss294"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss294.html" target="_top">REQUIRE-PATHNAME-DEFAULTS-AGAIN:X3J13-DEC-91</a></span></dt><dd>yes</dd><dt><a id="iss295"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss295.html" target="_top">REQUIRE-PATHNAME-DEFAULTS-YET-AGAIN:RESTORE-ARGUMENT</a></span></dt><dd>yes</dd><dt><a id="iss296"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss296.html" target="_top">REQUIRE-PATHNAME-DEFAULTS:ELIMINATE</a></span></dt><dd>superseded by <a href="http://www.lisp.org/HyperSpec/Issues/iss294.html" target="_top">REQUIRE-PATHNAME-DEFAULTS-AGAIN:X3J13-DEC-91</a></dd><dt><a id="iss297"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss297.html" target="_top">REST-LIST-ALLOCATION:MAY-SHARE</a></span></dt><dd>yes</dd><dt><a id="iss298"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss298.html" target="_top">RESULT-LISTS-SHARED:SPECIFY</a></span></dt><dd>yes</dd><dt><a id="iss299"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss299.html" target="_top">RETURN-VALUES-UNSPECIFIED:SPECIFY</a></span></dt><dd>yes</dd><dt><a id="iss300"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss300.html" target="_top">ROOM-DEFAULT-ARGUMENT:NEW-VALUE</a></span></dt><dd>yes</dd><dt><a id="iss301"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss301.html" target="_top">SELF-MODIFYING-CODE:FORBID</a></span></dt><dd>yes</dd><dt><a id="iss302"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss302.html" target="_top">SEQUENCE-TYPE-LENGTH:MUST-MATCH</a></span></dt><dd>yes</dd><dt><a id="iss303"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss303.html" target="_top">SETF-APPLY-EXPANSION:IGNORE-EXPANDER</a></span></dt><dd>no</dd><dt><a id="iss304"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss304.html" target="_top">SETF-FIND-CLASS:ALLOW-NIL</a></span></dt><dd>yes</dd><dt><a id="iss305"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss305.html" target="_top">SETF-FUNCTIONS-AGAIN:MINIMAL-CHANGES</a></span></dt><dd>yes</dd><dt><a id="iss306"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss306.html" target="_top">SETF-GET-DEFAULT:EVALUATED-BUT-IGNORED</a></span></dt><dd>yes</dd><dt><a id="iss307"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss307.html" target="_top">SETF-MACRO-EXPANSION:LAST</a></span></dt><dd>yes</dd><dt><a id="iss308"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss308.html" target="_top">SETF-METHOD-VS-SETF-METHOD:RENAME-OLD-TERMS</a></span></dt><dd>yes</dd><dt><a id="iss309"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss309.html" target="_top">SETF-MULTIPLE-STORE-VARIABLES:ALLOW</a></span></dt><dd>yes</dd><dt><a id="iss310"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss310.html" target="_top">SETF-OF-APPLY:ONLY-AREF-AND-FRIENDS</a></span></dt><dd>yes</dd><dt><a id="iss311"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss311.html" target="_top">SETF-OF-VALUES:ADD</a></span></dt><dd>yes</dd><dt><a id="iss312"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss312.html" target="_top">SETF-SUB-METHODS:DELAYED-ACCESS-STORES</a></span></dt><dd>yes</dd><dt><a id="iss313"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss313.html" target="_top">SHADOW-ALREADY-PRESENT</a></span></dt><dd>yes</dd><dt><a id="iss314"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss314.html" target="_top">SHADOW-ALREADY-PRESENT:WORKS</a></span></dt><dd>yes</dd><dt><a id="iss315"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss315.html" target="_top">SHARP-COMMA-CONFUSION:REMOVE</a></span></dt><dd>no</dd><dt><a id="iss316"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss316.html" target="_top">SHARP-O-FOOBAR:CONSEQUENCES-UNDEFINED</a></span></dt><dd>yes</dd><dt><a id="iss317"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss317.html" target="_top">SHARP-STAR-DELIMITER:NORMAL-DELIMITER</a></span></dt><dd>yes</dd><dt><a id="iss318"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss318.html" target="_top">SHARPSIGN-PLUS-MINUS-PACKAGE:KEYWORD</a></span></dt><dd>yes</dd><dt><a id="iss319"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss319.html" target="_top">SLOT-MISSING-VALUES:SPECIFY</a></span></dt><dd>yes</dd><dt><a id="iss320"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss320.html" target="_top">SLOT-VALUE-METACLASSES:LESS-MINIMAL</a></span></dt><dd>yes</dd><dt><a id="iss321"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss321.html" target="_top">SPECIAL-FORM-P-MISNOMER:RENAME</a></span></dt><dd>yes</dd><dt><a id="iss322"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss322.html" target="_top">SPECIAL-TYPE-SHADOWING:CLARIFY</a></span></dt><dd>yes</dd><dt><a id="iss323"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss323.html" target="_top">STANDARD-INPUT-INITIAL-BINDING:DEFINED-CONTRACTS</a></span></dt><dd>yes</dd><dt><a id="iss324"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss324.html" target="_top">STANDARD-REPERTOIRE-GRATUITOUS:RENAME</a></span></dt><dd>yes</dd><dt><a id="iss325"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss325.html" target="_top">STEP-ENVIRONMENT:CURRENT</a></span></dt><dd>yes</dd><dt><a id="iss326"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss326.html" target="_top">STEP-MINIMAL:PERMIT-PROGN</a></span></dt><dd>yes</dd><dt><a id="iss327"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss327.html" target="_top">STREAM-ACCESS:ADD-TYPES-ACCESSORS</a></span></dt><dd>yes</dd><dt><a id="iss328"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss328.html" target="_top">STREAM-CAPABILITIES:INTERACTIVE-STREAM-P</a></span></dt><dd>yes</dd><dt><a id="iss329"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss329.html" target="_top">STRING-COERCION:MAKE-CONSISTENT</a></span></dt><dd>yes</dd><dt><a id="iss330"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss330.html" target="_top">STRING-OUTPUT-STREAM-BASHING:UNDEFINED</a></span></dt><dd>yes</dd><dt><a id="iss331"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss331.html" target="_top">STRUCTURE-READ-PRINT-SYNTAX:KEYWORDS</a></span></dt><dd>yes</dd><dt><a id="iss332"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss332.html" target="_top">SUBSEQ-OUT-OF-BOUNDS</a></span></dt><dd>yes</dd><dt><a id="iss333"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss333.html" target="_top">SUBSEQ-OUT-OF-BOUNDS:IS-AN-ERROR</a></span></dt><dd>yes</dd><dt><a id="iss334"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss334.html" target="_top">SUBSETTING-POSITION:NONE</a></span></dt><dd>yes</dd><dt><a id="iss335"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss335.html" target="_top">SUBTYPEP-ENVIRONMENT:ADD-ARG</a></span></dt><dd>yes</dd><dt><a id="iss336"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss336.html" target="_top">SUBTYPEP-TOO-VAGUE:CLARIFY-MORE</a></span></dt><dd>yes</dd><dt><a id="iss337"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss337.html" target="_top">SXHASH-DEFINITION:SIMILAR-FOR-SXHASH</a></span></dt><dd>yes</dd><dt><a id="iss338"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss338.html" target="_top">SYMBOL-MACROLET-DECLARE:ALLOW</a></span></dt><dd>yes</dd><dt><a id="iss339"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss339.html" target="_top">SYMBOL-MACROLET-SEMANTICS:SPECIAL-FORM</a></span></dt><dd>yes</dd><dt><a id="iss340"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss340.html" target="_top">SYMBOL-MACROLET-TYPE-DECLARATION:NO</a></span></dt><dd>yes</dd><dt><a id="iss341"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss341.html" target="_top">SYMBOL-MACROS-AND-PROCLAIMED-SPECIALS:SIGNALS-AN-ERROR</a></span></dt><dd>yes</dd><dt><a id="iss342"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss342.html" target="_top">SYMBOL-PRINT-ESCAPE-BEHAVIOR:CLARIFY</a></span></dt><dd>yes</dd><dt><a id="iss343"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss343.html" target="_top">SYNTACTIC-ENVIRONMENT-ACCESS:RETRACTED-MAR91</a></span></dt><dd>yes</dd><dt><a id="iss344"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss344.html" target="_top">TAGBODY-TAG-EXPANSION:NO</a></span></dt><dd>yes</dd><dt><a id="iss345"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss345.html" target="_top">TAILP-NIL:T</a></span></dt><dd>yes</dd><dt><a id="iss346"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss346.html" target="_top">TEST-NOT-IF-NOT:FLUSH-ALL</a></span></dt><dd>yes, but no warning</dd><dt><a id="iss347"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss347.html" target="_top">THE-AMBIGUITY:FOR-DECLARATION</a></span></dt><dd>yes</dd><dt><a id="iss348"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss348.html" target="_top">THE-VALUES:RETURN-NUMBER-RECEIVED</a></span></dt><dd>yes</dd><dt><a id="iss349"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss349.html" target="_top">TIME-ZONE-NON-INTEGER:ALLOW</a></span></dt><dd>yes</dd><dt><a id="iss350"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss350.html" target="_top">TYPE-DECLARATION-ABBREVIATION:ALLOW-ALL</a></span></dt><dd>no</dd><dt><a id="iss351"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss351.html" target="_top">TYPE-OF-AND-PREDEFINED-CLASSES:TYPE-OF-HANDLES-FLOATS</a></span></dt><dd>yes</dd><dt><a id="iss352"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss352.html" target="_top">TYPE-OF-AND-PREDEFINED-CLASSES:UNIFY-AND-EXTEND</a></span></dt><dd>yes</dd><dt><a id="iss353"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss353.html" target="_top">TYPE-OF-UNDERCONSTRAINED:ADD-CONSTRAINTS</a></span></dt><dd>yes</dd><dt><a id="iss354"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss354.html" target="_top">TYPE-SPECIFIER-ABBREVIATION:X3J13-JUN90-GUESS</a></span></dt><dd>yes</dd><dt><a id="iss355"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss355.html" target="_top">UNDEFINED-VARIABLES-AND-FUNCTIONS:COMPROMISE</a></span></dt><dd>yes</dd><dt><a id="iss356"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss356.html" target="_top">UNINITIALIZED-ELEMENTS:CONSEQUENCES-UNDEFINED</a></span></dt><dd>yes, could add error checking
 </dd><dt><a id="iss357"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss357.html" target="_top">UNREAD-CHAR-AFTER-PEEK-CHAR:DONT-ALLOW</a></span></dt><dd>yes</dd><dt><a id="iss358"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss358.html" target="_top">UNSOLICITED-MESSAGES:NOT-TO-SYSTEM-USER-STREAMS</a></span></dt><dd>yes</dd><dt><a id="iss359"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss359.html" target="_top">VARIABLE-LIST-ASYMMETRY:SYMMETRIZE</a></span></dt><dd>yes</dd><dt><a id="iss360"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss360.html" target="_top">WITH-ADDED-METHODS:DELETE</a></span></dt><dd>yes</dd><dt><a id="iss361"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss361.html" target="_top">WITH-COMPILATION-UNIT:NEW-MACRO</a></span></dt><dd>yes</dd><dt><a id="iss362"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss362.html" target="_top">WITH-OPEN-FILE-DOES-NOT-EXIST:STREAM-IS-NIL</a></span></dt><dd>yes</dd><dt><a id="iss363"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss363.html" target="_top">WITH-OPEN-FILE-SETQ:EXPLICITLY-VAGUE</a></span></dt><dd>yes</dd><dt><a id="iss364"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss364.html" target="_top">WITH-OPEN-FILE-STREAM-EXTENT:DYNAMIC-EXTENT</a></span></dt><dd>yes</dd><dt><a id="iss365"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss365.html" target="_top">WITH-OUTPUT-TO-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND</a></span></dt><dd>yes</dd><dt><a id="iss366"></a><span class="term"><a href="http://www.lisp.org/HyperSpec/Issues/iss366.html" target="_top">WITH-STANDARD-IO-SYNTAX-READTABLE:X3J13-MAR-91</a></span></dt><dd>yes</dd></dl></div></div></div><div class="part" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="extensions"></a>Part II. Extensions</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#ext-standard">29. Standard Widely Portable Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-chap">29.1. Meta-Object Protocol</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-intro">29.1.1. Introduction</a></span></dt><dt><span class="section"><a href="#mop-overview">29.1.2. Overview</a></span></dt><dt><span class="section"><a href="#mop-classes">29.1.3. Classes</a></span></dt><dt><span class="section"><a href="#mop-sd">29.1.4. Slot Definitions</a></span></dt><dt><span class="section"><a href="#mop-gf">29.1.5. Generic Functions</a></span></dt><dt><span class="section"><a href="#mop-meth">29.1.6. Methods</a></span></dt><dt><span class="section"><a href="#mop-accessors">29.1.7. Accessor Methods</a></span></dt><dt><span class="section"><a href="#mop-specializers">29.1.8. Specializers</a></span></dt><dt><span class="section"><a href="#mop-meth-comb">29.1.9. Method Combinations</a></span></dt><dt><span class="section"><a href="#mop-slot-access">29.1.10. Slot Access</a></span></dt><dt><span class="section"><a href="#mop-dep-maint">29.1.11. Dependent Maintenance</a></span></dt><dt><span class="section"><a href="#mop-clisp">29.1.12. Deviations from [<abbr class="abbrev">AMOP</abbr>]</a></span></dt></dl></dd><dt><span class="section"><a href="#gray">29.2. Gray streams</a></span></dt><dd><dl><dt><span class="section"><a href="#fill-stream">29.2.1. Class <code class="classname">EXT:FILL-STREAM</code></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ext-p-indep">30. Platform Independent Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#custom-init-fini">30.1. Customizing <span><strong class="command">CLISP</strong></span> Process
  Initialization and Termination</a></span></dt><dd><dl><dt><span class="section"><a href="#cradle-grave">30.1.1. Cradle to Grave</a></span></dt><dt><span class="section"><a href="#init-hooks">30.1.2. Customizing Initialization</a></span></dt><dt><span class="section"><a href="#fini-hooks">30.1.3. Customizing Termination</a></span></dt></dl></dd><dt><span class="section"><a href="#image">30.2. Saving an Image</a></span></dt><dt><span class="section"><a href="#quit">30.3. Quitting <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#i18n">30.4. Internationalization of <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#language">30.4.1. The Language</a></span></dt></dl></dd><dt><span class="section"><a href="#encoding">30.5. Encodings</a></span></dt><dd><dl><dt><span class="section"><a href="#encodings-intro">30.5.1. Introduction</a></span></dt><dt><span class="section"><a href="#charset">30.5.2. Character Sets</a></span></dt><dt><span class="section"><a href="#newline">30.5.3. Line Terminators</a></span></dt><dt><span class="section"><a href="#make-encoding">30.5.4. Function <code class="function">EXT:MAKE-ENCODING</code></a></span></dt><dt><span class="section"><a href="#enc-charset">30.5.5. Function <code class="function">EXT:ENCODING-CHARSET</code></a></span></dt><dt><span class="section"><a href="#enc-dflt">30.5.6. Default encodings</a></span></dt><dt><span class="section"><a href="#string-byte">30.5.7. Converting between strings and byte vectors</a></span></dt></dl></dd><dt><span class="section"><a href="#gstream">30.6. Generic streams</a></span></dt><dt><span class="section"><a href="#weak">30.7. Weak Objects</a></span></dt><dd><dl><dt><span class="section"><a href="#weak-pointer">30.7.1. Weak Pointers</a></span></dt><dt><span class="section"><a href="#weak-list">30.7.2. Weak Lists</a></span></dt><dt><span class="section"><a href="#weak-and-relation">30.7.3. Weak “<span class="quote">And</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-or-relation">30.7.4. Weak “<span class="quote">Or</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-mapping">30.7.5. Weak Associations</a></span></dt><dt><span class="section"><a href="#weak-and-mapping">30.7.6. Weak “<span class="quote">And</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-or-mapping">30.7.7. Weak “<span class="quote">Or</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-alist">30.7.8. Weak Association Lists</a></span></dt><dt><span class="section"><a href="#weak-ht">30.7.9. Weak Hash Tables</a></span></dt></dl></dd><dt><span class="section"><a href="#final">30.8. Finalization</a></span></dt><dt><span class="section"><a href="#prompt">30.9. The Prompt</a></span></dt><dt><span class="section"><a href="#ansi">30.10. Maximum ANSI CL compliance</a></span></dt><dt><span class="section"><a href="#macros3">30.11. Additional Fancy Macros and Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#ethe">30.11.1. Macro <code class="function">EXT:ETHE</code></a></span></dt><dt><span class="section"><a href="#letf">30.11.2. Macros <code class="function">EXT:LETF</code> &amp; <code class="function">EXT:LETF*</code></a></span></dt><dt><span class="section"><a href="#memoized">30.11.3. Macro <code class="function">EXT:MEMOIZED</code></a></span></dt><dt><span class="section"><a href="#with-collect">30.11.4. Macro <code class="function">EXT:WITH-COLLECT</code></a></span></dt><dt><span class="section"><a href="#with-gensyms">30.11.5. Macro <code class="function">EXT:WITH-GENSYMS</code></a></span></dt><dt><span class="section"><a href="#remove-plist">30.11.6. Function <code class="function">EXT:REMOVE-PLIST</code></a></span></dt><dt><span class="section"><a href="#html-http-output">30.11.7. Macros <code class="function">EXT:WITH-HTML-OUTPUT</code> and
  <code class="function">EXT:WITH-HTTP-OUTPUT</code></a></span></dt><dt><span class="section"><a href="#open-http">30.11.8. Function <code class="function">EXT:OPEN-HTTP</code> and
  macro <code class="function">EXT:WITH-HTTP-INPUT</code></a></span></dt><dt><span class="section"><a href="#browse-url">30.11.9. Function <code class="function">EXT:BROWSE-URL</code></a></span></dt><dt><span class="section"><a href="#http-proxy">30.11.10. Variable <code class="varname">CUSTOM:*HTTP-PROXY*</code></a></span></dt></dl></dd><dt><span class="section"><a href="#customize">30.12. Customizing <span><strong class="command">CLISP</strong></span> behavior</a></span></dt><dt><span class="section"><a href="#code-walk">30.13. Code Walker</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ext-platform">31. Platform Specific Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#screen">31.1. Random Screen Access</a></span></dt><dt><span class="section"><a href="#modules">31.2. External Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#mod-overview">31.2.1. Overview</a></span></dt><dt><span class="section"><a href="#modinit">31.2.2. Module initialization</a></span></dt><dt><span class="section"><a href="#modfini">31.2.3. Module finalization</a></span></dt><dt><span class="section"><a href="#modinfo">31.2.4. Function <code class="function">EXT:MODULE-INFO</code></a></span></dt><dt><span class="section"><a href="#mod-dynload">31.2.5. Function <code class="function">SYS::DYNLOAD-MODULES</code></a></span></dt><dt><span class="section"><a href="#mod-set-example">31.2.6. Example</a></span></dt><dt><span class="section"><a href="#module-tools">31.2.7. Module tools</a></span></dt><dt><span class="section"><a href="#mod-ffi-vs-c">31.2.8. Trade-offs: <strong class="package">“<span class="quote">FFI</span>”</strong> vs. <span><strong class="command">C</strong></span>
  modules</a></span></dt><dt><span class="section"><a href="#included-modules">31.2.9. Modules included in the source distribution</a></span></dt></dl></dd><dt><span class="section"><a href="#dffi">31.3. The Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#dffi-intro">31.3.1. Introduction</a></span></dt><dt><span class="section"><a href="#dffi-overview">31.3.2. Overview</a></span></dt><dt><span class="section"><a href="#dffi-types">31.3.3. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#c-flavor">31.3.4. The choice of the <span><strong class="command">C</strong></span> flavor</a></span></dt><dt><span class="section"><a href="#dffi-variables">31.3.5. Foreign variables</a></span></dt><dt><span class="section"><a href="#dffi-places">31.3.6. Operations on foreign places</a></span></dt><dt><span class="section"><a href="#dffi-functions">31.3.7. Foreign functions</a></span></dt><dt><span class="section"><a href="#allocation">31.3.8. Argument and result passing conventions</a></span></dt><dt><span class="section"><a href="#param-mode">31.3.9. Parameter Mode</a></span></dt><dt><span class="section"><a href="#dffi-examples">31.3.10. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#affi">31.4. The Amiga Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#affi-design">31.4.1. Design issues</a></span></dt><dt><span class="section"><a href="#affi-overview">31.4.2. Overview</a></span></dt><dt><span class="section"><a href="#affi-libs">31.4.3. Foreign Libraries</a></span></dt><dt><span class="section"><a href="#affi-types">31.4.4. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#affi-functions">31.4.5. Foreign functions</a></span></dt><dt><span class="section"><a href="#affi-memory-access">31.4.6. Memory access</a></span></dt><dt><span class="section"><a href="#affi-func-def">31.4.7. Function Definition Files</a></span></dt><dt><span class="section"><a href="#affi-hints">31.4.8. Hints</a></span></dt><dt><span class="section"><a href="#affi-caveats">31.4.9. Caveats</a></span></dt><dt><span class="section"><a href="#affi-examples">31.4.10. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#socket">31.5. Socket Streams</a></span></dt><dd><dl><dt><span class="section"><a href="#socket-intro">31.5.1. Introduction</a></span></dt><dt><span class="section"><a href="#socket-api">31.5.2. Socket API Reference</a></span></dt></dl></dd><dt><span class="section"><a href="#quickstart">31.6. Quickstarting delivery with <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#quickstart-summary">31.6.1. Summary</a></span></dt><dt><span class="section"><a href="#quickstart-unix">31.6.2. Scripting with <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#quickstart-desktop">31.6.3. Desktop Environments</a></span></dt><dt><span class="section"><a href="#quickstart-linux">31.6.4. Associating extensions with <span><strong class="command">CLISP</strong></span> via kernel</a></span></dt></dl></dd><dt><span class="section"><a href="#shell">31.7. Shell, Pipes and Printing</a></span></dt><dd><dl><dt><span class="section"><a href="#exec">31.7.1. Shell</a></span></dt><dt><span class="section"><a href="#pipe">31.7.2. Pipes</a></span></dt><dt><span class="section"><a href="#hardcopy">31.7.3. Printing</a></span></dt></dl></dd><dt><span class="section"><a href="#getenv">31.8. Operating System Environment</a></span></dt></dl></dd><dt><span class="chapter"><a href="#ext-modules">32. Extensions Implemented as Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#matlab">32.1. Matlab Interface</a></span></dt><dt><span class="section"><a href="#netica">32.2. Netica Interface</a></span></dt><dt><span class="section"><a href="#dir-key">32.3. Directory Access</a></span></dt><dt><span class="section"><a href="#berkeley-db">32.4. Berkeley DB access</a></span></dt><dd><dl><dt><span class="section"><a href="#bdb-objects">32.4.1. Berkeley-DB Objects</a></span></dt><dt><span class="section"><a href="#bdb-close">32.4.2. Closing handles</a></span></dt><dt><span class="section"><a href="#bdb-db-environment">32.4.3. Database Environment</a></span></dt><dt><span class="section"><a href="#bdb-environment-config">32.4.4. Environment Configuration</a></span></dt><dt><span class="section"><a href="#bdb-operations">32.4.5. Database Operations</a></span></dt><dt><span class="section"><a href="#bdb-db-config">32.4.6. Database Configuration</a></span></dt><dt><span class="section"><a href="#bdb-cursor">32.4.7. Database Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-lock">32.4.8. Lock Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-log">32.4.9. Log Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-mem-pool">32.4.10. Memory Pool Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-replication">32.4.11. Replication</a></span></dt><dt><span class="section"><a href="#bdb-sequences">32.4.12. Sequences</a></span></dt><dt><span class="section"><a href="#bdb-transaction">32.4.13. Transaction Subsystem</a></span></dt></dl></dd><dt><span class="section"><a href="#regexp-mod">32.5. POSIX Regular Expressions</a></span></dt><dd><dl><dt><span class="section"><a href="#regexp-api">32.5.1. Regular Expression API</a></span></dt><dt><span class="section"><a href="#re-example">32.5.2. Example</a></span></dt></dl></dd><dt><span class="section"><a href="#pari">32.6. Computer Algebra System PARI</a></span></dt><dt><span class="section"><a href="#pcre">32.7. Perl Compatible Regular Expressions</a></span></dt><dt><span class="section"><a href="#postgresql">32.8. PostgreSQL Database Access</a></span></dt><dt><span class="section"><a href="#i18n-mod">32.9. Internationalization of User Programs</a></span></dt><dd><dl><dt><span class="section"><a href="#ggettext">32.9.1. The GNU gettext</a></span></dt><dt><span class="section"><a href="#i18n-locale">32.9.2. Locale</a></span></dt></dl></dd><dt><span class="section"><a href="#readline-mod">32.10. Advanced Readline and History Functionality</a></span></dt><dt><span class="section"><a href="#syscalls">32.11. System Calls</a></span></dt><dt><span class="section"><a href="#oracle">32.12. Oracle Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#ora-functionality">32.12.1. Functions and Macros in
  package <strong class="package">“<span class="quote">ORACLE</span>”</strong></a></span></dt><dt><span class="section"><a href="#ora-example">32.12.2. Oracle Example</a></span></dt><dt><span class="section"><a href="#ora-config">32.12.3. Oracle Configuration</a></span></dt><dt><span class="section"><a href="#ora-build">32.12.4. Building the Oracle Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#fastcgi">32.13. The FastCGI Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#fcgi-overview">32.13.1. Overview of FastCGI</a></span></dt><dt><span class="section"><a href="#fcgi-functionality">32.13.2. Functions in Package <strong class="package">“<span class="quote">FASTCGI</span>”</strong></a></span></dt><dt><span class="section"><a href="#fcgi-example">32.13.3. FastCGI Example</a></span></dt><dt><span class="section"><a href="#fcgi-build">32.13.4. Building and configuring the
  FastCGI Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#rawsock">32.14. Raw Socket Access</a></span></dt><dd><dl><dt><span class="section"><a href="#rawsock-intro">32.14.1. Introduction</a></span></dt><dt><span class="section"><a href="#rawsock-func">32.14.2. Single System Call Functions</a></span></dt><dt><span class="section"><a href="#rawsock-args">32.14.3. Common arguments</a></span></dt><dt><span class="section"><a href="#rawsock-return">32.14.4. Return Values</a></span></dt><dt><span class="section"><a href="#rawsock-not-implemented">32.14.5. Not Implemented</a></span></dt><dt><span class="section"><a href="#rawsock-high-level">32.14.6. High-Level Functions</a></span></dt></dl></dd><dt><span class="section"><a href="#wildcard">32.15. The Wildcard Module</a></span></dt><dd><dl><dt><span class="section"><a href="#wildcard-syntax">32.15.1. Wildcard Syntax</a></span></dt></dl></dd><dt><span class="section"><a href="#zlib">32.16. ZLIB Interface</a></span></dt></dl></dd></dl></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ext-standard"></a>Chapter 29. Standard Widely Portable Extensions</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#mop-chap">29.1. Meta-Object Protocol</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-intro">29.1.1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-intro-notation">29.1.1.1. Notation</a></span></dt><dt><span class="section"><a href="#mop-package">29.1.1.2. Package</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-overview">29.1.2. Overview</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-metaobjects">29.1.2.1. Metaobjects</a></span></dt><dt><span class="section"><a href="#mop-mo-cl-inheritance">29.1.2.2. Inheritance Structure of Metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-ui-macro">29.1.2.3. Processing of the User Interface Macros</a></span></dt><dt><span class="section"><a href="#mop-ov-mo-init">29.1.2.4. Metaobject Initialization Protocol</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-classes">29.1.3. Classes</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-cl-defclass">29.1.3.1. Macro <code class="function">DEFCLASS</code></a></span></dt><dt><span class="section"><a href="#mop-cl-Inheritance">29.1.3.2. Inheritance Structure of class metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-cl-readers">29.1.3.3. Introspection: Readers for class metaobjects</a></span></dt><dt><span class="section"><a href="#mop-cl-finalization">29.1.3.4. Class Finalization Protocol</a></span></dt><dt><span class="section"><a href="#mop-cl-init">29.1.3.5. Class Initialization</a></span></dt><dt><span class="section"><a href="#mop-cl-customize">29.1.3.6. Customization</a></span></dt><dt><span class="section"><a href="#mop-cl-dep">29.1.3.7. Updating Dependencies</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-sd">29.1.4. Slot Definitions</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-sd-inheritance">29.1.4.1. Inheritance Structure of slot definition metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-sd-readers">29.1.4.2. Introspection: Readers for slot definition metaobjects</a></span></dt><dt><span class="section"><a href="#mop-sd-init">29.1.4.3. Initialization of slot definition metaobjects</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-gf">29.1.5. Generic Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-gf-inheritance">29.1.5.1. Inheritance Structure of generic function metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-gf-readers">29.1.5.2. Introspection: Readers for generic function metaobjects</a></span></dt><dt><span class="section"><a href="#mop-gf-init">29.1.5.3. Initialization of Generic Functions</a></span></dt><dt><span class="section"><a href="#mop-gf-customize">29.1.5.4. Customization</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-meth">29.1.6. Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-meth-inheritance">29.1.6.1. Inheritance Structure of method metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-meth-mo-readers">29.1.6.2. Introspection: Readers for method metaobjects</a></span></dt><dt><span class="section"><a href="#mop-meth-init">29.1.6.3. Initialization of Methods</a></span></dt><dt><span class="section"><a href="#mop-meth-customize">29.1.6.4. Customization</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-accessors">29.1.7. Accessor Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-acc-readers">29.1.7.1. Introspection</a></span></dt><dt><span class="section"><a href="#mop-acc-customize">29.1.7.2. Customization</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-specializers">29.1.8. Specializers</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-specializers-inheritance">29.1.8.1. Inheritance Structure of Specializer Metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-spec-readers">29.1.8.2. Introspection</a></span></dt><dt><span class="section"><a href="#mop-spec-init">29.1.8.3. Initialization</a></span></dt><dt><span class="section"><a href="#mop-spec-dep">29.1.8.4. Updating Dependencies</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-meth-comb">29.1.9. Method Combinations</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-meth-comb-inheritance">29.1.9.1. Inheritance Structure of method combination metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-meth-comb-customize">29.1.9.2. Customization</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-slot-access">29.1.10. Slot Access</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-sa-instance-stuct">29.1.10.1. Instance Structure Protocol</a></span></dt><dt><span class="section"><a href="#mop-sa-funcallable">29.1.10.2. Funcallable Instances</a></span></dt><dt><span class="section"><a href="#mop-sa-customize">29.1.10.3. Customization</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-dep-maint">29.1.11. Dependent Maintenance</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-dep-maint-protocol">29.1.11.1. Protocol</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-clisp">29.1.12. Deviations from [<abbr class="abbrev">AMOP</abbr>]</a></span></dt></dl></dd><dt><span class="section"><a href="#gray">29.2. Gray streams</a></span></dt><dd><dl><dt><span class="section"><a href="#fill-stream">29.2.1. Class <code class="classname">EXT:FILL-STREAM</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="mop-chap"></a>29.1. Meta-Object Protocol</h2></div><div><h3 class="subtitle">Adapted from chapters 5 and 6 of [<a href="#amop"><abbr class="abbrev">AMOP</abbr></a>]</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-intro">29.1.1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-intro-notation">29.1.1.1. Notation</a></span></dt><dt><span class="section"><a href="#mop-package">29.1.1.2. Package</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-overview">29.1.2. Overview</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-metaobjects">29.1.2.1. Metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-mo-classes">29.1.2.1.1. Classes</a></span></dt><dt><span class="section"><a href="#mop-mo-slot-defs">29.1.2.1.2. Slot Definitions</a></span></dt><dt><span class="section"><a href="#mop-mo-gen-funs">29.1.2.1.3. Generic Functions</a></span></dt><dt><span class="section"><a href="#mop-mo-methods">29.1.2.1.4. Methods</a></span></dt><dt><span class="section"><a href="#mop-mo-spec">29.1.2.1.5. Specializers</a></span></dt><dt><span class="section"><a href="#mop-mo-meth-combs">29.1.2.1.6. Method Combinations</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-mo-cl-inheritance">29.1.2.2. Inheritance Structure of Metaobject Classes</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-ov-impl-and-user-spec">29.1.2.2.1. Implementation and User Specialization</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-ui-macro">29.1.2.3. Processing of the User Interface Macros</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-compile-ui-macro">29.1.2.3.1. Compile-file Processing of the User Interface Macros</a></span></dt><dt><span class="section"><a href="#mop-ov-ui-others">29.1.2.3.2. Compile-file Processing of Specific User Interface Macros</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-ov-mo-init">29.1.2.4. Metaobject Initialization Protocol</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-classes">29.1.3. Classes</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-cl-defclass">29.1.3.1. Macro <code class="function">DEFCLASS</code></a></span></dt><dt><span class="section"><a href="#mop-cl-Inheritance">29.1.3.2. Inheritance Structure of class metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-cl-readers">29.1.3.3. Introspection: Readers for class metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#class-name">29.1.3.3.1. Generic Function <code class="function">CLASS-NAME</code></a></span></dt><dt><span class="section"><a href="#class-direct-superclasses">29.1.3.3.2. Generic Function <code class="function">CLOS:CLASS-DIRECT-SUPERCLASSES</code></a></span></dt><dt><span class="section"><a href="#class-direct-slots">29.1.3.3.3. Generic Function <code class="function">CLOS:CLASS-DIRECT-SLOTS</code></a></span></dt><dt><span class="section"><a href="#class-direct-default-initargs">29.1.3.3.4. Generic Function <code class="function">CLOS:CLASS-DIRECT-DEFAULT-INITARGS</code></a></span></dt><dt><span class="section"><a href="#cpl">29.1.3.3.5. Generic Function <code class="function">CLOS:CLASS-PRECEDENCE-LIST</code></a></span></dt><dt><span class="section"><a href="#class-direct-subclasses">29.1.3.3.6. Generic Function <code class="function">CLOS:CLASS-DIRECT-SUBCLASSES</code></a></span></dt><dt><span class="section"><a href="#class-slots">29.1.3.3.7. Generic Function <code class="function">CLOS:CLASS-SLOTS</code></a></span></dt><dt><span class="section"><a href="#class-default-initargs">29.1.3.3.8. Generic Function <code class="function">CLOS:CLASS-DEFAULT-INITARGS</code></a></span></dt><dt><span class="section"><a href="#class-finalized-p">29.1.3.3.9. Generic Function <code class="function">CLOS:CLASS-FINALIZED-P</code></a></span></dt><dt><span class="section"><a href="#class-prototype">29.1.3.3.10. Generic Function <code class="function">CLOS:CLASS-PROTOTYPE</code></a></span></dt><dt><span class="section"><a href="#mop-cl-readers-methods">29.1.3.3.11. Methods</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-cl-finalization">29.1.3.4. Class Finalization Protocol</a></span></dt><dt><span class="section"><a href="#mop-cl-init">29.1.3.5. Class Initialization</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-cl-init-mo">29.1.3.5.1. Initialization of class metaobjects</a></span></dt><dt><span class="section"><a href="#mop-cl-reinit-mo">29.1.3.5.2. Reinitialization of class metaobjects</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-cl-customize">29.1.3.6. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#setf-class-name">29.1.3.6.1. Generic Function <code class="code">(SETF CLASS-NAME)</code></a></span></dt><dt><span class="section"><a href="#ensure-class">29.1.3.6.2. Generic Function <code class="function">CLOS:ENSURE-CLASS</code></a></span></dt><dt><span class="section"><a href="#ensure-class-UC">29.1.3.6.3. Generic Function <code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#finalize-inheritance">29.1.3.6.4. Generic Function <code class="function">CLOS:FINALIZE-INHERITANCE</code></a></span></dt><dt><span class="section"><a href="#mop-make-instance">29.1.3.6.5. Generic Function <code class="function">MAKE-INSTANCE</code></a></span></dt><dt><span class="section"><a href="#alloc-instance">29.1.3.6.6. Generic Function <code class="function">ALLOCATE-INSTANCE</code></a></span></dt><dt><span class="section"><a href="#validate-superclass">29.1.3.6.7. Generic Function <code class="function">CLOS:VALIDATE-SUPERCLASS</code></a></span></dt><dt><span class="section"><a href="#compute-dsd-initargs">29.1.3.6.8. Generic Function <code class="function">CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS</code></a></span></dt><dt><span class="section"><a href="#dsd-class">29.1.3.6.9. Generic Function <code class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</code></a></span></dt><dt><span class="section"><a href="#compute-cpl">29.1.3.6.10. Generic Function <code class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</code></a></span></dt><dt><span class="section"><a href="#compute-slots">29.1.3.6.11. Generic Function <code class="function">CLOS:COMPUTE-SLOTS</code></a></span></dt><dt><span class="section"><a href="#compute-esd">29.1.3.6.12. Generic Function <code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</code></a></span></dt><dt><span class="section"><a href="#compute-esd-initargs">29.1.3.6.13. Generic Function <code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</code></a></span></dt><dt><span class="section"><a href="#esd-class">29.1.3.6.14. Generic Function <code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a></span></dt><dt><span class="section"><a href="#compute-default-initargs">29.1.3.6.15. Generic Function <code class="function">CLOS:COMPUTE-DEFAULT-INITARGS</code></a></span></dt></dl></dd><dt><span class="section"><a href="#mop-cl-dep">29.1.3.7. Updating Dependencies</a></span></dt><dd><dl><dt><span class="section"><a href="#add-direct-subclass">29.1.3.7.1. Generic Function <code class="function">CLOS:ADD-DIRECT-SUBCLASS</code></a></span></dt><dt><span class="section"><a href="#remove-direct-subclass">29.1.3.7.2. Generic Function <code class="function">CLOS:REMOVE-DIRECT-SUBCLASS</code></a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-sd">29.1.4. Slot Definitions</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-sd-inheritance">29.1.4.1. Inheritance Structure of slot definition metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-sd-readers">29.1.4.2. Introspection: Readers for slot definition metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-sd-readers-GFs">29.1.4.2.1. Generic Functions</a></span></dt><dt><span class="section"><a href="#slotd-mo-readers-methods">29.1.4.2.2. Methods</a></span></dt><dt><span class="section"><a href="#slotd-mo-readers-dsd">29.1.4.2.3. Readers for direct slot definition metaobjects</a></span></dt><dt><span class="section"><a href="#slotd-mo-readers-esd">29.1.4.2.4. Readers for effective slot definition metaobjects</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-sd-init">29.1.4.3. Initialization of slot definition metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#slotdef-mo-methods">29.1.4.3.1. Methods</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-gf">29.1.5. Generic Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-gf-inheritance">29.1.5.1. Inheritance Structure of generic function metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-gf-readers">29.1.5.2. Introspection: Readers for generic function metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#gf-name">29.1.5.2.1. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-NAME</code></a></span></dt><dt><span class="section"><a href="#gf-methods">29.1.5.2.2. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-METHODS</code></a></span></dt><dt><span class="section"><a href="#gf-lambda-list">29.1.5.2.3. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="#gf-argument-precedence-order">29.1.5.2.4. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</code></a></span></dt><dt><span class="section"><a href="#gf-declarations">29.1.5.2.5. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-DECLARATIONS</code></a></span></dt><dt><span class="section"><a href="#gf-method-class">29.1.5.2.6. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</code></a></span></dt><dt><span class="section"><a href="#gf-method-combination">29.1.5.2.7. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-METHOD-COMBINATION</code></a></span></dt><dt><span class="section"><a href="#gf-name-methods">29.1.5.2.8. Methods</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-gf-init">29.1.5.3. Initialization of Generic Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-gf-init-defgeneric">29.1.5.3.1. Macro <code class="function">DEFGENERIC</code></a></span></dt><dt><span class="section"><a href="#mop-gf-invocation">29.1.5.3.2. Generic Function Invocation Protocol</a></span></dt><dt><span class="section"><a href="#mop-gf-init-mo">29.1.5.3.3. Initialization of generic function metaobjects</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-gf-customize">29.1.5.4. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#setf-gf-name">29.1.5.4.1. Generic Function <code class="code">(SETF CLOS:GENERIC-FUNCTION-NAME)</code></a></span></dt><dt><span class="section"><a href="#ensure-gf">29.1.5.4.2. Generic Function <code class="function">ENSURE-GENERIC-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#ensure-gf-UC">29.1.5.4.3. Generic Function <code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#mop-add-method">29.1.5.4.4. Generic Function <code class="function">ADD-METHOD</code></a></span></dt><dt><span class="section"><a href="#mop-remove-method">29.1.5.4.5. Generic Function <code class="function">REMOVE-METHOD</code></a></span></dt><dt><span class="section"><a href="#compute-applicable-methods">29.1.5.4.6. Generic Function <code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a></span></dt><dt><span class="section"><a href="#compute-applicable-methods-UC">29.1.5.4.7. Generic Function <code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a></span></dt><dt><span class="section"><a href="#compute-effective-method">29.1.5.4.8. Generic Function <code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a></span></dt><dt><span class="section"><a href="#compute-effective-method-as-function">29.1.5.4.9. Function <code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#make-method-lambda">29.1.5.4.10. Generic Function <code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a></span></dt><dt><span class="section"><a href="#compute-discriminating-function">29.1.5.4.11. Generic Function <code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-meth">29.1.6. Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-meth-inheritance">29.1.6.1. Inheritance Structure of method metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-meth-mo-readers">29.1.6.2. Introspection: Readers for method metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#method-specializers">29.1.6.2.1. Generic Function <code class="function">CLOS:METHOD-SPECIALIZERS</code></a></span></dt><dt><span class="section"><a href="#method-qualifiers">29.1.6.2.2. Generic Function <code class="function">METHOD-QUALIFIERS</code></a></span></dt><dt><span class="section"><a href="#method-lambda-list">29.1.6.2.3. Generic Function <code class="function">CLOS:METHOD-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="#method-gf">29.1.6.2.4. Generic Function <code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#method-function">29.1.6.2.5. Generic Function <code class="function">CLOS:METHOD-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#mop-meth-mo-readers-methods">29.1.6.2.6. Methods</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-meth-init">29.1.6.3. Initialization of Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-meth-init-defmethod">29.1.6.3.1. Macro <code class="function">DEFMETHOD</code></a></span></dt><dt><span class="section"><a href="#mop-meth-init-mo">29.1.6.3.2. Initialization of method metaobjects</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-meth-customize">29.1.6.4. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#extract-lambda-list">29.1.6.4.1. Function <code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="#extract-specializer-names">29.1.6.4.2. Function <code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-accessors">29.1.7. Accessor Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-acc-readers">29.1.7.1. Introspection</a></span></dt><dd><dl><dt><span class="section"><a href="#accessor-method-slotdef">29.1.7.1.1. Generic Function <code class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</code></a></span></dt></dl></dd><dt><span class="section"><a href="#mop-acc-customize">29.1.7.2. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#reader-method-class">29.1.7.2.1. Generic Function <code class="function">CLOS:READER-METHOD-CLASS</code></a></span></dt><dt><span class="section"><a href="#writer-method-class">29.1.7.2.2. Generic Function <code class="function">CLOS:WRITER-METHOD-CLASS</code></a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-specializers">29.1.8. Specializers</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-specializers-inheritance">29.1.8.1. Inheritance Structure of Specializer Metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-spec-readers">29.1.8.2. Introspection</a></span></dt><dd><dl><dt><span class="section"><a href="#eql-specializer-object">29.1.8.2.1. Function <code class="function">CLOS:EQL-SPECIALIZER-OBJECT</code></a></span></dt></dl></dd><dt><span class="section"><a href="#mop-spec-init">29.1.8.3. Initialization</a></span></dt><dd><dl><dt><span class="section"><a href="#intern-eql-specializer">29.1.8.3.1. Function <code class="function">CLOS:INTERN-EQL-SPECIALIZER</code></a></span></dt></dl></dd><dt><span class="section"><a href="#mop-spec-dep">29.1.8.4. Updating Dependencies</a></span></dt><dd><dl><dt><span class="section"><a href="#specializer-direct-methods">29.1.8.4.1. Generic Function <code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a></span></dt><dt><span class="section"><a href="#specializer-direct-gfs">29.1.8.4.2. Generic Function <code class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</code></a></span></dt><dt><span class="section"><a href="#add-direct-method">29.1.8.4.3. Generic Function <code class="function">CLOS:ADD-DIRECT-METHOD</code></a></span></dt><dt><span class="section"><a href="#remove-direct-method">29.1.8.4.4. Generic Function <code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-meth-comb">29.1.9. Method Combinations</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-meth-comb-inheritance">29.1.9.1. Inheritance Structure of method combination metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-meth-comb-customize">29.1.9.2. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#find-method-combination">29.1.9.2.1. Generic Function <code class="function">CLOS:FIND-METHOD-COMBINATION</code></a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-slot-access">29.1.10. Slot Access</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-sa-instance-stuct">29.1.10.1. Instance Structure Protocol</a></span></dt><dt><span class="section"><a href="#mop-sa-funcallable">29.1.10.2. Funcallable Instances</a></span></dt><dt><span class="section"><a href="#mop-sa-customize">29.1.10.3. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#standard-instance-access">29.1.10.3.1. Function <code class="function">CLOS:STANDARD-INSTANCE-ACCESS</code></a></span></dt><dt><span class="section"><a href="#funcallable-standard-instance-access">29.1.10.3.2. Function <code class="function">CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS</code></a></span></dt><dt><span class="section"><a href="#set-fif">29.1.10.3.3. Function <code class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#slot-value-UC">29.1.10.3.4. Generic Function <code class="function">CLOS:SLOT-VALUE-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#setf-slot-value-UC">29.1.10.3.5. Generic Function <code class="code">(SETF CLOS:SLOT-VALUE-USING-CLASS)</code></a></span></dt><dt><span class="section"><a href="#slot-boundp-UC">29.1.10.3.6. Generic Function <code class="function">CLOS:SLOT-BOUNDP-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#slot-makunbound-UC">29.1.10.3.7. Generic Function <code class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</code></a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-dep-maint">29.1.11. Dependent Maintenance</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-dep-maint-protocol">29.1.11.1. Protocol</a></span></dt><dd><dl><dt><span class="section"><a href="#update-dependent">29.1.11.1.1. Generic Function <code class="function">CLOS:UPDATE-DEPENDENT</code></a></span></dt><dt><span class="section"><a href="#add-dependent">29.1.11.1.2. Generic Function <code class="function">CLOS:ADD-DEPENDENT</code></a></span></dt><dt><span class="section"><a href="#remove-dependent">29.1.11.1.3. Generic Function <code class="function">CLOS:REMOVE-DEPENDENT</code></a></span></dt><dt><span class="section"><a href="#map-dependents">29.1.11.1.4. Generic Function <code class="function">CLOS:MAP-DEPENDENTS</code></a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-clisp">29.1.12. Deviations from [<abbr class="abbrev">AMOP</abbr>]</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-intro"></a>29.1.1. Introduction</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-intro-notation">29.1.1.1. Notation</a></span></dt><dt><span class="section"><a href="#mop-package">29.1.1.2. Package</a></span></dt></dl></div><p>The <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> specification ([<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] Chanpter 7) describes the
standard Programmer Interface for the <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> Object System (<a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>).  This
document extends that specification by defining a metaobject protocol
for <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> - that is, a description of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> itself as an extensible
<a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> program.  In this description, the fundamental elements of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>
programs (classes, slot definitions, generic functions, methods,
specializers and method combinations) are represented by first-class
objects.  The behavior of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> is provided by these objects, or, more
precisely, by methods specialized to the classes of these objects.
</p><p>Because these objects represent pieces of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> programs, and
because their behavior provides the behavior of the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> language
itself, they are considered meta-level objects or metaobjects.  The
protocol followed by the metaobjects to provide the behavior of <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>
is called the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> “<span class="quote">Metaobject Protocol</span>” (MOP).</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-intro-notation"></a>29.1.1.1. Notation</h4></div></div></div><p>The description of functions follows the same form as used in the
<a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> specification.  The description of generic functions is similar
to that in the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> specification, but some minor changes have been
made in the way methods are presented.</p><p>The following is an example of the format for the syntax
description of a generic function:
</p><pre class="programlisting">
(<code class="function">gf1</code> <em class="replaceable"><code>x</code></em> <em class="replaceable"><code>y</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>v</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <em class="replaceable"><code>k</code></em>)
</pre><p>This description indicates that <code class="function">gf1</code> is a
generic function with two required parameters, <em class="replaceable"><code>x</code></em> and <em class="replaceable"><code>y</code></em>, an
optional parameter <em class="replaceable"><code>v</code></em> and a keyword parameter <em class="replaceable"><code>k</code></em>.</p><p>The description of a generic function includes a description of
its behavior.  This provides the general behavior, or protocol of the
generic function.  All methods defined on the generic function, both
portable and specified, must have behavior consistent with this
description.</p><p>Every generic function described here is an instance of the class
<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a> and uses the <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-2.html" target="_top"><code class="function">STANDARD</code></a> method
combination.</p><p>The description of a generic function also includes descriptions
of the specified methods for that generic function.  In the description
of these methods, a <strong class="first"><em class="firstterm">method signature</em></strong> is used to
describe the parameters and parameter specializers of each method. The
following is an example of the format for a method signature:
</p><pre class="programlisting">
<span class="method"><code class="literal">(<code class="function">gf1</code> (<em class="replaceable"><code>x</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>) <em class="replaceable"><code>y</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>v</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <em class="replaceable"><code>k</code></em>)</code></span>
</pre><p>This signature indicates that this primary method on the generic
function <code class="function">gf1</code> has two required parameters, named
<em class="replaceable"><code>x</code></em> and <em class="replaceable"><code>y</code></em>.  In addition, there is an optional parameter <em class="replaceable"><code>v</code></em> and
a keyword parameter <em class="replaceable"><code>k</code></em>.  This signature also indicates that the
method's parameter specializers are the classes <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>.
</p><p>The description of each method includes a description of the
behavior particular to that method.</p><p>An abbreviated syntax is used when referring to a method defined
elsewhere in the document.  This abbreviated syntax includes the name of
the generic function, the qualifiers, and the parameter specializers.  A
reference to the method with the signature shown above is written as:
<span class="method"><code class="literal"><code class="function">gf1</code> (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span>.
</p></div>
<!--mop-intro-notation-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-package"></a>29.1.1.2. Package</h4></div></div></div><p>The package exporting the <a href="#mop-chap" title="29.1.&#xA0;Meta-Object Protocol">Meta-Object Protocol</a> symbols is unspecified.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The symbols specified by the <a href="#mop-chap" title="29.1.&#xA0;Meta-Object Protocol">Meta-Object Protocol</a> are
  exported from the package <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a> and <a href="#re-export" title="11.5.3.&#xA0;Function EXT:RE-EXPORT"><code class="function">EXT:RE-EXPORT</code></a>ed from the package
  <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a>.</p></div><p>The package exporting the <a href="#mop-chap" title="29.1.&#xA0;Meta-Object Protocol">Meta-Object Protocol</a> symbols is different in other
implementations: In <a href="http://sbcl.sourceforge.net/" target="_top"><span><strong class="command">SBCL</strong></span></a> it is the package
 <strong class="package">“<span class="quote">SB-MOP</span>”</strong>;
in <a href="http://openmcl.clozure.com/" target="_top"><span><strong class="command">OpenMCL</strong></span></a> it is the package
 <strong class="package">“<span class="quote">OPENMCL-MOP</span>”</strong>.</p></div>
<!--mop-package-->
</div>
<!--mop-intro-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-overview"></a>29.1.2. Overview</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-metaobjects">29.1.2.1. Metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-mo-classes">29.1.2.1.1. Classes</a></span></dt><dt><span class="section"><a href="#mop-mo-slot-defs">29.1.2.1.2. Slot Definitions</a></span></dt><dt><span class="section"><a href="#mop-mo-gen-funs">29.1.2.1.3. Generic Functions</a></span></dt><dt><span class="section"><a href="#mop-mo-methods">29.1.2.1.4. Methods</a></span></dt><dt><span class="section"><a href="#mop-mo-spec">29.1.2.1.5. Specializers</a></span></dt><dt><span class="section"><a href="#mop-mo-meth-combs">29.1.2.1.6. Method Combinations</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-mo-cl-inheritance">29.1.2.2. Inheritance Structure of Metaobject Classes</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-ov-impl-and-user-spec">29.1.2.2.1. Implementation and User Specialization</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-portable-restrictions">29.1.2.2.1.1. Restrictions on Portable Programs</a></span></dt><dt><span class="section"><a href="#mop-impl-restrictions">29.1.2.2.1.2. Restrictions on Implementations</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-ui-macro">29.1.2.3. Processing of the User Interface Macros</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-compile-ui-macro">29.1.2.3.1. Compile-file Processing of the User Interface Macros</a></span></dt><dt><span class="section"><a href="#mop-ov-ui-others">29.1.2.3.2. Compile-file Processing of Specific User Interface Macros</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-ov-mo-init">29.1.2.4. Metaobject Initialization Protocol</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-metaobjects"></a>29.1.2.1. Metaobjects</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-mo-classes">29.1.2.1.1. Classes</a></span></dt><dt><span class="section"><a href="#mop-mo-slot-defs">29.1.2.1.2. Slot Definitions</a></span></dt><dt><span class="section"><a href="#mop-mo-gen-funs">29.1.2.1.3. Generic Functions</a></span></dt><dt><span class="section"><a href="#mop-mo-methods">29.1.2.1.4. Methods</a></span></dt><dt><span class="section"><a href="#mop-mo-spec">29.1.2.1.5. Specializers</a></span></dt><dt><span class="section"><a href="#mop-mo-meth-combs">29.1.2.1.6. Method Combinations</a></span></dt></dl></div><p>For each kind of program element there is a corresponding
 <strong class="first"><em class="firstterm">basic metaobject class
  <a id="mop-ba-mo-cl" class="indexterm"></a></em></strong>.
These are the classes: <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>, <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><code class="classname">CLOS:SLOT-DEFINITION</code></a>,
<a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html" target="_top"><code class="classname">METHOD-COMBINATION</code></a>.
A <strong class="first"><em class="firstterm">metaobject class<a id="mo-cl" class="indexterm"></a></em></strong>
is a subclass of exactly one of these classes.
The results are undefined if an attempt is made to define a <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>
that is a subclass of more than one basic metaobject class.
A <strong class="first"><em class="firstterm">metaobject<a id="mop-mo" class="indexterm"></a></em></strong>
is an instance of a metaobject class.</p><p>Each metaobject represents one program element.  Associated with
each metaobject is the information required to serve its role.  This
includes information that might be provided directly in a user interface
macro such as <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>.  It also includes information
computed indirectly from other metaobjects such as that computed from
class inheritance or the full set of methods associated with a generic
function.</p><p>Much of the information associated with a metaobject is in the
form of connections to other metaobjects.  This interconnection means
that the role of a metaobject is always based on that of other
metaobjects.  As an introduction to this interconnected structure, this
section presents a partial enumeration of the kinds of information
associated with each kind of metaobject.  More detailed information is
presented later.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-classes"></a>29.1.2.1.1. Classes</h5></div></div></div><p>A <strong class="first"><em class="firstterm">class metaobject
  <a id="mop-class-mo" class="indexterm"></a></em></strong>
determines the structure and the default behavior of its instances.
The following information is associated with <a href="#mop-class-mo">class metaobject</a>s:

</p><div class="itemizedlist"><ul type="disc"><li>The name, if there is one, is available as an object.
</li><li>The direct subclasses, direct superclasses and class
  precedence list are available as lists of <a href="#mop-class-mo">class metaobject</a>s.</li><li>The slots defined directly in the class are available
  as a list of <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s.  The slots which are accessible in instances of
  the class are available as a list of <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s.</li><li>The methods which use the class as a specializer, and
  the generic functions associated with those methods are available as
  lists of method and <a href="#mop-gen-fun-mo">generic function metaobject</a>s respectively.</li><li>The documentation is available as a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li></ul></div><p>See also <a href="#mop-classes" title="29.1.3.&#xA0;Classes">Section 29.1.3, “Classes”</a></p></div>
<!--mop-mo-classes-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-slot-defs"></a>29.1.2.1.2. Slot Definitions</h5></div></div></div><p>A <strong class="first"><em class="firstterm">slot definition metaobject
  <a id="mop-slot-def-mo" class="indexterm"></a></em></strong>
 contains information about the definition of a slot.
There are two kinds of <a href="#mop-slot-def-mo">slot definition metaobject</a>s:
A <strong class="first"><em class="firstterm">direct<a id="mop-dsd-mo" class="indexterm"></a></em></strong>
 <a href="#mop-slot-def-mo">slot definition metaobject</a> is used to represent the direct definition of a slot in a class.
This corresponds roughly to the slot specifiers found in <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> forms.
An <strong class="first"><em class="firstterm">effective<a id="mop-esd-mo" class="indexterm"></a></em></strong>
 <a href="#mop-slot-def-mo">slot definition metaobject</a> is used to represent information, including inherited
 information, about a slot which is accessible in instances of a
 particular class.</p><p>Associated with each <a href="#mop-class-mo">class metaobject</a> is a list of <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s representing the
slots defined directly in the class.  Also associated with each <a href="#mop-class-mo">class metaobject</a>
is a list of <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s representing the set of slots accessible in
instances of that class.</p><p>The following information is associated with both direct and
effective slot definitions metaobjects:
</p><div class="itemizedlist"><ul type="disc"><li>The name, allocation, and type are available as forms
  that could appear in a <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form.</li><li>The initialization form, if there is one, is
  available as a form that could appear in a <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form.  The
  initialization form together with its <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> is available
  as a function of no arguments which, when called, returns the result
  of evaluating the initialization form in its <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>. This
  is called the <strong class="first"><em class="firstterm">initfunction</em></strong> of the slot.
</li><li>The slot filling initialization arguments are
  available as a list of symbols.</li><li>The documentation is available as a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li></ul></div><p>Certain other information is only associated with <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s.
 This information applies only to the direct definition of the slot in
 the class (it is not inherited).
</p><div class="itemizedlist"><ul type="disc"><li>The function names of those generic
  functions for which there are automatically generated reader and
  writer methods.  This information is available as lists of function
  names.  Any accessors specified in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form are broken down
  into their equivalent readers and writers in the direct slot
  definition.</li></ul></div><p>Information, including inherited information, which applies to the
definition of a slot in a particular class in which it is accessible is
associated only with <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s.
</p><div class="itemizedlist"><ul type="disc"><li>For certain slots, the location of the
slot in instances of the class is available.
</li></ul></div><p>See also <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions">Section 29.1.4, “Slot Definitions”</a></p></div>
<!--mop-mo-slot-defs-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-gen-funs"></a>29.1.2.1.3. Generic Functions</h5></div></div></div><p>A <strong class="first"><em class="firstterm">generic function metaobject
  <a id="mop-gen-fun-mo" class="indexterm"></a></em></strong>
 contains information about a generic function over and above the
 information associated with each of the generic function's methods.
</p><div class="itemizedlist"><ul type="disc"><li>The name is available as a function name.
</li><li>The methods associated with the generic function are
  available as a list of <a href="#mop-method-mo">method metaobject</a>s.</li><li>The default class for this generic function's <a href="#mop-method-mo">method metaobject</a>s
  is available as a <a href="#mop-class-mo">class metaobject</a>.</li><li>The <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> is available as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>.
</li><li>The method combination is available as a <a href="#mop-meth-comp-mo">method combination metaobject</a>.
</li><li>The argument precedence order is available as a
  permutation of those symbols from the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> which name the
  required arguments of the generic function.</li><li><p>The “<span class="quote">declarations</span>” are available as a
 list of <a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a>s.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>There is a slight misnomer in the naming of functions and
 options in this document: Where the term “<span class="quote">declaration</span>” is
 used, actually a <a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a> is meant.
</p></div></li><li>The documentation is available as a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li></ul></div><p>See also <a href="#mop-gf" title="29.1.5.&#xA0;Generic Functions">Section 29.1.5, “Generic Functions”</a></p></div>
<!--mop-mo-gen-funs-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-methods"></a>29.1.2.1.4. Methods</h5></div></div></div><p>A <strong class="first"><em class="firstterm">method metaobject
  <a id="mop-method-mo" class="indexterm"></a></em></strong> contains information about a specific <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>.
</p><div class="itemizedlist"><ul type="disc"><li>The qualifiers are available as a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of of non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> atoms.</li><li>The <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> is available as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>.
</li><li>The specializers are available as a list of
  specializer metaobjects.</li><li>The function is available as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a>.  This
  function can be applied to arguments and a list of next methods using
  <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a>.</li><li>When the method is associated with a generic
  function, that <a href="#mop-gen-fun-mo">generic function metaobject</a> is available.  A method can be associated with
  at most one generic function at a time.</li><li>The documentation is available as a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li></ul></div><p>See also <a href="#mop-meth" title="29.1.6.&#xA0;Methods">Section 29.1.6, “Methods”</a></p></div>
<!--mop-mo-methods-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-spec"></a>29.1.2.1.5. Specializers</h5></div></div></div><p>A <strong class="first"><em class="firstterm">specializer metaobject
  <a id="spec-mo" class="indexterm"></a></em></strong> represents the specializers of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>.
 <a href="#mop-class-mo">class metaobject</a>s are themselves specializer metaobjects.  A special
 kind of specializer metaobject is used for <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializers.</p><p>See also <a href="#mop-specializers" title="29.1.8.&#xA0;Specializers">Section 29.1.8, “Specializers”</a></p></div>
<!--mop-mo-spec-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-mo-meth-combs"></a>29.1.2.1.6. Method Combinations</h5></div></div></div><p>A <strong class="first"><em class="firstterm">method combination metaobject
  <a id="mop-meth-comp-mo" class="indexterm"></a></em></strong>
 represents the information about the method combination being used by a
 generic function.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This document does not specify the structure of <a href="#mop-meth-comp-mo">method combination metaobject</a>s.
</p></div><p>See also <a href="#mop-meth-comb" title="29.1.9.&#xA0;Method Combinations">Section 29.1.9, “Method Combinations”</a></p></div>
<!--mop-mo-meth-combs-->
</div>
<!--mop-metaobjects-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-mo-cl-inheritance"></a>29.1.2.2. Inheritance Structure of Metaobject Classes</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-ov-impl-and-user-spec">29.1.2.2.1. Implementation and User Specialization</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-portable-restrictions">29.1.2.2.1.1. Restrictions on Portable Programs</a></span></dt><dt><span class="section"><a href="#mop-impl-restrictions">29.1.2.2.1.2. Restrictions on Implementations</a></span></dt></dl></dd></dl></div><div class="figure"><a id="mop-mo-cl-inheritance-fig"></a><p class="title"><b>Figure 29.1. Inheritance structure of metaobject classes</b></p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="mop-classes-all.png" width="100%" alt="Inheritance structure of metaobject classes" /></td></tr></table></div></div><p>The inheritance structure of the specified metaobject classes is
 shown in <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes">Table 29.1, “Direct Superclass Relationships
  Among The Specified Metaobject Classes”</a>. The class of every class
 shown is <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> except for the classes <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a>,
 which are instances of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a>, and the classes
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>, which are
 instances of the class <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>.
</p><div class="table"><a id="mop-inherit-struct"></a><p class="title"><b>Table 29.1. Direct Superclass Relationships
  Among The Specified Metaobject Classes</b></p><table summary="Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="center">Metaobject Class</th><th align="center">Abstract</th><th align="center">Subclassable</th><th align="center">Direct Superclasses</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</td></tr><tr><td align="center"><a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-OBJECT</code></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a>)</td></tr><tr><td align="center"><a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><code class="classname">CLOS:METAOBJECT</code></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><code class="classname">CLOS:METAOBJECT</code></a> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-OBJECT</code></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><code class="classname">CLOS:METAOBJECT</code></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>)</td></tr><tr><td align="center"><a href="#mop-meth-init-mo" title="29.1.6.3.2.&#xA0;Initialization of method metaobjects"><code class="classname">CLOS:STANDARD-ACCESSOR-METHOD</code></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-READER-METHOD</code></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="#mop-meth-init-mo" title="29.1.6.3.2.&#xA0;Initialization of method metaobjects"><code class="classname">CLOS:STANDARD-ACCESSOR-METHOD</code></a>)</td></tr><tr><td align="center"><a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><code class="classname">CLOS:STANDARD-WRITER-METHOD</code></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="#mop-meth-init-mo" title="29.1.6.3.2.&#xA0;Initialization of method metaobjects"><code class="classname">CLOS:STANDARD-ACCESSOR-METHOD</code></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html" target="_top"><code class="classname">METHOD-COMBINATION</code></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><code class="classname">CLOS:METAOBJECT</code></a>)</td></tr><tr><td align="center"><a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><code class="classname">CLOS:SLOT-DEFINITION</code></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><code class="classname">CLOS:METAOBJECT</code></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:DIRECT-SLOT-DEFINITION</code></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><code class="classname">CLOS:SLOT-DEFINITION</code></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:EFFECTIVE-SLOT-DEFINITION</code></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><code class="classname">CLOS:SLOT-DEFINITION</code></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-SLOT-DEFINITION</code></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><code class="classname">CLOS:SLOT-DEFINITION</code></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</code></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-SLOT-DEFINITION</code></a> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:DIRECT-SLOT-DEFINITION</code></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-SLOT-DEFINITION</code></a> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:EFFECTIVE-SLOT-DEFINITION</code></a>)</td></tr><tr><td align="center"><a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><code class="classname">CLOS:SPECIALIZER</code></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><code class="classname">CLOS:METAOBJECT</code></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:EQL-SPECIALIZER</code></a></td><td align="center">no</td><td align="center">no</td><td align="center">(<a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><code class="classname">CLOS:SPECIALIZER</code></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a></td><td align="center">yes</td><td align="center">no</td><td align="center">(<a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><code class="classname">CLOS:SPECIALIZER</code></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a></td><td align="center">no</td><td align="center">no</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</td></tr><tr><td align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a></td><td align="center">no</td><td align="center">no</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</td></tr><tr><td align="center"><a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a></td><td align="center">no</td><td align="center">yes</td><td align="center">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</td></tr></tbody></table></div><p>
</p><p>Each class with a “<span class="quote">yes</span>” in the “<span class="quote">Abstract</span>”
column is an <span class="emphasis"><em>abstract class</em></span> and is not intended to
be instantiated.  The results are undefined if an attempt is made to
make an instance of one of these classes with <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.</p><p>Each class with a “<span class="quote">yes</span>” in
the “<span class="quote">Subclassable</span>” column can be used as direct superclass
for portable programs.  It is not meaningful to subclass a class that
has a “<span class="quote">no</span>” in this column.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a> is also subclassable: It
  is possible to create subclasses of <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a> that do not inherit
  from <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span> and some
  other implementations</h3><p>The class <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-OBJECT</code></a>'s class
  precedence list contains <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> before <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a>, not
  after <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a>.
  This is the most transparent way to realize the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirement
  (see the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section <a href="http://www.lisp.org/HyperSpec/Body/sec_4-2-2.html" target="_top">4.2.2
   “<span class="quote">Type Relationships</span>”</a>)
  that <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>'s class precedence list contains
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> before <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a>.</p></div><p>The classes <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>, <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</code></a>, <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>, <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-READER-METHOD</code></a>,
 <a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><code class="classname">CLOS:STANDARD-WRITER-METHOD</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a> are called
 <strong class="first"><em class="firstterm">standard metaobject
  <a id="std-mo" class="indexterm"></a></em></strong> classes.
 For each kind of metaobject, this is the class the user interface
 macros presented in the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> use by default.  These are also the
 classes on which user specializations are normally based.</p><p>The classes <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a>, <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> and
 <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> are special-purpose <a href="#mop-class-mo">class metaobject</a> classes.
 Built-in classes are instances of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a>.
 The class <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> provides a special kind of
 instances described in <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances">Section 29.1.10.2, “Funcallable Instances”</a>.
 When the definition of a class references another class which has not
 yet been defined, an instance of <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> is used as
 a stand-in until the class is actually defined.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="forward-referenced-class-clisp"></a>Implementation of class <code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code> in <span><strong class="command">CLISP</strong></span></h3><p>The class <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> is implemented in a way
  that fixes several flaws in the [<a href="#amop"><abbr class="abbrev">AMOP</abbr></a>] specification.</p><p>It is not a subclass of <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> and <a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><code class="classname">CLOS:SPECIALIZER</code></a>, just a
  subclass of <a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><code class="classname">CLOS:METAOBJECT</code></a>, because forward references to classes are
  not classes and cannot be used as specializers of methods.  An [<a href="#amop"><abbr class="abbrev">AMOP</abbr></a>]
  compatibility mode is provided, however, if you set the variable
  <strong class="first"><em class="firstterm"><code class="varname">CUSTOM:*FORWARD-REFERENCED-CLASS-MISDESIGN*</code>
   <a id="frc-bad" class="indexterm"></a></em></strong> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.
  In this mode, <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> is formally a subclass of
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> and <a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><code class="classname">CLOS:SPECIALIZER</code></a>, but the behaviour of
  <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> instances is the same.</p><p>The [<a href="#amop"><abbr class="abbrev">AMOP</abbr></a>] says that the first argument of <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a> can
  be a <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a>.
  But from the description of <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>, it is clear that it can
  only be a class returned by <a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><code class="function">FIND-CLASS</code></a>, and [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] <a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><code class="function">FIND-CLASS</code></a>
  cannot return a <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a>.</p><p>The [<a href="#amop"><abbr class="abbrev">AMOP</abbr></a>] says that <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a> creates a
  <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> for not-yet-defined class symbols among the
  direct-superclasses list.  But this leads to many
  <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> with the same name (since they cannot be
  stored and retrieved through <a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><code class="function">FIND-CLASS</code></a>), and since <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><code class="function">CHANGE-CLASS</code></a>
  preserves the <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>-ness, after the class is defined, we have many
  class objects with the same name.</p><p>In the direct-superclasses list of non-finalized classes,
  <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> instances can occur, denoting classes that
  have not yet been defined. When or after such a class gets defined,
  the <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> instance is replaced with the real
  class.  <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses simple object replacement, not <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><code class="function">CHANGE-CLASS</code></a>, in
  this process.</p></div><p>The class <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a> is the <span class="emphasis"><em>default direct
superclass</em></span> of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>.  When an instance
of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> is created, and no direct superclasses are
explicitly specified, it defaults to the class <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a>.  In
this way, any behavior associated with the class <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a>
will be inherited, directly or indirectly, by all instances of the class
<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>.  A subclass of <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> may have a different
class as its default direct superclass, but that class must be a
subclass of the class <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a>.</p><p>The same is true for <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> and
<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-OBJECT</code></a>.</p><p>The class <a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><code class="classname">CLOS:SPECIALIZER</code></a> captures only the most basic behavior of
method specializers, and is not itself intended to be instantiated.  The
class <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> is a direct subclass of <a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><code class="classname">CLOS:SPECIALIZER</code></a> reflecting the
property that classes by themselves can be used as method specializers.
The class <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:EQL-SPECIALIZER</code></a> is used for <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializers.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-ov-impl-and-user-spec"></a>29.1.2.2.1. Implementation and User Specialization</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-portable-restrictions">29.1.2.2.1.1. Restrictions on Portable Programs</a></span></dt><dt><span class="section"><a href="#mop-impl-restrictions">29.1.2.2.1.2. Restrictions on Implementations</a></span></dt></dl></div><p>The purpose of the Metaobject Protocol is to provide users with a
powerful mechanism for extending and customizing the basic behavior of
the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>.  As an object-oriented description of the basic <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>
behavior, the Metaobject Protocol makes it possible to create these
extensions by defining specialized subclasses of existing metaobject
classes.</p><p>The Metaobject Protocol provides this capability without
interfering with the implementor's ability to develop high-performance
implementations.  This balance between user extensibility and
implementor freedom is mediated by placing explicit restrictions on
each.  Some of these restrictions are general---they apply to the entire
class graph and the applicability of all methods.  These are presented
in this section.</p><p>The following additional terminology is used to present these
restrictions:</p><div class="itemizedlist"><ul type="disc"><li>Metaobjects are divided into three categories.  Those
  defined in this document are called <strong class="first"><em class="firstterm">specified</em></strong>;
  those defined by an implementation but not mentioned in this document
  are called <strong class="first"><em class="firstterm">implementation-specific</em></strong>; and those
  defined by a portable program are called <strong class="first"><em class="firstterm">portable</em></strong>.
</li><li>A class <em class="replaceable"><code>i</code></em> is <strong class="first"><em class="firstterm">interposed</em></strong>
  between two other classes <em class="replaceable"><code>k<sub>1</sub></code></em> and <em class="replaceable"><code>k<sub>2</sub></code></em> if and only if there is
  some path, following direct superclasses, from the class <em class="replaceable"><code>k<sub>1</sub></code></em> to the
  class <em class="replaceable"><code>k<sub>2</sub></code></em> which includes <em class="replaceable"><code>i</code></em>.</li><li>A method is <strong class="first"><em class="firstterm">specialized</em></strong> to a
  class if and only if that class is in the list of specializers
  associated with the method; and the method is in the list of methods
  associated with some generic function.</li><li>In a given implementation, a specified method is said
  to have been <strong class="first"><em class="firstterm">promoted</em></strong> if and only if the
  specializers of the method, <em class="replaceable"><code>x<sub>1</sub></code></em> ... <em class="replaceable"><code>x<sub>n</sub></code></em>, are defined in this
  specification as the classes <em class="replaceable"><code>k<sub>1</sub></code></em> ... <em class="replaceable"><code>k<sub>n</sub></code></em>, but in the
  implementation, one or more of the specializers
  <em class="replaceable"><code>x<sub>l</sub></code></em>, is a superclass of the class
  given in the specification <em class="replaceable"><code>k<sub>l</sub></code></em>.
</li><li><p>For a given generic function and set of arguments, a
  method <em class="replaceable"><code>k<sub>2</sub></code></em> <strong class="first"><em class="firstterm">extends</em></strong> a method <em class="replaceable"><code>k<sub>1</sub></code></em> if and
  only if:
  </p><div class="orderedlist"><ol type="i"><li><em class="replaceable"><code>k<sub>1</sub></code></em> and
     <em class="replaceable"><code>k<sub>2</sub></code></em> are both associated with the given generic function
     </li><li><em class="replaceable"><code>k<sub>1</sub></code></em> and <em class="replaceable"><code>k<sub>2</sub></code></em> are both applicable to the given
     arguments,</li><li>the specializers and qualifiers of the methods are
     such that when the generic function is called, <em class="replaceable"><code>k<sub>2</sub></code></em> is executed
     before <em class="replaceable"><code>k<sub>1</sub></code></em>,</li><li><em class="replaceable"><code>k<sub>1</sub></code></em> will be executed if and only if
   <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a> is invoked from within the body of <em class="replaceable"><code>k<sub>2</sub></code></em> and
   </li><li><a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a> is invoked from within the body
     of <em class="replaceable"><code>k<sub>2</sub></code></em>, thereby causing <em class="replaceable"><code>k<sub>1</sub></code></em> to be executed.
  </li></ol></div></li><li><p>For a given generic function and set of arguments, a
  method <em class="replaceable"><code>k<sub>2</sub></code></em> <strong class="first"><em class="firstterm">overrides</em></strong> a method <em class="replaceable"><code>k<sub>1</sub></code></em> if and
  only if conditions <span class="emphasis"><em>i</em></span>
  through <span class="emphasis"><em>iv</em></span> above hold and,
  instead of <span class="emphasis"><em>v</em></span>,
  </p><div class="orderedlist"><ol start="6" type="i"><li><a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a> is not invoked from within the
     body of <em class="replaceable"><code>k<sub>2</sub></code></em>, thereby preventing <em class="replaceable"><code>k<sub>1</sub></code></em> from being executed.
</li></ol></div></li></ul></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-portable-restrictions"></a>29.1.2.2.1.1. Restrictions on Portable Programs</h6></div></div></div><p>Portable programs are allowed to define subclasses of specified
classes, and are permitted to define methods on specified generic
functions, with the following restrictions: </p><div class="itemizedlist"><ul type="disc"><li>Portable programs must not redefine any specified
classes, generic functions, methods or method combinations.  Any method
defined by a portable program on a specified generic function must have
at least one specializer that is neither a specified class nor an
<a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializer whose associated value is an instance of a specified
class.</li><li>Portable programs may define methods that extend
specified methods unless the description of the specified method
explicitly prohibits this.  Unless there is a specific statement to the
contrary, these extending methods must return whatever value was
returned by the call to <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a>.</li><li><p>Portable programs may define methods that override
specified methods only when the description of the specified method
explicitly allows this.  Typically, when a method is allowed to be
overridden, a small number of related methods will need to be overridden
as well.</p><p>An example of this is the specified methods on the generic
functions <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a>, <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a> and <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a>.
Overriding a specified method on one of these generic functions requires
that the corresponding method on the other two generic functions be
overridden as well.</p></li><li><p>Portable methods on specified generic functions
specialized to portable metaobject classes must be defined before any
instances of those classes (or any subclasses) are created, either
directly or indirectly by a call to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.  Methods can be
defined after instances are created by <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><code class="function">ALLOCATE-INSTANCE</code></a> however.
Portable metaobject classes cannot be redefined.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The purpose of this last restriction is to permit
implementations to provide performance optimizations by analyzing, at
the time the first instance of a metaobject class is initialized, what
portable methods will be applicable to it.  This can make it possible to
optimize calls to those specified generic functions which would have no
applicable portable methods.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="mop-mo-redef-clisp-warn"></a>Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>When a metaobject class is redefined,
  <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> issues a <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a> that the redefinition has no effect.
  To avoid this warning, place all metaobject class definitions in a
  separate file, compile it in a <span class="emphasis"><em>separate</em></span> session
  (because <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is evaluated at <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compile_time" target="_top">compile time</a> too;
  see <a href="#mop-ov-ui-others" title="29.1.2.3.2.&#xA0;Compile-file Processing of Specific User Interface Macros">Section 29.1.2.3.2, “Compile-file Processing of Specific User Interface Macros”</a>),
  and then <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><code class="function">LOAD</code></a> it only <span class="emphasis"><em>once</em></span> per session.
</p></div></li></ul></div><p>
</p><p>The results are undefined if any of
 these restrictions are violated.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The specification technology used in this document needs
further development.  The concepts of object-oriented protocols and
subclass specialization are intuitively familiar to programmers of
object-oriented systems; the protocols presented here fit quite
naturally into this framework.  Nonetheless, in preparing this document,
we have found it difficult to give specification-quality descriptions of
the protocols in a way that makes it clear what extensions users can and
cannot write.  Object-oriented protocol specification is inherently
about specifying leeway, and this seems difficult using current
technology.</p></div></div>
<!--mop-portable-restrictions-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-impl-restrictions"></a>29.1.2.2.1.2. Restrictions on Implementations</h6></div></div></div><p>Implementations are allowed latitude to modify the structure of
specified classes and methods.  This includes: the interposition of
implementation-specific classes; the promotion of specified methods; and
the consolidation of two or more specified methods into a single method
specialized to interposed classes.</p><p>Any such modifications are permitted only so long as for any
portable class <em class="replaceable"><code>k</code></em> that is a subclass of one or more specified classes
<em class="replaceable"><code>k<sub>1</sub></code></em> ... <em class="replaceable"><code>k<sub>n</sub></code></em>, the following conditions are met:</p><div class="itemizedlist"><ul type="disc"><li>In the actual class precedence list of <em class="replaceable"><code>k</code></em>, the
  classes <em class="replaceable"><code>k<sub>1</sub></code></em> ... <em class="replaceable"><code>k<sub>n</sub></code></em> must appear in the same order as they would
  have if no implementation-specific modifications had been made.
</li><li>The method applicability of any specified generic
  function must be the same in terms of behavior as it would have been
  had no implementation-specific changes been made.  This includes
  specified generic functions that have had portable methods added.  In
  this context, the expression “<span class="quote">the same in terms of
  behavior</span>” means that methods with the same behavior as those
  specified are applicable, and in the same order.</li><li>No portable class <em class="replaceable"><code>k</code></em> may inherit, by virtue of
  being a direct or indirect subclass of a specified class, any slot for
  which the name is a symbol accessible in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> package or
  exported by any package defined in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</li><li>Implementations are free to define
  implementation-specific before- and after-methods on specified generic
  functions.  Implementations are also free to define
  implementation-specific around-methods with extending behavior.
</li></ul></div></div>
<!--mop-impl-restrictions-->
</div>
<!--mop-ov-impl-and-user-spec-->
</div>
<!--mop-mo-cl-inheritance-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-ui-macro"></a>29.1.2.3. Processing of the User Interface Macros</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-compile-ui-macro">29.1.2.3.1. Compile-file Processing of the User Interface Macros</a></span></dt><dt><span class="section"><a href="#mop-ov-ui-others">29.1.2.3.2. Compile-file Processing of Specific User Interface Macros</a></span></dt></dl></div><p>A list in which the first element is one of the symbols
<a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html" target="_top"><code class="function">DEFINE-METHOD-COMBINATION</code></a>,
<a href="http://www.lisp.org/HyperSpec/Issues/iss181.html" target="_top"><code class="function">CLOS:GENERIC-FUNCTION</code></a>, <a href="#gen-flet"><code class="function">CLOS:GENERIC-FLET</code></a> or <a href="#gen-labels"><code class="function">CLOS:GENERIC-LABELS</code></a>, and which has proper
syntax for that macro is called a <strong class="first"><em class="firstterm">user interface macro
form</em></strong>.  This document provides an extended specification of
the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> macros.</p><p>The user interface macros <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>
can be used not only to define metaobjects that are instances of the
corresponding standard metaobject class, but also to define metaobjects
that are instances of appropriate portable metaobject classes.  To make
it possible for portable metaobject classes to properly process the
information appearing in the macro form, this document provides a
limited specification of the processing of these macro forms.</p><p>User interface macro forms can be <span class="emphasis"><em>evaluated</em></span>
or <span class="emphasis"><em>compiled</em></span> and later <span class="emphasis"><em>executed</em></span>.
The effect of evaluating or executing a user interface macro form is
specified in terms of calls to specified functions and generic functions
which provide the actual behavior of the macro.  The arguments received
by these functions and generic functions are derived in a specified way
from the macro form.</p><p>Converting a user interface macro form into the arguments to the
appropriate functions and generic functions has two major aspects: the
conversion of the macro argument syntax into a form more suitable for
later processing, and the processing of macro arguments which are forms
to be evaluated (including method bodies).</p><p>In the syntax of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> macro, the <em class="replaceable"><code>initform</code></em>
and <em class="replaceable"><code>default-initarg-initial-value-form</code></em>
arguments are forms which will be evaluated one or more times after the
macro form is evaluated or executed.  Special processing must be done on
these arguments to ensure that the lexical scope of the forms is
captured properly.  This is done by building a function of zero
arguments which, when called, returns the result of evaluating the form
in the proper <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.</p><p>In the syntax of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> macro
the <em class="replaceable"><code>forms</code></em> argument is a list of forms that
comprise the body of the method definition.  This list of forms must be
processed specially to capture the lexical scope of the macro form.  In
addition, the lexical functions available only in the body of methods
must be introduced.  To allow this and any other special processing
(such as slot access optimization), a specializable protocol is used for
processing the body of methods.
This is discussed in <a href="#mop-meth-init-defmethod-body" title="29.1.6.3.1.1.&#xA0;Processing Method Bodies">Section 29.1.6.3.1.1, “Processing Method Bodies”</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-compile-ui-macro"></a>29.1.2.3.1. Compile-file Processing of the User Interface Macros</h5></div></div></div><p>It is a common practice for <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> compilers, while processing a file
or set of files, to maintain information about the definitions that have
been compiled so far.  Among other things, this makes it possible to
ensure that a global macro definition (<a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><code class="function">DEFMACRO</code></a> form) which appears in
a file will affect uses of the macro later in that file.  This
information about the state of the compilation is called the
<strong class="first"><em class="firstterm"><a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a> environment</em></strong>.</p><p>When compiling files containing <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> definitions, it is useful
to maintain certain additional information in the <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a> environment.
This can make it possible to issue various kinds of warnings (e.g.,
<a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> congruence) and to do various performance optimizations that
would not otherwise be possible.</p><p>At this time, there is such significant variance in the way
existing <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> implementations handle <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a> environments that it
would be premature to specify this mechanism.  Consequently, this
document specifies only the behavior of evaluating or executing user
interface macro forms. What functions and generic functions are called
during <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a> processing of a user interface macro form is not
specified.  Implementations are free to define and document their own
behavior.  Users may need to check implementation-specific behavior
before attempting to compile certain portable programs.</p></div>
<!--mop-compile-ui-macro-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-ov-ui-others"></a>29.1.2.3.2. Compile-file Processing of Specific User Interface Macros</h5></div></div></div><div class="variablelist"><dl><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a></span></dt><dd><p><a href="#mop-cl-defclass" title="29.1.3.1.&#xA0;Macro DEFCLASS">Section 29.1.3.1, “Macro <code class="function">DEFCLASS</code>”</a></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> evaluates <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> forms also at
     <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compile_time" target="_top">compile time</a>.</p></div></dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a></span></dt><dd><p><a href="#mop-meth-init-defmethod" title="29.1.6.3.1.&#xA0;Macro DEFMETHOD">Section 29.1.6.3.1, “Macro <code class="function">DEFMETHOD</code>”</a></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> does <span class="strong"><strong>not</strong></span> evaluate <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>
     forms at <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compile_time" target="_top">compile time</a> except as necessary for signature checking.
 </p></div></dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a></span></dt><dd><p><a href="#mop-gf-init-defgeneric" title="29.1.5.3.1.&#xA0;Macro DEFGENERIC">Section 29.1.5.3.1, “Macro <code class="function">DEFGENERIC</code>”</a></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> does <span class="strong"><strong>not</strong></span> evaluate <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a>
     forms at <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compile_time" target="_top">compile time</a> except as necessary for signature checking.
</p></div></dd></dl></div></div>
<!--mop-ov-ui-others-->
</div>
<!--mop-ui-macro-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-ov-mo-init"></a>29.1.2.4. Metaobject Initialization Protocol</h4></div></div></div><p>Like other objects, metaobjects can be created by calling
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.  The initialization arguments passed to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
are used to initialize the metaobject in the usual way.  The set of
legal initialization arguments, and their interpretation, depends on the
kind of metaobject being created.  Implementations and portable programs
are free to extend the set of legal initialization arguments.  Detailed
information about the initialization of each kind of metaobject are
provided in the appropriate sections:</p><div class="itemizedlist"><ul type="disc"><li><a href="#mop-cl-init-mo" title="29.1.3.5.1.&#xA0;Initialization of class metaobjects">Section 29.1.3.5.1, “Initialization of class metaobjects”</a></li><li><a href="#mop-cl-reinit-mo" title="29.1.3.5.2.&#xA0;Reinitialization of class metaobjects">Section 29.1.3.5.2, “Reinitialization of class metaobjects”</a></li><li><a href="#mop-gf-init-mo" title="29.1.5.3.3.&#xA0;Initialization of generic function metaobjects">Section 29.1.5.3.3, “Initialization of generic function metaobjects”</a></li><li><a href="#mop-cl-finalization" title="29.1.3.4.&#xA0;Class Finalization Protocol">Section 29.1.3.4, “Class Finalization Protocol”</a></li><li><a href="#mop-sa-instance-stuct" title="29.1.10.1.&#xA0;Instance Structure Protocol">Section 29.1.10.1, “Instance Structure Protocol”</a></li><li><a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances">Section 29.1.10.2, “Funcallable Instances”</a></li><li><a href="#mop-gf-invocation" title="29.1.5.3.2.&#xA0;Generic Function Invocation Protocol">Section 29.1.5.3.2, “Generic Function Invocation Protocol”</a></li><li><a href="#mop-dep-maint" title="29.1.11.&#xA0;Dependent Maintenance">Section 29.1.11, “Dependent Maintenance”</a></li></ul></div></div>
<!--mop-ov-mo-init-->
</div>
<!--mop-overview-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-classes"></a>29.1.3. Classes</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-cl-defclass">29.1.3.1. Macro <code class="function">DEFCLASS</code></a></span></dt><dt><span class="section"><a href="#mop-cl-Inheritance">29.1.3.2. Inheritance Structure of class metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-cl-readers">29.1.3.3. Introspection: Readers for class metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#class-name">29.1.3.3.1. Generic Function <code class="function">CLASS-NAME</code></a></span></dt><dt><span class="section"><a href="#class-direct-superclasses">29.1.3.3.2. Generic Function <code class="function">CLOS:CLASS-DIRECT-SUPERCLASSES</code></a></span></dt><dt><span class="section"><a href="#class-direct-slots">29.1.3.3.3. Generic Function <code class="function">CLOS:CLASS-DIRECT-SLOTS</code></a></span></dt><dt><span class="section"><a href="#class-direct-default-initargs">29.1.3.3.4. Generic Function <code class="function">CLOS:CLASS-DIRECT-DEFAULT-INITARGS</code></a></span></dt><dt><span class="section"><a href="#cpl">29.1.3.3.5. Generic Function <code class="function">CLOS:CLASS-PRECEDENCE-LIST</code></a></span></dt><dt><span class="section"><a href="#class-direct-subclasses">29.1.3.3.6. Generic Function <code class="function">CLOS:CLASS-DIRECT-SUBCLASSES</code></a></span></dt><dt><span class="section"><a href="#class-slots">29.1.3.3.7. Generic Function <code class="function">CLOS:CLASS-SLOTS</code></a></span></dt><dt><span class="section"><a href="#class-default-initargs">29.1.3.3.8. Generic Function <code class="function">CLOS:CLASS-DEFAULT-INITARGS</code></a></span></dt><dt><span class="section"><a href="#class-finalized-p">29.1.3.3.9. Generic Function <code class="function">CLOS:CLASS-FINALIZED-P</code></a></span></dt><dt><span class="section"><a href="#class-prototype">29.1.3.3.10. Generic Function <code class="function">CLOS:CLASS-PROTOTYPE</code></a></span></dt><dt><span class="section"><a href="#mop-cl-readers-methods">29.1.3.3.11. Methods</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-cl-finalization">29.1.3.4. Class Finalization Protocol</a></span></dt><dt><span class="section"><a href="#mop-cl-init">29.1.3.5. Class Initialization</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-cl-init-mo">29.1.3.5.1. Initialization of class metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#class-mo-init-methods">29.1.3.5.1.1. Methods</a></span></dt><dt><span class="section"><a href="#mop-cl-init-anon">29.1.3.5.1.2. Initialization of Anonymous Classes</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-cl-reinit-mo">29.1.3.5.2. Reinitialization of class metaobjects</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-cl-customize">29.1.3.6. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#setf-class-name">29.1.3.6.1. Generic Function <code class="code">(SETF CLASS-NAME)</code></a></span></dt><dt><span class="section"><a href="#ensure-class">29.1.3.6.2. Generic Function <code class="function">CLOS:ENSURE-CLASS</code></a></span></dt><dt><span class="section"><a href="#ensure-class-UC">29.1.3.6.3. Generic Function <code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#finalize-inheritance">29.1.3.6.4. Generic Function <code class="function">CLOS:FINALIZE-INHERITANCE</code></a></span></dt><dt><span class="section"><a href="#mop-make-instance">29.1.3.6.5. Generic Function <code class="function">MAKE-INSTANCE</code></a></span></dt><dt><span class="section"><a href="#alloc-instance">29.1.3.6.6. Generic Function <code class="function">ALLOCATE-INSTANCE</code></a></span></dt><dt><span class="section"><a href="#validate-superclass">29.1.3.6.7. Generic Function <code class="function">CLOS:VALIDATE-SUPERCLASS</code></a></span></dt><dt><span class="section"><a href="#compute-dsd-initargs">29.1.3.6.8. Generic Function <code class="function">CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS</code></a></span></dt><dt><span class="section"><a href="#dsd-class">29.1.3.6.9. Generic Function <code class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</code></a></span></dt><dt><span class="section"><a href="#compute-cpl">29.1.3.6.10. Generic Function <code class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</code></a></span></dt><dt><span class="section"><a href="#compute-slots">29.1.3.6.11. Generic Function <code class="function">CLOS:COMPUTE-SLOTS</code></a></span></dt><dt><span class="section"><a href="#compute-esd">29.1.3.6.12. Generic Function <code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</code></a></span></dt><dt><span class="section"><a href="#compute-esd-initargs">29.1.3.6.13. Generic Function <code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</code></a></span></dt><dt><span class="section"><a href="#esd-class">29.1.3.6.14. Generic Function <code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a></span></dt><dt><span class="section"><a href="#compute-default-initargs">29.1.3.6.15. Generic Function <code class="function">CLOS:COMPUTE-DEFAULT-INITARGS</code></a></span></dt></dl></dd><dt><span class="section"><a href="#mop-cl-dep">29.1.3.7. Updating Dependencies</a></span></dt><dd><dl><dt><span class="section"><a href="#add-direct-subclass">29.1.3.7.1. Generic Function <code class="function">CLOS:ADD-DIRECT-SUBCLASS</code></a></span></dt><dt><span class="section"><a href="#remove-direct-subclass">29.1.3.7.2. Generic Function <code class="function">CLOS:REMOVE-DIRECT-SUBCLASS</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-defclass"></a>29.1.3.1. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a></h4></div></div></div><p>The evaluation or execution of a <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form results in a call
to the <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a> function. The arguments received by <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>
are derived from the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form in a defined way.  The exact
macro-expansion of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form is not defined, only the
relationship between the arguments to the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> macro and the
arguments received by the <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a> function.  Examples of typical
<a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> forms and sample expansions are shown in the following two
 examples:
</p><div class="informalexample"><p>A <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form with standard slot and class
  options and an expansion of it that would result in the proper call
  to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.</p><pre class="programlisting">
(defclass plane (moving-object graphics-object)
  ((altitude :initform 0 :accessor plane-altitude)
   (speed))
  (:default-initargs :engine *jet*))

(ensure-class 'plane
  ':direct-superclasses '(moving-object graphics-object)
  ':direct-slots (list (list ':name 'altitude
                             ':initform '0
                             ':initfunction #'(lambda () 0)
                             ':readers '(plane-altitude)
                             ':writers '((setf plane-altitude)))
                       (list ':name 'speed))
  ':direct-default-initargs (list (list ':engine
                                        '*jet*
                                        #'(lambda () *jet*))))
</pre></div><p>
</p><div class="informalexample"><p>A <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form with non-standard class and
  slot options, and an expansion of it which results in the proper call
  to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.  Note that the order of the slot options has not
  affected the order of the properties in the <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>,
  but has affected the order of the elements in the lists
  which are the values of those properties.</p><pre class="programlisting">
(defclass sst (plane)
  ((mach mag-step 2
         locator sst-mach
         locator mach-location
         :reader mach-speed
         :reader mach))
  (:metaclass faster-class)
  (another-option foo bar))

(ensure-class 'sst
  ':direct-superclasses '(plane)
  ':direct-slots (list (list ':name 'mach
                             ':readers '(mach-speed mach)
                             'mag-step '2
                             'locator '(sst-mach mach-location)))
  ':metaclass 'faster-class
  'another-option '(foo bar))
</pre></div><div class="itemizedlist"><ul type="disc"><li>The <em class="replaceable"><code>name</code></em> argument to <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a>
   becomes the value of the first argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.  This is
   the only positional argument accepted by <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>; all other
   arguments are keyword arguments.</li><li>The <em class="replaceable"><code>direct-superclasses</code></em>
  argument to <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> becomes the value of the <code class="constant">:DIRECT-SUPERCLASSES</code>
  keyword argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.</li><li><p>The <em class="replaceable"><code>direct slots</code></em> argument
  to <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> becomes the value of the <code class="constant">:DIRECT-SLOTS</code> keyword
  argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.  Special processing of this value is done
  to regularize the form of each slot specification and to properly
  capture the lexical scope of the initialization forms.  This is done
  by converting each slot specification to a property list called a
  <strong class="first"><em class="firstterm">canonicalized slot specification</em></strong>.
  The resulting list of <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>s is the value
  of the <code class="constant">:DIRECT-SLOTS</code> keyword argument.</p><p><a id="mop-canonicalized-slot-spec"></a>Canonicalized slot
  specifications are later used as the keyword arguments to a generic
  function which will, in turn, pass them to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> for use as
  a set of initialization arguments.  Each <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a> is
  formed from the corresponding slot specification as follows:
  </p><div class="itemizedlist"><ul type="circle"><li>The name of the slot is the value of the <code class="constant">:NAME</code>
     property.  This property appears in every
     <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>.</li><li>When the <code class="constant">:INITFORM</code> slot option is present in
     the slot specification, then both the <code class="constant">:INITFORM</code> and
     <code class="constant">:INITFUNCTION</code> properties are present in the <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>.
     The value of the <code class="constant">:INITFORM</code> property is the
     initialization form.  The value of the <code class="constant">:INITFUNCTION</code> property is
     a function of zero arguments which, when called, returns the result
     of evaluating the initialization form in its proper <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.
   </li><li>If the <code class="constant">:INITFORM</code> slot option is not present in
     the slot specification, then either the <code class="constant">:INITFUNCTION</code> property
     will not appear, or its value will be false.  In such cases, the
     value of the <code class="constant">:INITFORM</code> property, or whether it appears, is
     unspecified.</li><li>The value of the <code class="constant">:INITARGS</code> property is a list
     of the values of each <code class="constant">:INITARG</code> slot option.  If there are no
     <code class="constant">:INITARG</code> slot options, then either the <code class="constant">:INITARGS</code> property
     will not appear or its value will be the empty list.
   </li><li>The value of the <code class="constant">:READERS</code> property is a list of
     the values of each <code class="constant">:READER</code> and <code class="constant">:ACCESSOR</code> slot option.  If
     there are no <code class="constant">:READER</code> or <code class="constant">:ACCESSOR</code> slot options, then either
     the <code class="constant">:READERS</code> property will not appear or its value will be the
     empty list.</li><li>The value of the <code class="constant">:WRITERS</code> property is a list of
     the values specified by each <code class="constant">:WRITER</code> and <code class="constant">:ACCESSOR</code> slot
     option.  The value specified by a <code class="constant">:WRITER</code> slot option is just
     the value of the slot option.  The value specified by an
     <code class="constant">:ACCESSOR</code> slot option is a two element list: the first element
     is the symbol <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>, the second element is the value of the slot
     option.  If there are no <code class="constant">:WRITER</code> or <code class="constant">:ACCESSOR</code> slot options,
     then either the <code class="constant">:WRITERS</code> property will not appear or its value
     will be the empty list.</li><li>The value of the <code class="constant">:DOCUMENTATION</code> property is the
     value of the <code class="constant">:DOCUMENTATION</code> slot option.  If there is no
     <code class="constant">:DOCUMENTATION</code> slot option, then either the <code class="constant">:DOCUMENTATION</code>
     property will not appear or its value will be false.
   </li><li>All other slot options appear as the values of
     properties with the same name as the slot option.  Note that this
     includes not only the remaining standard slot options
     (<code class="constant">:ALLOCATION</code> and <code class="constant">:TYPE</code>), but also any other options and
     values appearing in the slot specification.  If one of these slot
     options appears more than once, the value of the property will be a
     list of the specified values.</li><li>An implementation is free to add additional
     properties to the <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a> provided these
     are not symbols accessible in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> package, or exported by
     any package defined in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</li></ul></div></li><li><p>The <em class="replaceable"><code>default initargs</code></em> class
  option, if it is present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form, becomes the value of
  the <code class="constant">:DIRECT-DEFAULT-INITARGS</code> keyword argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.
  Special processing of this value is done to properly capture the
  lexical scope of the default value forms.  This is done by converting
  each default initarg in the class option into a
  <strong class="first"><em class="firstterm">canonicalized default initialization argument</em></strong>.
  The resulting list of <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>s is the value of
  the <code class="constant">:DIRECT-DEFAULT-INITARGS</code> keyword argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.
 </p><p><a id="mop-canonicalized-default-initarg"></a>A canonicalized default
  initarg is a list of three elements.  The first element is the name;
  the second is the actual form itself; and the third is a function of
  zero arguments which, when called, returns the result of evaluating
  the default value form in its proper <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>If a <em class="replaceable"><code>default initargs</code></em>
    class option is not present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form,
    <code class="constant">:DIRECT-DEFAULT-INITARGS</code> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> is passed to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.</p><p>This is needed to
 fulfill the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirement (see <a href="#redef-class" title="4.6.&#xA0;Redefining Classes&#10;  [CLHS-4.3.6]">Section 4.6, “Redefining Classes
  [CLHS-4.3.6]”</a>) that
 the resulting <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> object reflects the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form.</p></div></li><li><p>The <em class="replaceable"><code>metaclass</code></em> class
  option, if it is present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form, becomes the value of
  the <code class="constant">:METACLASS</code> keyword argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>If a <em class="replaceable"><code>metaclass</code></em>
   class option is not present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form,
   <code class="constant">:METACLASS</code> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> is passed to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.</p><p>This is needed to
 fulfill the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirement (see <a href="#redef-class" title="4.6.&#xA0;Redefining Classes&#10;  [CLHS-4.3.6]">Section 4.6, “Redefining Classes
  [CLHS-4.3.6]”</a>) that
 the resulting <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> object reflects the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form.</p></div></li><li><p>The <em class="replaceable"><code>documentation</code></em> class
  option, if it is present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form, becomes the value of
  the <code class="constant">:DOCUMENTATION</code> keyword argument to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>If a <em class="replaceable"><code>documentation</code></em>
    class option is not present in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form,
    <code class="constant">:DIRECT-DEFAULT-INITARGS</code> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> is passed to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.</p><p>This is needed to
 fulfill the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirement (see <a href="#redef-class" title="4.6.&#xA0;Redefining Classes&#10;  [CLHS-4.3.6]">Section 4.6, “Redefining Classes
  [CLHS-4.3.6]”</a>) that
 the resulting <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> object reflects the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form.</p></div></li><li><p>Any other class options become the value of keyword
  arguments with the same name.  The value of the keyword argument is
  the tail of the class option.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if any class
  option appears more than once in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The default initargs of the
    <em class="replaceable"><code>metaclass</code></em> are added at the end of the list
    of arguments to pass to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.</p><p>This is needed to
 fulfill the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] requirement (see <a href="#redef-class" title="4.6.&#xA0;Redefining Classes&#10;  [CLHS-4.3.6]">Section 4.6, “Redefining Classes
  [CLHS-4.3.6]”</a>) that
 the resulting <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> object reflects the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form.</p></div></li></ul></div><p>In the call to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>, every element of its arguments
appears in the same left-to-right order as the corresponding element of
the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form, except that the order of the properties of
<a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>s is unspecified.  The values of
properties in <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>s do follow this ordering
requirement.  Other ordering relationships in the keyword arguments to
<a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a> are unspecified.</p><p>The result of the call to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a> is returned as the result
of evaluating or executing the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> form.</p></div>
<!--mop-cl-defclass-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-Inheritance"></a>29.1.3.2. Inheritance Structure of <a href="#mop-class-mo">class metaobject</a> Classes</h4></div></div></div><div class="figure"><a id="mop-cl-Inheritance-fig"></a><p class="title"><b>Figure 29.2. Inheritance structure of <a href="#mop-class-mo">class metaobject</a> classes</b></p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="mop-classes-class.png" width="100%" alt="Inheritance structure of class metaobject classes" /></td></tr></table></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-readers"></a>29.1.3.3. Introspection: Readers for <a href="#mop-class-mo">class metaobject</a>s</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#class-name">29.1.3.3.1. Generic Function <code class="function">CLASS-NAME</code></a></span></dt><dt><span class="section"><a href="#class-direct-superclasses">29.1.3.3.2. Generic Function <code class="function">CLOS:CLASS-DIRECT-SUPERCLASSES</code></a></span></dt><dt><span class="section"><a href="#class-direct-slots">29.1.3.3.3. Generic Function <code class="function">CLOS:CLASS-DIRECT-SLOTS</code></a></span></dt><dt><span class="section"><a href="#class-direct-default-initargs">29.1.3.3.4. Generic Function <code class="function">CLOS:CLASS-DIRECT-DEFAULT-INITARGS</code></a></span></dt><dt><span class="section"><a href="#cpl">29.1.3.3.5. Generic Function <code class="function">CLOS:CLASS-PRECEDENCE-LIST</code></a></span></dt><dt><span class="section"><a href="#class-direct-subclasses">29.1.3.3.6. Generic Function <code class="function">CLOS:CLASS-DIRECT-SUBCLASSES</code></a></span></dt><dt><span class="section"><a href="#class-slots">29.1.3.3.7. Generic Function <code class="function">CLOS:CLASS-SLOTS</code></a></span></dt><dt><span class="section"><a href="#class-default-initargs">29.1.3.3.8. Generic Function <code class="function">CLOS:CLASS-DEFAULT-INITARGS</code></a></span></dt><dt><span class="section"><a href="#class-finalized-p">29.1.3.3.9. Generic Function <code class="function">CLOS:CLASS-FINALIZED-P</code></a></span></dt><dt><span class="section"><a href="#class-prototype">29.1.3.3.10. Generic Function <code class="function">CLOS:CLASS-PROTOTYPE</code></a></span></dt><dt><span class="section"><a href="#mop-cl-readers-methods">29.1.3.3.11. Methods</a></span></dt></dl></div><p>In this and the following sections, the “<span class="quote">reader</span>”
generic functions which simply return information associated with a
particular kind of metaobject are presented together.  General
information is presented first, followed by a description of the purpose
of each, and ending with the specified methods for these generic
functions.</p><p>The reader generic functions which simply return information
associated with <a href="#mop-class-mo">class metaobject</a>s are presented together in this section.</p><p>Each of the reader generic functions for <a href="#mop-class-mo">class metaobject</a>s has the same
syntax, accepting one required argument called <em class="replaceable"><code>class</code></em>, which must be
a <a href="#mop-class-mo">class metaobject</a>; otherwise, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is also <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if
the <a href="#mop-class-mo">class metaobject</a> has not been initialized.</p><p>These generic functions can be called by the user or the
implementation.</p><p>For any of these generic
 functions which returns a list, such lists will not be mutated by the
 implementation.  The results are undefined if a portable program allows
 such a list to be mutated.</p>
<!--begin class basic introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-name"></a>29.1.3.3.1. Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_class-name.html" target="_top"><code class="function">CLASS-NAME</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_class-name.html" target="_top"><code class="function">CLASS-NAME</code></a> <em class="replaceable"><code>class</code></em>)</code></h6></div></div></div><p>Returns the name of <em class="replaceable"><code>class</code></em>.  This value can be any Lisp object,
but is usually a symbol, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if the class has no name.  This is the
defaulted value of the <code class="constant">:NAME</code> initialization argument that was
associated with the class during initialization or reinitialization.
(Also see <a href="#setf-class-name" title="29.1.3.6.1.&#xA0;Generic Function (SETF CLASS-NAME)"><code class="code">(SETF CLASS-NAME)</code></a>.)
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-direct-superclasses"></a>29.1.3.3.2. Generic Function <a href="#class-direct-superclasses" title="29.1.3.3.2.&#xA0;Generic Function CLOS:CLASS-DIRECT-SUPERCLASSES"><code class="function">CLOS:CLASS-DIRECT-SUPERCLASSES</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#class-direct-superclasses" title="29.1.3.3.2.&#xA0;Generic Function CLOS:CLASS-DIRECT-SUPERCLASSES"><code class="function">CLOS:CLASS-DIRECT-SUPERCLASSES</code></a> <em class="replaceable"><code>class</code></em>)</code></h6></div></div></div><p>Returns a list of the direct superclasses of <em class="replaceable"><code>class</code></em>.  The
elements of this list are <a href="#mop-class-mo">class metaobject</a>s.  The empty list is returned if
<em class="replaceable"><code>class</code></em> has no direct superclasses.  This is the defaulted value of
the <code class="constant">:DIRECT-SUPERCLASSES</code> initialization argument that was associated
with the class during initialization or reinitialization.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>For a class that has not yet been finalized,
 the returned list may contain <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> instances as
 placeholder for classes that were not yet defined when finalization of
 the class was last attempted.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-direct-slots"></a>29.1.3.3.3. Generic Function <a href="#class-direct-slots" title="29.1.3.3.3.&#xA0;Generic Function CLOS:CLASS-DIRECT-SLOTS"><code class="function">CLOS:CLASS-DIRECT-SLOTS</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#class-direct-slots" title="29.1.3.3.3.&#xA0;Generic Function CLOS:CLASS-DIRECT-SLOTS"><code class="function">CLOS:CLASS-DIRECT-SLOTS</code></a> <em class="replaceable"><code>class</code></em>)</code></h6></div></div></div><p>Returns a set of the direct slots of <em class="replaceable"><code>class</code></em>.  The elements of
this set are <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s.  If the class has no direct slots, the empty set
is returned.  This is the defaulted value of the <code class="constant">:DIRECT-SLOTS</code>
initialization argument that was associated with the class during
initialization and reinitialization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-direct-default-initargs"></a>29.1.3.3.4. Generic Function <a href="#class-direct-default-initargs" title="29.1.3.3.4.&#xA0;Generic Function CLOS:CLASS-DIRECT-DEFAULT-INITARGS"><code class="function">CLOS:CLASS-DIRECT-DEFAULT-INITARGS</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#class-direct-default-initargs" title="29.1.3.3.4.&#xA0;Generic Function CLOS:CLASS-DIRECT-DEFAULT-INITARGS"><code class="function">CLOS:CLASS-DIRECT-DEFAULT-INITARGS</code></a> <em class="replaceable"><code>class</code></em>)</code></h6></div></div></div><p>Returns a list of the direct default initialization arguments for
<em class="replaceable"><code>class</code></em>.  Each element of this list is a <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>.
The empty list is returned if <em class="replaceable"><code>class</code></em> has no
direct default initialization arguments.  This is the defaulted value of
the <code class="constant">:DIRECT-DEFAULT-INITARGS</code> initialization argument that was
associated with the class during initialization or reinitialization.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="cpl"></a>29.1.3.3.5. Generic Function <a href="#cpl" title="29.1.3.3.5.&#xA0;Generic Function CLOS:CLASS-PRECEDENCE-LIST"><code class="function">CLOS:CLASS-PRECEDENCE-LIST</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#cpl" title="29.1.3.3.5.&#xA0;Generic Function CLOS:CLASS-PRECEDENCE-LIST"><code class="function">CLOS:CLASS-PRECEDENCE-LIST</code></a> <em class="replaceable"><code>class</code></em>)</code></h6></div></div></div><p>Returns the class precedence list of <em class="replaceable"><code>class</code></em>.  The elements of
this list are <a href="#mop-class-mo">class metaobject</a>s.</p><p>During class finalization <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> calls
<a href="#compute-cpl" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-CLASS-PRECEDENCE-LIST"><code class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</code></a> to compute the class precedence list of the class.  That
value is associated with the <a href="#mop-class-mo">class metaobject</a> and is returned by <a href="#cpl" title="29.1.3.3.5.&#xA0;Generic Function CLOS:CLASS-PRECEDENCE-LIST"><code class="function">CLOS:CLASS-PRECEDENCE-LIST</code></a>.</p><p>This generic function <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> if <em class="replaceable"><code>class</code></em> has not been finalized.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-direct-subclasses"></a>29.1.3.3.6. Generic Function <a href="#class-direct-subclasses" title="29.1.3.3.6.&#xA0;Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><code class="function">CLOS:CLASS-DIRECT-SUBCLASSES</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#class-direct-subclasses" title="29.1.3.3.6.&#xA0;Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><code class="function">CLOS:CLASS-DIRECT-SUBCLASSES</code></a> <em class="replaceable"><code>class</code></em>)</code></h6></div></div></div><p>Returns a set of the direct subclasses of <em class="replaceable"><code>class</code></em>. The elements
of this set are <a href="#mop-class-mo">class metaobject</a>s that all mention this class among their direct
superclasses.  The empty set is returned if <em class="replaceable"><code>class</code></em> has no direct
subclasses.  This value is maintained by the generic functions
<a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><code class="function">CLOS:ADD-DIRECT-SUBCLASS</code></a> and <a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><code class="function">CLOS:REMOVE-DIRECT-SUBCLASS</code></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The set of direct subclasses of a class is
 internally managed as a <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><code class="classname">EXT:WEAK-LIST</code></a>. Therefore the existence of
 the <a href="#class-direct-subclasses" title="29.1.3.3.6.&#xA0;Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><code class="function">CLOS:CLASS-DIRECT-SUBCLASSES</code></a> function does not prevent otherwise
 unreferenced classes from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-slots"></a>29.1.3.3.7. Generic Function <a href="#class-slots" title="29.1.3.3.7.&#xA0;Generic Function CLOS:CLASS-SLOTS"><code class="function">CLOS:CLASS-SLOTS</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#class-slots" title="29.1.3.3.7.&#xA0;Generic Function CLOS:CLASS-SLOTS"><code class="function">CLOS:CLASS-SLOTS</code></a> <em class="replaceable"><code>class</code></em>)</code></h6></div></div></div><p>Returns a possibly empty set of the slots accessible in instances
of <em class="replaceable"><code>class</code></em>.  The elements of this set are <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s.</p><p>During class finalization <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> calls
<a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a> to compute the slots of the class.  That value is
associated with the <a href="#mop-class-mo">class metaobject</a> and is returned by <a href="#class-slots" title="29.1.3.3.7.&#xA0;Generic Function CLOS:CLASS-SLOTS"><code class="function">CLOS:CLASS-SLOTS</code></a>.</p><p>This generic function <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> if <em class="replaceable"><code>class</code></em> has not been finalized.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-default-initargs"></a>29.1.3.3.8. Generic Function <a href="#class-default-initargs" title="29.1.3.3.8.&#xA0;Generic Function CLOS:CLASS-DEFAULT-INITARGS"><code class="function">CLOS:CLASS-DEFAULT-INITARGS</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#class-default-initargs" title="29.1.3.3.8.&#xA0;Generic Function CLOS:CLASS-DEFAULT-INITARGS"><code class="function">CLOS:CLASS-DEFAULT-INITARGS</code></a> <em class="replaceable"><code>class</code></em>)</code></h6></div></div></div><p>Returns a list of the default initialization arguments for
<em class="replaceable"><code>class</code></em>.  Each element of this list is a <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>.
The empty list is returned if <em class="replaceable"><code>class</code></em> has no
default initialization arguments.</p><p>During finalization <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> calls
<a href="#compute-default-initargs" title="29.1.3.6.15.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><code class="function">CLOS:COMPUTE-DEFAULT-INITARGS</code></a> to compute the default initialization
arguments for the class.  That value is associated with the <a href="#mop-class-mo">class metaobject</a> and
is returned by <a href="#class-default-initargs" title="29.1.3.3.8.&#xA0;Generic Function CLOS:CLASS-DEFAULT-INITARGS"><code class="function">CLOS:CLASS-DEFAULT-INITARGS</code></a>.</p><p>This generic function <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> if <em class="replaceable"><code>class</code></em> has not been
finalized.</p></div>
<!--end class basic introspection-->
<!--begin class advanced introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-finalized-p"></a>29.1.3.3.9. Generic Function <a href="#class-finalized-p" title="29.1.3.3.9.&#xA0;Generic Function CLOS:CLASS-FINALIZED-P"><code class="function">CLOS:CLASS-FINALIZED-P</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#class-finalized-p" title="29.1.3.3.9.&#xA0;Generic Function CLOS:CLASS-FINALIZED-P"><code class="function">CLOS:CLASS-FINALIZED-P</code></a> <em class="replaceable"><code>class</code></em>)</code></h6></div></div></div><p>Returns true if <em class="replaceable"><code>class</code></em> has been finalized.  Returns false
otherwise.  Also returns false if the <em class="replaceable"><code>class</code></em> has not been initialized.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="class-prototype"></a>29.1.3.3.10. Generic Function <a href="#class-prototype" title="29.1.3.3.10.&#xA0;Generic Function CLOS:CLASS-PROTOTYPE"><code class="function">CLOS:CLASS-PROTOTYPE</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#class-prototype" title="29.1.3.3.10.&#xA0;Generic Function CLOS:CLASS-PROTOTYPE"><code class="function">CLOS:CLASS-PROTOTYPE</code></a> <em class="replaceable"><code>class</code></em>)</code></h6></div></div></div><p>Returns a prototype instance of <em class="replaceable"><code>class</code></em>.  Whether the instance
is initialized is not specified.  The results are undefined if a
portable program modifies the binding of any slot of a prototype instance.
</p><p>This generic function <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> if <em class="replaceable"><code>class</code></em> has not been finalized.
</p><div class="informalexample"><p>This allows non-<a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#cons" target="_top">consing[3]</a> access to slots with
  allocation <code class="constant">:CLASS</code>:</p><pre class="programlisting">
(defclass counter ()
  ((count :allocation :class :initform 0 :reader how-many)))
(defmethod initialize-instance :after ((obj counter) &amp;rest args)
  (incf (slot-value obj 'count)))
(defclass counted-object (counter) ((name :initarg :name)))
 </pre><p>
 Now one can find out how many <code class="classname">COUNTED-OBJECT</code>s
 have been created by using
  <code class="code">(HOW-MANY (<a href="#class-prototype" title="29.1.3.3.10.&#xA0;Generic Function CLOS:CLASS-PROTOTYPE"><code class="function">CLOS:CLASS-PROTOTYPE</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><code class="function">FIND-CLASS</code></a> 'COUNTER)))</code>:
  </p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> 'counted-object :name 'foo)
⇒ <code class="computeroutput">#&lt;COUNTED-OBJECT #x203028C9&gt;</code>
(HOW-MANY (<a href="#class-prototype" title="29.1.3.3.10.&#xA0;Generic Function CLOS:CLASS-PROTOTYPE"><code class="function">CLOS:CLASS-PROTOTYPE</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><code class="function">FIND-CLASS</code></a> 'counter)))
⇒ <code class="computeroutput">1</code>
(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> 'counted-object :name 'bar)
⇒ <code class="computeroutput">#&lt;COUNTED-OBJECT #x20306CB1&gt;</code>
(HOW-MANY (<a href="#class-prototype" title="29.1.3.3.10.&#xA0;Generic Function CLOS:CLASS-PROTOTYPE"><code class="function">CLOS:CLASS-PROTOTYPE</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><code class="function">FIND-CLASS</code></a> 'counter)))
⇒ <code class="computeroutput">2</code>
</pre></div></div>
<!--end class advanced introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-cl-readers-methods"></a>29.1.3.3.11. Methods</h5></div></div></div><p>The specified methods for the <a href="#mop-class-mo">class metaobject</a> reader generic
functions are presented below.</p><p>Each entry in the table indicates a method on one of the reader
generic functions, specialized to a specified class.  The number in each
entry is a reference to the full description of the method.  The full
descriptions appear after the table.</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="center">Generic Function</th><th align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>, <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a></th><th align="center"><a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a></th><th align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a></th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_class-name.html" target="_top"><code class="function">CLASS-NAME</code></a></td><td align="center"><a href="#CRM-1">1</a></td><td align="center"><a href="#CRM-1">1</a></td><td align="center"><a href="#CRM-8">8</a></td></tr><tr><td align="center"><a href="#class-direct-superclasses" title="29.1.3.3.2.&#xA0;Generic Function CLOS:CLASS-DIRECT-SUPERCLASSES"><code class="function">CLOS:CLASS-DIRECT-SUPERCLASSES</code></a></td><td align="center"><a href="#CRM-1">1</a></td><td align="center"><a href="#CRM-4">4</a></td><td align="center"><a href="#CRM-7">7</a></td></tr><tr><td align="center"><a href="#class-direct-slots" title="29.1.3.3.3.&#xA0;Generic Function CLOS:CLASS-DIRECT-SLOTS"><code class="function">CLOS:CLASS-DIRECT-SLOTS</code></a></td><td align="center"><a href="#CRM-1">1</a></td><td align="center"><a href="#CRM-4">4</a></td><td align="center"><a href="#CRM-4">4</a></td></tr><tr><td align="center"><a href="#class-direct-default-initargs" title="29.1.3.3.4.&#xA0;Generic Function CLOS:CLASS-DIRECT-DEFAULT-INITARGS"><code class="function">CLOS:CLASS-DIRECT-DEFAULT-INITARGS</code></a></td><td align="center"><a href="#CRM-1">1</a></td><td align="center"><a href="#CRM-4">4</a></td><td align="center"><a href="#CRM-4">4</a></td></tr><tr><td align="center"><a href="#cpl" title="29.1.3.3.5.&#xA0;Generic Function CLOS:CLASS-PRECEDENCE-LIST"><code class="function">CLOS:CLASS-PRECEDENCE-LIST</code></a></td><td align="center"><a href="#CRM-2">2</a></td><td align="center"><a href="#CRM-3">3</a></td><td align="center"><a href="#CRM-7">7</a></td></tr><tr><td align="center"><a href="#class-direct-subclasses" title="29.1.3.3.6.&#xA0;Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><code class="function">CLOS:CLASS-DIRECT-SUBCLASSES</code></a></td><td align="center"><a href="#CRM-9">9</a></td><td align="center"><a href="#CRM-9">9</a></td><td align="center"><a href="#CRM-7">7</a></td></tr><tr><td align="center"><a href="#class-slots" title="29.1.3.3.7.&#xA0;Generic Function CLOS:CLASS-SLOTS"><code class="function">CLOS:CLASS-SLOTS</code></a></td><td align="center"><a href="#CRM-2">2</a></td><td align="center"><a href="#CRM-3">3</a></td><td align="center"><a href="#CRM-4">4</a></td></tr><tr><td align="center"><a href="#class-default-initargs" title="29.1.3.3.8.&#xA0;Generic Function CLOS:CLASS-DEFAULT-INITARGS"><code class="function">CLOS:CLASS-DEFAULT-INITARGS</code></a></td><td align="center"><a href="#CRM-2">2</a></td><td align="center"><a href="#CRM-3">3</a></td><td align="center"><a href="#CRM-4">4</a></td></tr><tr><td align="center"><a href="#class-finalized-p" title="29.1.3.3.9.&#xA0;Generic Function CLOS:CLASS-FINALIZED-P"><code class="function">CLOS:CLASS-FINALIZED-P</code></a></td><td align="center"><a href="#CRM-2">2</a></td><td align="center"><a href="#CRM-6">6</a></td><td align="center"><a href="#CRM-5">5</a></td></tr><tr><td align="center"><a href="#class-prototype" title="29.1.3.3.10.&#xA0;Generic Function CLOS:CLASS-PROTOTYPE"><code class="function">CLOS:CLASS-PROTOTYPE</code></a></td><td align="center"><a href="#CRM-10">10</a></td><td align="center"><a href="#CRM-10">10</a></td><td align="center"><a href="#CRM-10">10</a></td></tr></tbody></table></div><div class="orderedlist"><p class="title"><b>Class Reader Methods</b></p><ol type="1"><li><a id="CRM-1"></a>This method returns the value which was
   associated with the <a href="#mop-class-mo">class metaobject</a> during initialization or
   reinitialization.</li><li><a id="CRM-2"></a>This method returns the value associated
   with the <a href="#mop-class-mo">class metaobject</a> by <span class="method"><code class="literal"><a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a>
    (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>)</code></span> or
   <span class="method"><code class="literal"><a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a>
    (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>)</code></span></li><li><a id="CRM-3"></a>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.</li><li><a id="CRM-4"></a>This method returns the empty list.
 </li><li><a id="CRM-5"></a>This method returns true.</li><li><a id="CRM-6"></a>This method returns false.</li><li><a id="CRM-7"></a>This method returns a value derived from
   the information in <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes">Table 29.1, “Direct Superclass Relationships
  Among The Specified Metaobject Classes”</a>, except that
   implementation-specific modifications are permitted as described in
   <a href="#mop-ov-impl-and-user-spec" title="29.1.2.2.1.&#xA0;Implementation and User Specialization">Section 29.1.2.2.1, “Implementation and User Specialization”</a>.</li><li><a id="CRM-8"></a>This method returns the name of the
   built-in class.</li><li><a id="CRM-9"></a>This methods returns a value which is
   maintained by <span class="method"><code class="literal"><a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><code class="function">CLOS:ADD-DIRECT-SUBCLASS</code></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span> and <span class="method"><code class="literal"><a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><code class="function">CLOS:REMOVE-DIRECT-SUBCLASS</code></a>
    (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span>.
   This method can be overridden only if those methods are overridden as
   well.</li><li><a id="CRM-10"></a>No behavior is specified for this
   method beyond that which is specified for the generic function.</li></ol></div></div>
<!--mop-cl-readers-methods-->
</div>
<!--mop-cl-readers-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-finalization"></a>29.1.3.4. Class Finalization Protocol</h4></div></div></div><p>Class <strong class="first"><em class="firstterm">finalization</em></strong> is the process of
computing the information a class inherits from its superclasses and
preparing to actually allocate instances of the class.  The class
finalization process includes computing the class's class precedence
list, the full set of slots accessible in instances of the class and the
full set of default initialization arguments for the class.  These
values are associated with the <a href="#mop-class-mo">class metaobject</a> and can be accessed by calling the
appropriate reader.  In addition, the class finalization process makes
decisions about how instances of the class will be implemented.</p><p>To support forward-referenced superclasses, and to account for the
fact that not all classes are actually instantiated, class finalization
is not done as part of the initialization of the <a href="#mop-class-mo">class metaobject</a>.  Instead,
finalization is done as a separate protocol, invoked by calling the
generic function <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a>.  The exact point at which
<a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> is called depends on the class of the <a href="#mop-class-mo">class metaobject</a>; for
<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> it is called sometime after all the classes
superclasses are defined, but no later than when the first instance of
the class is allocated (by <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><code class="function">ALLOCATE-INSTANCE</code></a>).</p><p>The first step of class finalization is computing the class
precedence list.  Doing this first allows subsequent steps to access the
class precedence list.  This step is performed by calling the generic
function <a href="#compute-cpl" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-CLASS-PRECEDENCE-LIST"><code class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</code></a>.  The value returned from this call is associated
with the <a href="#mop-class-mo">class metaobject</a> and can be accessed by calling the <a href="#cpl" title="29.1.3.3.5.&#xA0;Generic Function CLOS:CLASS-PRECEDENCE-LIST"><code class="function">CLOS:CLASS-PRECEDENCE-LIST</code></a> generic
function.</p><p>The second step is computing the full set of slots that will be
accessible in instances of the class.  This step is performed by calling
the generic function <a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a>.  The result of this call is a list
of <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s.  This value is associated with the <a href="#mop-class-mo">class metaobject</a> and can
be accessed by calling the <a href="#class-slots" title="29.1.3.3.7.&#xA0;Generic Function CLOS:CLASS-SLOTS"><code class="function">CLOS:CLASS-SLOTS</code></a> generic function.</p><p>The behavior of <a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a> is itself layered, consisting of
calls to <a href="#esd-class" title="29.1.3.6.14.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a> and <a href="#compute-esd" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</code></a>.</p><p>The final step of class finalization is computing the full set of
initialization arguments for the class.  This is done by calling the
generic function <a href="#compute-default-initargs" title="29.1.3.6.15.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><code class="function">CLOS:COMPUTE-DEFAULT-INITARGS</code></a>.  The value returned by this
generic function is associated with the <a href="#mop-class-mo">class metaobject</a> and can be
accessed by calling <a href="#class-default-initargs" title="29.1.3.3.8.&#xA0;Generic Function CLOS:CLASS-DEFAULT-INITARGS"><code class="function">CLOS:CLASS-DEFAULT-INITARGS</code></a>.</p><p>If the class was previously finalized, <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> may
call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_mak_ces-obsolete.html" target="_top"><code class="function">MAKE-INSTANCES-OBSOLETE</code></a>.  The circumstances under which this
happens are described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
 <a href="#redef-class" title="4.6.&#xA0;Redefining Classes&#10;  [CLHS-4.3.6]">Section 4.6, “Redefining Classes
  [CLHS-4.3.6]”</a>.</p><p>Forward-referenced classes, which provide a temporary definition
for a class which has been referenced but not yet defined, can never be
finalized.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> is called on a
forward-referenced class.</p></div>
<!--mop-cl-finalization-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-init"></a>29.1.3.5. Class Initialization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-cl-init-mo">29.1.3.5.1. Initialization of class metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#class-mo-init-methods">29.1.3.5.1.1. Methods</a></span></dt><dt><span class="section"><a href="#mop-cl-init-anon">29.1.3.5.1.2. Initialization of Anonymous Classes</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-cl-reinit-mo">29.1.3.5.2. Reinitialization of class metaobjects</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-cl-init-mo"></a>29.1.3.5.1. Initialization of <a href="#mop-class-mo">class metaobject</a>s</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#class-mo-init-methods">29.1.3.5.1.1. Methods</a></span></dt><dt><span class="section"><a href="#mop-cl-init-anon">29.1.3.5.1.2. Initialization of Anonymous Classes</a></span></dt></dl></div><p>A <a href="#mop-class-mo">class metaobject</a> can be created by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.
 The initialization arguments establish the definition of the class.
 A <a href="#mop-class-mo">class metaobject</a> can be redefined by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>.
 Some classes of <a href="#mop-class-mo">class metaobject</a> do not support redefinition;
 in these cases, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.</p><p>Initialization of a <a href="#mop-class-mo">class metaobject</a> must be done by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
and allowing it to call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>.  Reinitialization of a
<a href="#mop-class-mo">class metaobject</a> must be done by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>.  Portable
programs must <span class="strong"><strong>not</strong></span> </p><div class="itemizedlist"><ul type="disc"><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> directly to
    initialize a <a href="#mop-class-mo">class metaobject</a>;</li><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a> directly to
    initialize or reinitialize a <a href="#mop-class-mo">class metaobject</a>;</li><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><code class="function">CHANGE-CLASS</code></a> to change the class of any
    <a href="#mop-class-mo">class metaobject</a> or to turn a non-class object into a
    <a href="#mop-class-mo">class metaobject</a>.</li></ul></div><p>Since metaobject classes may not be redefined,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><code class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</code></a> on <a href="#mop-class-mo">class metaobject</a>s.
 Since the class of <a href="#mop-class-mo">class metaobject</a>s may not be changed,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_ferent-class.html" target="_top"><code class="function">UPDATE-INSTANCE-FOR-DIFFERENT-CLASS</code></a> on <a href="#mop-class-mo">class metaobject</a>s.</p><p>During initialization or reinitialization, each initialization
argument is checked for errors and then associated with the <a href="#mop-class-mo">class metaobject</a>.
The value can then be accessed by calling the appropriate accessor as
shown in <a href="#class-mo-initargs" title="Table&#xA0;29.2.&#xA0;Initialization arguments and&#10;   accessors for class metaobjects">Table 29.2, “Initialization arguments and
   accessors for class metaobjects”</a>.</p><p>This section begins with a description of the error checking and
processing of each initialization argument.  This is followed by a table
showing the generic functions that can be used to access the stored
initialization arguments.  Initialization behavior specific to the
different specified <a href="#mop-class-mo">class metaobject</a> classes comes next.  The section ends with a
set of restrictions on portable methods affecting <a href="#mop-class-mo">class metaobject</a> initialization
and reinitialization.</p><p>In these descriptions, the phrase “<span class="quote">this argument defaults to
<em class="replaceable"><code>value</code></em></span>” means that when that initialization argument is not
supplied, initialization or reinitialization is performed as if
<em class="replaceable"><code>value</code></em> had been supplied.  For some initialization arguments this
could be done by the use of default initialization arguments, but
whether it is done this way is not specified.  Implementations are free
to define default initialization arguments for specified <a href="#mop-class-mo">class metaobject</a> classes.
Portable programs are free to define default initialization arguments
for portable subclasses of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>.</p><p>Unless there is a specific note to the contrary, then during
reinitialization, if an initialization argument is not supplied, the
previously stored value is left unchanged.</p><div class="itemizedlist"><ul type="disc"><li><p>The <code class="constant">:DIRECT-DEFAULT-INITARGS</code> argument is a list
   of <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>s.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>, or if any
   element of the list is not a <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>.</p><p>If the <a href="#mop-class-mo">class metaobject</a> is being initialized, this argument
   defaults to the empty list.</p></li><li><p> The <code class="constant">:DIRECT-SLOTS</code> argument is a list of
   <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>s.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a> or if any
   element of the list is not a <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>.
  </p><p>After error checking, this value is converted to a
   list of <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s before it is associated with the <a href="#mop-class-mo">class metaobject</a>.  Conversion
   of each <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a> to a <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a> is a two-step process.
   First, the generic function <a href="#dsd-class" title="29.1.3.6.9.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><code class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</code></a> is called with the <a href="#mop-class-mo">class metaobject</a> and
   the <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a> to determine the class of the new
   <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>; this permits both the <a href="#mop-class-mo">class metaobject</a> and the
   <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a> to control the resulting <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a> class.
   Second, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> is applied to the direct <a href="#mop-slot-def-mo">slot definition metaobject</a> class and the
   <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>.
   This conversion could be implemented as shown in the
   following code:</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a> convert-to-direct-slot-definition (class canonicalized-slot)
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> #'<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
         (<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> #'<a href="#dsd-class" title="29.1.3.6.9.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><code class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</code></a>
                class canonicalized-slot)
         canonicalized-slot))
</pre><p>If the <a href="#mop-class-mo">class metaobject</a> is being initialized, this argument defaults to
   the empty list.</p><p>Once the <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s have been created, the specified reader and
   writer methods are created.  The generic functions
   <a href="#reader-method-class" title="29.1.7.2.1.&#xA0;Generic Function CLOS:READER-METHOD-CLASS"><code class="function">CLOS:READER-METHOD-CLASS</code></a> and <a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><code class="function">CLOS:WRITER-METHOD-CLASS</code></a> are called to
   determine the classes of the <a href="#mop-method-mo">method metaobject</a>s created.</p></li><li><p> The <code class="constant">:DIRECT-SUPERCLASSES</code> argument is a list of
   <a href="#mop-class-mo">class metaobject</a>s.  Classes which do not support multiple inheritance
   signal an error if the list contains more than one element.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a> or if
   <a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><code class="function">CLOS:VALIDATE-SUPERCLASS</code></a> applied to <em class="replaceable"><code>class</code></em> and any element of this
   list returns false.</p><p>When the <a href="#mop-class-mo">class metaobject</a> is being initialized, and this argument is
   either not supplied or is the empty list, this argument defaults as
   follows: if the class is an instance of <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> or one of
   its subclasses the default value is a list of the class
   <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a>; if the class is an instance of
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> or one of its subclasses the default
   value is a list of the class
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-OBJECT</code></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>If the class is an instance of
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><code class="classname">STRUCTURE-CLASS</code></a> or one of its subclasses the default value is a
    list of the class <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a></p></div><p>After any defaulting of the value, the generic function
   <a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><code class="function">CLOS:ADD-DIRECT-SUBCLASS</code></a> is called once for each element of the list.
  </p><p>When the <a href="#mop-class-mo">class metaobject</a> is being reinitialized and this
   argument is supplied, the generic function <a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><code class="function">CLOS:REMOVE-DIRECT-SUBCLASS</code></a>
   is called once for each <a href="#mop-class-mo">class metaobject</a> in the previously stored value but not
   in the new value; the generic function <a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><code class="function">CLOS:ADD-DIRECT-SUBCLASS</code></a> is
   called once for each <a href="#mop-class-mo">class metaobject</a> in the new value but not in the
   previously stored value.</p></li><li>The <code class="constant">:DOCUMENTATION</code> argument is
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>. An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if it is not. This argument default
 to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> during initialization.</li><li><p>The <code class="constant">:NAME</code> argument is an object.</p><p>If the class is being initialized, this argument defaults to
   <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p></li></ul></div><p>After the processing and defaulting of initialization arguments
described above, the value of each initialization argument is associated
with the <a href="#mop-class-mo">class metaobject</a>.  These values can then be accessed by calling
the corresponding generic function.  The correspondences are as follows:
 </p><div class="table"><a id="class-mo-initargs"></a><p class="title"><b>Table 29.2. Initialization arguments and
   accessors for <a href="#mop-class-mo">class metaobject</a>s</b></p><table summary="Initialization arguments and&#10;   accessors for class metaobjects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Initialization Argument</th><th align="center">Generic Function</th></tr></thead><tbody><tr><td align="center"><code class="constant">:DIRECT-DEFAULT-INITARGS</code></td><td align="center"><a href="#class-direct-default-initargs" title="29.1.3.3.4.&#xA0;Generic Function CLOS:CLASS-DIRECT-DEFAULT-INITARGS"><code class="function">CLOS:CLASS-DIRECT-DEFAULT-INITARGS</code></a></td></tr><tr><td align="center"><code class="constant">:DIRECT-SLOTS</code></td><td align="center"><a href="#class-direct-slots" title="29.1.3.3.3.&#xA0;Generic Function CLOS:CLASS-DIRECT-SLOTS"><code class="function">CLOS:CLASS-DIRECT-SLOTS</code></a></td></tr><tr><td align="center"><code class="constant">:DIRECT-SUPERCLASSES</code></td><td align="center"><a href="#class-direct-superclasses" title="29.1.3.3.2.&#xA0;Generic Function CLOS:CLASS-DIRECT-SUPERCLASSES"><code class="function">CLOS:CLASS-DIRECT-SUPERCLASSES</code></a></td></tr><tr><td align="center"><code class="constant">:DOCUMENTATION</code></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><code class="function">DOCUMENTATION</code></a></td></tr><tr><td align="center"><code class="constant">:NAME</code></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_class-name.html" target="_top"><code class="function">CLASS-NAME</code></a></td></tr></tbody></table></div><p>Instances of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> support multiple
inheritance and reinitialization.  Instances of the class
<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> support multiple inheritance and
reinitialization.  For forward referenced classes, all of the
initialization arguments default to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>Instances of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><code class="classname">STRUCTURE-CLASS</code></a> do
  not support multiple inheritance and reinitialization.
</p></div><p>Since built-in classes cannot be created or reinitialized by the
user, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>
are called to initialize or reinitialize a derived instance of the class
<a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="class-mo-init-methods"></a>29.1.3.5.1.1. Methods</h6></div></div></div><p>It is not specified which methods provide the initialization and
reinitialization behavior described above.  Instead, the information
needed to allow portable programs to specialize this behavior is
presented as a set of restrictions on the methods a portable program can
define.  The model is that portable initialization methods have access
to the <a href="#mop-class-mo">class metaobject</a> when either all or none of the specified initialization
has taken effect.</p><p>These restrictions govern the methods that a portable program can
 define on the generic functions <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>,
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>, and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a>.
 These restrictions apply only to methods on these generic functions for
 which the first specializer is a subclass of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>.
 Other portable methods on these generic functions are not affected by
 these restrictions.</p><div class="itemizedlist"><ul type="disc"><li>Portable programs must not define methods on
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a>.</li><li><p>For <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>:
   </p><div class="itemizedlist"><ul type="circle"><li>Portable programs must not define primary methods.
 </li><li>Portable programs may define around-methods, but
   these must be extending, not overriding methods.</li><li>Portable before-methods must assume that when they
   are run, none of the initialization behavior described above has been
   completed.</li><li>Portable after-methods must assume that when they
   are run, all of the initialization behavior described above has been
   completed.</li></ul></div></li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></div>
<!--class-mo-init-methods-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-cl-init-anon"></a>29.1.3.5.1.2. Initialization of Anonymous Classes</h6></div></div></div><p><a href="#mop-class-mo">class metaobject</a>s created with <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> are usually
 <strong class="first"><em class="firstterm">anonymous</em></strong>; that is, they have no <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_name" target="_top">proper name</a>.
An anonymous <a href="#mop-class-mo">class metaobject</a> can be given a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_name" target="_top">proper name</a> using
<code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><code class="function">FIND-CLASS</code></a>)</code> and
<code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_class-name.html" target="_top"><code class="function">CLASS-NAME</code></a>)</code>.</p><p>When a <a href="#mop-class-mo">class metaobject</a> is created with <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>, it is initialized
in the usual way.  The initialization arguments passed to
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> are use to establish the definition of the class.  Each
initialization argument is checked for errors and associated with the
<a href="#mop-class-mo">class metaobject</a>.  The initialization arguments correspond roughly to the
arguments accepted by the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> macro, and more closely to the
arguments accepted by the <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a> function.</p><p>Some <a href="#mop-class-mo">class metaobject</a> classes allow their instances to be
 redefined.  When permissible, this is done by calling
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>.  This is discussed in the
 <a href="#mop-cl-reinit-mo" title="29.1.3.5.2.&#xA0;Reinitialization of class metaobjects">next section</a>.</p><p>An example of creating an anonymous class directly using
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> follows:</p><pre class="programlisting">
(flet ((zero () 0)
       (propellor () *propellor*))
  (make-instance 'standard-class
    :name '(my-class foo)
    :direct-superclasses (list (find-class 'plane)
                               another-anonymous-class)
    :direct-slots `((:name x
                     :initform 0
                     :initfunction ,#'zero
                     :initargs (:x)
                     :readers (position-x)
                     :writers ((setf position-x)))
                    (:name y
                     :initform 0
                     :initfunction ,#'zero
                     :initargs (:y)
                     :readers (position-y)
                     :writers ((setf position-y))))
    :direct-default-initargs `((:engine *propellor* ,#'propellor))))
</pre></div>
<!--mop-cl-init-anon-->
</div>
<!--mop-cl-init-mo-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-cl-reinit-mo"></a>29.1.3.5.2. Reinitialization of <a href="#mop-class-mo">class metaobject</a>s</h5></div></div></div><p>Some <a href="#mop-class-mo">class metaobject</a> classes allow their instances to be
reinitialized.  This is done by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>.
The initialization arguments have the same interpretation as in class
initialization.</p><p>If the <a href="#mop-class-mo">class metaobject</a> was finalized before the call to
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>, <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> will be called again
once all the initialization arguments have been processed and associated
with the <a href="#mop-class-mo">class metaobject</a>.  In addition, once finalization is complete, any
dependents of the <a href="#mop-class-mo">class metaobject</a> will be updated by calling
<a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><code class="function">CLOS:UPDATE-DEPENDENT</code></a>.</p></div>
<!--mop-cl-reinit-mo-->
</div>
<!--mop-cl-init-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-customize"></a>29.1.3.6. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#setf-class-name">29.1.3.6.1. Generic Function <code class="code">(SETF CLASS-NAME)</code></a></span></dt><dt><span class="section"><a href="#ensure-class">29.1.3.6.2. Generic Function <code class="function">CLOS:ENSURE-CLASS</code></a></span></dt><dt><span class="section"><a href="#ensure-class-UC">29.1.3.6.3. Generic Function <code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#finalize-inheritance">29.1.3.6.4. Generic Function <code class="function">CLOS:FINALIZE-INHERITANCE</code></a></span></dt><dt><span class="section"><a href="#mop-make-instance">29.1.3.6.5. Generic Function <code class="function">MAKE-INSTANCE</code></a></span></dt><dt><span class="section"><a href="#alloc-instance">29.1.3.6.6. Generic Function <code class="function">ALLOCATE-INSTANCE</code></a></span></dt><dt><span class="section"><a href="#validate-superclass">29.1.3.6.7. Generic Function <code class="function">CLOS:VALIDATE-SUPERCLASS</code></a></span></dt><dt><span class="section"><a href="#compute-dsd-initargs">29.1.3.6.8. Generic Function <code class="function">CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS</code></a></span></dt><dt><span class="section"><a href="#dsd-class">29.1.3.6.9. Generic Function <code class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</code></a></span></dt><dt><span class="section"><a href="#compute-cpl">29.1.3.6.10. Generic Function <code class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</code></a></span></dt><dt><span class="section"><a href="#compute-slots">29.1.3.6.11. Generic Function <code class="function">CLOS:COMPUTE-SLOTS</code></a></span></dt><dt><span class="section"><a href="#compute-esd">29.1.3.6.12. Generic Function <code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</code></a></span></dt><dt><span class="section"><a href="#compute-esd-initargs">29.1.3.6.13. Generic Function <code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</code></a></span></dt><dt><span class="section"><a href="#esd-class">29.1.3.6.14. Generic Function <code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a></span></dt><dt><span class="section"><a href="#compute-default-initargs">29.1.3.6.15. Generic Function <code class="function">CLOS:COMPUTE-DEFAULT-INITARGS</code></a></span></dt></dl></div>
<!--begin class basic customization-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="setf-class-name"></a>29.1.3.6.1. Generic Function <a href="#setf-class-name" title="29.1.3.6.1.&#xA0;Generic Function (SETF CLASS-NAME)"><code class="code">(SETF CLASS-NAME)</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#setf-class-name" title="29.1.3.6.1.&#xA0;Generic Function (SETF CLASS-NAME)"><code class="code">(SETF CLASS-NAME)</code></a> <em class="replaceable"><code>new-name</code></em>
 <em class="replaceable"><code>class</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>new-name</code></em></span></dt><dd>any Lisp object.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>This function returns its <em class="replaceable"><code>new-name</code></em> argument.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This function changes the name of <em class="replaceable"><code>class</code></em> to <em class="replaceable"><code>new-name</code></em>.
   This value is usually a symbol, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if the class has no name.</p><p>This function works by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a> with
   <em class="replaceable"><code>class</code></em> as its first argument, the symbol <code class="constant">:NAME</code> as its second
   argument and <em class="replaceable"><code>new-name</code></em> as its third argument.
</p></dd></dl></div></div>
<!--setf-class-name-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ensure-class"></a>29.1.3.6.2. Generic Function <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a> <em class="replaceable"><code>name</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>name</code></em></span></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>.</dd><dt><span class="term">keyword arguments</span></dt><dd>Some of the keyword arguments accepted by this
      function are actually processed by <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a>,
      others are processed during initialization of the <a href="#mop-class-mo">class metaobject</a>
      (as described in <a href="#mop-cl-init-mo" title="29.1.3.5.1.&#xA0;Initialization of class metaobjects">Section 29.1.3.5.1, “Initialization of class metaobjects”</a>).
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result is a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term">Purpose</span></dt><dd><p>This function is called to define or redefine a
   class with the specified name, and can be called by the user or the
   implementation.  It is the functional equivalent of <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a>, and
   is called by the expansion of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> macro.</p><p>The behavior of this function is actually implemented by the
   generic function <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a>.  When <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a> is called,
   it immediately calls <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a> and returns that result as its
   own.</p><p>The first argument to <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a> is computed as
   follows:</p><div class="itemizedlist"><ul type="disc"><li>If <em class="replaceable"><code>name</code></em> names a class (<a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><code class="function">FIND-CLASS</code></a> returns a
      class when called with <em class="replaceable"><code>name</code></em>) use that class.</li><li>Otherwise use <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li></ul></div><p>
   The second argument is <em class="replaceable"><code>name</code></em>.  The remaining arguments are the
   complete set of keyword arguments received by the <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>
   function.</p></dd></dl></div></div>
<!--ensure-class-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ensure-class-UC"></a>29.1.3.6.3. Generic Function <a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a> <em class="replaceable"><code>class</code></em> <em class="replaceable"><code>name</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    <code class="constant">:DIRECT-DEFAULT-INITARGS</code> <code class="constant">:DIRECT-SLOTS</code> <code class="constant">:DIRECT-SUPERCLASSES</code>
    <code class="constant">:NAME</code> <code class="constant">:METACLASS</code> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)
 </code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><span class="term"><em class="replaceable"><code>name</code></em></span></dt><dd>a class name.</dd><dt><span class="term"><code class="constant">:METACLASS</code></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a> class or a <a href="#mop-class-mo">class metaobject</a> class name.  If this
      argument is not supplied, it defaults to the class named
      <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>.  If a class name is supplied, it is interpreted
      as the class with that name.  If a class name is supplied, but
      there is no such class, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</dd><dt><span class="term"><code class="constant">:DIRECT-SUPERCLASSES</code></span></dt><dd>a list of which each element is a <a href="#mop-class-mo">class metaobject</a> or a
      class name.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this argument is not a
      <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>.</dd><dt><span class="term">additional keyword arguments</span></dt><dd>See <a href="#mop-cl-init-mo" title="29.1.3.5.1.&#xA0;Initialization of class metaobjects">Section 29.1.3.5.1, “Initialization of class metaobjects”</a>
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result is a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to define or modify
   the definition of a named class.  It is called by the <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>
   function.  It can also be called directly.</p><p>The first step performed by this generic function is to
   compute the set of initialization arguments which will be used to
   create or reinitialize the named class.  The initialization arguments
   are computed from the full set of keyword arguments received by this
   generic function as follows:</p><div class="itemizedlist"><ul type="disc"><li>The <code class="constant">:METACLASS</code> argument is not included in the
      initialization arguments.</li><li><p>If the <code class="constant">:DIRECT-SUPERCLASSES</code> argument was received
      by this generic function, it is converted into a list of <a href="#mop-class-mo">class metaobject</a>s.
      This conversion does not affect the structure of the supplied
      <code class="constant">:DIRECT-SUPERCLASSES</code> argument.  For each element in the
      <code class="constant">:DIRECT-SUPERCLASSES</code> argument:</p><div class="itemizedlist"><ul type="circle"><li>If the element is a <a href="#mop-class-mo">class metaobject</a>, that
         <a href="#mop-class-mo">class metaobject</a> is used.</li><li>If the element names a class, that <a href="#mop-class-mo">class metaobject</a> is
         used.</li><li><p>Otherwise an instance of the class
         <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> is created and used.
         The <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_name" target="_top">proper name</a> of the newly created forward referenced
         <a href="#mop-class-mo">class metaobject</a> is set to the element.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>A new <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a>
          instance is only created when one for the given class name
          does not yet exist; otherwise the existing one is reused.
          See <a href="#forward-referenced-class-clisp" title="Implementation of class CLOS:FORWARD-REFERENCED-CLASS in CLISP">Implementation of class <code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code> in <span><strong class="command">CLISP</strong></span></a>.</p></div></li></ul></div></li><li>All other keyword arguments are included directly
      in the initialization arguments.</li></ul></div><p>If the <em class="replaceable"><code>class</code></em> argument is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, a new <a href="#mop-class-mo">class metaobject</a> is created
   by calling the <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> generic function with the value of the
   <code class="constant">:METACLASS</code> argument as its first argument, and the previously
   computed initialization arguments.  The <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_name" target="_top">proper name</a> of the
   newly created <a href="#mop-class-mo">class metaobject</a> is set to <em class="replaceable"><code>name</code></em>.  The newly created <a href="#mop-class-mo">class metaobject</a> is
   returned.</p><p>If the <em class="replaceable"><code>class</code></em> argument is a forward referenced class,
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><code class="function">CHANGE-CLASS</code></a> is called to change its class to the value specified
   by the <code class="constant">:METACLASS</code> argument.  The <a href="#mop-class-mo">class metaobject</a> is then reinitialized with
   the previously initialization arguments.  (This is a documented
   violation of the general constraint that <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><code class="function">CHANGE-CLASS</code></a> may not be
   used with <a href="#mop-class-mo">class metaobject</a>s.)</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>
    The <em class="replaceable"><code>class</code></em> argument cannot be a forward referenced class. See
    <a href="#forward-referenced-class-clisp" title="Implementation of class CLOS:FORWARD-REFERENCED-CLASS in CLISP">Implementation of class <code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code> in <span><strong class="command">CLISP</strong></span></a>.</p></div><p>If the class of the <em class="replaceable"><code>class</code></em> argument is not the same as the
   class specified by the <code class="constant">:METACLASS</code> argument, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p><p>Otherwise, the <a href="#mop-class-mo">class metaobject</a> <em class="replaceable"><code>class</code></em> is redefined by calling the
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a> generic function with <em class="replaceable"><code>class</code></em> and the
   initialization arguments.  The <em class="replaceable"><code>class</code></em> argument is then
   returned.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>) <em class="replaceable"><code>name</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:METACLASS</code>
   <code class="constant">:DIRECT-SUPERCLASSES</code> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)</code></span></span></dt><dd><p>This method implements the behavior of the generic
   function in the case where the <em class="replaceable"><code>class</code></em> argument is a class.</p><p>This method can be overridden.</p></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a>) <em class="replaceable"><code>name</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:METACLASS</code>
   <code class="constant">:DIRECT-SUPERCLASSES</code> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)</code></span></span></dt><dd><p>This method implements the behavior of the generic
   function in the case where the <em class="replaceable"><code>class</code></em> argument is a forward
   referenced class.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>This method does not exist.
   See <a href="#forward-referenced-class-clisp" title="Implementation of class CLOS:FORWARD-REFERENCED-CLASS in CLISP">Implementation of class <code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code> in <span><strong class="command">CLISP</strong></span></a>.
   Use the method specialized on <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><code class="classname">NULL</code></a> instead.</p></div></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#ensure-class-UC" title="29.1.3.6.3.&#xA0;Generic Function CLOS:ENSURE-CLASS-USING-CLASS"><code class="function">CLOS:ENSURE-CLASS-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><code class="classname">NULL</code></a>) <em class="replaceable"><code>name</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:METACLASS</code>
   <code class="constant">:DIRECT-SUPERCLASSES</code> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)</code></span></span></dt><dd>This method implements the behavior of the generic
   function in the case where the <em class="replaceable"><code>class</code></em> argument is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
</dd></dl></div></div>
<!--ensure-class-UC-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="finalize-inheritance"></a>29.1.3.6.4. Generic Function <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a>
     <em class="replaceable"><code>class</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic
 function is unspecified.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to finalize a <a href="#mop-class-mo">class metaobject</a>.
   This is described in <a href="#mop-cl-finalization" title="29.1.3.4.&#xA0;Class Finalization Protocol">Section 29.1.3.4, “Class Finalization Protocol”</a>
  </p><p>After <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> returns, the <a href="#mop-class-mo">class metaobject</a> is
   finalized and the result of calling <a href="#class-finalized-p" title="29.1.3.3.9.&#xA0;Generic Function CLOS:CLASS-FINALIZED-P"><code class="function">CLOS:CLASS-FINALIZED-P</code></a> on the <a href="#mop-class-mo">class metaobject</a>
   will be true.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>))</code></span></span></dt><dd>No behavior is specified for these
   methods beyond that which is specified for their respective generic
   functions.</dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a>))</code></span></span></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.
</dd></dl></div></div>
<!--finalize-inheritance-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-make-instance"></a>29.1.3.6.5. Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> <em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a>
    <em class="replaceable"><code>initargs</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a> or a class name.
   </dd><dt><span class="term"><em class="replaceable"><code>initargs</code></em></span></dt><dd>a list of alternating initialization argument
      names and values.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result is a newly allocated and initialized
 instance of <em class="replaceable"><code>class</code></em>.</dd><dt><span class="term">Purpose</span></dt><dd>The generic function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> creates and
   returns a new instance of the given class.  Its behavior and use is
   described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
</dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span></span></dt><dd>This method simply invokes <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
   recursively on the arguments <span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><code class="function">FIND-CLASS</code></a>
   <em class="replaceable"><code>class</code></em>)</code></span> and <em class="replaceable"><code>initargs</code></em>.</dd><dt><span class="term"><span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> (<em class="replaceable"><code>class</code></em>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> (<em class="replaceable"><code>class</code></em>
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span></span></dt><dd>These methods implement the behavior of
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
   <a href="http://www.lisp.org/HyperSpec/Body/sec_7-1.html" target="_top">7.1
    “<span class="quote">Object Creation and Initialization</span>”</a>.
</dd></dl></div></div>
<!--mop-make-instance-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="alloc-instance"></a>29.1.3.6.6. Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><code class="function">ALLOCATE-INSTANCE</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><code class="function">ALLOCATE-INSTANCE</code></a> <em class="replaceable"><code>class</code></em>
     <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>initargs</code></em></span></dt><dd>alternating initialization argument names and
      values.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned is a newly allocated instance of
   <em class="replaceable"><code>class</code></em></dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to create a new,
   uninitialized instance of a class.  The interpretation of the concept
   of an <strong class="first"><em class="firstterm">uninitialized</em></strong> instance depends on the
   <a href="#mop-class-mo">class metaobject</a> class.</p><p>Before allocating the new instance, <a href="#class-finalized-p" title="29.1.3.3.9.&#xA0;Generic Function CLOS:CLASS-FINALIZED-P"><code class="function">CLOS:CLASS-FINALIZED-P</code></a> is
   called to see if <em class="replaceable"><code>class</code></em> has been finalized.  If it has not been
   finalized, <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> is called before the new instance
   is allocated.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><code class="function">ALLOCATE-INSTANCE</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em></code></span></span></dt><dd>This method allocates storage in the instance for
   each slot with allocation <code class="constant">:INSTANCE</code>.  These slots are unbound.
   Slots with any other allocation are ignored by this method (no
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed).</dd><dt><span class="term"><span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><code class="function">ALLOCATE-INSTANCE</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>)
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span></span></dt><dd><p>This method allocates storage in the instance for
   each slot with allocation <code class="constant">:INSTANCE</code>.  These slots are unbound.
   Slots with any other allocation are ignored by this method (no
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed).</p><p>The funcallable instance function of the instance is
   undefined - the results are undefined if the instance is applied to
   arguments before <a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><code class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</code></a> has been used
   to set the funcallable instance function.
</p></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><code class="function">ALLOCATE-INSTANCE</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span></span></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.
</dd></dl></div></div>
<!--alloc-instance-->
<!--end class basic customization-->
<!--begin class advanced customization-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="validate-superclass"></a>29.1.3.6.7. Generic Function <a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><code class="function">CLOS:VALIDATE-SUPERCLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><code class="function">CLOS:VALIDATE-SUPERCLASS</code></a> <em class="replaceable"><code>class</code></em>
    <em class="replaceable"><code>superclass</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>superclass</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>This generic function returns true or false.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to determine whether
   the class <em class="replaceable"><code>superclass</code></em> is suitable for use as a superclass of
   <em class="replaceable"><code>class</code></em>.</p><p>This generic function can be be called by the implementation
   or user code.  It is called during <a href="#mop-class-mo">class metaobject</a> initialization and
   reinitialization, before the direct superclasses are stored.  If this
   generic function returns false, the initialization or
   reinitialization will signal an error.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><code class="function">CLOS:VALIDATE-SUPERCLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>) (<em class="replaceable"><code>superclass</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>))</code></span></span></dt><dd><p>This method returns true in three situations:
  </p><div class="orderedlist"><ol type="i"><li>If the <em class="replaceable"><code>superclass</code></em> argument is the class named <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>,
   </li><li>if the class of the <em class="replaceable"><code>class</code></em> argument is the same
     as the class of the <em class="replaceable"><code>superclass</code></em> argument, or
   </li><li>if the class of one of the arguments is
     <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> and the class of the other is
     <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>.</li></ol></div><p>In all other cases, this method returns false.</p><p>This method can be overridden.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>This method also returns true in a fourth situation:
   </p><div class="orderedlist"><ol start="4" type="i"><li>If the class of the <em class="replaceable"><code>class</code></em> argument is a subclass
      of the class of the <em class="replaceable"><code>superclass</code></em> argument.
 </li></ol></div></div></dd></dl></div><p><b>Remarks. </b>Defining a method on <a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><code class="function">CLOS:VALIDATE-SUPERCLASS</code></a> requires detailed
 knowledge of of the internal protocol followed by each of the two
 <a href="#mop-class-mo">class metaobject</a> classes.  A method on <a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><code class="function">CLOS:VALIDATE-SUPERCLASS</code></a> which returns true
 for two different <a href="#mop-class-mo">class metaobject</a> classes declares that they are
 compatible.</p></div>
<!--validate-superclass-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-dsd-initargs"></a>29.1.3.6.8. Generic Function <a href="#compute-dsd-initargs" title="29.1.3.6.8.&#xA0;Generic Function CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS</code></a></h5></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p></p></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#compute-dsd-initargs" title="29.1.3.6.8.&#xA0;Generic Function CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS</code></a> <em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a>
     <em class="replaceable"><code>slot-spec</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>slot-spec</code></em></span></dt><dd>a
       <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic function is a
   list of initialization arguments for a <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function determines the initialization
   arguments for the direct slot definition for a slot in a class.
   It is called during initialization of a class.  The resulting
   initialization arguments are passed to <a href="#dsd-class" title="29.1.3.6.9.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><code class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</code></a> and then to
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.</p><p>This generic function uses the supplied <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>.
   The value of <code class="constant">:NAME</code> in the returned initargs is the same as the value
   of <code class="constant">:NAME</code> in the supplied <em class="replaceable"><code>slot-spec</code></em> argument.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#compute-dsd-initargs" title="29.1.3.6.8.&#xA0;Generic Function CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>slot-spec</code></em>)</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#compute-dsd-initargs" title="29.1.3.6.8.&#xA0;Generic Function CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS</code></a> (<em class="replaceable"><code>class</code></em>
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>slot-spec</code></em>)</code></span></span></dt><dd><p>This method returns <em class="replaceable"><code>slot-spec</code></em> unmodified.</p><p>This method can be overridden.</p></dd></dl></div></div>
<!--compute-dsd-initargs-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="dsd-class"></a>29.1.3.6.9. Generic Function <a href="#dsd-class" title="29.1.3.6.9.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><code class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#dsd-class" title="29.1.3.6.9.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><code class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</code></a> <em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a>
    <em class="replaceable"><code>initargs</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>initargs</code></em></span></dt><dd>a set of initialization arguments and values.
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned is a subclass of the class <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:DIRECT-SLOT-DEFINITION</code></a>.
</dd><dt><span class="term">Purpose</span></dt><dd><p>When a class is initialized, each of the
   <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a>s must be converted to a <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.
   This generic function is called to determine
   the class of that <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.</p><p>The <em class="replaceable"><code>initargs</code></em> argument is simply the
   <a href="#mop-canonicalized-slot-spec">canonicalized slot specification</a> for the slot.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#dsd-class" title="29.1.3.6.9.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><code class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</code></a>
    (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#dsd-class" title="29.1.3.6.9.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><code class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</code></a> (<em class="replaceable"><code>class</code></em>
    <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span></span></dt><dd><p>These methods return the class <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</code></a>.
  </p><p>These methods can be overridden.</p></dd></dl></div></div>
<!--dsd-class-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-cpl"></a>29.1.3.6.10. Generic Function <a href="#compute-cpl" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-CLASS-PRECEDENCE-LIST"><code class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#compute-cpl" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-CLASS-PRECEDENCE-LIST"><code class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</code></a>
     <em class="replaceable"><code>class</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic function is a
   list of <a href="#mop-class-mo">class metaobject</a>s.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic-function is called to determine the
   class precedence list of a class.</p><p>The result is a list which contains each of <em class="replaceable"><code>class</code></em> and its
   superclasses once and only once.  The first element of the list is
   <em class="replaceable"><code>class</code></em> and the last element is the class named <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>.</p><p>All methods on this generic function must compute the class
   precedence list as a function of the ordered direct superclasses of
   the superclasses of <em class="replaceable"><code>class</code></em>.  The results are undefined if the
   rules used to compute the class precedence list depend on any other
   factors.</p><p>When a class is finalized, <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> calls this
   generic function and associates the returned value with the <a href="#mop-class-mo">class metaobject</a>.
   The value can then be accessed by calling <a href="#cpl" title="29.1.3.3.5.&#xA0;Generic Function CLOS:CLASS-PRECEDENCE-LIST"><code class="function">CLOS:CLASS-PRECEDENCE-LIST</code></a>.</p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#compute-cpl" title="29.1.3.6.10.&#xA0;Generic Function CLOS:COMPUTE-CLASS-PRECEDENCE-LIST"><code class="function">CLOS:COMPUTE-CLASS-PRECEDENCE-LIST</code></a> (<em class="replaceable"><code>class</code></em>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>))</code></span></span></dt><dd><p>This method computes the class precedence list
   according to the rules described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
   <a href="http://www.lisp.org/HyperSpec/Body/sec_4-3-5.html" target="_top">4.3.5 “<span class="quote">Determining the
     Class Precedence List</span>”</a>.</p><p>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> if <em class="replaceable"><code>class</code></em> or any of its superclasses
  is a forward referenced class.</p><p>This method can be overridden.</p></dd></dl></div></div>
<!--compute-cpl-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-slots"></a>29.1.3.6.11. Generic Function <a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a> <em class="replaceable"><code>class</code></em>)
 </code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned is a set of <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function computes a set of effective
   <a href="#mop-slot-def-mo">slot definition metaobject</a>s for the class <em class="replaceable"><code>class</code></em>.  The result is a list of <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s:
   one for each slot that will be accessible in instances of <em class="replaceable"><code>class</code></em>.
  </p><p>This generic function proceeds in 3 steps:</p><p>The first step collects the full set of direct slot
   definitions from the superclasses of <em class="replaceable"><code>class</code></em>.</p><p>The direct slot definitions are then collected into
   individual lists, one list for each slot name associated with any of
   the direct slot definitions.  The slot names are compared with
   <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a>.  Each such list is then sorted into class precedence list
   order.  Direct slot definitions coming from classes earlier in the
   class precedence list of <em class="replaceable"><code>class</code></em> appear before those coming from
   classes later in the class precedence list.  For each slot name, the
   generic function <a href="#compute-esd" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</code></a> is called to compute an effective slot
   definition.  The result of <a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a> is a list of these
   effective slot definitions, in unspecified order.</p><p>In the final step, the location for each effective slot
   definition is set.  This is done by specified around-methods;
   portable methods cannot take over this behavior.
   For more information on the slot definition locations,
   see <a href="#mop-sa-instance-stuct" title="29.1.10.1.&#xA0;Instance Structure Protocol">Section 29.1.10.1, “Instance Structure Protocol”</a>.</p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>)}</code></span></span></dt><dd><p>These methods implement the specified behavior of
   the generic function.</p><p>These methods can be overridden.</p></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a>
   <code class="constant">:AROUND</code> (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a> <code class="constant">:AROUND</code>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>))</code></span></span></dt><dd>These methods implement the specified behavior of
   computing and storing slot locations.
   These methods cannot be overridden.
</dd></dl></div></div>
<!--compute-slots-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-esd"></a>29.1.3.6.12. Generic Function <a href="#compute-esd" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#compute-esd" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</code></a> <em class="replaceable"><code>class</code></em> <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>direct-slot-definitions</code></em>)
 </code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>name</code></em></span></dt><dd>a slot name.</dd><dt><span class="term"><em class="replaceable"><code>direct-slot-definitions</code></em></span></dt><dd>an ordered list of <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s.  The most specific
      <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a> appears first in the list.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic function is an
   <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function determines the effective slot
   definition for a slot in a class.  It is called by <a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a>
   once for each slot accessible in instances of <em class="replaceable"><code>class</code></em>.</p><p>This generic function uses the supplied list of <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s to
   compute the inheritance of slot properties for a single slot.  The
   returned effective slot definition represents the result of computing
   the inheritance.  The name of the new effective slot definition is
   the same as the name of the direct slot definitions supplied.</p><p>The class of the <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a> is determined by calling
   <a href="#esd-class" title="29.1.3.6.14.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a>.  The effective slot definition is then created by
   calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.  The initialization arguments passed in this
   call to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> are used to initialize the new <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.
   See <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions">Section 29.1.4, “Slot Definitions”</a> for details.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#compute-esd" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</code></a> (<em class="replaceable"><code>class</code></em>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>direct-slot-definitions</code></em>)</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#compute-esd" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</code></a> (<em class="replaceable"><code>class</code></em>
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>direct-slot-definitions</code></em>)</code></span></span></dt><dd><p>This method implements the
 inheritance and defaulting of slot options following the rules
 described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section <a href="http://www.lisp.org/HyperSpec/Body/sec_7-5-3.html" target="_top">7.5.3 “<span class="quote">Inheritance of Slots and Options</span>”</a>.</p><p>This method can be extended, but the value returned by the
   extending method must be the value returned by this method.
</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The initialization arguments that are passed
  to <a href="#esd-class" title="29.1.3.6.14.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> are computed through a call to
  <a href="#compute-esd-initargs" title="29.1.3.6.13.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</code></a>.  It is the <a href="#compute-esd-initargs" title="29.1.3.6.13.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</code></a> method that
  implements the inheritance rules.</p></div></div>
<!--compute-esd-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-esd-initargs"></a>29.1.3.6.13. Generic Function <a href="#compute-esd-initargs" title="29.1.3.6.13.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</code></a></h5></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p></p></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#compute-esd-initargs" title="29.1.3.6.13.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</code></a> <em class="replaceable"><code>class</code></em> <em class="replaceable"><code>direct-slot-definitions</code></em>)
 </code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>direct-slot-definitions</code></em></span></dt><dd>an ordered list of <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s.  The most specific
      <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a> appears first in the list.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic function is a
   list of initialization arguments for an <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function determines the initialization
   arguments for the effective slot definition for a slot in a class.
   It is called by <a href="#compute-esd" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</code></a>.  The resulting initialization arguments
   are passed to <a href="#esd-class" title="29.1.3.6.14.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a> and then to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.</p><p>This generic function uses the supplied list of <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s to
   compute the inheritance of slot properties for a single slot.  The
   returned effective slot definition initargs represent the result of
   computing the inheritance.  The value of <code class="constant">:NAME</code> in the returned
   initargs is the same as the name of the direct slot definitions
   supplied.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#compute-esd-initargs" title="29.1.3.6.13.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <em class="replaceable"><code>direct-slot-definitions</code></em>)</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#compute-esd-initargs" title="29.1.3.6.13.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</code></a> (<em class="replaceable"><code>class</code></em>
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <em class="replaceable"><code>direct-slot-definitions</code></em>)</code></span></span></dt><dd><p>This method implements the
 inheritance and defaulting of slot options following the rules
 described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section <a href="http://www.lisp.org/HyperSpec/Body/sec_7-5-3.html" target="_top">7.5.3 “<span class="quote">Inheritance of Slots and Options</span>”</a>.</p><p>This method can be extended.</p></dd></dl></div></div>
<!--compute-esd-initargs-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="esd-class"></a>29.1.3.6.14. Generic Function <a href="#esd-class" title="29.1.3.6.14.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#esd-class" title="29.1.3.6.14.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a> <em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a>
    <em class="replaceable"><code>initargs</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>initargs</code></em></span></dt><dd>set of initialization arguments and values.
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned is a subclass of the class <a href="#esd-class" title="29.1.3.6.14.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a>.
</dd><dt><span class="term">Purpose</span></dt><dd>This generic function is called by <a href="#compute-esd" title="29.1.3.6.12.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION</code></a> to
   determine the class of the resulting <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.  The <em class="replaceable"><code>initargs</code></em>
   argument is the set of initialization arguments and values that will
   be passed to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> when the <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a> is created.
</dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#esd-class" title="29.1.3.6.14.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#esd-class" title="29.1.3.6.14.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a> (<em class="replaceable"><code>class</code></em>
   <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span></span></dt><dd><p>These methods return the class <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a>.
  </p><p>These methods can be overridden.</p></dd></dl></div></div>
<!--esd-class-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-default-initargs"></a>29.1.3.6.15. Generic Function <a href="#compute-default-initargs" title="29.1.3.6.15.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><code class="function">CLOS:COMPUTE-DEFAULT-INITARGS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#compute-default-initargs" title="29.1.3.6.15.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><code class="function">CLOS:COMPUTE-DEFAULT-INITARGS</code></a>
    <em class="replaceable"><code>class</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic function is a
   list of <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>s.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic-function is called to determine the
   default initialization arguments for a class.</p><p>The result is a list of <a href="#mop-canonicalized-default-initarg">canonicalized default initialization argument</a>s,
  with no duplication among initialization argument names.</p><p>All methods on this generic function must compute the default
  initialization arguments as a function of only:
  </p><div class="orderedlist"><ol type="i"><li>the class precedence list of <em class="replaceable"><code>class</code></em>,
     and</li><li>the direct default initialization arguments of each
     class in that list.</li></ol></div><p>The results are undefined if the rules used to compute
  the default initialization arguments depend on any other factors.</p><p>When a class is finalized, <a href="#finalize-inheritance" title="29.1.3.6.4.&#xA0;Generic Function CLOS:FINALIZE-INHERITANCE"><code class="function">CLOS:FINALIZE-INHERITANCE</code></a> calls this
  generic function and associates the returned value with the <a href="#mop-class-mo">class metaobject</a>.
  The value can then be accessed by calling
  <a href="#class-default-initargs" title="29.1.3.3.8.&#xA0;Generic Function CLOS:CLASS-DEFAULT-INITARGS"><code class="function">CLOS:CLASS-DEFAULT-INITARGS</code></a>.</p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#compute-default-initargs" title="29.1.3.6.15.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><code class="function">CLOS:COMPUTE-DEFAULT-INITARGS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#compute-default-initargs" title="29.1.3.6.15.&#xA0;Generic Function CLOS:COMPUTE-DEFAULT-INITARGS"><code class="function">CLOS:COMPUTE-DEFAULT-INITARGS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>))</code></span></span></dt><dd><p>These methods compute the default initialization
   arguments according to the rules described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
   <a href="http://www.lisp.org/HyperSpec/Body/sec_7-1-3.html" target="_top">7.1.3 “<span class="quote">Defaulting
     of Initialization Arguments</span>”</a>.</p><p>These methods signal an error if <em class="replaceable"><code>class</code></em> or any of its
   superclasses is a forward referenced class.</p><p>These methods can be overridden.</p></dd></dl></div></div>
<!--compute-default-initargs-->
<!--end class advanced customization-->
</div>
<!--mop-cl-customize-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-cl-dep"></a>29.1.3.7. Updating Dependencies</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#add-direct-subclass">29.1.3.7.1. Generic Function <code class="function">CLOS:ADD-DIRECT-SUBCLASS</code></a></span></dt><dt><span class="section"><a href="#remove-direct-subclass">29.1.3.7.2. Generic Function <code class="function">CLOS:REMOVE-DIRECT-SUBCLASS</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="add-direct-subclass"></a>29.1.3.7.1. Generic Function <a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><code class="function">CLOS:ADD-DIRECT-SUBCLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><code class="function">CLOS:ADD-DIRECT-SUBCLASS</code></a> <em class="replaceable"><code>superclass</code></em>
    <em class="replaceable"><code>subclass</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>superclass</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>subclass</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic
 function is unspecified.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to maintain a set of
   backpointers from a class to its direct subclasses.  This generic
   function adds <em class="replaceable"><code>subclass</code></em> to the set of direct subclasses of
   <em class="replaceable"><code>superclass</code></em>.</p><p>When a class is initialized, this generic function is called
   once for each direct superclass of the class.</p><p>When a class is reinitialized, this generic function is
   called once for each added direct superclass of the class.  The
   generic function <a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><code class="function">CLOS:REMOVE-DIRECT-SUBCLASS</code></a> is called once for each
   deleted direct superclass of the class.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><code class="function">CLOS:ADD-DIRECT-SUBCLASS</code></a>
   (<em class="replaceable"><code>superclass</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>) (<em class="replaceable"><code>subclass</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>))</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><code class="function">CLOS:REMOVE-DIRECT-SUBCLASS</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#class-direct-subclasses" title="29.1.3.3.6.&#xA0;Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><code class="function">CLOS:CLASS-DIRECT-SUBCLASSES</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span></li></ul></div><p>
</p></dd></dl></div></div>
<!--add-direct-subclass-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="remove-direct-subclass"></a>29.1.3.7.2. Generic Function <a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><code class="function">CLOS:REMOVE-DIRECT-SUBCLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><code class="function">CLOS:REMOVE-DIRECT-SUBCLASS</code></a> <em class="replaceable"><code>superclass</code></em>
    <em class="replaceable"><code>subclass</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>superclass</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>subclass</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic
 function is unspecified.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to maintain a set of
   backpointers from a class to its direct subclasses.  It removes
   <em class="replaceable"><code>subclass</code></em> from the set of direct subclasses of <em class="replaceable"><code>superclass</code></em>.  No
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if <em class="replaceable"><code>subclass</code></em> is not in this set.</p><p>Whenever a class is reinitialized, this generic function is
   called once with each deleted direct superclass of the class.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#remove-direct-subclass" title="29.1.3.7.2.&#xA0;Generic Function CLOS:REMOVE-DIRECT-SUBCLASS"><code class="function">CLOS:REMOVE-DIRECT-SUBCLASS</code></a>
   (<em class="replaceable"><code>superclass</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>) (<em class="replaceable"><code>subclass</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>))</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#add-direct-subclass" title="29.1.3.7.1.&#xA0;Generic Function CLOS:ADD-DIRECT-SUBCLASS"><code class="function">CLOS:ADD-DIRECT-SUBCLASS</code></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#class-direct-subclasses" title="29.1.3.3.6.&#xA0;Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><code class="function">CLOS:CLASS-DIRECT-SUBCLASSES</code></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span></li></ul></div></dd></dl></div></div>
<!--remove-direct-subclass-->
</div>
<!--mop-cl-dep-->
</div>
<!--mop-classes-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-sd"></a>29.1.4. Slot Definitions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-sd-inheritance">29.1.4.1. Inheritance Structure of slot definition metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-sd-readers">29.1.4.2. Introspection: Readers for slot definition metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-sd-readers-GFs">29.1.4.2.1. Generic Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#slotdef-name">29.1.4.2.1.1. Generic Function <code class="function">CLOS:SLOT-DEFINITION-NAME</code></a></span></dt><dt><span class="section"><a href="#slotdef-allocation">29.1.4.2.1.2. Generic Function <code class="function">CLOS:SLOT-DEFINITION-ALLOCATION</code></a></span></dt><dt><span class="section"><a href="#slotdef-initform">29.1.4.2.1.3. Generic Function <code class="function">CLOS:SLOT-DEFINITION-INITFORM</code></a></span></dt><dt><span class="section"><a href="#slotdef-initfunction">29.1.4.2.1.4. Generic Function <code class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</code></a></span></dt><dt><span class="section"><a href="#slotdef-type">29.1.4.2.1.5. Generic Function <code class="function">CLOS:SLOT-DEFINITION-TYPE</code></a></span></dt><dt><span class="section"><a href="#slotdef-initargs">29.1.4.2.1.6. Generic Function <code class="function">CLOS:SLOT-DEFINITION-INITARGS</code></a></span></dt></dl></dd><dt><span class="section"><a href="#slotd-mo-readers-methods">29.1.4.2.2. Methods</a></span></dt><dt><span class="section"><a href="#slotd-mo-readers-dsd">29.1.4.2.3. Readers for direct slot definition metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#slotdef-readers">29.1.4.2.3.1. Generic Function <code class="function">CLOS:SLOT-DEFINITION-READERS</code></a></span></dt><dt><span class="section"><a href="#slotdef-writers">29.1.4.2.3.2. Generic Function <code class="function">CLOS:SLOT-DEFINITION-WRITERS</code></a></span></dt></dl></dd><dt><span class="section"><a href="#slotd-mo-readers-esd">29.1.4.2.4. Readers for effective slot definition metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#slotdef-location">29.1.4.2.4.1. Generic Function <code class="function">CLOS:SLOT-DEFINITION-LOCATION</code></a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-sd-init">29.1.4.3. Initialization of slot definition metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#slotdef-mo-methods">29.1.4.3.1. Methods</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sd-inheritance"></a>29.1.4.1. Inheritance Structure of <a href="#mop-slot-def-mo">slot definition metaobject</a> Classes</h4></div></div></div><div class="figure"><a id="mop-sd-inheritance-fig"></a><p class="title"><b>Figure 29.3. Inheritance structure of <a href="#mop-slot-def-mo">slot definition metaobject</a> classes</b></p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="mop-classes-slotdef.png" width="100%" alt="Inheritance structure of slot definition metaobject classes" /></td></tr></table></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sd-readers"></a>29.1.4.2. Introspection: Readers for <a href="#mop-slot-def-mo">slot definition metaobject</a>s</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-sd-readers-GFs">29.1.4.2.1. Generic Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#slotdef-name">29.1.4.2.1.1. Generic Function <code class="function">CLOS:SLOT-DEFINITION-NAME</code></a></span></dt><dt><span class="section"><a href="#slotdef-allocation">29.1.4.2.1.2. Generic Function <code class="function">CLOS:SLOT-DEFINITION-ALLOCATION</code></a></span></dt><dt><span class="section"><a href="#slotdef-initform">29.1.4.2.1.3. Generic Function <code class="function">CLOS:SLOT-DEFINITION-INITFORM</code></a></span></dt><dt><span class="section"><a href="#slotdef-initfunction">29.1.4.2.1.4. Generic Function <code class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</code></a></span></dt><dt><span class="section"><a href="#slotdef-type">29.1.4.2.1.5. Generic Function <code class="function">CLOS:SLOT-DEFINITION-TYPE</code></a></span></dt><dt><span class="section"><a href="#slotdef-initargs">29.1.4.2.1.6. Generic Function <code class="function">CLOS:SLOT-DEFINITION-INITARGS</code></a></span></dt></dl></dd><dt><span class="section"><a href="#slotd-mo-readers-methods">29.1.4.2.2. Methods</a></span></dt><dt><span class="section"><a href="#slotd-mo-readers-dsd">29.1.4.2.3. Readers for direct slot definition metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#slotdef-readers">29.1.4.2.3.1. Generic Function <code class="function">CLOS:SLOT-DEFINITION-READERS</code></a></span></dt><dt><span class="section"><a href="#slotdef-writers">29.1.4.2.3.2. Generic Function <code class="function">CLOS:SLOT-DEFINITION-WRITERS</code></a></span></dt></dl></dd><dt><span class="section"><a href="#slotd-mo-readers-esd">29.1.4.2.4. Readers for effective slot definition metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#slotdef-location">29.1.4.2.4.1. Generic Function <code class="function">CLOS:SLOT-DEFINITION-LOCATION</code></a></span></dt></dl></dd></dl></div><p>The reader generic functions which simply return information
associated with <a href="#mop-slot-def-mo">slot definition metaobject</a>s are presented together here
in the format described in <a href="#mop-cl-readers" title="29.1.3.3.&#xA0;Introspection: Readers for class metaobjects">Section 29.1.3.3, “Introspection: Readers for class metaobjects”</a>.</p><p>Each of the reader generic functions for <a href="#mop-slot-def-mo">slot definition metaobject</a>s has the same
syntax, accepting one required argument called <em class="replaceable"><code>slot</code></em>, which must be a
<a href="#mop-slot-def-mo">slot definition metaobject</a>; otherwise, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed. An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is also <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if the <a href="#mop-slot-def-mo">slot definition metaobject</a>
has not been initialized.</p><p>These generic functions can be called by the user or the
implementation.</p><p>For any of these generic
 functions which returns a list, such lists will not be mutated by the
 implementation.  The results are undefined if a portable program allows
 such a list to be mutated.</p>
<!--begin slot-definition basic introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-sd-readers-GFs"></a>29.1.4.2.1. Generic Functions</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#slotdef-name">29.1.4.2.1.1. Generic Function <code class="function">CLOS:SLOT-DEFINITION-NAME</code></a></span></dt><dt><span class="section"><a href="#slotdef-allocation">29.1.4.2.1.2. Generic Function <code class="function">CLOS:SLOT-DEFINITION-ALLOCATION</code></a></span></dt><dt><span class="section"><a href="#slotdef-initform">29.1.4.2.1.3. Generic Function <code class="function">CLOS:SLOT-DEFINITION-INITFORM</code></a></span></dt><dt><span class="section"><a href="#slotdef-initfunction">29.1.4.2.1.4. Generic Function <code class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</code></a></span></dt><dt><span class="section"><a href="#slotdef-type">29.1.4.2.1.5. Generic Function <code class="function">CLOS:SLOT-DEFINITION-TYPE</code></a></span></dt><dt><span class="section"><a href="#slotdef-initargs">29.1.4.2.1.6. Generic Function <code class="function">CLOS:SLOT-DEFINITION-INITARGS</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-name"></a>29.1.4.2.1.1. Generic Function <a href="#slotdef-name" title="29.1.4.2.1.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-NAME"><code class="function">CLOS:SLOT-DEFINITION-NAME</code></a></h6></div><div><h6 class="subtitle"><code class="code">(<a href="#slotdef-name" title="29.1.4.2.1.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-NAME"><code class="function">CLOS:SLOT-DEFINITION-NAME</code></a> <em class="replaceable"><code>slot</code></em>)</code></h6></div></div></div><p>Returns the name of <em class="replaceable"><code>slot</code></em>.  This value is a symbol that can be
used as a variable name.  This is the value of the <code class="constant">:NAME</code>
initialization argument that was associated with the <a href="#mop-slot-def-mo">slot definition metaobject</a> during
initialization.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The slot name does not need to be usable as a
  variable name. Slot names like <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> are perfectly valid.
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-allocation"></a>29.1.4.2.1.2. Generic Function <a href="#slotdef-allocation" title="29.1.4.2.1.2.&#xA0;Generic Function CLOS:SLOT-DEFINITION-ALLOCATION"><code class="function">CLOS:SLOT-DEFINITION-ALLOCATION</code></a></h6></div><div><h6 class="subtitle"><code class="code">(<a href="#slotdef-allocation" title="29.1.4.2.1.2.&#xA0;Generic Function CLOS:SLOT-DEFINITION-ALLOCATION"><code class="function">CLOS:SLOT-DEFINITION-ALLOCATION</code></a> <em class="replaceable"><code>slot</code></em>)</code></h6></div></div></div><p>Returns the allocation of <em class="replaceable"><code>slot</code></em>.  This is a symbol.  This is
the defaulted value of the <code class="constant">:ALLOCATION</code> initialization argument that
was associated with the <a href="#mop-slot-def-mo">slot definition metaobject</a> during initialization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-initform"></a>29.1.4.2.1.3. Generic Function <a href="#slotdef-initform" title="29.1.4.2.1.3.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITFORM"><code class="function">CLOS:SLOT-DEFINITION-INITFORM</code></a></h6></div><div><h6 class="subtitle"><code class="code">(<a href="#slotdef-initform" title="29.1.4.2.1.3.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITFORM"><code class="function">CLOS:SLOT-DEFINITION-INITFORM</code></a> <em class="replaceable"><code>slot</code></em>)</code></h6></div></div></div><p>Returns the initialization form of <em class="replaceable"><code>slot</code></em>.  This can be any
form.  This is the defaulted value of the <code class="constant">:INITFORM</code> initialization
argument that was associated with the <a href="#mop-slot-def-mo">slot definition metaobject</a> during initialization.
When <em class="replaceable"><code>slot</code></em> has no initialization form, the value returned is
unspecified (however, <a href="#slotdef-initfunction" title="29.1.4.2.1.4.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITFUNCTION"><code class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</code></a> is guaranteed to return
<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-initfunction"></a>29.1.4.2.1.4. Generic Function <a href="#slotdef-initfunction" title="29.1.4.2.1.4.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITFUNCTION"><code class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</code></a></h6></div><div><h6 class="subtitle"><code class="code">(<a href="#slotdef-initfunction" title="29.1.4.2.1.4.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITFUNCTION"><code class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</code></a> <em class="replaceable"><code>slot</code></em>)</code></h6></div></div></div><p>Returns the initialization function of <em class="replaceable"><code>slot</code></em>.  This value is
either a function of no arguments, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, indicating that the slot
has no initialization function.  This is the defaulted value of the
<code class="constant">:INITFUNCTION</code> initialization argument that was associated with the
<a href="#mop-slot-def-mo">slot definition metaobject</a> during initialization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-type"></a>29.1.4.2.1.5. Generic Function <a href="#slotdef-type" title="29.1.4.2.1.5.&#xA0;Generic Function CLOS:SLOT-DEFINITION-TYPE"><code class="function">CLOS:SLOT-DEFINITION-TYPE</code></a></h6></div><div><h6 class="subtitle"><code class="code">(<a href="#slotdef-type" title="29.1.4.2.1.5.&#xA0;Generic Function CLOS:SLOT-DEFINITION-TYPE"><code class="function">CLOS:SLOT-DEFINITION-TYPE</code></a> <em class="replaceable"><code>slot</code></em>)</code></h6></div></div></div><p>Returns the type of <em class="replaceable"><code>slot</code></em>.  This is a type specifier name.
This is the defaulted value of the <code class="constant">:TYPE</code> initialization argument that
was associated with the <a href="#mop-slot-def-mo">slot definition metaobject</a> during initialization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-initargs"></a>29.1.4.2.1.6. Generic Function <a href="#slotdef-initargs" title="29.1.4.2.1.6.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITARGS"><code class="function">CLOS:SLOT-DEFINITION-INITARGS</code></a></h6></div><div><h6 class="subtitle"><code class="code">(<a href="#slotdef-initargs" title="29.1.4.2.1.6.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITARGS"><code class="function">CLOS:SLOT-DEFINITION-INITARGS</code></a> <em class="replaceable"><code>slot</code></em>)</code></h6></div></div></div><p>Returns the set of initialization argument keywords for <em class="replaceable"><code>slot</code></em>.
This is the defaulted value of the <code class="constant">:INITARGS</code> initialization argument
that was associated with the <a href="#mop-slot-def-mo">slot definition metaobject</a> during initialization.</p></div></div>
<!--mop-sd-readers-GFs-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slotd-mo-readers-methods"></a>29.1.4.2.2. Methods</h5></div></div></div><div class="variablelist"><p class="title"><b>The specified methods for the <a href="#mop-slot-def-mo">slot definition metaobject</a> readers</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#slotdef-name" title="29.1.4.2.1.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-NAME"><code class="function">CLOS:SLOT-DEFINITION-NAME</code></a>
    (<em class="replaceable"><code>slot-definition</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-SLOT-DEFINITION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#slotdef-allocation" title="29.1.4.2.1.2.&#xA0;Generic Function CLOS:SLOT-DEFINITION-ALLOCATION"><code class="function">CLOS:SLOT-DEFINITION-ALLOCATION</code></a>
    (<em class="replaceable"><code>slot-definition</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-SLOT-DEFINITION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#slotdef-initform" title="29.1.4.2.1.3.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITFORM"><code class="function">CLOS:SLOT-DEFINITION-INITFORM</code></a>
    (<em class="replaceable"><code>slot-definition</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-SLOT-DEFINITION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#slotdef-initfunction" title="29.1.4.2.1.4.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITFUNCTION"><code class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</code></a>
    (<em class="replaceable"><code>slot-definition</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-SLOT-DEFINITION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#slotdef-type" title="29.1.4.2.1.5.&#xA0;Generic Function CLOS:SLOT-DEFINITION-TYPE"><code class="function">CLOS:SLOT-DEFINITION-TYPE</code></a>
    (<em class="replaceable"><code>slot-definition</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-SLOT-DEFINITION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#slotdef-initargs" title="29.1.4.2.1.6.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITARGS"><code class="function">CLOS:SLOT-DEFINITION-INITARGS</code></a>
    (<em class="replaceable"><code>slot-definition</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-SLOT-DEFINITION</code></a>))</code></span></span></dt><dd>No behavior is specified for these
   methods beyond that which is specified for their respective generic
   functions.</dd></dl></div></div>
<!--slotd-mo-readers-methods-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slotd-mo-readers-dsd"></a>29.1.4.2.3. Readers for <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#slotdef-readers">29.1.4.2.3.1. Generic Function <code class="function">CLOS:SLOT-DEFINITION-READERS</code></a></span></dt><dt><span class="section"><a href="#slotdef-writers">29.1.4.2.3.2. Generic Function <code class="function">CLOS:SLOT-DEFINITION-WRITERS</code></a></span></dt></dl></div><p>The following additional reader generic functions are defined for
 <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-readers"></a>29.1.4.2.3.1. Generic Function <a href="#slotdef-readers" title="29.1.4.2.3.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-READERS"><code class="function">CLOS:SLOT-DEFINITION-READERS</code></a></h6></div><div><h6 class="subtitle"><code class="code">(<a href="#slotdef-readers" title="29.1.4.2.3.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-READERS"><code class="function">CLOS:SLOT-DEFINITION-READERS</code></a> <em class="replaceable"><code>direct-slot-definition</code></em>)</code></h6></div></div></div><p>Returns a (possibly empty) set of readers of the <em class="replaceable"><code>direct-slot-definition</code></em>.  This
value is a list of function names.  This is the defaulted value of the
<code class="constant">:READERS</code> initialization argument that was associated with the direct
<a href="#mop-slot-def-mo">slot definition metaobject</a> during initialization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-writers"></a>29.1.4.2.3.2. Generic Function <a href="#slotdef-writers" title="29.1.4.2.3.2.&#xA0;Generic Function CLOS:SLOT-DEFINITION-WRITERS"><code class="function">CLOS:SLOT-DEFINITION-WRITERS</code></a></h6></div><div><h6 class="subtitle"><code class="code">(<a href="#slotdef-writers" title="29.1.4.2.3.2.&#xA0;Generic Function CLOS:SLOT-DEFINITION-WRITERS"><code class="function">CLOS:SLOT-DEFINITION-WRITERS</code></a> <em class="replaceable"><code>direct-slot-definition</code></em>)</code></h6></div></div></div><p>Returns a (possibly empty) set of writers of the <em class="replaceable"><code>direct-slot-definition</code></em>.  This
value is a list of function names.  This is the defaulted value of the
<code class="constant">:WRITERS</code> initialization argument that was associated with the direct
<a href="#mop-slot-def-mo">slot definition metaobject</a> during initialization.
</p><div class="variablelist"><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#slotdef-readers" title="29.1.4.2.3.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-READERS"><code class="function">CLOS:SLOT-DEFINITION-READERS</code></a>
    (<em class="replaceable"><code>direct-slot-definition</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#slotdef-writers" title="29.1.4.2.3.2.&#xA0;Generic Function CLOS:SLOT-DEFINITION-WRITERS"><code class="function">CLOS:SLOT-DEFINITION-WRITERS</code></a>
    (<em class="replaceable"><code>direct-slot-definition</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</code></a>))</code></span></span></dt><dd>No behavior is specified for these
   methods beyond that which is specified for their respective generic
   functions.</dd></dl></div><p>
</p></div></div>
<!--slotd-mo-readers-dsd-->
<!--end slot-definition basic introspection-->
<!--begin slot-definition advanced introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slotd-mo-readers-esd"></a>29.1.4.2.4. Readers for <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>s</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#slotdef-location">29.1.4.2.4.1. Generic Function <code class="function">CLOS:SLOT-DEFINITION-LOCATION</code></a></span></dt></dl></div><p>The following reader generic function is defined for effective
 <a href="#mop-slot-def-mo">slot definition metaobject</a>s.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="slotdef-location"></a>29.1.4.2.4.1. Generic Function <a href="#slotdef-location" title="29.1.4.2.4.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-LOCATION"><code class="function">CLOS:SLOT-DEFINITION-LOCATION</code></a></h6></div><div><h6 class="subtitle"><code class="code">(<a href="#slotdef-location" title="29.1.4.2.4.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-LOCATION"><code class="function">CLOS:SLOT-DEFINITION-LOCATION</code></a> <em class="replaceable"><code>effective-slot-definition</code></em>)</code></h6></div></div></div><p>Returns the location of <em class="replaceable"><code>effective-slot-definition</code></em>.  The meaning and interpretation
 of this value is described in <a href="#mop-sa-instance-stuct" title="29.1.10.1.&#xA0;Instance Structure Protocol">Section 29.1.10.1, “Instance Structure Protocol”</a>.</p><div class="variablelist"><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#slotdef-location" title="29.1.4.2.4.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-LOCATION"><code class="function">CLOS:SLOT-DEFINITION-LOCATION</code></a>
    (<em class="replaceable"><code>effective-slot-definition</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a>))</code></span></span></dt><dd>This method returns the value stored by
    <span class="method"><code class="literal"><a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a> <code class="constant">:AROUND</code>
     (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>)</code></span> and
    <span class="method"><code class="literal"><a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a> <code class="constant">:AROUND</code>
     (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>)</code></span>.
</dd></dl></div></div></div>
<!--slotd-mo-readers-esd-->
<!--end slot-definition advanced introspection-->
</div>
<!--mop-sd-readers-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sd-init"></a>29.1.4.3. Initialization of <a href="#mop-slot-def-mo">slot definition metaobject</a>s</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#slotdef-mo-methods">29.1.4.3.1. Methods</a></span></dt></dl></div><p>A <a href="#mop-slot-def-mo">slot definition metaobject</a> can be created by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.  The
initialization arguments establish the definition of the slot
definition.  A <a href="#mop-slot-def-mo">slot definition metaobject</a> cannot be redefined; calling
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.</p><p>Initialization of a <a href="#mop-slot-def-mo">slot definition metaobject</a> must be done by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
and allowing it to call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>.
 Portable programs must <span class="strong"><strong>not</strong></span>...</p><div class="itemizedlist"><ul type="disc"><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> directly to
    initialize a <a href="#mop-slot-def-mo">slot definition metaobject</a>;</li><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a> directly to
    initialize a <a href="#mop-slot-def-mo">slot definition metaobject</a>;</li><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><code class="function">CHANGE-CLASS</code></a> to change the class of any
    <a href="#mop-slot-def-mo">slot definition metaobject</a> or to turn a non-slot-definition object into a
    <a href="#mop-slot-def-mo">slot definition metaobject</a>.</li></ul></div><p>Since metaobject classes may not be redefined, no behavior is
 specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><code class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</code></a> on <a href="#mop-slot-def-mo">slot definition metaobject</a>s.  Since the class of a
 <a href="#mop-slot-def-mo">slot definition metaobject</a> cannot be changed, no behavior is specified for the result of
 calls to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_ferent-class.html" target="_top"><code class="function">UPDATE-INSTANCE-FOR-DIFFERENT-CLASS</code></a> on <a href="#mop-slot-def-mo">slot definition metaobject</a>s.</p><p>During initialization, each initialization argument is checked for
errors and then associated with the <a href="#mop-slot-def-mo">slot definition metaobject</a>.  The value can then be
accessed by calling the appropriate accessor as shown in
 <a href="#slotd-mo-initargs" title="Table&#xA0;29.3.&#xA0;Initialization arguments and&#10;  accessors for slot definition metaobjects">Table 29.3, “Initialization arguments and
  accessors for slot definition metaobjects”</a>.</p><p>This section begins with a description of the error checking and
processing of each initialization argument.  This is followed by a table
showing the generic functions that can be used to access the stored
initialization arguments.</p><p>In these descriptions, the phrase “<span class="quote">this argument defaults to
<em class="replaceable"><code>value</code></em></span>” means that when that initialization argument is not
supplied, initialization is performed as if <em class="replaceable"><code>value</code></em> had been supplied.
For some initialization arguments this could be done by the use of
default initialization arguments, but whether it is done this way is not
specified.  Implementations are free to define default initialization
arguments for specified <a href="#mop-slot-def-mo">slot definition metaobject</a> classes.  Portable programs are free to
define default initialization arguments for portable subclasses of the
class <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><code class="classname">CLOS:SLOT-DEFINITION</code></a>.</p><div class="itemizedlist"><ul type="disc"><li><p>The <code class="constant">:NAME</code> argument is a slot name.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed
   if this argument is not a symbol which can be used as a variable
   name.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this argument is not supplied.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The <code class="constant">:NAME</code> argument does not need to be
    usable as a variable name. Slot names like <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> are
    perfectly valid.</p></div></li><li>The <code class="constant">:INITFORM</code> argument is a form. The
   <code class="constant">:INITFORM</code> argument defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if the
   <code class="constant">:INITFORM</code> argument is supplied, but the <code class="constant">:INITFUNCTION</code> argument
   is not supplied.</li><li>The <code class="constant">:INITFUNCTION</code> argument is a function of zero
   arguments which, when called, evaluates the <code class="constant">:INITFORM</code> in the
   appropriate <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.  The <code class="constant">:INITFUNCTION</code> argument
   defaults to false.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if the <code class="constant">:INITFUNCTION</code> argument is
   supplied, but the <code class="constant">:INITFORM</code> argument is not supplied.</li><li>The <code class="constant">:TYPE</code> argument is a type specifier name.  An
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed otherwise.  The <code class="constant">:TYPE</code> argument defaults to the symbol <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.
 </li><li>The <code class="constant">:ALLOCATION</code> argument is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>.  An
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed otherwise.  The <code class="constant">:ALLOCATION</code> argument defaults to the
   symbol <code class="constant">:INSTANCE</code>.</li><li>The <code class="constant">:INITARGS</code> argument is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>s.
   An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this argument is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>, or if any
   element of this list is not a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>.  The <code class="constant">:INITARGS</code> argument
   defaults to the empty list.</li><li>The <code class="constant">:READERS</code> and <code class="constant">:WRITERS</code> arguments are
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>s of function names.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if they are not
   <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>s, or if any element is not a valid function name.
   They default to the empty list.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if either of these
   arguments is supplied and the metaobject is not a <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:DIRECT-SLOT-DEFINITION</code></a>.
 </li><li>The <code class="constant">:DOCUMENTATION</code> argument is
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>. An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if it is not. This argument default
 to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> during initialization.</li></ul></div><p>After the processing and defaulting of initialization arguments
described above, the value of each initialization argument is associated
with the <a href="#mop-slot-def-mo">slot definition metaobject</a>.  These values can then be accessed by calling the
corresponding generic function.  The correspondences are as follows:

</p><div class="table"><a id="slotd-mo-initargs"></a><p class="title"><b>Table 29.3. Initialization arguments and
  accessors for <a href="#mop-slot-def-mo">slot definition metaobject</a>s</b></p><table summary="Initialization arguments and&#10;  accessors for slot definition metaobjects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Initialization Argument</th><th align="center">Generic Function</th></tr></thead><tbody><tr><td align="center"><code class="constant">:NAME</code></td><td align="center"><a href="#slotdef-name" title="29.1.4.2.1.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-NAME"><code class="function">CLOS:SLOT-DEFINITION-NAME</code></a></td></tr><tr><td align="center"><code class="constant">:INITFORM</code></td><td align="center"><a href="#slotdef-initform" title="29.1.4.2.1.3.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITFORM"><code class="function">CLOS:SLOT-DEFINITION-INITFORM</code></a></td></tr><tr><td align="center"><code class="constant">:INITFUNCTION</code></td><td align="center"><a href="#slotdef-initfunction" title="29.1.4.2.1.4.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITFUNCTION"><code class="function">CLOS:SLOT-DEFINITION-INITFUNCTION</code></a></td></tr><tr><td align="center"><code class="constant">:TYPE</code></td><td align="center"><a href="#slotdef-type" title="29.1.4.2.1.5.&#xA0;Generic Function CLOS:SLOT-DEFINITION-TYPE"><code class="function">CLOS:SLOT-DEFINITION-TYPE</code></a></td></tr><tr><td align="center"><code class="constant">:ALLOCATION</code></td><td align="center"><a href="#slotdef-allocation" title="29.1.4.2.1.2.&#xA0;Generic Function CLOS:SLOT-DEFINITION-ALLOCATION"><code class="function">CLOS:SLOT-DEFINITION-ALLOCATION</code></a></td></tr><tr><td align="center"><code class="constant">:INITARGS</code></td><td align="center"><a href="#slotdef-initargs" title="29.1.4.2.1.6.&#xA0;Generic Function CLOS:SLOT-DEFINITION-INITARGS"><code class="function">CLOS:SLOT-DEFINITION-INITARGS</code></a></td></tr><tr><td align="center"><code class="constant">:READERS</code></td><td align="center"><a href="#slotdef-readers" title="29.1.4.2.3.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-READERS"><code class="function">CLOS:SLOT-DEFINITION-READERS</code></a></td></tr><tr><td align="center"><code class="constant">:WRITERS</code></td><td align="center"><a href="#slotdef-writers" title="29.1.4.2.3.2.&#xA0;Generic Function CLOS:SLOT-DEFINITION-WRITERS"><code class="function">CLOS:SLOT-DEFINITION-WRITERS</code></a></td></tr><tr><td align="center"><code class="constant">:DOCUMENTATION</code></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><code class="function">DOCUMENTATION</code></a></td></tr></tbody></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slotdef-mo-methods"></a>29.1.4.3.1. Methods</h5></div></div></div><p>It is not specified which methods provide the initialization and
reinitialization behavior described above.  Instead, the information
needed to allow portable programs to specialize this behavior is
presented as a set of restrictions on the methods a portable program can
define.  The model is that portable initialization methods have access
to the <a href="#mop-slot-def-mo">slot definition metaobject</a> when either all or none of the specified initialization
has taken effect.</p><p>These restrictions govern the methods that a portable program can
define on the generic functions <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>,
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>, and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a>.  These restrictions
apply only to methods on these generic functions for which the first
specializer is a subclass of the class <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><code class="classname">CLOS:SLOT-DEFINITION</code></a>.  Other portable
methods on these generic functions are not affected by these
restrictions.</p><div class="itemizedlist"><ul type="disc"><li>Portable programs must not define methods on
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>.</li><li><p>For <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>:
   </p><div class="itemizedlist"><ul type="circle"><li>Portable programs must not define primary methods.
 </li><li>Portable programs may define around-methods, but
   these must be extending, not overriding methods.</li><li>Portable before-methods must assume that when they
   are run, none of the initialization behavior described above has been
   completed.</li><li>Portable after-methods must assume that when they
   are run, all of the initialization behavior described above has been
   completed.</li></ul></div></li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></div>
<!--slotdef-mo-methods-->
</div>
<!--mop-sd-init-->
</div>
<!--mop-sd-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-gf"></a>29.1.5. Generic Functions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-gf-inheritance">29.1.5.1. Inheritance Structure of generic function metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-gf-readers">29.1.5.2. Introspection: Readers for generic function metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#gf-name">29.1.5.2.1. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-NAME</code></a></span></dt><dt><span class="section"><a href="#gf-methods">29.1.5.2.2. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-METHODS</code></a></span></dt><dt><span class="section"><a href="#gf-lambda-list">29.1.5.2.3. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="#gf-argument-precedence-order">29.1.5.2.4. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</code></a></span></dt><dt><span class="section"><a href="#gf-declarations">29.1.5.2.5. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-DECLARATIONS</code></a></span></dt><dt><span class="section"><a href="#gf-method-class">29.1.5.2.6. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</code></a></span></dt><dt><span class="section"><a href="#gf-method-combination">29.1.5.2.7. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-METHOD-COMBINATION</code></a></span></dt><dt><span class="section"><a href="#gf-name-methods">29.1.5.2.8. Methods</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-gf-init">29.1.5.3. Initialization of Generic Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-gf-init-defgeneric">29.1.5.3.1. Macro <code class="function">DEFGENERIC</code></a></span></dt><dt><span class="section"><a href="#mop-gf-invocation">29.1.5.3.2. Generic Function Invocation Protocol</a></span></dt><dt><span class="section"><a href="#mop-gf-init-mo">29.1.5.3.3. Initialization of generic function metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#gf-mo-init-methods">29.1.5.3.3.1. Methods</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-gf-customize">29.1.5.4. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#setf-gf-name">29.1.5.4.1. Generic Function <code class="code">(SETF CLOS:GENERIC-FUNCTION-NAME)</code></a></span></dt><dt><span class="section"><a href="#ensure-gf">29.1.5.4.2. Generic Function <code class="function">ENSURE-GENERIC-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#ensure-gf-UC">29.1.5.4.3. Generic Function <code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#mop-add-method">29.1.5.4.4. Generic Function <code class="function">ADD-METHOD</code></a></span></dt><dt><span class="section"><a href="#mop-remove-method">29.1.5.4.5. Generic Function <code class="function">REMOVE-METHOD</code></a></span></dt><dt><span class="section"><a href="#compute-applicable-methods">29.1.5.4.6. Generic Function <code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a></span></dt><dt><span class="section"><a href="#compute-applicable-methods-UC">29.1.5.4.7. Generic Function <code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a></span></dt><dt><span class="section"><a href="#compute-effective-method">29.1.5.4.8. Generic Function <code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a></span></dt><dt><span class="section"><a href="#compute-effective-method-as-function">29.1.5.4.9. Function <code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#make-method-lambda">29.1.5.4.10. Generic Function <code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a></span></dt><dt><span class="section"><a href="#compute-discriminating-function">29.1.5.4.11. Generic Function <code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-gf-inheritance"></a>29.1.5.1. Inheritance Structure of <a href="#mop-gen-fun-mo">generic function metaobject</a> Classes</h4></div></div></div><div class="figure"><a id="mop-gf-inheritance-fig"></a><p class="title"><b>Figure 29.4. Inheritance structure of <a href="#mop-gen-fun-mo">generic function metaobject</a> classes</b></p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="mop-classes-genfun.png" width="100%" alt="Inheritance structure of generic function metaobject classes" /></td></tr></table></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-gf-readers"></a>29.1.5.2. Introspection: Readers for <a href="#mop-gen-fun-mo">generic function metaobject</a>s</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#gf-name">29.1.5.2.1. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-NAME</code></a></span></dt><dt><span class="section"><a href="#gf-methods">29.1.5.2.2. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-METHODS</code></a></span></dt><dt><span class="section"><a href="#gf-lambda-list">29.1.5.2.3. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="#gf-argument-precedence-order">29.1.5.2.4. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</code></a></span></dt><dt><span class="section"><a href="#gf-declarations">29.1.5.2.5. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-DECLARATIONS</code></a></span></dt><dt><span class="section"><a href="#gf-method-class">29.1.5.2.6. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</code></a></span></dt><dt><span class="section"><a href="#gf-method-combination">29.1.5.2.7. Generic Function <code class="function">CLOS:GENERIC-FUNCTION-METHOD-COMBINATION</code></a></span></dt><dt><span class="section"><a href="#gf-name-methods">29.1.5.2.8. Methods</a></span></dt></dl></div><p>The reader generic functions which simply return information
associated with <a href="#mop-gen-fun-mo">generic function metaobject</a>s are presented together here in the format
described in <a href="#mop-cl-readers" title="29.1.3.3.&#xA0;Introspection: Readers for class metaobjects">Section 29.1.3.3, “Introspection: Readers for class metaobjects”</a>.</p><p>Each of the reader generic functions for <a href="#mop-gen-fun-mo">generic function metaobject</a>s has the same
syntax, accepting one required argument called <em class="replaceable"><code>generic-function</code></em>, which must be a
<a href="#mop-gen-fun-mo">generic function metaobject</a>; otherwise, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is also <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if the
<a href="#mop-gen-fun-mo">generic function metaobject</a> has not been initialized.</p><p>These generic functions can be called by the user or the
implementation.</p><p>For any of these generic
 functions which returns a list, such lists will not be mutated by the
 implementation.  The results are undefined if a portable program allows
 such a list to be mutated.</p>
<!--begin generic-function basic introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-name"></a>29.1.5.2.1. Generic Function <a href="#gf-name" title="29.1.5.2.1.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-NAME"><code class="function">CLOS:GENERIC-FUNCTION-NAME</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#gf-name" title="29.1.5.2.1.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-NAME"><code class="function">CLOS:GENERIC-FUNCTION-NAME</code></a> <em class="replaceable"><code>generic-function</code></em>)</code></h6></div></div></div><p>Returns the name of the generic function, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if the generic
function has no name.  This is the defaulted value of the <code class="constant">:NAME</code>
initialization argument that was associated with the <a href="#mop-gen-fun-mo">generic function metaobject</a> during
initialization or reinitialization.
 (See also <a href="#setf-gf-name" title="29.1.5.4.1.&#xA0;Generic Function (SETF CLOS:GENERIC-FUNCTION-NAME)"><code class="code">(SETF CLOS:GENERIC-FUNCTION-NAME)</code></a>.)</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-methods"></a>29.1.5.2.2. Generic Function <a href="#gf-methods" title="29.1.5.2.2.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHODS"><code class="function">CLOS:GENERIC-FUNCTION-METHODS</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#gf-methods" title="29.1.5.2.2.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHODS"><code class="function">CLOS:GENERIC-FUNCTION-METHODS</code></a> <em class="replaceable"><code>generic-function</code></em>)</code></h6></div></div></div><p>Returns the set of methods currently connected to the generic
function.  This is a set of <a href="#mop-method-mo">method metaobject</a>s.  This value is maintained by the
generic functions <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-lambda-list"></a>29.1.5.2.3. Generic Function <a href="#gf-lambda-list" title="29.1.5.2.3.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-LAMBDA-LIST"><code class="function">CLOS:GENERIC-FUNCTION-LAMBDA-LIST</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#gf-lambda-list" title="29.1.5.2.3.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-LAMBDA-LIST"><code class="function">CLOS:GENERIC-FUNCTION-LAMBDA-LIST</code></a> <em class="replaceable"><code>generic-function</code></em>)</code></h6></div></div></div><p>Returns the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of the generic function.  This is the
defaulted value of the <code class="constant">:LAMBDA-LIST</code> initialization argument that was
associated with the <a href="#mop-gen-fun-mo">generic function metaobject</a> during initialization or reinitialization.
An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> has yet to be supplied.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-argument-precedence-order"></a>29.1.5.2.4. Generic Function <a href="#gf-argument-precedence-order" title="29.1.5.2.4.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER"><code class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#gf-argument-precedence-order" title="29.1.5.2.4.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER"><code class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</code></a> <em class="replaceable"><code>generic-function</code></em>)</code></h6></div></div></div><p>Returns the argument precedence order of the generic function.
This value is a list of symbols, a permutation of the required
parameters in the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of the generic function.  This is the
defaulted value of the <code class="constant">:ARGUMENT-PRECEDENCE-ORDER</code> initialization
argument that was associated with the <a href="#mop-gen-fun-mo">generic function metaobject</a> during initialization or
reinitialization.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> has not yet been
  supplied.</p></div></div>
<!--end generic-function basic introspection-->
<!--begin generic-function advanced introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-declarations"></a>29.1.5.2.5. Generic Function <a href="#gf-declarations" title="29.1.5.2.5.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-DECLARATIONS"><code class="function">CLOS:GENERIC-FUNCTION-DECLARATIONS</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#gf-declarations" title="29.1.5.2.5.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-DECLARATIONS"><code class="function">CLOS:GENERIC-FUNCTION-DECLARATIONS</code></a> <em class="replaceable"><code>generic-function</code></em>)</code></h6></div></div></div><p>Returns a possibly empty list of the “<span class="quote">declarations</span>”
of the generic function.  The elements of this list are
<a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a>s.  This list is the defaulted value of the
<code class="constant">:DECLARATIONS</code> initialization argument that was associated with the
<a href="#mop-gen-fun-mo">generic function metaobject</a> during initialization or reinitialization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-method-class"></a>29.1.5.2.6. Generic Function <a href="#gf-method-class" title="29.1.5.2.6.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#gf-method-class" title="29.1.5.2.6.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</code></a> <em class="replaceable"><code>generic-function</code></em>)</code></h6></div></div></div><p>Returns the default method class of the generic function.  This
class must be a subclass of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>.  This is the defaulted
value of the <code class="constant">:METHOD-CLASS</code> initialization argument that was
associated with the <a href="#mop-gen-fun-mo">generic function metaobject</a> during initialization or reinitialization.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-method-combination"></a>29.1.5.2.7. Generic Function <a href="#gf-method-combination" title="29.1.5.2.7.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHOD-COMBINATION"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-COMBINATION</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#gf-method-combination" title="29.1.5.2.7.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHOD-COMBINATION"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-COMBINATION</code></a> <em class="replaceable"><code>generic-function</code></em>)</code></h6></div></div></div><p>Returns the method combination of the generic function.  This is a
<a href="#mop-meth-comp-mo">method combination metaobject</a>.  This is the defaulted value of the <code class="constant">:METHOD-COMBINATION</code>
initialization argument that was associated with the <a href="#mop-gen-fun-mo">generic function metaobject</a> during
initialization or reinitialization.</p></div>
<!--end generic-function advanced introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="gf-name-methods"></a>29.1.5.2.8. Methods</h5></div></div></div><div class="variablelist"><p class="title"><b>The specified methods for the <a href="#mop-gen-fun-mo">generic function metaobject</a> reader generic
  functions</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#gf-name" title="29.1.5.2.1.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-NAME"><code class="function">CLOS:GENERIC-FUNCTION-NAME</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#gf-lambda-list" title="29.1.5.2.3.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-LAMBDA-LIST"><code class="function">CLOS:GENERIC-FUNCTION-LAMBDA-LIST</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#gf-argument-precedence-order" title="29.1.5.2.4.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER"><code class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#gf-declarations" title="29.1.5.2.5.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-DECLARATIONS"><code class="function">CLOS:GENERIC-FUNCTION-DECLARATIONS</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#gf-method-class" title="29.1.5.2.6.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#gf-method-combination" title="29.1.5.2.7.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHOD-COMBINATION"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-COMBINATION</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>))</code></span></span></dt><dd>No behavior is specified for these
   methods beyond that which is specified for their respective generic
   functions.</dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#gf-methods" title="29.1.5.2.2.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHODS"><code class="function">CLOS:GENERIC-FUNCTION-METHODS</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>))</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>The value returned by this method is maintained by
   <span class="method"><code class="literal"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>)</code></span> and
   <span class="method"><code class="literal"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>)</code></span>.</p></dd></dl></div></div>
<!--gf-name-methods-->
</div>
<!--mop-gf-readers-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-gf-init"></a>29.1.5.3. Initialization of Generic Functions</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-gf-init-defgeneric">29.1.5.3.1. Macro <code class="function">DEFGENERIC</code></a></span></dt><dt><span class="section"><a href="#mop-gf-invocation">29.1.5.3.2. Generic Function Invocation Protocol</a></span></dt><dt><span class="section"><a href="#mop-gf-init-mo">29.1.5.3.3. Initialization of generic function metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#gf-mo-init-methods">29.1.5.3.3.1. Methods</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-gf-init-defgeneric"></a>29.1.5.3.1. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a></h5></div></div></div><p>The evaluation or execution of a <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> form results in a
call to the <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a> function. The arguments received by <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>
are derived from the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> form in a defined way.  As with
<a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>, the exact macro-expansion of the
<a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> form is not defined, only the relationship between the
arguments to the macro and the arguments received by <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>.</p><div class="itemizedlist"><ul type="disc"><li>The <em class="replaceable"><code>function-name</code></em>
argument to <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> becomes the first argument to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>.
This is the only positional argument accepted by <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>; all other
arguments are keyword arguments.</li><li>The <em class="replaceable"><code>lambda-list</code></em> argument
to <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> becomes the value of the <code class="constant">:LAMBDA-LIST</code> keyword
argument to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>.</li><li><p>For each of the options
<code class="constant">:ARGUMENT-PRECEDENCE-ORDER</code>, <code class="constant">:DOCUMENTATION</code>, <code class="constant">:GENERIC-FUNCTION-CLASS</code> and
<code class="constant">:METHOD-CLASS</code>, the value of the option becomes the value of the
keyword argument with the same name.  If the option does not appear in
the macro form, the keyword argument does not appear in the resulting
call to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>If the option does not appear in the macro form, the
  keyword argument appears in the resulting call to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>, with a
  default value: the <em class="replaceable"><code>lambda list</code></em> for
  <code class="constant">:ARGUMENT-PRECEDENCE-ORDER</code>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> for <code class="constant">:DOCUMENTATION</code>, the class
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a> for <code class="constant">:GENERIC-FUNCTION-CLASS</code>, the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>
  for <code class="constant">:METHOD-CLASS</code>. This is needed to make the generic function reflect
  the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> form.</p></div></li><li><p>For the option <code class="constant">:DECLARE</code>, the list
of “<span class="quote">declarations</span>” becomes the value of the <code class="constant">:DECLARATIONS</code>
keyword argument.  If the <code class="constant">:DECLARE</code> option does not
appear in the macro form, the <code class="constant">:DECLARATIONS</code> keyword argument does not
appear in the call to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>If the <code class="constant">:DECLARE</code> option does not appear in
  the macro form, the <code class="constant">:DECLARATIONS</code> keyword argument appears in the
  resulting call to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>, with a default value of <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.  This is
  needed to make the generic function reflect the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> form.
 </p></div></li><li>The handling of the <code class="constant">:METHOD-COMBINATION</code> option is
not specified.</li><li><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The <code class="constant">:DECLARE</code> keyword is
  recognized as equivalent to the <code class="constant">:DECLARATIONS</code> keyword, for
  compatibility with <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a> in [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].  If both <code class="constant">:DECLARE</code> and
  <code class="constant">:DECLARATIONS</code> keyword arguments are specified, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p><p>Any other generic function options become the value of
   keyword arguments with the same name. The value of the keyword
   argument is the tail of the generic function option. An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if
   any generic function option appears more than once in the
   <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> form.</p><p>The default initargs of the
   <em class="replaceable"><code>generic-function-class</code></em> are added at the
   end of the list of arguments to pass to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>. This is needed to
   make the generic function reflect the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> form.</p></div></li><li><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p><a id="mop-defgeneric-user-options"></a><b>User-defined options. </b>Any other options become the value of keyword arguments with
    the same name.  The value of the keyword argument is the tail of the
    option.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if any option appears more than once in the
    <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> form.</p></div></li></ul></div><p>The result of the call to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a> is returned as the result of
evaluating or executing the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> form.</p></div>
<!--mop-gf-init-defgeneric-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-gf-invocation"></a>29.1.5.3.2. Generic Function Invocation Protocol</h5></div></div></div><p>Associated with each generic function is its discriminating
function.  Each time the generic function is called, the discriminating
function is called to provide the behavior of the generic function.  The
discriminating function receives the full set of arguments received by
the generic function.  It must lookup and execute the appropriate
methods, and return the appropriate values.</p><p>The discriminating function is computed by the highest layer of
the generic function invocation protocol, <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a>.
Whenever a <a href="#mop-gen-fun-mo">generic function metaobject</a> is initialized, reinitialized, or a method is added or
removed, the discriminating function is recomputed.
The new discriminating function is then stored with
<a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><code class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</code></a>.</p><p>Discriminating functions call <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a>
and <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a> to compute the methods
applicable to the generic functions arguments.  Applicable methods are
combined by <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a> to produce
an <strong class="first"><em class="firstterm">effective method</em></strong>.
Provisions are made to allow memoization of the method applicability and
effective methods computations.  (See the description of
<a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a> for details.)</p><p>The body of method definitions are processed by
<a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a>.  The result of this generic function is a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a>
which is processed by either <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><code class="function">COMPILE</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a> to produce
a <strong class="first"><em class="firstterm">method function</em></strong>.  The arguments received by the
method function are controlled by the <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a> forms appearing in
the effective methods.  By default, method functions accept two
arguments: a list of arguments to the generic function, and a list of
next methods.  The list of next methods corresponds to the next methods
argument to <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a>.  If <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a> appears with additional
arguments, these will be passed to the method functions as well; in
these cases, <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> must have created the method lambdas
to expect additional arguments.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>See <a href="#no-make-method-lambda" title="The generic function CLOS:MAKE-METHOD-LAMBDA is not implemented">The generic function <code class="function">CLOS:MAKE-METHOD-LAMBDA</code> is not implemented</a>.</p><p>See <a href="#method-functions-args" title="Method function arguments">Method function arguments</a>.</p></div></div>
<!--mop-gf-invocation-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-gf-init-mo"></a>29.1.5.3.3. Initialization of <a href="#mop-gen-fun-mo">generic function metaobject</a>s</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#gf-mo-init-methods">29.1.5.3.3.1. Methods</a></span></dt></dl></div><p>A <a href="#mop-gen-fun-mo">generic function metaobject</a> can be created by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.  The
initialization arguments establish the definition of the generic
function.  A <a href="#mop-gen-fun-mo">generic function metaobject</a> can be redefined by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>.
Some classes of <a href="#mop-gen-fun-mo">generic function metaobject</a> do not support redefinition; in these cases,
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.</p><p>Initialization of a <a href="#mop-gen-fun-mo">generic function metaobject</a> must be done by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
and allowing it to call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>.  Reinitialization of a
generic-function metaobject must be done by calling
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>.  Portable programs must <span class="strong"><strong>not</strong></span></p><div class="itemizedlist"><ul type="disc"><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> directly to
    initialize a <a href="#mop-gen-fun-mo">generic function metaobject</a>;</li><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a> directly to
    initialize or reinitialize a <a href="#mop-gen-fun-mo">generic function metaobject</a>;</li><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><code class="function">CHANGE-CLASS</code></a> to change the class of any
    <a href="#mop-gen-fun-mo">generic function metaobject</a> or to turn a non-generic-function object into a
    <a href="#mop-gen-fun-mo">generic function metaobject</a>.</li></ul></div><p>Since metaobject classes may not be redefined,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><code class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</code></a> on <a href="#mop-gen-fun-mo">generic function metaobject</a>s.
 Since the class of a <a href="#mop-gen-fun-mo">generic function metaobject</a> may not be changed,
 no behavior is specified for the results of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_ferent-class.html" target="_top"><code class="function">UPDATE-INSTANCE-FOR-DIFFERENT-CLASS</code></a> on <a href="#mop-gen-fun-mo">generic function metaobject</a>s.</p><p>During initialization or reinitialization, each initialization
argument is checked for errors and then associated with the <a href="#mop-gen-fun-mo">generic function metaobject</a>.
The value can then be accessed by calling the appropriate accessor as
shown in <a href="#gf-mo-initargs" title="Table&#xA0;29.4.&#xA0;Initialization arguments and accessors&#10;  for generic function metaobjects">Table 29.4, “Initialization arguments and accessors
  for generic function metaobjects”</a>.</p><p>This section begins with a description of the error checking and
processing of each initialization argument.  This is followed by a table
showing the generic functions that can be used to access the stored
initialization arguments. The section ends with a set of restrictions on
portable methods affecting <a href="#mop-gen-fun-mo">generic function metaobject</a> initialization and reinitialization.</p><p>In these descriptions, the phrase “<span class="quote">this argument defaults to
<em class="replaceable"><code>value</code></em></span>” means that when that initialization argument is not
supplied, initialization or reinitialization is performed as if
<em class="replaceable"><code>value</code></em> had been supplied.  For some initialization arguments this
could be done by the use of default initialization arguments, but
whether it is done this way is not specified.  Implementations are free
to define default initialization arguments for specified <a href="#mop-gen-fun-mo">generic function metaobject</a> classes.
Portable programs are free to define default initialization arguments
for portable subclasses of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>.</p><p>Unless there is a specific note to the contrary, then during
reinitialization, if an initialization argument is not supplied, the
previously stored value is left unchanged.</p><div class="itemizedlist"><ul type="disc"><li><p>The <code class="constant">:ARGUMENT-PRECEDENCE-ORDER</code> argument is a list
   of symbols.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this argument appears but the <code class="constant">:LAMBDA-LIST</code>
   argument does not appear.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>
   or if this value is not a permutation of the symbols from the
   required arguments part of the <code class="constant">:LAMBDA-LIST</code> initialization
   argument.</p><p>When the generic function is being initialized or
   reinitialized, and this argument is not supplied, but the
   <code class="constant">:LAMBDA-LIST</code> argument is supplied, this value defaults to the
   symbols from the required arguments part of the <code class="constant">:LAMBDA-LIST</code>
   argument, in the order they appear in that argument.  If neither
   argument is supplied, neither are initialized (see the description of
   <code class="constant">:LAMBDA-LIST</code>.)</p></li><li><p>The <code class="constant">:DECLARATIONS</code> argument is a list of <a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a>s.
  </p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a> or
   if each of its elements is not a legal <a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a>.</p><p>When the generic function is being initialized, and this
   argument is not supplied, it defaults to the empty list.
 </p></li><li>The <code class="constant">:DOCUMENTATION</code> argument is
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>. An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if it is not. This argument default
 to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> during initialization.</li><li><p>The <code class="constant">:LAMBDA-LIST</code> argument is a <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a proper generic function
   <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>.</p><p>When the generic function is being initialized, and this
   argument is not supplied, the generic function's <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> is not
   initialized.  The <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> will be initialized later, either when
   the first method is added to the generic function, or a later
   reinitialization of the generic function.</p></li><li>The <code class="constant">:METHOD-COMBINATION</code> argument is a <a href="#mop-meth-comp-mo">method combination metaobject</a>.
 </li><li><p>The <code class="constant">:METHOD-CLASS</code> argument is a <a href="#mop-class-mo">class metaobject</a>.
  </p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a subclass of the
   class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>.</p><p>When the generic function is being initialized, and this
   argument is not supplied, it defaults to the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>.
 </p></li><li><p>  The <code class="constant">:NAME</code> argument is an object.</p><p>If the generic function is being initialized, this argument
   defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
</p></li></ul></div><p>After the processing and defaulting of initialization arguments
described above, the value of each initialization argument is associated
with the <a href="#mop-gen-fun-mo">generic function metaobject</a>.  These values can then be accessed by calling the
corresponding generic function.  The correspondences are as follows:
</p><div class="table"><a id="gf-mo-initargs"></a><p class="title"><b>Table 29.4. Initialization arguments and accessors
  for <a href="#mop-gen-fun-mo">generic function metaobject</a>s</b></p><table summary="Initialization arguments and accessors&#10;  for generic function metaobjects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Initialization Argument</th><th align="center">Generic Function</th></tr></thead><tbody><tr><td align="center"><code class="constant">:ARGUMENT-PRECEDENCE-ORDER</code></td><td align="center"><a href="#gf-argument-precedence-order" title="29.1.5.2.4.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER"><code class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</code></a></td></tr><tr><td align="center"><code class="constant">:DECLARATIONS</code></td><td align="center"><a href="#gf-declarations" title="29.1.5.2.5.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-DECLARATIONS"><code class="function">CLOS:GENERIC-FUNCTION-DECLARATIONS</code></a></td></tr><tr><td align="center"><code class="constant">:DOCUMENTATION</code></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><code class="function">DOCUMENTATION</code></a></td></tr><tr><td align="center"><code class="constant">:LAMBDA-LIST</code></td><td align="center"><a href="#gf-lambda-list" title="29.1.5.2.3.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-LAMBDA-LIST"><code class="function">CLOS:GENERIC-FUNCTION-LAMBDA-LIST</code></a></td></tr><tr><td align="center"><code class="constant">:METHOD-COMBINATION</code></td><td align="center"><a href="#gf-method-combination" title="29.1.5.2.7.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHOD-COMBINATION"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-COMBINATION</code></a></td></tr><tr><td align="center"><code class="constant">:METHOD-CLASS</code></td><td align="center"><a href="#gf-method-class" title="29.1.5.2.6.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</code></a></td></tr><tr><td align="center"><code class="constant">:NAME</code></td><td align="center"><a href="#gf-name" title="29.1.5.2.1.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-NAME"><code class="function">CLOS:GENERIC-FUNCTION-NAME</code></a></td></tr></tbody></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="gf-mo-init-methods"></a>29.1.5.3.3.1. Methods</h6></div></div></div><p>It is not specified which methods provide the initialization and
reinitialization behavior described above.  Instead, the information
needed to allow portable programs to specialize this behavior is
presented as a set of restrictions on the methods a portable program can
define.  The model is that portable initialization methods have access
to the <a href="#mop-gen-fun-mo">generic function metaobject</a> when either all or none of the specified initialization
has taken effect.</p><p>These restrictions govern the methods that a portable program can
define on the generic functions <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>,
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>, and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a>.  These restrictions
apply only to methods on these generic functions for which the first
specializer is a subclass of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>.  Other
portable methods on these generic functions are not affected by these
restrictions.</p><div class="itemizedlist"><ul type="disc"><li>Portable programs must not define methods on
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a>.</li><li><p>For <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>:
   </p><div class="itemizedlist"><ul type="circle"><li>Portable programs must not define primary methods.
 </li><li>Portable programs may define around-methods, but
   these must be extending, not overriding methods.</li><li>Portable before-methods must assume that when they
   are run, none of the initialization behavior described above has been
   completed.</li><li>Portable after-methods must assume that when they
   are run, all of the initialization behavior described above has been
   completed.</li></ul></div></li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></div>
<!--gf-mo-init-methods-->
</div>
<!--mop-gf-init-mo-->
</div>
<!--mop-gf-init-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-gf-customize"></a>29.1.5.4. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#setf-gf-name">29.1.5.4.1. Generic Function <code class="code">(SETF CLOS:GENERIC-FUNCTION-NAME)</code></a></span></dt><dt><span class="section"><a href="#ensure-gf">29.1.5.4.2. Generic Function <code class="function">ENSURE-GENERIC-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#ensure-gf-UC">29.1.5.4.3. Generic Function <code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#mop-add-method">29.1.5.4.4. Generic Function <code class="function">ADD-METHOD</code></a></span></dt><dt><span class="section"><a href="#mop-remove-method">29.1.5.4.5. Generic Function <code class="function">REMOVE-METHOD</code></a></span></dt><dt><span class="section"><a href="#compute-applicable-methods">29.1.5.4.6. Generic Function <code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a></span></dt><dt><span class="section"><a href="#compute-applicable-methods-UC">29.1.5.4.7. Generic Function <code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a></span></dt><dt><span class="section"><a href="#compute-effective-method">29.1.5.4.8. Generic Function <code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a></span></dt><dt><span class="section"><a href="#compute-effective-method-as-function">29.1.5.4.9. Function <code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#make-method-lambda">29.1.5.4.10. Generic Function <code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a></span></dt><dt><span class="section"><a href="#compute-discriminating-function">29.1.5.4.11. Generic Function <code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a></span></dt></dl></div>
<!--begin generic-function basic customization-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="setf-gf-name"></a>29.1.5.4.1. Generic Function <a href="#setf-gf-name" title="29.1.5.4.1.&#xA0;Generic Function (SETF CLOS:GENERIC-FUNCTION-NAME)"><code class="code">(SETF CLOS:GENERIC-FUNCTION-NAME)</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#setf-gf-name" title="29.1.5.4.1.&#xA0;Generic Function (SETF CLOS:GENERIC-FUNCTION-NAME)"><code class="code">(SETF CLOS:GENERIC-FUNCTION-NAME)</code></a> <em class="replaceable"><code>new-name</code></em> <em class="replaceable"><code>generic-function</code></em>)
</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>generic-function</code></em></span></dt><dd>a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>new-name</code></em></span></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>This function returns its <em class="replaceable"><code>new-name</code></em> argument.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This function changes the name of <em class="replaceable"><code>generic-function</code></em> to <em class="replaceable"><code>new-name</code></em>.
   This value is usually a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, if the generic function
   is to have no name.</p><p>This function works by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a> with
   <em class="replaceable"><code>generic-function</code></em> as its first argument, the symbol <code class="constant">:NAME</code> as its second argument
   and <em class="replaceable"><code>new-name</code></em> as its third argument.
</p></dd></dl></div></div>
<!--setf-gf-name-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ensure-gf"></a>29.1.5.4.2. Generic Function <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a> <em class="replaceable"><code>function-name</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
     <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>function-name</code></em></span></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a></dd><dt><span class="term">keyword arguments</span></dt><dd>Some of the keyword arguments accepted by this
      function are actually processed by <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a>, others are
      processed during initialization of the <a href="#mop-gen-fun-mo">generic function metaobject</a>
      (as described in <a href="#mop-gf-init-mo" title="29.1.5.3.3.&#xA0;Initialization of generic function metaobjects">Section 29.1.5.3.3, “Initialization of generic function metaobjects”</a>).
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result is a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term">Purpose</span></dt><dd><p>This function is called to define a globally named
   generic function or to specify or modify options and declarations
   that pertain to a globally named generic function as a whole.  It can
   be called by the user or the implementation.</p><p>It is the functional equivalent of <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a>, and is
   called by the expansion of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> macros.
  </p><p>The behavior of this function is actually
   implemented by the generic function <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a>.  When <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>
   is called, it immediately calls <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a> and returns that
   result as its own.</p><p>The first argument to <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a> is computed as follows:
   </p><div class="itemizedlist"><ul type="disc"><li>If <em class="replaceable"><code>function-name</code></em> names a non-generic
      function, a macro, or a special form, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.
    </li><li>If <em class="replaceable"><code>function-name</code></em> names a generic function, that
      <a href="#mop-gen-fun-mo">generic function metaobject</a> is used.</li><li>Otherwise, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> is used.
   </li></ul></div><p>The second argument is <em class="replaceable"><code>function-name</code></em>.  The remaining arguments
   are the complete set of keyword arguments received by <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>.
</p></dd></dl></div></div>
<!--ensure-gf-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="ensure-gf-UC"></a>29.1.5.4.3. Generic Function <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a> <em class="replaceable"><code>generic-function</code></em> <em class="replaceable"><code>function-name</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    <code class="constant">:ARGUMENT-PRECEDENCE-ORDER</code> <code class="constant">:DECLARATIONS</code> <code class="constant">:DOCUMENTATION</code>
    <code class="constant">:GENERIC-FUNCTION-CLASS</code> <code class="constant">:LAMBDA-LIST</code> <code class="constant">:METHOD-CLASS</code> <code class="constant">:METHOD-COMBINATION</code>
    <code class="constant">:NAME</code> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>generic-function</code></em></span></dt><dd>a <a href="#mop-gen-fun-mo">generic function metaobject</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><span class="term"><em class="replaceable"><code>function-name</code></em></span></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name" target="_top">function name</a></dd><dt><span class="term"><code class="constant">:GENERIC-FUNCTION-CLASS</code></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a> or a class name.  If it is not
      supplied, it defaults to the class named
      <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>.  If a class name is supplied, it is
      interpreted as the class with that name.  If a class name is
      supplied, but there is no such class, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.
   </dd><dt><span class="term">additional keyword arguments</span></dt><dd><p>see <a href="#mop-gf-init-mo" title="29.1.5.3.3.&#xA0;Initialization of generic function metaobjects">Section 29.1.5.3.3, “Initialization of generic function metaobjects”</a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The <code class="constant">:DECLARE</code> keyword is recognized as
       equivalent to the <code class="constant">:DECLARATIONS</code> keyword, for compatibility
       with <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a> in [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</p></div></dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result is a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term">Purpose</span></dt><dd><p>The generic function <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a> is called to
   define or modify the definition of a globally named generic function.
   It is called by the <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a> function.  It can also be called
   directly.</p><p>The first step performed by this generic function is to compute
   the set of initialization arguments which will be used to create or
   reinitialize the globally named generic function.  These
   initialization arguments are computed from the full set of keyword
   arguments received by this generic function as follows:
   </p><div class="itemizedlist"><ul type="disc"><li>The <code class="constant">:GENERIC-FUNCTION-CLASS</code>
      argument is not included in the initialization arguments.
    </li><li>If the <code class="constant">:METHOD-CLASS</code> argument was received by
      this generic function, it is converted into a <a href="#mop-class-mo">class metaobject</a>.
      This is done by looking up the class name with <a href="http://www.lisp.org/HyperSpec/Body/acc_find-class.html" target="_top"><code class="function">FIND-CLASS</code></a>.  If
      there is no such class, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</li><li>All other keyword arguments are included directly
      in the initialization arguments.</li></ul></div><p>If the <em class="replaceable"><code>generic-function</code></em> argument is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, an instance of the class
   specified by the <code class="constant">:GENERIC-FUNCTION-CLASS</code> argument is created by
   calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> with the previously computed initialization
   arguments.  The function name <em class="replaceable"><code>function-name</code></em> is set to name the generic
   function.  The newly created <a href="#mop-gen-fun-mo">generic function metaobject</a> is returned.
  </p><p>If the class of the <em class="replaceable"><code>generic-function</code></em> argument is not the same
   as the class specified by the <code class="constant">:GENERIC-FUNCTION-CLASS</code> argument, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p><p>Otherwise the generic function <em class="replaceable"><code>generic-function</code></em> is redefined by calling
   the <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a> generic function with <em class="replaceable"><code>generic-function</code></em> and the
   initialization arguments.  The <em class="replaceable"><code>generic-function</code></em> argument is then returned.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>) <em class="replaceable"><code>function-name</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   <code class="constant">:GENERIC-FUNCTION-CLASS</code> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)</code></span></span></dt><dd><p>This method implements the behavior of the generic
   function in the case where <em class="replaceable"><code>function-name</code></em> names an existing generic
   function.</p><p>This method can be overridden.</p></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><code class="classname">NULL</code></a>) <em class="replaceable"><code>function-name</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:GENERIC-FUNCTION-CLASS</code>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)</code></span></span></dt><dd>This method implements the behavior of the generic
   function in the case where <em class="replaceable"><code>function-name</code></em> names no function, generic
   function, macro or special form.
</dd></dl></div></div>
<!--ensure-gf-UC-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-add-method"></a>29.1.5.4.4. Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a> <em class="replaceable"><code>generic-function</code></em> <em class="replaceable"><code>method</code></em>)
 </code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>generic-function</code></em></span></dt><dd>a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>method</code></em></span></dt><dd>a <a href="#mop-method-mo">method metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The <em class="replaceable"><code>generic-function</code></em> argument is returned.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function associates an unattached
   method with a generic function.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of the method is not
   congruent with the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of the generic function.</p><p>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if the method is already associated with some
   other generic function.</p><p>If the given method agrees with an existing method of the
   generic function on parameter specializers and qualifiers, the
   existing method is removed by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a> before the
   new method is added.  See the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
   <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-3.html" target="_top">7.6.3 “<span class="quote">Agreement on
     Parameter Specializers and Qualifiers</span>”</a>
   for a definition of agreement in this context.</p><p>Associating the method with the generic function then
   proceeds in four steps:</p><div class="orderedlist"><ol type="i"><li>add <em class="replaceable"><code>method</code></em> to the set returned by
      <a href="#gf-methods" title="29.1.5.2.2.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHODS"><code class="function">CLOS:GENERIC-FUNCTION-METHODS</code></a> and arrange for <a href="#method-gf" title="29.1.6.2.4.&#xA0;Generic Function CLOS:METHOD-GENERIC-FUNCTION"><code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a> to return <em class="replaceable"><code>generic-function</code></em>;
    </li><li>call <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a> for each of the method's
    specializers;</li><li>call <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a> and
      install its result with <a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><code class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</code></a>; and
    </li><li>update the dependents of the generic function.
  </li></ol></div><p>The generic function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a> can be called by the user
   or the implementation.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>)
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span></span></dt><dd>No behavior is specified for this
   method beyond that which is specified for the generic function.</dd><dt><span class="term"><span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>)
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>))</code></span></span></dt><dd>This method is specified by [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
</dd></dl></div></div>
<!--add-method-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-remove-method"></a>29.1.5.4.5. Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a> <em class="replaceable"><code>generic-function</code></em> <em class="replaceable"><code>method</code></em>)
</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>generic-function</code></em></span></dt><dd>a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>method</code></em></span></dt><dd>a <a href="#mop-method-mo">method metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The <em class="replaceable"><code>generic-function</code></em> argument is returned.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function breaks the association between
   a generic function and one of its methods.</p><p>No <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if the method is not among the methods of the
   generic function.</p><p>Breaking the association between the method and the generic
   function proceeds in four steps:</p><div class="orderedlist"><ol type="i"><li>remove <em class="replaceable"><code>method</code></em> from the set returned by
      <a href="#gf-methods" title="29.1.5.2.2.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHODS"><code class="function">CLOS:GENERIC-FUNCTION-METHODS</code></a> and arrange for <a href="#method-gf" title="29.1.6.2.4.&#xA0;Generic Function CLOS:METHOD-GENERIC-FUNCTION"><code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a> to return <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>;
    </li><li>call <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a> for each of the
      method's specializers;</li><li>call <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a> and
      install its result with <a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><code class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</code></a>;
      and</li><li>update the dependents of the generic function.
  </li></ol></div><p>The generic function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a> can be called by the
   user or the implementation.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>)
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span></span></dt><dd>No behavior is specified for this
   method beyond that which is specified for the generic function.</dd><dt><span class="term"><span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>)
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>))</code></span></span></dt><dd>This method is specified by [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].
</dd></dl></div></div>
<!--mop-remove-method-->
<!--end generic-function basic customization-->
<!--begin generic-function advanced customization-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-applicable-methods"></a>29.1.5.4.6. Generic Function <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a>
     <em class="replaceable"><code>generic-function</code></em> <em class="replaceable"><code>arguments</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>generic-function</code></em></span></dt><dd>a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>arguments</code></em></span></dt><dd>a list of objects.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>This generic function returns a possibly empty list
   of <a href="#mop-method-mo">method metaobject</a>s.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function determines the method
   applicability of a generic function given a list of required
   arguments.  The returned list of <a href="#mop-method-mo">method metaobject</a>s is sorted by
   precedence order with the most specific method appearing first.  If
   no methods are applicable to the supplied arguments the empty list is
   returned.</p><p>When a generic function is invoked, the discriminating
   function must determine the ordered list of methods applicable to the
   arguments.  Depending on the generic function and the arguments, this
   is done in one of three ways: using a memoized value; calling
   <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a>; or calling
   <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a>.
   (Refer to the description of <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a> for
   the details of this process.)</p><p>The <em class="replaceable"><code>arguments</code></em> argument is permitted to contain more elements
   than the generic function accepts required arguments; in these cases
   the extra arguments will be ignored.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if <em class="replaceable"><code>arguments</code></em>
   contains fewer elements than the generic function accepts required
   arguments.</p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>) <em class="replaceable"><code>arguments</code></em>)</code></span></span></dt><dd><p>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> if any method of the generic
   function has a specializer which is neither a <a href="#mop-class-mo">class metaobject</a> nor an
   <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializer metaobject.</p><p>Otherwise, this method computes the sorted list of applicable
   methods according to the rules described in the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] section
   <a href="http://www.lisp.org/HyperSpec/Body/sec_7-6-6.html" target="_top">7.6.6 “<span class="quote">Method Selection
     and Combination</span>”</a></p><p>This method can be overridden.  Because of the consistency
   requirements between this generic function and
   <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a>, doing so may require also overriding
   <span class="method"><code class="literal"><a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a>
    (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span>.
</p></dd></dl></div><p><a id="mop-cam-remarks"></a><b>Remarks. </b>
<!--sds-->
See also the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_com_able-methods.html" target="_top"><code class="function">COMPUTE-APPLICABLE-METHODS</code></a>.
</p></div>
<!--compute-applicable-methods-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-applicable-methods-UC"></a>29.1.5.4.7. Generic Function <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a>
    <em class="replaceable"><code>generic-function</code></em> <em class="replaceable"><code>classes</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>generic-function</code></em></span></dt><dd>a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>classes</code></em></span></dt><dd>a list of <a href="#mop-class-mo">class metaobject</a>s.
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>This generic function returns two values.  The first
   is a possibly empty list of <a href="#mop-method-mo">method metaobject</a>s.  The second is either
   true or false.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to attempt to
   determine the method applicability of a generic function given only
   the classes of the required arguments.</p><p>If it is possible to completely determine the ordered list of
   applicable methods based only on the supplied classes, this generic
   function returns that list as its <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#primary_value" target="_top">primary value</a> and true as its second
   value.  The returned list of <a href="#mop-method-mo">method metaobject</a>s is sorted by
   precedence order, the most specific method coming first.  If no
   methods are applicable to arguments with the specified classes, the
   empty list and true are returned.</p><p>If it is not possible to completely determine the ordered
   list of applicable methods based only on the supplied classes, this
   generic function returns an unspecified <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#primary_value" target="_top">primary value</a> and false as its
   second value.</p><p>When a generic function is invoked, the discriminating
   function must determine the ordered list of methods applicable to the
   arguments.  Depending on the generic function and the arguments, this
   is done in one of three ways: using a memoized value; calling
   <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a>; or calling
   <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a>.  (Refer to the description of
   <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a> for the details of this process.)
  </p><p>The following consistency relationship between
   <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a> and <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a> must
   be maintained: for any given generic function and set of arguments,
   if <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a> returns a second value of true,
   the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#primary_value" target="_top">primary value</a> must be equal to the value that would be returned by
   a corresponding call to <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a>.  The results
   are undefined if a portable method on either of these generic
   functions causes this consistency to be violated.</p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>) <em class="replaceable"><code>classes</code></em>)</code></span></span></dt><dd><p>If any method of the generic function has a
   specializer which is neither a <a href="#mop-class-mo">class metaobject</a> nor an <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a>
   specializer metaobject, this method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.</p><p>In cases where the generic function has no methods with
   <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializers, or has no methods with <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializers
   that could be applicable to arguments of the supplied classes, this
   method returns the ordered list of applicable methods as its first
   value and true as its second value.</p><p>Otherwise this method returns an unspecified <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#primary_value" target="_top">primary value</a> and
   false as its second value.</p><p>This method can be overridden. Because of the consistency
   requirements between this generic function and
   <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a>, doing so may require also overriding
   <span class="method"><code class="literal"><a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a>
    (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>) </code></span>.
</p></dd></dl></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-cam-UC-remarks"></a>Remarks</h6></div></div></div><p>This generic function exists to allow user extensions which alter
method lookup rules, but which base the new rules only on the classes of
the required arguments, to take advantage of the class-based method
lookup memoization found in many implementations.  (There is of course
no requirement for an implementation to provide this optimization.)</p><p>Such an extension can be implemented by two methods, one on this
generic function and one on <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a>.  Whenever
the user extension is in effect, the first method will return a second
value of true.  This should allow the implementation to absorb these
cases into its own memoization scheme.</p><p>To get appropriate performance, other kinds of extensions may
require methods on <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a> which implement
their own memoization scheme.</p></div></div>
<!--compute-applicable-methods-UC-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-effective-method"></a>29.1.5.4.8. Generic Function <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a> <em class="replaceable"><code>generic-function</code></em> <em class="replaceable"><code>method-combination</code></em>
    <em class="replaceable"><code>methods</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>generic-function</code></em></span></dt><dd>a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>method-combination</code></em></span></dt><dd>a <a href="#mop-meth-comp-mo">method combination metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>methods</code></em></span></dt><dd>a list of <a href="#mop-method-mo">method metaobject</a>s.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>This generic function returns two values.  The first
   is an effective method, the second is a list of effective method
   options.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to determine the
   effective method from a sorted list of <a href="#mop-method-mo">method metaobject</a>s.</p><p>An effective method is a form that describes how the
    applicable methods are to be combined.  Inside of effective method
    forms are <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a> forms which indicate that a particular
    method is to be called.  The arguments to the <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a> form
    indicate exactly how the method function of the method should be
    called.  (See <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> for more details about method
    functions.)</p><p>An effective method option has the same interpretation and
    syntax as either the <code class="constant">:ARGUMENTS</code> or the <code class="constant">:GENERIC-FUNCTION</code> option in the long form
    of <a href="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html" target="_top"><code class="function">DEFINE-METHOD-COMBINATION</code></a>.</p><p>More information about the form and interpretation of
    effective methods and effective method options can be found under
    the description of the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html" target="_top"><code class="function">DEFINE-METHOD-COMBINATION</code></a> macro in the
    <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> specification.</p><p>This generic function can be called by the user or the
    implementation.  It is called by discriminating functions whenever a
    sorted list of applicable methods must be converted to an effective
    method.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>) <em class="replaceable"><code>method-combination</code></em> <em class="replaceable"><code>methods</code></em>)</code></span></span></dt><dd><p>This method computes the effective method according
   to the rules of the method combination type implemented by <em class="replaceable"><code>method-combination</code></em>.</p><p>This method can be overridden.</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The second return value may contain only one
  <code class="constant">:ARGUMENTS</code> option and only one <code class="constant">:GENERIC-FUNCTION</code> option. When overriding a
  <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a> method, before adding an <code class="constant">:ARGUMENTS</code> or
  <code class="constant">:GENERIC-FUNCTION</code> option, you therefore need to check whether it this option is
  already present.</p></div></div>
<!--compute-effective-method-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-effective-method-as-function"></a>29.1.5.4.9. Function <a href="#compute-effective-method-as-function" title="29.1.5.4.9.&#xA0;Function CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</code></a></h5></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p></p></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#compute-effective-method-as-function" title="29.1.5.4.9.&#xA0;Function CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</code></a>
    <em class="replaceable"><code>generic-function</code></em> <em class="replaceable"><code>methods</code></em> <em class="replaceable"><code>arguments</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>generic-function</code></em></span></dt><dd>a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>methods</code></em></span></dt><dd>a list of <a href="#mop-method-mo">method metaobject</a>s.</dd><dt><span class="term"><em class="replaceable"><code>arguments</code></em></span></dt><dd>a list of arguments.
   </dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>This function returns the effective method as a function,
   accepting any set of arguments for which all of the given methods are
   applicable.</dd><dt><span class="term">Purpose</span></dt><dd><p>This function is called to determine the effective method
   from a sorted list of <a href="#mop-method-mo">method metaobject</a>s, and convert it to a function.
   The <em class="replaceable"><code>arguments</code></em> are a set of arguments to which the methods are applicable,
   and are used solely for error message purposes.</p><p>This function calls <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a> using the <em class="replaceable"><code>generic-function</code></em>'s
   method combination, wraps local macro definitions for <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a> and
   <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">MAKE-METHOD</code></a> around it, handles the <code class="constant">:ARGUMENTS</code> and <code class="constant">:GENERIC-FUNCTION</code> options,
   and compiles the resulting form to a function.</p></dd></dl></div></div>
<!--compute-effective-method-as-function-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="make-method-lambda"></a>29.1.5.4.10. Generic Function <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> <em class="replaceable"><code>generic-function</code></em>
    <em class="replaceable"><code>method</code></em> <em class="replaceable"><code>lambda-expression</code></em> <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em>)
 </code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>generic-function</code></em></span></dt><dd>a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>method</code></em></span></dt><dd>a (possibly uninitialized) <a href="#mop-method-mo">method metaobject</a>.
      
<!--change to uninitialized?????-->

   </dd><dt><span class="term"><em class="replaceable"><code>lambda-expression</code></em></span></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a>.</dd><dt><span class="term"><em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em></span></dt><dd>the same as the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;ENVIRONMENT</code></a> argument to
     macro expansion functions.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>This generic function returns two values.  The first
   is a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a>, the second is a list of initialization
   arguments and values.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to produce a
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> which can itself be used to produce a method function
   for a method and generic function with the specified classes.
   The generic function and method the method function will be used with
   are not required to be the given ones.
   Moreover, the <a href="#mop-method-mo">method metaobject</a> may be uninitialized.</p><p>Either the function <a href="http://www.lisp.org/HyperSpec/Body/fun_compile.html" target="_top"><code class="function">COMPILE</code></a>, the special form <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><code class="function">FUNCTION</code></a> or
   the function <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><code class="function">COERCE</code></a> must be used to convert the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> a
   method function.  The method function itself can be applied to
   arguments with <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a>.</p><p>When a method is actually called by an effective method, its
   first argument will be a list of the arguments to the generic
   function.  Its remaining arguments will be all but the first argument
   passed to <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a>.  By default, all method functions must
   accept two arguments: the list of arguments to the generic function
   and the list of next methods.</p><p>For a given generic function and method class, the applicable
   methods on <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> and <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a> must
   be consistent in the following way: each use of <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a>
   returned by the method on <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a> must have the
   same number of arguments, and the method lambda returned by the
   method on <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> must accept a corresponding number of
   arguments.</p><p>Note that the system-supplied implementation of
   <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a> is not required to handle extra arguments to the
   method function.  Users who define additional arguments to the method
   function must either redefine or forego <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a>.  (See the
   example below.)</p><p>When the <a href="#mop-method-mo">method metaobject</a> is created with <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>, the method
   function must be the value of the <code class="constant">:FUNCTION</code> initialization
   argument.  The additional initialization arguments, returned as the
   second value of this generic function, must also be passed in this
   call to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>)
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>)
   <em class="replaceable"><code>lambda-expression</code></em> <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em>)</code></span></span></dt><dd><p>This method returns a method lambda which accepts two
  arguments, the list of arguments to the generic function, and the list
  of next methods.  What initialization arguments may be returned in the
  second value are unspecified.</p><p>This method can be overridden.</p></dd></dl></div><div class="informalexample"><p>This example shows how to define a kind of method which, from
within the body of the method, has access to the actual <a href="#mop-method-mo">method metaobject</a> for the
method.  This simplified code overrides whatever method combination is
specified for the generic function, implementing a simple method
combination supporting only primary methods, <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a> and
<a href="http://www.lisp.org/HyperSpec/Body/locfun_next-method-p.html" target="_top"><code class="function">NEXT-METHOD-P</code></a>.  (In addition, its a simplified version of
<a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a> which does no error checking.)</p><p>Notice that the extra lexical function bindings get wrapped around
the body before <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a> is called.  In this way, the user's
definition of <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/locfun_next-method-p.html" target="_top"><code class="function">NEXT-METHOD-P</code></a> are sure to
override the system's definitions.</p><pre class="programlisting">
(defclass my-generic-function (standard-generic-function)
  ()
  (:default-initargs :method-class (find-class 'my-method)))

(defclass my-method (standard-method) ())

(defmethod make-method-lambda ((gf my-generic-function)
                               (method my-method)
                               lambda-expression
                               environment)
  (declare (ignore environment))
  `(lambda (args next-methods this-method)
     (,(call-next-method gf method
         `(lambda ,(cadr lambda-expression)
            (flet ((this-method () this-method)
                   (call-next-method (<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> cnm-args)
                     (funcall (method-function (car next-methods))
                              (or cnm-args args)
                              (cdr next-methods)
                              (car next-methods)))
                   (next-method-p ()
                     (not (null next-methods))))
              ,@(cddr lambda-expression)))
          environment)
       args next-methods)))

(defmethod compute-effective-method ((gf my-generic-function)
                                     method-combination
                                     methods)
  `(call-method ,(car methods) ,(cdr methods) ,(car methods)))
</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p><a id="no-make-method-lambda"></a><b>The generic function <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> is not implemented. </b>Its specification is misdesigned: it mixes <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compile_time" target="_top">compile time</a> and
   <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#execution_time" target="_top">execution time</a> behaviour. The essential problem is: where could the
   generic-function argument come from?
   </p><div class="itemizedlist"><ul type="disc"><li>If a <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form occurs in a source file, is
      <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> then called at compile time or at load time?
      If it was called at compile time, there's no possible value for
      the first argument, since the class of the generic function to
      which the method will belong is not known until load time.  If it
      was called at load time, it would mean that the method's source
      code could only be compiled at load time, not earlier - which
      defeats the purpose of <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a></li><li>When a method is removed from a generic function
      using <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a> and then added through <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a> to a
      different generic function, possibly belonging to a different
      generic function class, would <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> then be called
      again or not? If no, then <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a>'s first argument is
      useless. If yes, then the source code of every method would have
      to be present at runtime, and its lexical environment as well.
 </li></ul></div><p><a id="method-functions-args"></a><b>Method function arguments. </b></p><div class="itemizedlist"><ul type="disc"><li><a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a> always expect
      exactly two arguments: the method and a list of next methods.
    </li><li>Method functions always
      expect exactly two arguments: the list of arguments passed to the
      generic function, and the list of next methods.
</li></ul></div></div></div>
<!--make-method-lambda-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="compute-discriminating-function"></a>29.1.5.4.11. Generic Function <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a>
    <em class="replaceable"><code>generic-function</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>generic-function</code></em></span></dt><dd>a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic function is a
   function.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to determine the
   discriminating function for a generic function.  When a generic
   function is called, the <strong class="first"><em class="firstterm">installed</em></strong>
   discriminating function is called with the full set of arguments
   received by the generic function, and must implement the behavior of
   calling the generic function: determining the ordered set of
   applicable methods, determining the effective method, and running the
   effective method.</p><p>To determine the ordered set of applicable methods, the
   discriminating function first calls <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a>.
   If <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a> returns a second value of false,
   the discriminating function then calls <a href="#compute-applicable-methods" title="29.1.5.4.6.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS</code></a>.
  </p><p>When <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a> returns a second
   value of true, the discriminating function is permitted to memoize
   the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#primary_value" target="_top">primary value</a> as follows.  The discriminating function may
   reuse the list of applicable methods without calling
   <a href="#compute-applicable-methods-UC" title="29.1.5.4.7.&#xA0;Generic Function CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES"><code class="function">CLOS:COMPUTE-APPLICABLE-METHODS-USING-CLASSES</code></a> again provided that:
   </p><div class="orderedlist"><ol type="i"><li>the generic function is being called again with
      required arguments which are instances of the same classes,
    </li><li>the generic function has not been reinitialized,
    </li><li>no method has been added to or removed from the
      generic function,</li><li>for all the specializers of all the generic
      function's methods which are classes, their class precedence lists
      have not changed, and</li><li>for any such memoized value, the class precedence
      list of the class of each of the required arguments has not changed.
   </li></ol></div><p>
   Determination of the effective method is done by calling
   <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a>.  When the effective method is run, each
   method's function is called, and receives as arguments:
   </p><div class="orderedlist"><ol type="i"><li>a list of the arguments to the generic function,
    </li><li>whatever other arguments are specified in the
      <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a> form indicating that the method should be called.
   </li></ol></div><p>
   (See <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> for more information about how method
   functions are called.)</p><p>The generic function <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a> is
   called, and its result installed, by <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a>
    (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>))</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method can be overridden.</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>Overriding methods can make use of the function
  <a href="#compute-effective-method-as-function" title="29.1.5.4.9.&#xA0;Function CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</code></a>.  It is more convenient to call
  <a href="#compute-effective-method-as-function" title="29.1.5.4.9.&#xA0;Function CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</code></a> than <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a>
  because the in the latter case one needs a lot of “<span class="quote">glue
   code</span>” for implementing the local macros <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a> and
  <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">MAKE-METHOD</code></a>, and this glue code is implementation dependent because
  it needs</p><div class="orderedlist"><ol type="1"><li>to retrieve the declarations
     list stored in the method-combination object and</li><li>to handle implementation dependent options that
     are returned as second value from <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a>.
</li></ol></div></div></div>
<!--compute-discriminating-function-->
<!--end generic-function advanced customization-->
</div>
<!--mop-gf-customize-->
</div>
<!--mop-gf-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-meth"></a>29.1.6. Methods</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-meth-inheritance">29.1.6.1. Inheritance Structure of method metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-meth-mo-readers">29.1.6.2. Introspection: Readers for method metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#method-specializers">29.1.6.2.1. Generic Function <code class="function">CLOS:METHOD-SPECIALIZERS</code></a></span></dt><dt><span class="section"><a href="#method-qualifiers">29.1.6.2.2. Generic Function <code class="function">METHOD-QUALIFIERS</code></a></span></dt><dt><span class="section"><a href="#method-lambda-list">29.1.6.2.3. Generic Function <code class="function">CLOS:METHOD-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="#method-gf">29.1.6.2.4. Generic Function <code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#method-function">29.1.6.2.5. Generic Function <code class="function">CLOS:METHOD-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#mop-meth-mo-readers-methods">29.1.6.2.6. Methods</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-meth-init">29.1.6.3. Initialization of Methods</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-meth-init-defmethod">29.1.6.3.1. Macro <code class="function">DEFMETHOD</code></a></span></dt><dd><dl><dt><span class="section"><a href="#mop-meth-init-defmethod-body">29.1.6.3.1.1. Processing Method Bodies</a></span></dt><dt><span class="section"><a href="#mop-meth-init-defmethod-mo">29.1.6.3.1.2. Initialization of Generic Function and method metaobjects</a></span></dt><dt><span class="section"><a href="#mop-meth-efficiency">29.1.6.3.1.3. Efficiency</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-meth-init-mo">29.1.6.3.2. Initialization of method metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-meth-init-mo-method">29.1.6.3.2.1. Methods</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#mop-meth-customize">29.1.6.4. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#extract-lambda-list">29.1.6.4.1. Function <code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="#extract-specializer-names">29.1.6.4.2. Function <code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-inheritance"></a>29.1.6.1. Inheritance Structure of <a href="#mop-method-mo">method metaobject</a> Classes</h4></div></div></div><div class="figure"><a id="mop-meth-inheritance-fig"></a><p class="title"><b>Figure 29.5. Inheritance structure of <a href="#mop-method-mo">method metaobject</a> classes</b></p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="mop-classes-method.png" width="100%" alt="Inheritance structure of method metaobject classes" /></td></tr></table></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-mo-readers"></a>29.1.6.2. Introspection: Readers for <a href="#mop-method-mo">method metaobject</a>s</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#method-specializers">29.1.6.2.1. Generic Function <code class="function">CLOS:METHOD-SPECIALIZERS</code></a></span></dt><dt><span class="section"><a href="#method-qualifiers">29.1.6.2.2. Generic Function <code class="function">METHOD-QUALIFIERS</code></a></span></dt><dt><span class="section"><a href="#method-lambda-list">29.1.6.2.3. Generic Function <code class="function">CLOS:METHOD-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="#method-gf">29.1.6.2.4. Generic Function <code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#method-function">29.1.6.2.5. Generic Function <code class="function">CLOS:METHOD-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#mop-meth-mo-readers-methods">29.1.6.2.6. Methods</a></span></dt></dl></div><p>The reader generic functions which simply return information
associated with <a href="#mop-method-mo">method metaobject</a>s are presented together here in the
format described in <a href="#mop-cl-readers" title="29.1.3.3.&#xA0;Introspection: Readers for class metaobjects">Section 29.1.3.3, “Introspection: Readers for class metaobjects”</a>.</p><p>Each of these reader generic functions have the same syntax,
accepting one required argument called <em class="replaceable"><code>method</code></em>, which must be a
<a href="#mop-method-mo">method metaobject</a>; otherwise, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is also <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed
if the <a href="#mop-method-mo">method metaobject</a> has not been initialized.</p><p>These generic functions can be called by the user or the
 implementation.</p><p>For any of these generic
 functions which returns a list, such lists will not be mutated by the
 implementation.  The results are undefined if a portable program allows
 such a list to be mutated.</p>
<!--begin method basic introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="method-specializers"></a>29.1.6.2.1. Generic Function <a href="#method-specializers" title="29.1.6.2.1.&#xA0;Generic Function CLOS:METHOD-SPECIALIZERS"><code class="function">CLOS:METHOD-SPECIALIZERS</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#method-specializers" title="29.1.6.2.1.&#xA0;Generic Function CLOS:METHOD-SPECIALIZERS"><code class="function">CLOS:METHOD-SPECIALIZERS</code></a> <em class="replaceable"><code>method</code></em>)</code></h6></div></div></div><p>Returns a list of the specializers of <em class="replaceable"><code>method</code></em>.  This value is a
list of specializer metaobjects.  This is the value of the
<code class="constant">:SPECIALIZERS</code> initialization argument that was associated with the
method during initialization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="method-qualifiers"></a>29.1.6.2.2. Generic Function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><code class="function">METHOD-QUALIFIERS</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><code class="function">METHOD-QUALIFIERS</code></a> <em class="replaceable"><code>method</code></em>)</code></h6></div></div></div><p>Returns a (possibly empty) list of the qualifiers of <em class="replaceable"><code>method</code></em>.
This value is a list of non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> atoms.  This is the defaulted value of
the <code class="constant">:QUALIFIERS</code> initialization argument that was associated with the
method during initialization.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="method-lambda-list"></a>29.1.6.2.3. Generic Function <a href="#method-lambda-list" title="29.1.6.2.3.&#xA0;Generic Function CLOS:METHOD-LAMBDA-LIST"><code class="function">CLOS:METHOD-LAMBDA-LIST</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#method-lambda-list" title="29.1.6.2.3.&#xA0;Generic Function CLOS:METHOD-LAMBDA-LIST"><code class="function">CLOS:METHOD-LAMBDA-LIST</code></a> <em class="replaceable"><code>method</code></em>)</code></h6></div></div></div><p>Returns the (unspecialized) <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of <em class="replaceable"><code>method</code></em>.  This value
is a <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>.  This is the value of the <code class="constant">:LAMBDA-LIST</code>
initialization argument that was associated with the method during
initialization.</p></div>
<!--end method basic introspection-->
<!--begin method advanced introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="method-gf"></a>29.1.6.2.4. Generic Function <a href="#method-gf" title="29.1.6.2.4.&#xA0;Generic Function CLOS:METHOD-GENERIC-FUNCTION"><code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#method-gf" title="29.1.6.2.4.&#xA0;Generic Function CLOS:METHOD-GENERIC-FUNCTION"><code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a> <em class="replaceable"><code>method</code></em>)</code></h6></div></div></div><p>Returns the generic function that <em class="replaceable"><code>method</code></em> is currently
connected to, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if it is not currently connected to any generic
function.  This value is either a <a href="#mop-gen-fun-mo">generic function metaobject</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
When a method is first created it is not connected to any generic
function.  This connection is maintained by the generic functions
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="method-function"></a>29.1.6.2.5. Generic Function <a href="#method-function" title="29.1.6.2.5.&#xA0;Generic Function CLOS:METHOD-FUNCTION"><code class="function">CLOS:METHOD-FUNCTION</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#method-function" title="29.1.6.2.5.&#xA0;Generic Function CLOS:METHOD-FUNCTION"><code class="function">CLOS:METHOD-FUNCTION</code></a> <em class="replaceable"><code>method</code></em>)</code></h6></div></div></div><p>Returns the method function of <em class="replaceable"><code>method</code></em>.  This is the
value of the <code class="constant">:FUNCTION</code> initialization argument that was associated
with the method during initialization.</p></div>
<!--end method advanced introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-meth-mo-readers-methods"></a>29.1.6.2.6. Methods</h5></div></div></div><div class="variablelist"><p class="title"><b>The specified methods for the <a href="#mop-method-mo">method metaobject</a> readers</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#method-specializers" title="29.1.6.2.1.&#xA0;Generic Function CLOS:METHOD-SPECIALIZERS"><code class="function">CLOS:METHOD-SPECIALIZERS</code></a>
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><code class="function">METHOD-QUALIFIERS</code></a>
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#method-lambda-list" title="29.1.6.2.3.&#xA0;Generic Function CLOS:METHOD-LAMBDA-LIST"><code class="function">CLOS:METHOD-LAMBDA-LIST</code></a>
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#method-function" title="29.1.6.2.5.&#xA0;Generic Function CLOS:METHOD-FUNCTION"><code class="function">CLOS:METHOD-FUNCTION</code></a>
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span></span></dt><dd>No behavior is specified for these
   methods beyond that which is specified for their respective generic
   functions.</dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#method-gf" title="29.1.6.2.4.&#xA0;Generic Function CLOS:METHOD-GENERIC-FUNCTION"><code class="function">CLOS:METHOD-GENERIC-FUNCTION</code></a>
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>))</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>The value returned by this method is maintained by
  <span class="method"><code class="literal"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>)</code></span> and
  <span class="method"><code class="literal"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>)</code></span>.</p></dd></dl></div></div>
<!--mop-meth-mo-readers-methods-->
</div>
<!--mop-meth-mo-readers-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-init"></a>29.1.6.3. Initialization of Methods</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-meth-init-defmethod">29.1.6.3.1. Macro <code class="function">DEFMETHOD</code></a></span></dt><dd><dl><dt><span class="section"><a href="#mop-meth-init-defmethod-body">29.1.6.3.1.1. Processing Method Bodies</a></span></dt><dt><span class="section"><a href="#mop-meth-init-defmethod-mo">29.1.6.3.1.2. Initialization of Generic Function and method metaobjects</a></span></dt><dt><span class="section"><a href="#mop-meth-efficiency">29.1.6.3.1.3. Efficiency</a></span></dt></dl></dd><dt><span class="section"><a href="#mop-meth-init-mo">29.1.6.3.2. Initialization of method metaobjects</a></span></dt><dd><dl><dt><span class="section"><a href="#mop-meth-init-mo-method">29.1.6.3.2.1. Methods</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-meth-init-defmethod"></a>29.1.6.3.1. Macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a></h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-meth-init-defmethod-body">29.1.6.3.1.1. Processing Method Bodies</a></span></dt><dt><span class="section"><a href="#mop-meth-init-defmethod-mo">29.1.6.3.1.2. Initialization of Generic Function and method metaobjects</a></span></dt><dt><span class="section"><a href="#mop-meth-efficiency">29.1.6.3.1.3. Efficiency</a></span></dt></dl></div><p>The evaluation or execution of a <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form requires first
that the body of the method be converted to a method function.
This process is described
<a href="#mop-meth-init-defmethod-body" title="29.1.6.3.1.1.&#xA0;Processing Method Bodies">below</a>.
The result of this process is a method function and a set of additional
initialization arguments to be used when creating the new method.
Given these two values, the evaluation or execution of a <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>
form proceeds in three steps.</p><p>The first step ensures the existence of a generic function with
the specified name.  This is done by calling the function <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>.
The first argument in this call is the generic function name specified
in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.</p><p>The second step is the creation of the new <a href="#mop-method-mo">method metaobject</a> by calling
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.  The class of the new <a href="#mop-method-mo">method metaobject</a> is determined by calling
<a href="#gf-method-class" title="29.1.5.2.6.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</code></a> on the result of the call to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a> from the
first step.</p><p>The initialization arguments received by the call to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
are as follows:</p><div class="itemizedlist"><ul type="disc"><li>The value of the <code class="constant">:QUALIFIERS</code> initialization
argument is a list of the qualifiers which appeared in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>
form.  No special processing is done on these values.  The order of the
elements of this list is the same as in the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.
</li><li>The value of the <code class="constant">:LAMBDA-LIST</code> initialization
argument is the unspecialized <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> from the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.
</li><li>The value of the <code class="constant">:SPECIALIZERS</code> initialization
argument is a list of the specializers for the method.  For specializers
which are classes, the specializer is the <a href="#mop-class-mo">class metaobject</a> itself.  In
the case of <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializers, it will be an <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:EQL-SPECIALIZER</code></a>
metaobject obtained by calling <a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><code class="function">CLOS:INTERN-EQL-SPECIALIZER</code></a> on the result of
evaluating the <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializer form in the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> of the
<a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.</li><li>The value of the <code class="constant">:FUNCTION</code> initialization
argument is the method function.</li><li><p>The value of the <code class="constant">:DECLARATIONS</code> initialization
argument is a list of the <a href="http://www.lisp.org/HyperSpec/Body/glo_d.html#declaration_specifier" target="_top">declaration specifier</a>s from the
<a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.  If there are no declarations in the macro form, this
initialization argument either does not appear, or appears with a value
of the empty list.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>No <code class="constant">:DECLARATIONS</code> initialization argument is
  provided, because method initialization does not support a <code class="constant">:DECLARATIONS</code>
  argument, and because the method function is already completely provided
  through the <code class="constant">:FUNCTION</code> initialization argument.</p></div></li><li>The value of the <code class="constant">:DOCUMENTATION</code> initialization
argument is the documentation string from the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.  If
there is no documentation string in the macro form this initialization
argument either does not appear, or appears with a value of false.
</li><li>Any other initialization argument produced in
conjunction with the method function are also included.</li><li>The implementation is free to include additional
initialization arguments provided these are not symbols accessible in
the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP-USER</span>”</strong></a> package, or exported by any package defined in the
[<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>].</li></ul></div><p>In the third step, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a> is called to add the newly created
method to the set of methods associated with the <a href="#mop-gen-fun-mo">generic function metaobject</a>.</p><p>The result of the call to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a> is returned as the result
of evaluating or executing the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form.</p><p>An example showing a typical <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form and a sample
expansion is shown in the following example:
</p><div class="informalexample"><a id="defmethod-ex-1"></a><p>An example <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> form and one possible correct
  expansion. In the expansion, <em class="replaceable"><code>method-lambda</code></em>
  is the result of calling <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> as described in
  <a href="#mop-meth-init-defmethod-body" title="29.1.6.3.1.1.&#xA0;Processing Method Bodies">Section 29.1.6.3.1.1, “Processing Method Bodies”</a>.
  The initargs appearing after <code class="constant">:FUNCTION</code> are assumed to be additional
  initargs returned from the call to <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a>.</p><pre class="programlisting">
(defmethod move :before ((p position) (l (eql 0))
                         <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (visiblyp t)
                         <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> color)
  (set-to-origin p)
  (when visiblyp (show-move p 0 color)))

(let ((#:g001 (ensure-generic-function 'move)))
  (add-method #:g001
    (make-instance (generic-function-method-class #:g001)
                   :qualifiers '(:before)
                   :specializers (list (find-class 'position)
                                       (intern-eql-specializer 0))
                   :lambda-list '(p l <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (visiblyp t)
                                      <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> color)
                   :function (function <em class="replaceable"><code>method-lambda</code></em>)
                   'additional-initarg-1 't
                   'additional-initarg-2 '39)))
</pre></div><p>The processing of the method body for this method is shown
 <a href="#defmethod-ex-2">below</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-meth-init-defmethod-body"></a>29.1.6.3.1.1. Processing Method Bodies</h6></div></div></div><p>Before a method can be created, the list of forms comprising the
method body must be converted to a method function.  This conversion is
a two step process.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The body of methods can also appear in the
<code class="constant">:METHOD</code> option of <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> forms.  Initial methods are
not considered by any of the protocols specified in this document.
</p></div><div class="informalexample"><a id="defmethod-ex-2"></a><p>During macro-expansion of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> macro shown in
  the <a href="#defmethod-ex-1">previous example</a> code
  similar to this would be run to produce the method lambda and
  additional initargs.  In this example, <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em> is the macroexpansion
  environment of the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> macro form.</p><pre class="programlisting">
(let ((gf (ensure-generic-function 'move)))
  (make-method-lambda
    gf
    (class-prototype (generic-function-method-class gf))
    '(lambda (p l <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (visiblyp t) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> color)
       (set-to-origin p)
       (when visiblyp (show-move p 0 color)))
    <em class="replaceable"><code><a href="http://www.lisp.org/HyperSpec/sec_3-1-1-4.html" target="_top">environment</a></code></em>))
</pre></div><p>The first step occurs during macro-expansion of the macro form.
In this step, the method <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>, declarations and body are
converted to a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> called a <strong class="first"><em class="firstterm">method
lambda</em></strong>.  This conversion is based on information associated
with the generic function definition in effect at the time the macro
form is expanded.</p><p>The generic function definition is obtained by calling <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>
with a first argument of the generic function name specified in the
macro form.  The <code class="constant">:LAMBDA-LIST</code> keyword argument is not passed in this
call.</p><p>Given the generic function, production of the method lambda
proceeds by calling <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a>.  The first argument in this
call is the generic function obtained as described above.  The second
argument is the result of calling <a href="#class-prototype" title="29.1.3.3.10.&#xA0;Generic Function CLOS:CLASS-PROTOTYPE"><code class="function">CLOS:CLASS-PROTOTYPE</code></a> on the result of
calling <a href="#gf-method-class" title="29.1.5.2.6.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-METHOD-CLASS"><code class="function">CLOS:GENERIC-FUNCTION-METHOD-CLASS</code></a> on the generic function.  The
third argument is a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-3.html" target="_top">lambda expression</a> formed from the method <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>,
declarations and body.  The fourth argument is the macro-expansion
environment of the macro form; this is the value of the
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;ENVIRONMENT</code></a> argument to the <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> macro.</p><p>The generic function <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> returns two values.  The
first is the method lambda itself.  The second is a list of
initialization arguments and values.  These are included in the
initialization arguments when the method is created.</p><p>In the second step, the method lambda is converted to a function
which properly captures the lexical scope of the macro form.  This is
done by having the method lambda appear in the macro-expansion as the
argument of the <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><code class="function">FUNCTION</code></a> special form.  During the subsequent
evaluation of the macro-expansion, the result of the <a href="http://www.lisp.org/HyperSpec/Body/speope_function.html" target="_top"><code class="function">FUNCTION</code></a> special
form is the method function.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>See <a href="#no-make-method-lambda" title="The generic function CLOS:MAKE-METHOD-LAMBDA is not implemented">The generic function <code class="function">CLOS:MAKE-METHOD-LAMBDA</code> is not implemented</a>.
</p></div></div>
<!--mop-meth-init-defmethod-body-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-meth-init-defmethod-mo"></a>29.1.6.3.1.2. Initialization of Generic Function and <a href="#mop-method-mo">method metaobject</a>s</h6></div></div></div><p>An example of creating a generic function and a <a href="#mop-method-mo">method metaobject</a>, and then
adding the method to the generic function is shown below.  This example
is comparable to the method definition shown
 <a href="#defmethod-ex-1">above</a>:
</p><pre class="programlisting">
(let* ((gf (make-instance 'standard-generic-function
                          :lambda-list '(p l <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> visiblyp <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>)))
       (method-class (generic-function-method-class gf)))
  (multiple-value-bind (lambda initargs)
       (make-method-lambda
         gf
         (class-prototype method-class)
         '(lambda (p l <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (visiblyp t) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> color)
            (set-to-origin p)
            (when visiblyp (show-move p 0 color)))
         nil)
    (add-method gf
                (apply #'make-instance method-class
                       :function (compile nil lambda)
                       :specializers (list (find-class 'position)
                                           (intern-eql-specializer 0))
                       :qualifiers ()
                       :lambda-list '(p l <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (visiblyp t)
                                          <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> color)
                       initargs))))
</pre></div>
<!--mop-meth-init-defmethod-mo-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-meth-efficiency"></a>29.1.6.3.1.3. Efficiency</h6></div><div><h6 class="subtitle">Implementation dependent: only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> and some other
  implementations</h6></div></div></div><p>Methods created through <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a> have a faster calling
  convention than methods created through a portable <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
  invocation.</p></div>
<!--mop-meth-efficiency-->
</div>
<!--mop-meth-init-defmethod-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="mop-meth-init-mo"></a>29.1.6.3.2. Initialization of <a href="#mop-method-mo">method metaobject</a>s</h5></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-meth-init-mo-method">29.1.6.3.2.1. Methods</a></span></dt></dl></div><p>A <a href="#mop-method-mo">method metaobject</a> can be created by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>.
The initialization arguments establish the definition of the method.
A <a href="#mop-method-mo">method metaobject</a> cannot be redefined;
calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.</p><p>Initialization of a <a href="#mop-method-mo">method metaobject</a> must be done by calling <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>
and allowing it to call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>.  Portable programs must
<span class="strong"><strong>not</strong></span></p><div class="itemizedlist"><ul type="disc"><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> directly to
    initialize a <a href="#mop-method-mo">method metaobject</a>;</li><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a> directly to
    initialize a <a href="#mop-method-mo">method metaobject</a>;</li><li>... call <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><code class="function">CHANGE-CLASS</code></a> to change the class of any
    <a href="#mop-method-mo">method metaobject</a> or to turn a non-method object into a <a href="#mop-method-mo">method metaobject</a>.
</li></ul></div><p>Since metaobject classes may not be redefined,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html" target="_top"><code class="function">UPDATE-INSTANCE-FOR-REDEFINED-CLASS</code></a> on <a href="#mop-method-mo">method metaobject</a>s.
 Since the class of a <a href="#mop-method-mo">method metaobject</a> cannot be changed,
 no behavior is specified for the result of calls to
 <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_ferent-class.html" target="_top"><code class="function">UPDATE-INSTANCE-FOR-DIFFERENT-CLASS</code></a> on <a href="#mop-method-mo">method metaobject</a>s.</p><p>During initialization, each initialization argument is checked
for errors and then associated with the <a href="#mop-method-mo">method metaobject</a>.  The value
can then be accessed by calling the appropriate accessor as shown in
<a href="#mop-meth-initargs" title="Table&#xA0;29.5.&#xA0;Initialization arguments and&#10;  accessors for method metaobjects">Table 29.5, “Initialization arguments and
  accessors for method metaobjects”</a>.</p><p>This section begins with a description of the error checking and
processing of each initialization argument.  This is followed by a table
showing the generic functions that can be used to access the stored
initialization arguments.  The section ends with a set of restrictions
on portable methods affecting <a href="#mop-method-mo">method metaobject</a> initialization.</p><p>In these descriptions, the phrase “<span class="quote">this argument defaults to
<em class="replaceable"><code>value</code></em></span>” means that when that initialization argument is not
supplied, initialization is performed as if <em class="replaceable"><code>value</code></em> had been supplied.
For some initialization arguments this could be done by the use of
default initialization arguments, but whether it is done this way is not
specified.  Implementations are free to define default initialization
arguments for specified <a href="#mop-method-mo">method metaobject</a> classes.  Portable programs
are free to define default initialization arguments for portable
subclasses of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>.</p><div class="itemizedlist"><ul type="disc"><li>The <code class="constant">:QUALIFIERS</code> argument is a list of method
   qualifiers.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>, or if
   any element of the list is not a non-null atom. This argument
   defaults to the empty list.</li><li>The <code class="constant">:LAMBDA-LIST</code> argument is the unspecialized
   <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> of the method.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a
   proper <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>. If this value is not supplied, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.
 </li><li>The <code class="constant">:SPECIALIZERS</code> argument is a list of the
   specializer metaobjects for the method.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value
   is not a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>, or if the length of the list differs from the
   number of required arguments in the <code class="constant">:LAMBDA-LIST</code> argument, or if
   any element of the list is not a specializer metaobject.  If this
   value is not supplied, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</li><li> The <code class="constant">:FUNCTION</code> argument is a method function.  It
   must be compatible with the methods on <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a>
   defined for this class of method and generic function with which it
   will be used.  That is, it must accept the same number of arguments
   as all uses of <a href="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html" target="_top"><code class="function">CALL-METHOD</code></a> that will call it supply.  (See
   <a href="#compute-effective-method" title="29.1.5.4.8.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-METHOD"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD</code></a> and <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> for more information.)
   An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this argument is not supplied.</li><li> When the method being initialized is an instance of
   a subclass of <a href="#mop-meth-init-mo" title="29.1.6.3.2.&#xA0;Initialization of method metaobjects"><code class="classname">CLOS:STANDARD-ACCESSOR-METHOD</code></a>, the <code class="constant">:SLOT-DEFINITION</code>
   initialization argument must be provided.  Its value is the direct
   <a href="#mop-slot-def-mo">slot definition metaobject</a> which defines this accessor method.  An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if the value
   is not an instance of a subclass of <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:DIRECT-SLOT-DEFINITION</code></a>.</li><li>The <code class="constant">:DOCUMENTATION</code> argument is a string or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
   An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed if this value is not a string or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.  This argument
   defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li></ul></div><p>After the processing and defaulting of initialization arguments
described above, the value of each initialization argument is associated
with the <a href="#mop-method-mo">method metaobject</a>.  These values can then be accessed by calling the
corresponding generic function.  The correspondences are as follows:

</p><div class="table"><a id="mop-meth-initargs"></a><p class="title"><b>Table 29.5. Initialization arguments and
  accessors for <a href="#mop-method-mo">method metaobject</a>s</b></p><table summary="Initialization arguments and&#10;  accessors for method metaobjects" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Initialization Argument</th><th align="center">Generic Function</th></tr></thead><tbody><tr><td align="center"><code class="constant">:QUALIFIERS</code></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_met_d-qualifiers.html" target="_top"><code class="function">METHOD-QUALIFIERS</code></a></td></tr><tr><td align="center"><code class="constant">:LAMBDA-LIST</code></td><td align="center"><a href="#method-lambda-list" title="29.1.6.2.3.&#xA0;Generic Function CLOS:METHOD-LAMBDA-LIST"><code class="function">CLOS:METHOD-LAMBDA-LIST</code></a></td></tr><tr><td align="center"><code class="constant">:SPECIALIZERS</code></td><td align="center"><a href="#method-specializers" title="29.1.6.2.1.&#xA0;Generic Function CLOS:METHOD-SPECIALIZERS"><code class="function">CLOS:METHOD-SPECIALIZERS</code></a></td></tr><tr><td align="center"><code class="constant">:FUNCTION</code></td><td align="center"><a href="#method-function" title="29.1.6.2.5.&#xA0;Generic Function CLOS:METHOD-FUNCTION"><code class="function">CLOS:METHOD-FUNCTION</code></a></td></tr><tr><td align="center"><code class="constant">:SLOT-DEFINITION</code></td><td align="center"><a href="#accessor-method-slotdef" title="29.1.7.1.1.&#xA0;Generic Function CLOS:ACCESSOR-METHOD-SLOT-DEFINITION"><code class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</code></a></td></tr><tr><td align="center"><code class="constant">:DOCUMENTATION</code></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><code class="function">DOCUMENTATION</code></a></td></tr></tbody></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h6 class="title"><a id="mop-meth-init-mo-method"></a>29.1.6.3.2.1. Methods</h6></div></div></div><p>It is not specified which methods provide the initialization
behavior described above.  Instead, the information needed to allow
portable programs to specialize this behavior is presented in as a set
of restrictions on the methods a portable program can define.  The model
is that portable initialization methods have access to the <a href="#mop-method-mo">method metaobject</a> when
either all or none of the specified initialization has taken
effect.</p><p>These restrictions govern the methods that a portable program can
define on the generic functions <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>,
<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>, and <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a>.  These restrictions
apply only to methods on these generic functions for which the first
specializer is a subclass of the class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>.  Other portable
methods on these generic functions are not affected by these
restrictions.</p><div class="itemizedlist"><ul type="disc"><li>Portable programs must not define methods on
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_sha_d-initialize.html" target="_top"><code class="function">SHARED-INITIALIZE</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>.</li><li><p>For <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a>:
   </p><div class="itemizedlist"><ul type="circle"><li>Portable programs must not define primary methods.
 </li><li>Portable programs may define around-methods, but
   these must be extending, not overriding methods.</li><li>Portable before-methods must assume that when they
   are run, none of the initialization behavior described above has been
   completed.</li><li>Portable after-methods must assume that when they
   are run, all of the initialization behavior described above has been
   completed.</li></ul></div></li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></div>
<!--mop-meth-init-mo-method-->
</div>
<!--mop-meth-init-mo-->
</div>
<!--mop-meth-init-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-customize"></a>29.1.6.4. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#extract-lambda-list">29.1.6.4.1. Function <code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a></span></dt><dt><span class="section"><a href="#extract-specializer-names">29.1.6.4.2. Function <code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a></span></dt></dl></div>
<!--begin method advanced customization-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="extract-lambda-list"></a>29.1.6.4.1. Function <a href="#extract-lambda-list" title="29.1.6.4.1.&#xA0;Function CLOS:EXTRACT-LAMBDA-LIST"><code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#extract-lambda-list" title="29.1.6.4.1.&#xA0;Function CLOS:EXTRACT-LAMBDA-LIST"><code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a> <em class="replaceable"><code>specialized-lambda-list</code></em>)
</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>specialized-lambda-list</code></em></span></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html" target="_top">specialized lambda list</a> as accepted by <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>.
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result is an unspecialized <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This function takes a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html" target="_top">specialized lambda list</a> and
   returns the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> with the specializers removed.  This is a
   non-destructive operation.  Whether the result shares any structure
   with the argument is unspecified.</p><p>If the <em class="replaceable"><code>specialized-lambda-list</code></em> argument does not have legal syntax,
   an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.  This syntax checking does not check the syntax of the
   actual specializer names, only the syntax of the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a> and
   where the specializers appear.
</p></dd></dl></div><p><b>Examples. </b></p><div class="informalexample"><pre class="programlisting">
(<a href="#extract-lambda-list" title="29.1.6.4.1.&#xA0;Function CLOS:EXTRACT-LAMBDA-LIST"><code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a> '((p position)))
⇒ <code class="computeroutput">(P)</code>
(<a href="#extract-lambda-list" title="29.1.6.4.1.&#xA0;Function CLOS:EXTRACT-LAMBDA-LIST"><code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a> '((p position) x y))
⇒ <code class="computeroutput">(P X Y)</code>
(<a href="#extract-lambda-list" title="29.1.6.4.1.&#xA0;Function CLOS:EXTRACT-LAMBDA-LIST"><code class="function">CLOS:EXTRACT-LAMBDA-LIST</code></a> '(a (b (eql x)) c <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> i))
⇒ <code class="computeroutput">(A B C <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> I)</code>
</pre></div></div>
<!--extract-lambda-list-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="extract-specializer-names"></a>29.1.6.4.2. Function <a href="#extract-specializer-names" title="29.1.6.4.2.&#xA0;Function CLOS:EXTRACT-SPECIALIZER-NAMES"><code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#extract-specializer-names" title="29.1.6.4.2.&#xA0;Function CLOS:EXTRACT-SPECIALIZER-NAMES"><code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a>
    <em class="replaceable"><code>specialized-lambda-list</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>specialized-lambda-list</code></em></span></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html" target="_top">specialized lambda list</a> as accepted by <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>.
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result is a list of specializer names.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This function takes a <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-3.html" target="_top">specialized lambda list</a> and
   returns its specializer names.  This is a non-destructive operation.
   Whether the result shares structure with the argument is unspecified.
  </p><p>The list returned by this function
 will not be mutated by the implementation.  The results are undefined
 if a portable program mutates the list returned by this function.</p><p>The result of this function will be a list with a
   number of elements equal to the number of required arguments in
   <em class="replaceable"><code>specialized-lambda-list</code></em>.  Specializers are defaulted to the symbol <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>.
  </p><p>If the <em class="replaceable"><code>specialized-lambda-list</code></em> argument does not have legal
   syntax, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.  This syntax checking does not check the syntax
   of the actual specializer names, only the syntax of the <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>
   and where the specializers appear.
</p></dd></dl></div><p><b>Examples. </b></p><div class="informalexample"><pre class="programlisting">
(<a href="#extract-specializer-names" title="29.1.6.4.2.&#xA0;Function CLOS:EXTRACT-SPECIALIZER-NAMES"><code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a> '((p position)))
⇒ <code class="computeroutput">(POSITION)</code>
(<a href="#extract-specializer-names" title="29.1.6.4.2.&#xA0;Function CLOS:EXTRACT-SPECIALIZER-NAMES"><code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a> '((p position) x y))
⇒ <code class="computeroutput">(POSITION T T)</code>
(<a href="#extract-specializer-names" title="29.1.6.4.2.&#xA0;Function CLOS:EXTRACT-SPECIALIZER-NAMES"><code class="function">CLOS:EXTRACT-SPECIALIZER-NAMES</code></a> '(a (b (eql x)) c <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> i))
⇒ <code class="computeroutput">(T (EQL X) T)</code>
</pre></div></div>
<!--extract-specializer-names-->
<!--end method advanced customization-->
</div>
<!--mop-meth-customize-->
</div>
<!--mop-meth-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-accessors"></a>29.1.7. Accessor Methods</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-acc-readers">29.1.7.1. Introspection</a></span></dt><dd><dl><dt><span class="section"><a href="#accessor-method-slotdef">29.1.7.1.1. Generic Function <code class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</code></a></span></dt></dl></dd><dt><span class="section"><a href="#mop-acc-customize">29.1.7.2. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#reader-method-class">29.1.7.2.1. Generic Function <code class="function">CLOS:READER-METHOD-CLASS</code></a></span></dt><dt><span class="section"><a href="#writer-method-class">29.1.7.2.2. Generic Function <code class="function">CLOS:WRITER-METHOD-CLASS</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-acc-readers"></a>29.1.7.1. Introspection</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#accessor-method-slotdef">29.1.7.1.1. Generic Function <code class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</code></a></span></dt></dl></div>
<!--begin accessor-method basic introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="accessor-method-slotdef"></a>29.1.7.1.1. Generic Function <a href="#accessor-method-slotdef" title="29.1.7.1.1.&#xA0;Generic Function CLOS:ACCESSOR-METHOD-SLOT-DEFINITION"><code class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</code></a></h5></div><div><h6 class="subtitle"><code class="code">(<a href="#accessor-method-slotdef" title="29.1.7.1.1.&#xA0;Generic Function CLOS:ACCESSOR-METHOD-SLOT-DEFINITION"><code class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</code></a> <em class="replaceable"><code>method</code></em>)</code></h6></div></div></div><p>This accessor can only be called on accessor methods.  It returns
the <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a> that defined this method.  This is the value of the
<code class="constant">:SLOT-DEFINITION</code> initialization argument associated with the method during
initialization.</p><div class="variablelist"><p class="title"><b>The specified methods for the accessor <a href="#mop-method-mo">method metaobject</a>
  readers</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#accessor-method-slotdef" title="29.1.7.1.1.&#xA0;Generic Function CLOS:ACCESSOR-METHOD-SLOT-DEFINITION"><code class="function">CLOS:ACCESSOR-METHOD-SLOT-DEFINITION</code></a>
   (<em class="replaceable"><code>method</code></em> <a href="#mop-meth-init-mo" title="29.1.6.3.2.&#xA0;Initialization of method metaobjects"><code class="classname">CLOS:STANDARD-ACCESSOR-METHOD</code></a>))</code></span></span></dt><dd>No behavior is specified for this
   method beyond that which is specified for the generic function.</dd></dl></div></div>
<!--end accessor-method basic introspection-->
</div>
<!--mop-acc-readers-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-acc-customize"></a>29.1.7.2. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#reader-method-class">29.1.7.2.1. Generic Function <code class="function">CLOS:READER-METHOD-CLASS</code></a></span></dt><dt><span class="section"><a href="#writer-method-class">29.1.7.2.2. Generic Function <code class="function">CLOS:WRITER-METHOD-CLASS</code></a></span></dt></dl></div>
<!--begin accessor-method advanced customization-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="reader-method-class"></a>29.1.7.2.1. Generic Function <a href="#reader-method-class" title="29.1.7.2.1.&#xA0;Generic Function CLOS:READER-METHOD-CLASS"><code class="function">CLOS:READER-METHOD-CLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#reader-method-class" title="29.1.7.2.1.&#xA0;Generic Function CLOS:READER-METHOD-CLASS"><code class="function">CLOS:READER-METHOD-CLASS</code></a> <em class="replaceable"><code>class</code></em> <em class="replaceable"><code>direct-slot-definition</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>direct-slot-definition</code></em></span></dt><dd>a <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>initargs</code></em></span></dt><dd>alternating initialization argument names and values.
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned is a <a href="#mop-class-mo">class metaobject</a>.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to determine the
   class of reader methods created during class initialization and
   reinitialization.  The result must be a subclass of
   <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-READER-METHOD</code></a>.</p><p>The <em class="replaceable"><code>initargs</code></em> argument must be the same as will be passed
   to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> to create the reader method.  The <em class="replaceable"><code>initargs</code></em>
   must include <code class="constant">:SLOT-DEFINITION</code> with <em class="replaceable"><code>slot-definition</code></em> as its value.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#reader-method-class" title="29.1.7.2.1.&#xA0;Generic Function CLOS:READER-METHOD-CLASS"><code class="function">CLOS:READER-METHOD-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) (<em class="replaceable"><code>direct-slot-definition</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</code></a>)
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#reader-method-class" title="29.1.7.2.1.&#xA0;Generic Function CLOS:READER-METHOD-CLASS"><code class="function">CLOS:READER-METHOD-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) (<em class="replaceable"><code>direct-slot-definition</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</code></a>)
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span></span></dt><dd><p>These methods return the class
   <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-READER-METHOD</code></a>.</p><p>These methods can be overridden.</p></dd></dl></div></div>
<!--reader-method-class-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="writer-method-class"></a>29.1.7.2.2. Generic Function <a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><code class="function">CLOS:WRITER-METHOD-CLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><code class="function">CLOS:WRITER-METHOD-CLASS</code></a> <em class="replaceable"><code>class</code></em>
    <em class="replaceable"><code>direct-slot</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)
 </code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>direct-slot</code></em></span></dt><dd>a <a href="#mop-dsd-mo">direct</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>initargs</code></em></span></dt><dd>a list of initialization arguments and values.
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned is a <a href="#mop-class-mo">class metaobject</a>.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to determine the
   class of writer methods created during class initialization and
   reinitialization.  The result must be a subclass of
   <a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><code class="classname">CLOS:STANDARD-WRITER-METHOD</code></a>.</p><p>The <em class="replaceable"><code>initargs</code></em> argument must be the same as will be passed
   to <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> to create the reader method.  The <em class="replaceable"><code>initargs</code></em>
   must include <code class="constant">:SLOT-DEFINITION</code> with <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><code class="classname">CLOS:SLOT-DEFINITION</code></a> as its value.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><code class="function">CLOS:WRITER-METHOD-CLASS</code></a>
    (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>)
    (<em class="replaceable"><code>direct-slot</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</code></a>)
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><code class="function">CLOS:WRITER-METHOD-CLASS</code></a>
    (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>)
    (<em class="replaceable"><code>direct-slot</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-DIRECT-SLOT-DEFINITION</code></a>)
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)</code></span></span></dt><dd><p>These methods returns the class
  <a href="#writer-method-class" title="29.1.7.2.2.&#xA0;Generic Function CLOS:WRITER-METHOD-CLASS"><code class="classname">CLOS:STANDARD-WRITER-METHOD</code></a>.</p><p>These methods can be overridden.</p></dd></dl></div></div>
<!--writer-method-class-->
<!--end accessor-method advanced customization-->
</div>
<!--mop-acc-customize-->
</div>
<!--mop-accessors-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-specializers"></a>29.1.8. Specializers</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-specializers-inheritance">29.1.8.1. Inheritance Structure of Specializer Metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-spec-readers">29.1.8.2. Introspection</a></span></dt><dd><dl><dt><span class="section"><a href="#eql-specializer-object">29.1.8.2.1. Function <code class="function">CLOS:EQL-SPECIALIZER-OBJECT</code></a></span></dt></dl></dd><dt><span class="section"><a href="#mop-spec-init">29.1.8.3. Initialization</a></span></dt><dd><dl><dt><span class="section"><a href="#intern-eql-specializer">29.1.8.3.1. Function <code class="function">CLOS:INTERN-EQL-SPECIALIZER</code></a></span></dt></dl></dd><dt><span class="section"><a href="#mop-spec-dep">29.1.8.4. Updating Dependencies</a></span></dt><dd><dl><dt><span class="section"><a href="#specializer-direct-methods">29.1.8.4.1. Generic Function <code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a></span></dt><dt><span class="section"><a href="#specializer-direct-gfs">29.1.8.4.2. Generic Function <code class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</code></a></span></dt><dt><span class="section"><a href="#add-direct-method">29.1.8.4.3. Generic Function <code class="function">CLOS:ADD-DIRECT-METHOD</code></a></span></dt><dt><span class="section"><a href="#remove-direct-method">29.1.8.4.4. Generic Function <code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-specializers-inheritance"></a>29.1.8.1. Inheritance Structure of Specializer Metaobject Classes</h4></div></div></div><div class="figure"><a id="mop-specializers-inheritance-fig"></a><p class="title"><b>Figure 29.6. Inheritance structure of specializer metaobject classes</b></p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="mop-classes-specializer.png" width="100%" alt="Inheritance structure of specializer metaobject classes" /></td></tr></table></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-spec-readers"></a>29.1.8.2. Introspection</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#eql-specializer-object">29.1.8.2.1. Function <code class="function">CLOS:EQL-SPECIALIZER-OBJECT</code></a></span></dt></dl></div>
<!--begin specializer basic introspection-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="eql-specializer-object"></a>29.1.8.2.1. Function <a href="#eql-specializer-object" title="29.1.8.2.1.&#xA0;Function CLOS:EQL-SPECIALIZER-OBJECT"><code class="function">CLOS:EQL-SPECIALIZER-OBJECT</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#eql-specializer-object" title="29.1.8.2.1.&#xA0;Function CLOS:EQL-SPECIALIZER-OBJECT"><code class="function">CLOS:EQL-SPECIALIZER-OBJECT</code></a>
    <em class="replaceable"><code>eql-specializer</code></em>)
</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>eql-specializer</code></em></span></dt><dd>an <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializer metaobject.
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this function is an object.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This function returns the object associated with
   <em class="replaceable"><code>eql-specializer</code></em> during initialization.
   The value is guaranteed to be <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> to the value originally passed
   to <a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><code class="function">CLOS:INTERN-EQL-SPECIALIZER</code></a>, but it is not necessarily <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> to that
   value.</p><p>This function <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> if
   <em class="replaceable"><code>eql-specializer</code></em> is not an <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a>
   specializer.</p></dd></dl></div></div>
<!--eql-specializer-object-->
<!--end specializer basic introspection-->
</div>
<!--mop-spec-readers-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-spec-init"></a>29.1.8.3. Initialization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#intern-eql-specializer">29.1.8.3.1. Function <code class="function">CLOS:INTERN-EQL-SPECIALIZER</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="intern-eql-specializer"></a>29.1.8.3.1. Function <a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><code class="function">CLOS:INTERN-EQL-SPECIALIZER</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><code class="function">CLOS:INTERN-EQL-SPECIALIZER</code></a>
    <em class="replaceable"><code>object</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>object</code></em></span></dt><dd>any Lisp object.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result is the <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializer metaobject for
   <em class="replaceable"><code>object</code></em>.</dd><dt><span class="term">Purpose</span></dt><dd>This function returns the unique <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializer
   metaobject for <em class="replaceable"><code>object</code></em>, creating one if necessary.  Two calls to
   <a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><code class="function">CLOS:INTERN-EQL-SPECIALIZER</code></a> with <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> arguments will return the same
   (i.e., <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>) value.</dd></dl></div><p><b>Remarks. </b>The result of calling <a href="#eql-specializer-object" title="29.1.8.2.1.&#xA0;Function CLOS:EQL-SPECIALIZER-OBJECT"><code class="function">CLOS:EQL-SPECIALIZER-OBJECT</code></a> on the result of a
call to <a href="#intern-eql-specializer" title="29.1.8.3.1.&#xA0;Function CLOS:INTERN-EQL-SPECIALIZER"><code class="function">CLOS:INTERN-EQL-SPECIALIZER</code></a> is only guaranteed to be <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> to the
original <em class="replaceable"><code>object</code></em> argument, not necessarily <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>.</p></div>
<!--intern-eql-specializer-->
</div>
<!--mop-spec-init-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-spec-dep"></a>29.1.8.4. Updating Dependencies</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#specializer-direct-methods">29.1.8.4.1. Generic Function <code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a></span></dt><dt><span class="section"><a href="#specializer-direct-gfs">29.1.8.4.2. Generic Function <code class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</code></a></span></dt><dt><span class="section"><a href="#add-direct-method">29.1.8.4.3. Generic Function <code class="function">CLOS:ADD-DIRECT-METHOD</code></a></span></dt><dt><span class="section"><a href="#remove-direct-method">29.1.8.4.4. Generic Function <code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="specializer-direct-methods"></a>29.1.8.4.1. Generic Function <a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a>
    <em class="replaceable"><code>specializer</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>specializer</code></em></span></dt><dd>a specializer metaobject.
   </dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result of this generic function is a possibly
   empty list of <a href="#mop-method-mo">method metaobject</a>s.</dd><dt><span class="term">Purpose</span></dt><dd>This generic function returns the possibly empty set
   of those methods, connected to generic functions, which have
   <em class="replaceable"><code>specializer</code></em> as a specializer.  The elements of this set are
   <a href="#mop-method-mo">method metaobject</a>s.  This value is maintained by the generic
   functions <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a> and <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a>.
</dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a>
   (<em class="replaceable"><code>specializer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>))</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><code class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</code></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span></li></ul></div></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a>
   (<em class="replaceable"><code>specializer</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:EQL-SPECIALIZER</code></a>))</code></span></span></dt><dd>No behavior is specified for this
   method beyond that which is specified for the generic function.</dd></dl></div></div>
<!--specializer-direct-methods-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="specializer-direct-gfs"></a>29.1.8.4.2. Generic Function <a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><code class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><code class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</code></a>
    <em class="replaceable"><code>specializer</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>specializer</code></em></span></dt><dd>a specializer metaobject.
   </dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result of this generic function is a possibly
   empty list of <a href="#mop-gen-fun-mo">generic function metaobject</a>s.</dd><dt><span class="term">Purpose</span></dt><dd>This generic function returns the possibly empty set
   of those generic functions which have a method with <em class="replaceable"><code>specializer</code></em>
   as a specializer.  The elements of this set are <a href="#mop-gen-fun-mo">generic function metaobject</a>s.  This value
   is maintained by the generic functions <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a> and
   <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a>.</dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><code class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</code></a>
   (<em class="replaceable"><code>specializer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>))</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a>
      (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span></li></ul></div></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><code class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</code></a>
   (<em class="replaceable"><code>specializer</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:EQL-SPECIALIZER</code></a>))</code></span></span></dt><dd>No behavior is specified for this
   method beyond that which is specified for the generic function.</dd></dl></div></div>
<!--specializer-direct-gfs-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="add-direct-method"></a>29.1.8.4.3. Generic Function <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a>
     <em class="replaceable"><code>specializer</code></em> <em class="replaceable"><code>method</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>specializer</code></em></span></dt><dd>a specializer metaobject.
   </dd><dt><span class="term"><em class="replaceable"><code>method</code></em></span></dt><dd>a <a href="#mop-method-mo">method metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic
 function is unspecified.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to maintain a set of
   backpointers from a specializer to the set of methods specialized to
   it.  If <em class="replaceable"><code>method</code></em> is already in the set, it is not added again (no
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed).</p><p>This set can be accessed as a list by calling the generic
   function <a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a>.  Methods are removed from the
   set by <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a>.</p><p>The generic function <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a> is called by
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a> whenever a method is added to a generic function.  It is
   called once for each of the specializers of the method.  Note that in
   cases where a specializer appears more than once in the specializers
   of a method, this generic function will be called more than once with
   the same specializer as argument.</p><p>The results are undefined if the <em class="replaceable"><code>specializer</code></em> argument
   is not one of the specializers of the <em class="replaceable"><code>method</code></em> argument.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a>
   (<em class="replaceable"><code>specializer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>) (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>))</code></span></span></dt><dd><p>This method implements the behavior of the generic
   function for class specializers.</p><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>)</code></span></li><li><span class="method"><code class="literal">
       <a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><code class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span></li></ul></div><p>
</p></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a>
   (<em class="replaceable"><code>specializer</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:EQL-SPECIALIZER</code></a>)
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>))</code></span></span></dt><dd><p>This method implements the behavior of the generic
   function for <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializers.</p><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p></dd></dl></div></div>
<!--add-direct-method-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="remove-direct-method"></a>29.1.8.4.4. Generic Function <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a> <em class="replaceable"><code>specializer</code></em>
    <em class="replaceable"><code>method</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>specializer</code></em></span></dt><dd>a specializer metaobject.
   </dd><dt><span class="term"><em class="replaceable"><code>method</code></em></span></dt><dd>a <a href="#mop-method-mo">method metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic
 function is unspecified.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to maintain a set of
   backpointers from a specializer to the set of methods specialized to
   it.  If <em class="replaceable"><code>method</code></em> is in the set it is removed.  If it is not, no
   <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p><p>This set can be accessed as a list by calling the generic
   function <a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a>.  Methods are added to the set
   by <a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a>.</p><p>The generic function <a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a> is called by
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a> whenever a method is removed from a generic function.
   It is called once for each of the specializers of the method.  Note
   that in cases where a specializer appears more than once in the
   specializers of a method, this generic function will be called more
   than once with the same specializer as argument.</p><p>The results are undefined if the <em class="replaceable"><code>specializer</code></em> argument is
   not one of the specializers of the <em class="replaceable"><code>method</code></em> argument.
</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a>
   (<em class="replaceable"><code>specializer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>) (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>))</code></span></span></dt><dd><p>This method implements the behavior of the generic
   function for class specializers.</p><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#add-direct-method" title="29.1.8.4.3.&#xA0;Generic Function CLOS:ADD-DIRECT-METHOD"><code class="function">CLOS:ADD-DIRECT-METHOD</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#specializer-direct-gfs" title="29.1.8.4.2.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS"><code class="function">CLOS:SPECIALIZER-DIRECT-GENERIC-FUNCTIONS</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#specializer-direct-methods" title="29.1.8.4.1.&#xA0;Generic Function CLOS:SPECIALIZER-DIRECT-METHODS"><code class="function">CLOS:SPECIALIZER-DIRECT-METHODS</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_class.html" target="_top"><code class="classname">CLASS</code></a>)</code></span></li></ul></div></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#remove-direct-method" title="29.1.8.4.4.&#xA0;Generic Function CLOS:REMOVE-DIRECT-METHOD"><code class="function">CLOS:REMOVE-DIRECT-METHOD</code></a>
   (<em class="replaceable"><code>specializer</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:EQL-SPECIALIZER</code></a>)
   (<em class="replaceable"><code>method</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a>))</code></span></span></dt><dd><p>This method implements the behavior of the generic
   function for <a href="http://www.lisp.org/HyperSpec/Body/typspe_eql.html" target="_top"><code class="classname">EQL</code></a> specializers.</p><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p></dd></dl></div></div>
<!--remove-direct-method-->
</div>
<!--mop-spec-dep-->
</div>
<!--mop-specializers-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-meth-comb"></a>29.1.9. Method Combinations</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-meth-comb-inheritance">29.1.9.1. Inheritance Structure of method combination metaobject Classes</a></span></dt><dt><span class="section"><a href="#mop-meth-comb-customize">29.1.9.2. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#find-method-combination">29.1.9.2.1. Generic Function <code class="function">CLOS:FIND-METHOD-COMBINATION</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-comb-inheritance"></a>29.1.9.1. Inheritance Structure of <a href="#mop-meth-comp-mo">method combination metaobject</a> Classes</h4></div></div></div><div class="figure"><a id="mop-meth-comb-inheritance-fig"></a><p class="title"><b>Figure 29.7. Inheritance structure of method combination metaobject classes</b></p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="mop-classes-methcomb.png" width="100%" alt="Inheritance structure of method combination metaobject classes" /></td></tr></table></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-meth-comb-customize"></a>29.1.9.2. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#find-method-combination">29.1.9.2.1. Generic Function <code class="function">CLOS:FIND-METHOD-COMBINATION</code></a></span></dt></dl></div>
<!--begin method-combination advanced customization-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="find-method-combination"></a>29.1.9.2.1. Generic Function <a href="#find-method-combination" title="29.1.9.2.1.&#xA0;Generic Function CLOS:FIND-METHOD-COMBINATION"><code class="function">CLOS:FIND-METHOD-COMBINATION</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#find-method-combination" title="29.1.9.2.1.&#xA0;Generic Function CLOS:FIND-METHOD-COMBINATION"><code class="function">CLOS:FIND-METHOD-COMBINATION</code></a> <em class="replaceable"><code>generic-function</code></em>
    <em class="replaceable"><code>method-combination-type-name</code></em>
    <em class="replaceable"><code>method-combination-options</code></em>)
</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>generic-function</code></em></span></dt><dd>a <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>method-combination-type-name</code></em></span></dt><dd>a symbol which names a type of method combination.
   </dd><dt><span class="term"><em class="replaceable"><code>method-combination-options</code></em></span></dt><dd>a list of arguments to the method combination type.
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic function is a
   <a href="#mop-meth-comp-mo">method combination metaobject</a>.</dd><dt><span class="term">Purpose</span></dt><dd>This generic function is called to determine the
   method combination object used by a generic function.
</dd></dl></div><p><b>Remarks. </b>Further details of <a href="#mop-meth-comp-mo">method combination metaobject</a>s are not specified.
</p></div>
<!--find-method-combination-->
<!--end method-combination advanced customization-->
</div>
<!--mop-meth-comb-customize-->
</div>
<!--mop-meth-comb-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-slot-access"></a>29.1.10. Slot Access</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-sa-instance-stuct">29.1.10.1. Instance Structure Protocol</a></span></dt><dt><span class="section"><a href="#mop-sa-funcallable">29.1.10.2. Funcallable Instances</a></span></dt><dt><span class="section"><a href="#mop-sa-customize">29.1.10.3. Customization</a></span></dt><dd><dl><dt><span class="section"><a href="#standard-instance-access">29.1.10.3.1. Function <code class="function">CLOS:STANDARD-INSTANCE-ACCESS</code></a></span></dt><dt><span class="section"><a href="#funcallable-standard-instance-access">29.1.10.3.2. Function <code class="function">CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS</code></a></span></dt><dt><span class="section"><a href="#set-fif">29.1.10.3.3. Function <code class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#slot-value-UC">29.1.10.3.4. Generic Function <code class="function">CLOS:SLOT-VALUE-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#setf-slot-value-UC">29.1.10.3.5. Generic Function <code class="code">(SETF CLOS:SLOT-VALUE-USING-CLASS)</code></a></span></dt><dt><span class="section"><a href="#slot-boundp-UC">29.1.10.3.6. Generic Function <code class="function">CLOS:SLOT-BOUNDP-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#slot-makunbound-UC">29.1.10.3.7. Generic Function <code class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</code></a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sa-instance-stuct"></a>29.1.10.1. Instance Structure Protocol</h4></div></div></div><p>The instance structure protocol is responsible for implementing
the behavior of the slot access functions like <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><code class="function">SLOT-VALUE</code></a> and
<code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><code class="function">SLOT-VALUE</code></a>)</code>.</p><p>For each <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> slot access function other than <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-exists-p.html" target="_top"><code class="function">SLOT-EXISTS-P</code></a>,
there is a corresponding generic function which actually provides the
behavior of the function.  When called, the slot access function finds
the pertinent <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>, calls the corresponding generic function and
returns its result.  The arguments passed on to the generic function
include one additional value, the class of the <em class="replaceable"><code>object</code></em> argument,
which always immediately precedes the <em class="replaceable"><code>object</code></em> argument.</p><div class="table"><a id="mop-sa-instance-stuct-table"></a><p class="title"><b>Table 29.6. The correspondence between slot access function and
  underlying slot access generic function</b></p><table summary="The correspondence between slot access function and&#10;  underlying slot access generic function" border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">Slot Access Function</th><th align="center">Corresponding
    Slot Access Generic Function</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><code class="function">SLOT-VALUE</code></a> <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot-name</code></em></td><td align="center"><a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><code class="function">CLOS:SLOT-VALUE-USING-CLASS</code></a> <em class="replaceable"><code>class</code></em> <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot</code></em></td></tr><tr><td align="center"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><code class="function">SLOT-VALUE</code></a>)</code> <em class="replaceable"><code>new-value</code></em> <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot-name</code></em></td><td align="center"><a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><code class="code">(SETF CLOS:SLOT-VALUE-USING-CLASS)</code></a> <em class="replaceable"><code>new-value</code></em> <em class="replaceable"><code>class</code></em> <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot</code></em></td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/fun_slot-boundp.html" target="_top"><code class="function">SLOT-BOUNDP</code></a> <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot-name</code></em></td><td align="center"><a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><code class="function">CLOS:SLOT-BOUNDP-USING-CLASS</code></a> <em class="replaceable"><code>class</code></em> <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot</code></em></td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/fun_slot-makunbound.html" target="_top"><code class="function">SLOT-MAKUNBOUND</code></a> <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot-name</code></em></td><td align="center"><a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><code class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</code></a> <em class="replaceable"><code>class</code></em> <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot</code></em></td></tr></tbody></table></div><p>At the lowest level, the instance structure protocol provides only
limited mechanisms for portable programs to control the implementation
of instances and to directly access the storage associated with
instances without going through the indirection of slot access.  This is
done to allow portable programs to perform certain commonly requested
slot access optimizations.</p><p>In particular, portable programs can control the implementation
of, and obtain direct access to, slots with allocation <code class="constant">:INSTANCE</code> and
type <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>.  These are called <strong class="first"><em class="firstterm">directly accessible
slots</em></strong>.</p><p>The relevant specified around-method on <a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a> determines
the implementation of instances by deciding how each slot in the
instance will be stored.  For each directly accessible slot, this method
allocates a <strong class="first"><em class="firstterm">location</em></strong> and associates it with the
<a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.  The location can be accessed by calling the <a href="#slotdef-location" title="29.1.4.2.4.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-LOCATION"><code class="function">CLOS:SLOT-DEFINITION-LOCATION</code></a>
generic function.  Locations are non-negative integers.  For a given
class, the locations increase consecutively, in the order that the
directly accessible slots appear in the list of effective slots.  (Note
that here, the next paragraph, and the specification of this
around-method are the only places where the value returned by
<a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a> is described as a list rather than a set.)</p><p>Given the location of a directly accessible slot, the value of
that slot in an instance can be accessed with the appropriate accessor.
For <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>, this accessor is the function
<a href="#standard-instance-access" title="29.1.10.3.1.&#xA0;Function CLOS:STANDARD-INSTANCE-ACCESS"><code class="function">CLOS:STANDARD-INSTANCE-ACCESS</code></a>.  For <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>, this
accessor is the function <a href="#funcallable-standard-instance-access" title="29.1.10.3.2.&#xA0;Function CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS"><code class="function">CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS</code></a>.
In each case, the arguments to the accessor are the instance and the
slot location, in that order.  See the definition of each accessor for
additional restrictions on the use of these function.</p><p>Portable programs are permitted to affect and rely on the
allocation of locations only in the following limited way: By first
defining a portable primary method on <a href="#compute-slots" title="29.1.3.6.11.&#xA0;Generic Function CLOS:COMPUTE-SLOTS"><code class="function">CLOS:COMPUTE-SLOTS</code></a> which orders the
returned value in a predictable way, and then relying on the defined
behavior of the specified around-method to assign locations to all
directly accessible slots.  Portable programs may compile-in calls to
low-level accessors which take advantage of the resulting predictable
allocation of slot locations.</p><div class="informalexample"><p>This example shows the use of this mechanism to implement a new
<a href="#mop-class-mo">class metaobject</a> class, <code class="classname">ordered-class</code> and class
option <code class="constant">:SLOT-ORDER</code>.  This option provides control
over the allocation of slot locations.  In this simple example
implementation, the <code class="constant">:SLOT-ORDER</code> option is not
inherited by subclasses; it controls only instances of the class
itself.
</p><pre class="programlisting">
(defclass ordered-class (standard-class)
  ((slot-order :initform ()
               :initarg :slot-order
               :reader class-slot-order)))

(defmethod compute-slots ((class ordered-class))
  (let ((order (class-slot-order class)))
    (sort (copy-list (call-next-method))
          #'(lambda (a b)
              (&lt; (position (slot-definition-name a) order)
                 (position (slot-definition-name a) order))))))
</pre><p>

Following is the source code the user of this extension would write.
Note that because the code above does not implement inheritance of
the <code class="constant">:SLOT-ORDER</code> option, the function
<code class="function">distance</code> must not be called on instances of
subclasses of <code class="classname">point</code>; it can only be called on
instances of <code class="classname">point</code> itself.

</p><pre class="programlisting">
(defclass point ()
  ((x :initform 0)
   (y :initform 0))
  (:metaclass ordered-class)
  (:slot-order x y))

(defun distance (point)
  (sqrt (/ (+ (expt (standard-instance-access point 0) 2)
              (expt (standard-instance-access point 1) 2))
           2.0)))
</pre><p>

</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>You cannot assume that the slot-location
  values start at 0.  In class <code class="classname">point</code>, for
  example, <em class="replaceable"><code>x</code></em> and <em class="replaceable"><code>y</code></em> will be at slot locations 1 and 2, not 0 and
  1.</p></div><p>

In more realistic uses of this mechanism, the calls to the low-level
instance structure accessors would not actually appear textually in the
source program, but rather would be generated by a meta-level analysis
program run during the process of compiling the source program.
</p></div></div>
<!--mop-sa-instance-stuct-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sa-funcallable"></a>29.1.10.2. Funcallable Instances</h4></div></div></div><p>Instances of classes which are themselves instances of
<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> or one of its subclasses are called
<strong class="first"><em class="firstterm">funcallable instances</em></strong>.
Funcallable instances can only be created by
<span class="method"><code class="literal"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><code class="function">ALLOCATE-INSTANCE</code></a>
 (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>)</code></span>.</p><p>Like standard instances, funcallable instances have slots with the
normal behavior.  They differ from standard instances in that they can
be used as functions as well; that is, they can be passed to <a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a>
and <a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a>, and they can be stored as the definition of a function
name.  Associated with each funcallable instance is the function which
it runs when it is called.  This function can be changed with
<a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><code class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</code></a>.</p><div class="informalexample"><p>The following simple example shows the use of funcallable
instances to create a simple, <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><code class="function">DEFSTRUCT</code></a>-like facility.  (Funcallable
instances are useful when a program needs to construct and maintain a
set of functions and information about those functions.  They make it
possible to maintain both as the same object rather than two separate
objects linked, for example, by hash tables.)

</p><pre class="programlisting">
(defclass constructor ()
  ((name :initarg :name :accessor constructor-name)
   (fields :initarg :fields :accessor constructor-fields))
  (:metaclass funcallable-standard-class))
⇒ <code class="computeroutput">#&gt;FUNCALLABLE-STANDARD-CLASS CONSTRUCTOR&gt;</code>
(defmethod initialize-instance :after ((c constructor) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>)
  (with-slots (name fields) c
    (set-funcallable-instance-function
      c
      #'(lambda ()
          (let ((new (make-array (1+ (length fields)))))
            (setf (aref new 0) name)
            new)))))
⇒ <code class="computeroutput">#&lt;STANDARD-METHOD :AFTER (#&lt;FUNCALLABLE-STANDARD-CLASS CONSTRUCTOR&gt;)&gt;</code>
(setq c1 (make-instance 'constructor :name 'position :fields '(x y)))
⇒ <code class="computeroutput">#&lt;CONSTRUCTOR #&lt;UNBOUND&gt;&gt;</code>
(setq p1 (funcall c1))
⇒ <code class="computeroutput">#(POSITION NIL NIL)</code>
</pre></div></div>
<!--mop-sa-funcallable-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-sa-customize"></a>29.1.10.3. Customization</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#standard-instance-access">29.1.10.3.1. Function <code class="function">CLOS:STANDARD-INSTANCE-ACCESS</code></a></span></dt><dt><span class="section"><a href="#funcallable-standard-instance-access">29.1.10.3.2. Function <code class="function">CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS</code></a></span></dt><dt><span class="section"><a href="#set-fif">29.1.10.3.3. Function <code class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</code></a></span></dt><dt><span class="section"><a href="#slot-value-UC">29.1.10.3.4. Generic Function <code class="function">CLOS:SLOT-VALUE-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#setf-slot-value-UC">29.1.10.3.5. Generic Function <code class="code">(SETF CLOS:SLOT-VALUE-USING-CLASS)</code></a></span></dt><dt><span class="section"><a href="#slot-boundp-UC">29.1.10.3.6. Generic Function <code class="function">CLOS:SLOT-BOUNDP-USING-CLASS</code></a></span></dt><dt><span class="section"><a href="#slot-makunbound-UC">29.1.10.3.7. Generic Function <code class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</code></a></span></dt></dl></div>
<!--begin slot access basic customization-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="standard-instance-access"></a>29.1.10.3.1. Function <a href="#standard-instance-access" title="29.1.10.3.1.&#xA0;Function CLOS:STANDARD-INSTANCE-ACCESS"><code class="function">CLOS:STANDARD-INSTANCE-ACCESS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#standard-instance-access" title="29.1.10.3.1.&#xA0;Function CLOS:STANDARD-INSTANCE-ACCESS"><code class="function">CLOS:STANDARD-INSTANCE-ACCESS</code></a>
    <em class="replaceable"><code>instance</code></em> <em class="replaceable"><code>location</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>instance</code></em></span></dt><dd>an object</dd><dt><span class="term"><em class="replaceable"><code>location</code></em></span></dt><dd>a slot location</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result of this function is an object.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This function is called to provide direct access to
   a slot in an instance.  By usurping the normal slot lookup protocol,
   this function is intended to provide highly optimized access to the
   slots associated with an instance.</p><p>The following restrictions apply to the use of this function:
   </p><div class="itemizedlist"><ul type="disc"><li>The <em class="replaceable"><code>instance</code></em> argument must be a
      standard instance (it must have been returned by
      <span class="method"><code class="literal"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><code class="function">ALLOCATE-INSTANCE</code></a>(<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>)</code></span>).
    </li><li>The <em class="replaceable"><code>instance</code></em> argument cannot be an
      non-updated obsolete instance.</li><li>The <em class="replaceable"><code>location</code></em> argument must be a location of
      one of the directly accessible slots of the instance's class.
    </li><li>The slot must be bound.
  </li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The second and third restrictions do not
  apply in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.  <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>'s implementation supports non-updated
  obsolete instances and also supports slots with allocation <code class="constant">:CLASS</code>.
</p></div></div>
<!--standard-instance-access-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="funcallable-standard-instance-access"></a>29.1.10.3.2. Function <a href="#funcallable-standard-instance-access" title="29.1.10.3.2.&#xA0;Function CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS"><code class="function">CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#funcallable-standard-instance-access" title="29.1.10.3.2.&#xA0;Function CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS"><code class="function">CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS</code></a>
    <em class="replaceable"><code>instance</code></em> <em class="replaceable"><code>location</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>instance</code></em></span></dt><dd>an object</dd><dt><span class="term"><em class="replaceable"><code>location</code></em></span></dt><dd>a slot location</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The result of this function is an object.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This function is called to provide direct access to
   a slot in an instance.  By usurping the normal slot lookup protocol,
   this function is intended to provide highly optimized access to the
   slots associated with an instance.</p><p>The following restrictions apply to the use of this function:
   </p><div class="itemizedlist"><ul type="disc"><li>The <em class="replaceable"><code>instance</code></em> argument must be a
      funcallable instance (it must have been returned by
      <span class="method"><code class="literal"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><code class="function">ALLOCATE-INSTANCE</code></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>)</code></span>).</li><li>The <em class="replaceable"><code>instance</code></em> argument cannot be an
      non-updated obsolete instance.</li><li>The <em class="replaceable"><code>location</code></em> argument must be a location of
      one of the directly accessible slots of the instance's class.
    </li><li>The slot must be bound.
  </li></ul></div><p>The results are undefined if any of
 these restrictions are violated.</p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Implementation dependent: only in <span><strong class="command">CLISP</strong></span></h3><p>The second and third restrictions do not
  apply in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.  <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>'s implementation supports non-updated
  obsolete instances and also supports slots with allocation <code class="constant">:CLASS</code>.
</p></div></div>
<!--funcallable-standard-instance-access-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="set-fif"></a>29.1.10.3.3. Function <a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><code class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><code class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</code></a>
    <em class="replaceable"><code>funcallable-instance</code></em> <em class="replaceable"><code>function</code></em>)
</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>funcallable-instance</code></em></span></dt><dd>a funcallable instance (it must have been returned by
      <span class="method"><code class="literal"><a href="http://www.lisp.org/HyperSpec/Body/stagenfun_all_ate-instance.html" target="_top"><code class="function">ALLOCATE-INSTANCE</code></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>)</code></span>).
   </dd><dt><span class="term"><em class="replaceable"><code>function</code></em></span></dt><dd>a function.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic
 function is unspecified.</dd><dt><span class="term">Purpose</span></dt><dd>This function is called to set or to change the
   function of a funcallable instance.  After
   <a href="#set-fif" title="29.1.10.3.3.&#xA0;Function CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION"><code class="function">CLOS:SET-FUNCALLABLE-INSTANCE-FUNCTION</code></a> is called, any subsequent calls
   to <em class="replaceable"><code>funcallable-instance</code></em> will run the new
   function.</dd></dl></div></div>
<!--set-fif-->
<!--end slot access basic customization-->
<!--begin slot access advanced customization-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slot-value-UC"></a>29.1.10.3.4. Generic Function <a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><code class="function">CLOS:SLOT-VALUE-USING-CLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><code class="function">CLOS:SLOT-VALUE-USING-CLASS</code></a> <em class="replaceable"><code>class</code></em>
    <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a> - the class of the
      <em class="replaceable"><code>object</code></em> argument</dd><dt><span class="term"><em class="replaceable"><code>object</code></em></span></dt><dd>an object</dd><dt><span class="term"><em class="replaceable"><code>slot</code></em></span></dt><dd>an <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a></dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic function is an object.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function implements the behavior of the
   <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><code class="function">SLOT-VALUE</code></a> function.  It is called by <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><code class="function">SLOT-VALUE</code></a> with the class
   of <em class="replaceable"><code>object</code></em> as its first argument and the pertinent <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a> as its
   third argument.</p><p>The generic function <a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><code class="function">CLOS:SLOT-VALUE-USING-CLASS</code></a> returns the value
   contained in the given slot of the given object.  If the slot is
   unbound, <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_slot-unbound.html" target="_top"><code class="function">SLOT-UNBOUND</code></a> is called.</p><p>The results are undefined if
 the <em class="replaceable"><code>class</code></em> argument is not the class of the <em class="replaceable"><code>object</code></em> argument, or
 if the <em class="replaceable"><code>slot</code></em> argument does not appear among the set of effective
 slots associated with the <em class="replaceable"><code>class</code></em> argument.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><code class="function">CLOS:SLOT-VALUE-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <em class="replaceable"><code>object</code></em>
   (<em class="replaceable"><code>slot</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><code class="function">CLOS:SLOT-VALUE-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <em class="replaceable"><code>object</code></em>
   (<em class="replaceable"><code>slot</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a>))</code></span></span></dt><dd><p>These methods implement
 the full behavior of this generic function for slots with allocation
 <code class="constant">:INSTANCE</code> and <code class="constant">:CLASS</code>.  If the supplied slot has an allocation
 other than <code class="constant">:INSTANCE</code> or <code class="constant">:CLASS</code> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p><p>Overriding these methods is permitted,
 but may require overriding other methods in the standard implementation
 of the slot access protocol.</p></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#slot-value-UC" title="29.1.10.3.4.&#xA0;Generic Function CLOS:SLOT-VALUE-USING-CLASS"><code class="function">CLOS:SLOT-VALUE-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a>) <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot</code></em>)</code></span></span></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.
</dd></dl></div></div>
<!--slot-value-UC-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="setf-slot-value-UC"></a>29.1.10.3.5. Generic Function <a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><code class="code">(SETF CLOS:SLOT-VALUE-USING-CLASS)</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><code class="code">(SETF CLOS:SLOT-VALUE-USING-CLASS)</code></a> <em class="replaceable"><code>new-value</code></em> <em class="replaceable"><code>class</code></em>
    <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>new-value</code></em></span></dt><dd>an object</dd><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a> - the class of the
      <em class="replaceable"><code>object</code></em> argument.</dd><dt><span class="term"><em class="replaceable"><code>object</code></em></span></dt><dd>an object</dd><dt><span class="term"><em class="replaceable"><code>slot</code></em></span></dt><dd>an <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>This generic function returns the <em class="replaceable"><code>new-value</code></em> argument.
</dd><dt><span class="term">Purpose</span></dt><dd><p>The generic function <a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><code class="code">(SETF CLOS:SLOT-VALUE-USING-CLASS)</code></a> implements
   the behavior of the <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><code class="function">SLOT-VALUE</code></a>)</code> function. It is called by
   <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-value.html" target="_top"><code class="function">SLOT-VALUE</code></a>)</code> with the class of <em class="replaceable"><code>object</code></em> as its second argument
   and the pertinent <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a> as its fourth argument.</p><p>The generic function <a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><code class="code">(SETF CLOS:SLOT-VALUE-USING-CLASS)</code></a> sets the value
   contained in the given slot of the given object to the given new
   value; any previous value is lost.</p><p>The results are undefined if
 the <em class="replaceable"><code>class</code></em> argument is not the class of the <em class="replaceable"><code>object</code></em> argument, or
 if the <em class="replaceable"><code>slot</code></em> argument does not appear among the set of effective
 slots associated with the <em class="replaceable"><code>class</code></em> argument.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><code class="code">(SETF CLOS:SLOT-VALUE-USING-CLASS)</code></a>
   <em class="replaceable"><code>new-value</code></em> (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <em class="replaceable"><code>object</code></em>
   (<em class="replaceable"><code>slot</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><code class="code">(SETF CLOS:SLOT-VALUE-USING-CLASS)</code></a>
   <em class="replaceable"><code>new-value</code></em> (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <em class="replaceable"><code>object</code></em>
   (<em class="replaceable"><code>slot</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a>))</code></span></span></dt><dd><p>These methods implement
 the full behavior of this generic function for slots with allocation
 <code class="constant">:INSTANCE</code> and <code class="constant">:CLASS</code>.  If the supplied slot has an allocation
 other than <code class="constant">:INSTANCE</code> or <code class="constant">:CLASS</code> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p><p>Overriding these methods is permitted,
 but may require overriding other methods in the standard implementation
 of the slot access protocol.</p></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#setf-slot-value-UC" title="29.1.10.3.5.&#xA0;Generic Function (SETF CLOS:SLOT-VALUE-USING-CLASS)"><code class="code">(SETF CLOS:SLOT-VALUE-USING-CLASS)</code></a>
   <em class="replaceable"><code>new-value</code></em> (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a>) <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot</code></em>)</code></span></span></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.
</dd></dl></div></div>
<!--setf-slot-value-UC-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slot-boundp-UC"></a>29.1.10.3.6. Generic Function <a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><code class="function">CLOS:SLOT-BOUNDP-USING-CLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><code class="function">CLOS:SLOT-BOUNDP-USING-CLASS</code></a> <em class="replaceable"><code>class</code></em> <em class="replaceable"><code>object</code></em>
    <em class="replaceable"><code>slot</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a> - the class of the
      <em class="replaceable"><code>object</code></em> argument.</dd><dt><span class="term"><em class="replaceable"><code>object</code></em></span></dt><dd>an object</dd><dt><span class="term"><em class="replaceable"><code>slot</code></em></span></dt><dd> an <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>This generic function returns true or false.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function implements the behavior of the
   <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-boundp.html" target="_top"><code class="function">SLOT-BOUNDP</code></a> function.  It is called by <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-boundp.html" target="_top"><code class="function">SLOT-BOUNDP</code></a> with the class
   of <em class="replaceable"><code>object</code></em> as its first argument and the pertinent <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a> as its
   third argument.</p><p>The generic function <a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><code class="function">CLOS:SLOT-BOUNDP-USING-CLASS</code></a> tests whether a
   specific slot in an instance is bound.</p><p>The results are undefined if
 the <em class="replaceable"><code>class</code></em> argument is not the class of the <em class="replaceable"><code>object</code></em> argument, or
 if the <em class="replaceable"><code>slot</code></em> argument does not appear among the set of effective
 slots associated with the <em class="replaceable"><code>class</code></em> argument.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><code class="function">CLOS:SLOT-BOUNDP-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <em class="replaceable"><code>object</code></em>
   (<em class="replaceable"><code>slot</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><code class="function">CLOS:SLOT-BOUNDP-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <em class="replaceable"><code>object</code></em>
   (<em class="replaceable"><code>slot</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a>))</code></span></span></dt><dd><p>These methods implement
 the full behavior of this generic function for slots with allocation
 <code class="constant">:INSTANCE</code> and <code class="constant">:CLASS</code>.  If the supplied slot has an allocation
 other than <code class="constant">:INSTANCE</code> or <code class="constant">:CLASS</code> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p><p>Overriding these methods is permitted,
 but may require overriding other methods in the standard implementation
 of the slot access protocol.</p></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#slot-boundp-UC" title="29.1.10.3.6.&#xA0;Generic Function CLOS:SLOT-BOUNDP-USING-CLASS"><code class="function">CLOS:SLOT-BOUNDP-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a>) <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot</code></em>)</code></span></span></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.</dd></dl></div><p><b>Remarks. </b>In cases where the <a href="#mop-class-mo">class metaobject</a> class does not distinguish
unbound slots, true should be returned.</p></div>
<!--slot-boundp-UC-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="slot-makunbound-UC"></a>29.1.10.3.7. Generic Function <a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><code class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><code class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</code></a> <em class="replaceable"><code>class</code></em> <em class="replaceable"><code>object</code></em>
    <em class="replaceable"><code>slot</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>class</code></em></span></dt><dd>a <a href="#mop-class-mo">class metaobject</a> - the class of the
      <em class="replaceable"><code>object</code></em> argument.</dd><dt><span class="term"><em class="replaceable"><code>object</code></em></span></dt><dd>an object</dd><dt><span class="term"><em class="replaceable"><code>slot</code></em></span></dt><dd>an <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a>.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>This generic function returns its <em class="replaceable"><code>object</code></em> argument.
</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function implements the behavior of the
   <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-makunbound.html" target="_top"><code class="function">SLOT-MAKUNBOUND</code></a> function.  It is called by <a href="http://www.lisp.org/HyperSpec/Body/fun_slot-makunbound.html" target="_top"><code class="function">SLOT-MAKUNBOUND</code></a> with
   the class of <em class="replaceable"><code>object</code></em> as its first argument and the pertinent
   <a href="#mop-esd-mo">effective</a> <a href="#mop-slot-def-mo">slot definition metaobject</a> as its third argument.</p><p>The generic function <a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><code class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</code></a> restores a slot in
   an object to its unbound state.  The interpretation
   of “<span class="quote">restoring a slot to its unbound state</span>” depends on
   the <a href="#mop-class-mo">class metaobject</a> class.</p><p>The results are undefined if
 the <em class="replaceable"><code>class</code></em> argument is not the class of the <em class="replaceable"><code>object</code></em> argument, or
 if the <em class="replaceable"><code>slot</code></em> argument does not appear among the set of effective
 slots associated with the <em class="replaceable"><code>class</code></em> argument.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><code class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <em class="replaceable"><code>object</code></em>
   (<em class="replaceable"><code>slot</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a>))</code></span><br /></span><span class="term"><span class="method"><code class="literal">(<a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><code class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <em class="replaceable"><code>object</code></em>
   (<em class="replaceable"><code>slot</code></em> <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:STANDARD-EFFECTIVE-SLOT-DEFINITION</code></a>))</code></span></span></dt><dd><p>These methods implement
 the full behavior of this generic function for slots with allocation
 <code class="constant">:INSTANCE</code> and <code class="constant">:CLASS</code>.  If the supplied slot has an allocation
 other than <code class="constant">:INSTANCE</code> or <code class="constant">:CLASS</code> an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p><p>Overriding these methods is permitted,
 but may require overriding other methods in the standard implementation
 of the slot access protocol.</p></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#slot-makunbound-UC" title="29.1.10.3.7.&#xA0;Generic Function CLOS:SLOT-MAKUNBOUND-USING-CLASS"><code class="function">CLOS:SLOT-MAKUNBOUND-USING-CLASS</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html" target="_top"><code class="classname">BUILT-IN-CLASS</code></a>) <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>slot</code></em>)</code></span></span></dt><dd>This method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.
</dd></dl></div></div>
<!--slot-makunbound-UC-->
<!--end slot access advanced customization-->
</div>
<!--mop-sa-customize-->
</div>
<!--mop-slot-access-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-dep-maint"></a>29.1.11. Dependent Maintenance</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mop-dep-maint-protocol">29.1.11.1. Protocol</a></span></dt><dd><dl><dt><span class="section"><a href="#update-dependent">29.1.11.1.1. Generic Function <code class="function">CLOS:UPDATE-DEPENDENT</code></a></span></dt><dt><span class="section"><a href="#add-dependent">29.1.11.1.2. Generic Function <code class="function">CLOS:ADD-DEPENDENT</code></a></span></dt><dt><span class="section"><a href="#remove-dependent">29.1.11.1.3. Generic Function <code class="function">CLOS:REMOVE-DEPENDENT</code></a></span></dt><dt><span class="section"><a href="#map-dependents">29.1.11.1.4. Generic Function <code class="function">CLOS:MAP-DEPENDENTS</code></a></span></dt></dl></dd></dl></div><p>It is convenient for portable metaobjects to be able to memoize
information about other metaobjects, portable or otherwise.  Because
class and <a href="#mop-gen-fun-mo">generic function metaobject</a>s can be reinitialized, and <a href="#mop-gen-fun-mo">generic function metaobject</a>s can be modified by
adding and removing methods, a means must be provided to update this
memoized information.</p><p>The dependent maintenance protocol supports this by providing a
way to register an object which should be notified whenever a class or
generic function is modified.  An object which has been registered this
way is called a <strong class="first"><em class="firstterm">dependent</em></strong> of the class or <a href="#mop-gen-fun-mo">generic function metaobject</a>.
The dependents of class and <a href="#mop-gen-fun-mo">generic function metaobject</a>s are maintained with <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a>
and <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a>.  The dependents of a class or <a href="#mop-gen-fun-mo">generic function metaobject</a> can be
accessed with <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a>.  Dependents are notified about a
modification by calling <a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><code class="function">CLOS:UPDATE-DEPENDENT</code></a>.  (See the specification of
<a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><code class="function">CLOS:UPDATE-DEPENDENT</code></a> for detailed description of the circumstances under
which it is called.)</p><p>To prevent conflicts between two portable programs, or between
portable programs and the implementation, portable code must not
register metaobjects themselves as dependents. Instead, portable
programs which need to record a metaobject as a dependent, should
encapsulate that metaobject in some other kind of object, and record
that object as the dependent.  The results are undefined if this
restriction is violated.</p><div class="informalexample"><p>This example shows a general facility for encapsulating
metaobjects before recording them as dependents.  The facility defines a
basic kind of encapsulating object: an updater.  Specializations of the
basic class can be defined with appropriate special updating behavior.
In this way, information about the updating required is associated with
each updater rather than with the metaobject being updated.</p><p>Updaters are used to encapsulate any metaobject which requires
updating when a given class or generic function is modified.  The
function <code class="function">record-updater</code> is called to both create an
updater and add it to the dependents of the class or generic function.
Methods on the generic function <a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><code class="function">CLOS:UPDATE-DEPENDENT</code></a>, specialized to the
specific class of updater do the appropriate update work.</p><pre class="programlisting">
(defclass updater ()
  ((dependent :initarg :dependent :reader dependent)))

(defun record-updater (class dependee dependent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> initargs)
  (let ((updater (apply #'make-instance class :dependent dependent
                                              initargs)))
    (add-dependent dependee updater)
    updater))
</pre><p>A <code class="function">flush-cache-updater</code> simply flushes the
cache of the dependent when it is updated.</p><pre class="programlisting">
(defclass flush-cache-updater (updater) ())

(defmethod update-dependent (dependee (updater flush-cache-updater)
                             <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> args)
  (declare (ignore args))
  (flush-cache (dependent updater)))
</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="mop-dep-maint-protocol"></a>29.1.11.1. Protocol</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#update-dependent">29.1.11.1.1. Generic Function <code class="function">CLOS:UPDATE-DEPENDENT</code></a></span></dt><dt><span class="section"><a href="#add-dependent">29.1.11.1.2. Generic Function <code class="function">CLOS:ADD-DEPENDENT</code></a></span></dt><dt><span class="section"><a href="#remove-dependent">29.1.11.1.3. Generic Function <code class="function">CLOS:REMOVE-DEPENDENT</code></a></span></dt><dt><span class="section"><a href="#map-dependents">29.1.11.1.4. Generic Function <code class="function">CLOS:MAP-DEPENDENTS</code></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="update-dependent"></a>29.1.11.1.1. Generic Function <a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><code class="function">CLOS:UPDATE-DEPENDENT</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><code class="function">CLOS:UPDATE-DEPENDENT</code></a> <em class="replaceable"><code>metaobject</code></em>
    <em class="replaceable"><code>dependent</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>initargs</code></em>)
</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>metaobject</code></em></span></dt><dd>a class or <a href="#mop-gen-fun-mo">generic function metaobject</a> - the metaobject being
      reinitialized or otherwise modified.</dd><dt><span class="term"><em class="replaceable"><code>dependent</code></em></span></dt><dd>an object - the dependent being updated.
   </dd><dt><span class="term"><em class="replaceable"><code>initargs</code></em></span></dt><dd>a list of the initialization arguments for
      the metaobject redefinition.</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic
 function is unspecified.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function is called to update a
   dependent of <em class="replaceable"><code>metaobject</code></em>.</p><p>When a class or a generic function is reinitialized each of
   its dependents is updated.  The <em class="replaceable"><code>initargs</code></em> argument to
   <a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><code class="function">CLOS:UPDATE-DEPENDENT</code></a> is the set of initialization arguments received by
   <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_rei_ize-instance.html" target="_top"><code class="function">REINITIALIZE-INSTANCE</code></a>.</p><p>When a method is added to a generic function, each of the
   generic function's dependents is updated.  The <em class="replaceable"><code>initargs</code></em> argument
   is a list of two elements: the symbol <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html" target="_top"><code class="function">ADD-METHOD</code></a>, and the method
   that was added.</p><p>When a method is removed from a generic function, each of the
   generic function's dependents is updated.  The <em class="replaceable"><code>initargs</code></em> argument
   is a list of two elements: the symbol <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_remove-method.html" target="_top"><code class="function">REMOVE-METHOD</code></a>, and the method
   that was removed.</p><p>In each case, <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a> is used to call
   <a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><code class="function">CLOS:UPDATE-DEPENDENT</code></a> on each of the dependents.  So, for example, the
   update of a generic function's dependents when a method is added
   could be performed by the following code:</p><pre class="programlisting">
  (<a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a> <em class="replaceable"><code>generic-function</code></em>
                  #'(lambda (dep)
                      (<a href="#update-dependent" title="29.1.11.1.1.&#xA0;Generic Function CLOS:UPDATE-DEPENDENT"><code class="function">CLOS:UPDATE-DEPENDENT</code></a> <em class="replaceable"><code>generic-function</code></em>
                                        dep
                                        'add-method
                                        new-method)))
</pre></dd></dl></div><p><b>Remarks. </b>See <a href="#mop-dep-maint" title="29.1.11.&#xA0;Dependent Maintenance">Section 29.1.11, “Dependent Maintenance”</a> for remarks about the
  use of this facility.</p></div>
<!--update-dependent-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="add-dependent"></a>29.1.11.1.2. Generic Function <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a> <em class="replaceable"><code>metaobject</code></em>
    <em class="replaceable"><code>dependent</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>metaobject</code></em></span></dt><dd>a class or <a href="#mop-gen-fun-mo">generic function metaobject</a></dd><dt><span class="term"><em class="replaceable"><code>dependent</code></em></span></dt><dd>an object</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic
 function is unspecified.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function adds <em class="replaceable"><code>dependent</code></em> to the
   dependents of <em class="replaceable"><code>metaobject</code></em>.  If <em class="replaceable"><code>dependent</code></em> is already in the set
   of dependents it is not added again (no <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed).</p><p>The generic function <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a> can be called to access
   the set of dependents of a class or generic function.  The generic
   function <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a> can be called to remove an object from
   the set of dependents of a class or generic function.  The effect of
   calling <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a> or <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a> while a call to
   <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a> on the same class or generic function is in progress
   is unspecified.</p><p>The situations in which <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a> is called are not
   specified.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <em class="replaceable"><code>dependent</code></em>)</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li></ul></div></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <em class="replaceable"><code>dependent</code></em>)</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li></ul></div></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a>
   (<em class="replaceable"><code>generic-function</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>) <em class="replaceable"><code>dependent</code></em>)</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li></ul></div></dd></dl></div><p><b>Remarks. </b>See <a href="#mop-dep-maint" title="29.1.11.&#xA0;Dependent Maintenance">Section 29.1.11, “Dependent Maintenance”</a> for remarks about the
  use of this facility.</p></div>
<!--add-dependent-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="remove-dependent"></a>29.1.11.1.3. Generic Function <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a> <em class="replaceable"><code>metaobject</code></em>
     <em class="replaceable"><code>dependent</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>metaobject</code></em></span></dt><dd>a class or <a href="#mop-gen-fun-mo">generic function metaobject</a></dd><dt><span class="term"><em class="replaceable"><code>dependent</code></em></span></dt><dd>an object</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic
 function is unspecified.</dd><dt><span class="term">Purpose</span></dt><dd><p>This generic function removes <em class="replaceable"><code>dependent</code></em> from the
   dependents of <em class="replaceable"><code>metaobject</code></em>.  If <em class="replaceable"><code>dependent</code></em> is not one of the
   dependents of <em class="replaceable"><code>metaobject</code></em>, no <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p><p>The generic function <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a> can be called to access
   the set of dependents of a class or generic function.  The generic
   function <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a> can be called to add an object from the set
   of dependents of a class or generic function.  The effect of calling
   <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a> or <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a> while a call to
   <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a> on the same class or generic function is in progress
   is unspecified.</p><p> The situations in which <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a> is called are not
   specified.</p></dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <em class="replaceable"><code>dependent</code></em>)</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li></ul></div></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <em class="replaceable"><code>dependent</code></em>)</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li></ul></div></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a>
   (<em class="replaceable"><code>class</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>) <em class="replaceable"><code>dependent</code></em>)</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li></ul></div></dd></dl></div><p><b>Remarks. </b>See <a href="#mop-dep-maint" title="29.1.11.&#xA0;Dependent Maintenance">Section 29.1.11, “Dependent Maintenance”</a> for remarks about the
  use of this facility.</p></div>
<!--remove-dependent-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="map-dependents"></a>29.1.11.1.4. Generic Function <a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a></h5></div></div></div><div class="variablelist"><dl><dt><span class="term">Syntax</span></dt><dd><code class="code">(<a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a> <em class="replaceable"><code>metaobject</code></em>
    <em class="replaceable"><code>function</code></em>)</code></dd><dt><span class="term">Arguments</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>metaobject</code></em></span></dt><dd>a class or <a href="#mop-gen-fun-mo">generic function metaobject</a>.</dd><dt><span class="term"><em class="replaceable"><code>function</code></em></span></dt><dd>a function which accepts one argument.
</dd></dl></div></dd><dt><span class="term">Values</span></dt><dd>The value returned by this generic
 function is unspecified.</dd><dt><span class="term">Purpose</span></dt><dd>This generic function applies <em class="replaceable"><code>function</code></em> to each of
   the dependents of <em class="replaceable"><code>metaobject</code></em>.  The order in which the dependents
   are processed is not specified, but <em class="replaceable"><code>function</code></em> is applied to each
   dependent once and only once.  If, during the mapping,
   <a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a> or <a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a> is called to alter the
   dependents of <em class="replaceable"><code>metaobject</code></em>, it is not specified whether the newly
   added or removed dependent will have <em class="replaceable"><code>function</code></em> applied to it.
</dd></dl></div><div class="variablelist"><p class="title"><b>Methods</b></p><dl><dt><span class="term"><span class="method"><code class="literal">(<a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a>
   (<em class="replaceable"><code>metaobject</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>) <em class="replaceable"><code>function</code></em>)</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li></ul></div></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a>
   (<em class="replaceable"><code>metaobject</code></em> <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a>) <em class="replaceable"><code>function</code></em>)</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a>
       (<a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-CLASS</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li></ul></div></dd><dt><span class="term"><span class="method"><code class="literal">(<a href="#map-dependents" title="29.1.11.1.4.&#xA0;Generic Function CLOS:MAP-DEPENDENTS"><code class="function">CLOS:MAP-DEPENDENTS</code></a>
   (<em class="replaceable"><code>metaobject</code></em> <a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a>) <em class="replaceable"><code>function</code></em>)</code></span></span></dt><dd><p>No behavior is specified for this
   method beyond that which is specified for the generic function.</p><p>This method cannot be overridden unless the
 following methods are overridden as well:</p><div class="itemizedlist"><ul type="disc"><li><span class="method"><code class="literal"><a href="#add-dependent" title="29.1.11.1.2.&#xA0;Generic Function CLOS:ADD-DEPENDENT"><code class="function">CLOS:ADD-DEPENDENT</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li><li><span class="method"><code class="literal"><a href="#remove-dependent" title="29.1.11.1.3.&#xA0;Generic Function CLOS:REMOVE-DEPENDENT"><code class="function">CLOS:REMOVE-DEPENDENT</code></a>
       (<a href="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html" target="_top"><code class="classname">STANDARD-GENERIC-FUNCTION</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_t.html" target="_top"><code class="classname">T</code></a>)</code></span></li></ul></div></dd></dl></div><p><b>Remarks. </b>See <a href="#mop-dep-maint" title="29.1.11.&#xA0;Dependent Maintenance">Section 29.1.11, “Dependent Maintenance”</a> for remarks about the
  use of this facility.</p></div>
<!--map-dependents-->
</div>
<!--mop-dep-maint-protocol-->
</div>
<!--mop-dep-maint-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mop-clisp"></a>29.1.12. Deviations from [<a href="#amop"><abbr class="abbrev">AMOP</abbr></a>]</h3></div></div></div><p>This section lists the differences between the [<a href="#amop"><abbr class="abbrev">AMOP</abbr></a>] and the
<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> implementation thereof.</p><div class="itemizedlist"><a id="mop-not-in-clisp"></a><p class="title"><b>Not implemented in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></b></p><ul type="disc"><li><p>The generic function <a href="#make-method-lambda" title="29.1.5.4.10.&#xA0;Generic Function CLOS:MAKE-METHOD-LAMBDA"><code class="function">CLOS:MAKE-METHOD-LAMBDA</code></a> is not implemented.
  See <a href="#mop-gf-invocation" title="29.1.5.3.2.&#xA0;Generic Function Invocation Protocol">Section 29.1.5.3.2, “Generic Function Invocation Protocol”</a>.</p></li></ul></div><div class="itemizedlist"><a id="mop-clisp-different"></a><p class="title"><b>Features implemented differently in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></b></p><ul type="disc"><li><p>The class precedence list of <a href="#mop-sa-funcallable" title="29.1.10.2.&#xA0;Funcallable Instances"><code class="classname">CLOS:FUNCALLABLE-STANDARD-OBJECT</code></a>
  is different. See <a href="#mop-mo-cl-inheritance" title="29.1.2.2.&#xA0;Inheritance Structure of Metaobject Classes">Section 29.1.2.2, “Inheritance Structure of Metaobject Classes”</a>.</p></li><li><p>The <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> macro passes default values to <a href="#ensure-class" title="29.1.3.6.2.&#xA0;Generic Function CLOS:ENSURE-CLASS"><code class="function">CLOS:ENSURE-CLASS</code></a>.
  See <a href="#mop-cl-defclass" title="29.1.3.1.&#xA0;Macro DEFCLASS">Section 29.1.3.1, “Macro <code class="function">DEFCLASS</code>”</a>.</p></li><li><p>The <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> macro passes default values to <a href="#ensure-gf" title="29.1.5.4.2.&#xA0;Generic Function ENSURE-GENERIC-FUNCTION"><code class="function">ENSURE-GENERIC-FUNCTION</code></a>.
  See <a href="#mop-gf-init-defgeneric" title="29.1.5.3.1.&#xA0;Macro DEFGENERIC">Section 29.1.5.3.1, “Macro <code class="function">DEFGENERIC</code>”</a>.</p></li><li><p>The class <a href="#mop-inherit-struct" title="Table&#xA0;29.1.&#xA0;Direct Superclass Relationships&#10;  Among The Specified Metaobject Classes"><code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code></a> is implemented differently.
  See <a href="#forward-referenced-class-clisp" title="Implementation of class CLOS:FORWARD-REFERENCED-CLASS in CLISP">Implementation of class <code class="classname">CLOS:FORWARD-REFERENCED-CLASS</code> in <span><strong class="command">CLISP</strong></span></a>.</p></li><li><p>The function <a href="#gf-argument-precedence-order" title="29.1.5.2.4.&#xA0;Generic Function CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER"><code class="function">CLOS:GENERIC-FUNCTION-ARGUMENT-PRECEDENCE-ORDER</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>
  if the generic function has no <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>.</p></li></ul></div><div class="itemizedlist"><a id="mop-clisp-ext"></a><p class="title"><b>Extensions specific to <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></b></p><ul type="disc"><li><p>The <a href="#mop-chap" title="29.1.&#xA0;Meta-Object Protocol">Meta-Object Protocol</a> is applicable to classes of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><code class="classname">STRUCTURE-CLASS</code></a>.
  The default superclass for <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><code class="classname">STRUCTURE-CLASS</code></a> instances is <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a>.
  Structure classes do not support multiple inheritance and reinitialization.
  See <a href="#mop-cl-init-mo" title="29.1.3.5.1.&#xA0;Initialization of class metaobjects">Section 29.1.3.5.1, “Initialization of class metaobjects”</a>.</p></li><li><p>The <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a> macro supports user-defined options.
  See <a href="#mop-defgeneric-user-options" title="User-defined options">User-defined options</a>.</p></li><li><p>The class <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a> is subclassable.
  See <a href="#mop-mo-cl-inheritance" title="29.1.2.2.&#xA0;Inheritance Structure of Metaobject Classes">Section 29.1.2.2, “Inheritance Structure of Metaobject Classes”</a>.</p></li><li><p>Slot names like <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> are allowed.
  See <a href="#slotdef-name" title="29.1.4.2.1.1.&#xA0;Generic Function CLOS:SLOT-DEFINITION-NAME">Section 29.1.4.2.1.1, “Generic Function <code class="function">CLOS:SLOT-DEFINITION-NAME</code>”</a>.</p></li><li><p>The <a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS"><code class="function">CLOS:VALIDATE-SUPERCLASS</code></a> method is more permissive by
  default and does not need to be overridden in
  some “<span class="quote">obvious</span>” cases.
  See <a href="#validate-superclass" title="29.1.3.6.7.&#xA0;Generic Function CLOS:VALIDATE-SUPERCLASS">Section 29.1.3.6.7, “Generic Function <code class="function">CLOS:VALIDATE-SUPERCLASS</code>”</a>.</p></li><li><p>New generic function <a href="#compute-dsd-initargs" title="29.1.3.6.8.&#xA0;Generic Function CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-DIRECT-SLOT-DEFINITION-INITARGS</code></a>.  It can sometimes
  be used when overriding <a href="#dsd-class" title="29.1.3.6.9.&#xA0;Generic Function CLOS:DIRECT-SLOT-DEFINITION-CLASS"><code class="function">CLOS:DIRECT-SLOT-DEFINITION-CLASS</code></a> is cumbersome.</p></li><li><p>New generic function <a href="#compute-esd-initargs" title="29.1.3.6.13.&#xA0;Generic Function CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS"><code class="function">CLOS:COMPUTE-EFFECTIVE-SLOT-DEFINITION-INITARGS</code></a>. It can sometimes
  be used when overriding <a href="#esd-class" title="29.1.3.6.14.&#xA0;Generic Function CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS"><code class="function">CLOS:EFFECTIVE-SLOT-DEFINITION-CLASS</code></a> is cumbersome.</p></li><li><p>New function <a href="#compute-effective-method-as-function" title="29.1.5.4.9.&#xA0;Function CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION"><code class="function">CLOS:COMPUTE-EFFECTIVE-METHOD-AS-FUNCTION</code></a>. It
  can be used in overriding methods of <a href="#compute-discriminating-function" title="29.1.5.4.11.&#xA0;Generic Function CLOS:COMPUTE-DISCRIMINATING-FUNCTION"><code class="function">CLOS:COMPUTE-DISCRIMINATING-FUNCTION</code></a>.
</p></li><li><p>The generic function <a href="#ensure-gf-UC" title="29.1.5.4.3.&#xA0;Generic Function CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS"><code class="function">CLOS:ENSURE-GENERIC-FUNCTION-USING-CLASS</code></a> accepts a
  <code class="constant">:DECLARE</code> keyword.</p></li><li><p>The functions <a href="#funcallable-standard-instance-access" title="29.1.10.3.2.&#xA0;Function CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS"><code class="function">CLOS:FUNCALLABLE-STANDARD-INSTANCE-ACCESS</code></a> and
  <a href="#standard-instance-access" title="29.1.10.3.1.&#xA0;Function CLOS:STANDARD-INSTANCE-ACCESS"><code class="function">CLOS:STANDARD-INSTANCE-ACCESS</code></a> support non-updated obsolete instances and
  also support slots with allocation <code class="constant">:CLASS</code>.</p></li><li><p>The existence of the <a href="#class-direct-subclasses" title="29.1.3.3.6.&#xA0;Generic Function CLOS:CLASS-DIRECT-SUBCLASSES"><code class="function">CLOS:CLASS-DIRECT-SUBCLASSES</code></a> function
  does not prevent otherwise unreferenced classes from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.
</p></li></ul></div></div>
<!--mop-clisp-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gray"></a>29.2. Gray streams</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#fill-stream">29.2.1. Class <code class="classname">EXT:FILL-STREAM</code></a></span></dt></dl></div><p>This interface permits the definition of new classes of streams,
and programming their behavior by defining methods for the elementary
stream operations.
It is based on the proposal <a href="ftp://parcftp.xerox.com/pub/cl/cleanup/mail/stream-definition-by-user.mail" target="_top">STREAM-DEFINITION-BY-USER:GENERIC-FUNCTIONS</a> of David N. Gray to X3J13
and is supported by most <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> implementations currently in use.</p><p>All symbols defined by this interface, starting with the prefix
 <code class="literal">FUNDAMENTAL-</code> or <code class="literal">STREAM-</code>,
 are exported from the package <a href="#gray" title="29.2.&#xA0;Gray streams"><strong class="package">“<span class="quote">GRAY</span>”</strong></a>
 and <a href="#re-export" title="11.5.3.&#xA0;Function EXT:RE-EXPORT"><code class="function">EXT:RE-EXPORT</code></a>ed from <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a>.</p><div class="variablelist"><p class="title"><b>Defined classes</b></p><dl><dt><a id="fu-st"></a><span class="term"><a href="#fu-st"><code class="classname">GRAY:FUNDAMENTAL-STREAM</code></a></span></dt><dd>This is a superclass of all user-defined streams.
   It is a subclass of <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> and of <a href="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html" target="_top"><code class="classname">STANDARD-OBJECT</code></a>.
   Its metaclass is <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html" target="_top"><code class="classname">STANDARD-CLASS</code></a>.</dd><dt><a id="fu-st-in"></a><span class="term"><a href="#fu-st-in"><code class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</code></a></span></dt><dd>This is a superclass of all user-defined <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s.
   It is a subclass of <a href="#fu-st"><code class="classname">GRAY:FUNDAMENTAL-STREAM</code></a>.  The built-in function <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><code class="function">INPUT-STREAM-P</code></a>
   returns true on instances of this class.  This means that when you
   define a new stream class capable of doing input, you have to make it
   a subclass of <a href="#fu-st-in"><code class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</code></a>.</dd><dt><a id="fu-st-out"></a><span class="term"><a href="#fu-st-out"><code class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</code></a></span></dt><dd>This is a superclass of all user-defined <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s.
   It is a subclass of <a href="#fu-st"><code class="classname">GRAY:FUNDAMENTAL-STREAM</code></a>.  The built-in function <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><code class="function">OUTPUT-STREAM-P</code></a>
   returns true on instances of this class.  This means that when you
   define a new stream class capable of doing output, you have to make
   it a subclass of <a href="#fu-st-out"><code class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</code></a>.</dd><dt><a id="fu-st-char"></a><span class="term"><a href="#fu-st-char"><code class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</code></a></span></dt><dd>This is a superclass of all user-defined streams
   whose <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>.  It is a subclass of
   <a href="#fu-st"><code class="classname">GRAY:FUNDAMENTAL-STREAM</code></a>.  It defines a method on <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> that returns
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>.</dd><dt><a id="fu-st-bin"></a><span class="term"><a href="#fu-st-bin"><code class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</code></a></span></dt><dd>This is a superclass of all user-defined streams
   whose <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is a subtype of <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>.  It is a
   subclass of <a href="#fu-st"><code class="classname">GRAY:FUNDAMENTAL-STREAM</code></a>.  When you define a subclass of <a href="#fu-st-bin"><code class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</code></a>,
   you have to provide a method on <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>.
  </dd><dt><span class="term"><code class="classname">GRAY:FUNDAMENTAL-CHARACTER-INPUT-STREAM</code></span></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-char"><code class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</code></a> and <a href="#fu-st-in"><code class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</code></a>.</dd><dt><span class="term"><code class="classname">GRAY:FUNDAMENTAL-CHARACTER-OUTPUT-STREAM</code></span></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-char"><code class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</code></a> and <a href="#fu-st-out"><code class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</code></a>.</dd><dt><span class="term"><code class="classname">GRAY:FUNDAMENTAL-BINARY-INPUT-STREAM</code></span></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-bin"><code class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</code></a> and <a href="#fu-st-in"><code class="classname">GRAY:FUNDAMENTAL-INPUT-STREAM</code></a>.</dd><dt><span class="term"><code class="classname">GRAY:FUNDAMENTAL-BINARY-OUTPUT-STREAM</code></span></dt><dd>This is a convenience class inheriting from both
   <a href="#fu-st-bin"><code class="classname">GRAY:FUNDAMENTAL-BINARY-STREAM</code></a> and <a href="#fu-st-out"><code class="classname">GRAY:FUNDAMENTAL-OUTPUT-STREAM</code></a>.</dd></dl></div><div class="variablelist"><p class="title"><b>General generic functions defined on streams</b></p><dl><dt><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Returns the stream's element type, normally a
   subtype of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>.</p><p>The method for <a href="#fu-st-char"><code class="classname">GRAY:FUNDAMENTAL-CHARACTER-STREAM</code></a> returns <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>.
  </p></dd><dt><span class="term"><code class="code">((<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a>)
    <em class="replaceable"><code>new-element-type</code></em> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Changes the stream's element type.</p><p>The default method <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see <a href="#stream-eltype" title="21.3.1.&#xA0;Function STREAM-ELEMENT-TYPE">Section 21.3.1, “Function <code class="function">STREAM-ELEMENT-TYPE</code>”</a>).</p></dd><dt><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> <em class="replaceable"><code>stream</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    <code class="constant">:ABORT</code>)</code></span></dt><dd><p>Closes the stream and flushes any associated buffers.
   </p><p>When you define a primary method on this
    function, do not forget to <a href="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html" target="_top"><code class="function">CALL-NEXT-METHOD</code></a>.
  </p></dd><dt><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><code class="function">OPEN-STREAM-P</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Returns true before the stream has been closed, and
    <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> after the stream has been closed.</p><p>You do not need to add methods to this function.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-POSITION</code>
    <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>position</code></em>)</code></span></dt><dd><p>Just like <a href="http://www.lisp.org/HyperSpec/Body/fun_file-position.html" target="_top"><code class="function">FILE-POSITION</code></a>, but <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
    <em class="replaceable"><code>position</code></em> means inquire.</p><p>You must define a method for this function.</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for character input</b></p><dl><dt><a id="st-rc"></a><span class="term"><code class="code">(<a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>If a character was pushed back using <a href="#st-uc"><code class="function">GRAY:STREAM-UNREAD-CHAR</code></a>,
   returns and consumes it.  Otherwise returns and consumes the next
   character from the stream. Returns <code class="constant">:EOF</code> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> is reached.
   </p><p>You must define a method for this function.</p></dd><dt><a id="st-uc"></a><span class="term"><code class="code">(<a href="#st-uc"><code class="function">GRAY:STREAM-UNREAD-CHAR</code></a> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>char</code></em>)</code></span></dt><dd><p>Pushes <em class="replaceable"><code>char</code></em>, which must be the last character
   read from the <em class="replaceable"><code>stream</code></em>, back onto the front of the <em class="replaceable"><code>stream</code></em>.
   </p><p>You must define a method for this function.</p></dd><dt><a id="st-rcnh"></a><span class="term"><code class="code">(<a href="#st-rcnh"><code class="function">GRAY:STREAM-READ-CHAR-NO-HANG</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Returns a character or <code class="constant">:EOF</code>, like <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a>, if
   that would return immediately.  If <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a>'s value is not available
   immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> instead of waiting.</p><p>
   The default method simply calls <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a>; this is sufficient for streams
   whose <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a> method never blocks.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-PEEK-CHAR</code>
    <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>If a character was pushed back using <a href="#st-uc"><code class="function">GRAY:STREAM-UNREAD-CHAR</code></a>,
   returns it.  Otherwise returns the next character from the stream,
   avoiding any side effects <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a> would do.  Returns <code class="constant">:EOF</code> if the
   <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> is reached.</p><p>The default method calls <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a> and <a href="#st-uc"><code class="function">GRAY:STREAM-UNREAD-CHAR</code></a>; this is
   sufficient for streams whose <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a> method has no
   side-effects.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-LISTEN</code>
    <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>If a character was pushed back using <a href="#st-uc"><code class="function">GRAY:STREAM-UNREAD-CHAR</code></a>,
   returns it.  Otherwise returns the next character from the stream, if
   already available.  If no character is available immediately, or if
   <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> is reached, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p><p>The default method calls <a href="#st-rcnh"><code class="function">GRAY:STREAM-READ-CHAR-NO-HANG</code></a> and <a href="#st-uc"><code class="function">GRAY:STREAM-UNREAD-CHAR</code></a>; this is
   sufficient for streams whose <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a> method has no
   side-effects.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-READ-CHAR-WILL-HANG-P</code>
    <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a> will return immediately.
   Otherwise it returns true.</p><p>The default method calls <a href="#st-rcnh"><code class="function">GRAY:STREAM-READ-CHAR-NO-HANG</code></a> and <a href="#st-uc"><code class="function">GRAY:STREAM-UNREAD-CHAR</code></a>; this is
   sufficient for streams whose <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a> method has no side-effects.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see <a href="#rcwhp"><code class="function">EXT:READ-CHAR-WILL-HANG-P</code></a>).</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-READ-CHAR-SEQUENCE</code> <em class="replaceable"><code>stream</code></em>
   <em class="replaceable"><code>sequence</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> [<em class="replaceable"><code>start</code></em> [<em class="replaceable"><code>end</code></em>]])</code></span></dt><dd><p>Fills the subsequence of <em class="replaceable"><code>sequence</code></em> specified by
   <code class="constant">:START</code> and <code class="constant">:END</code> with characters consecutively read from <em class="replaceable"><code>stream</code></em>.
   Returns the index of the first element of <em class="replaceable"><code>sequence</code></em> that was not
   updated (<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><code class="function">=</code></a> <em class="replaceable"><code>end</code></em>, or <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><code class="function">&lt;</code></a> <em class="replaceable"><code>end</code></em> if the stream reached its end).
   </p><p><em class="replaceable"><code>sequence</code></em> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s, i.e. a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>.
   <em class="replaceable"><code>start</code></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> and defaults to <code class="literal">0</code>.
   <em class="replaceable"><code>end</code></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
   which stands for <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a> <em class="replaceable"><code>sequence</code></em>)</code>.
  </p><p>The default method repeatedly calls <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a>; this
   is always sufficient if speed does not matter.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see
   <a href="#rd-ch-seq"><code class="function">EXT:READ-CHAR-SEQUENCE</code></a>).</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-READ-LINE</code>
    <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Reads a line of characters, and return two values:
   the line (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>, without the terminating <span class="keysym">#\Newline</span> character),
   and a <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a> value which is true if the line was terminated by
   <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> instead of <span class="keysym">#\Newline</span>.</p><p>The default method repeatedly calls <a href="#st-rc"><code class="function">GRAY:STREAM-READ-CHAR</code></a>; this
   is always sufficient.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-CLEAR-INPUT</code>
    <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Clears all pending interactive input from the
   <em class="replaceable"><code>stream</code></em>, and returns true if some pending input was removed.</p><p>The default method does nothing and returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>; this is
   sufficient for non-interactive streams.</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for character output</b></p><dl><dt><a id="st-wc"></a><span class="term"><code class="code">(<a href="#st-wc"><code class="function">GRAY:STREAM-WRITE-CHAR</code></a> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>char</code></em>)</code></span></dt><dd><p>Writes <em class="replaceable"><code>char</code></em>.
   </p><p>You must define a method for this function.</p></dd><dt><a id="st-lc"></a><span class="term"><code class="code">(<a href="#st-lc"><code class="function">GRAY:STREAM-LINE-COLUMN</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Returns the column number where the next character
   would be written (<code class="literal">0</code> stands for the first column),
    or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if that is not meaningful for this stream.
   </p><p>You must define a method for this function.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-START-LINE-P</code>
                 <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Returns true if the next character would be
   written at the start of a new line.</p><p>The default method calls <a href="#st-lc"><code class="function">GRAY:STREAM-LINE-COLUMN</code></a> and compares its result with
   0; this is sufficient for streams whose <a href="#st-lc"><code class="function">GRAY:STREAM-LINE-COLUMN</code></a> never returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
  </p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-WRITE-CHAR-SEQUENCE</code>
    <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>sequence</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> [<em class="replaceable"><code>start</code></em> [<em class="replaceable"><code>end</code></em>]])</code></span></dt><dd><p>Outputs the subsequence of <em class="replaceable"><code>sequence</code></em> specified
   by <code class="constant">:START</code> and <code class="constant">:END</code> to <em class="replaceable"><code>stream</code></em>.</p><p><em class="replaceable"><code>sequence</code></em> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s, i.e. a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>.
   <em class="replaceable"><code>start</code></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> and defaults to 0.
   <em class="replaceable"><code>end</code></em> is a nonnegative integer or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
   which stands for <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a> <em class="replaceable"><code>sequence</code></em>)</code>.
  </p><p>The default method repeatedly calls <a href="#st-wc"><code class="function">GRAY:STREAM-WRITE-CHAR</code></a>; this
   is always sufficient if speed does not matter.
  </p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension
   (see <a href="#wr-ch-seq"><code class="function">EXT:WRITE-CHAR-SEQUENCE</code></a>).</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-WRITE-STRING</code>
    <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> [<em class="replaceable"><code>start</code></em> [<em class="replaceable"><code>end</code></em>]])</code></span></dt><dd><p>Outputs the subsequence of <em class="replaceable"><code>string</code></em> specified by
   <code class="constant">:START</code> and <code class="constant">:END</code> to <em class="replaceable"><code>stream</code></em>.  Returns <em class="replaceable"><code>string</code></em>.</p><p><em class="replaceable"><code>string</code></em> is a string.  <em class="replaceable"><code>start</code></em> is a nonnegative integer
   and default to 0.  <em class="replaceable"><code>end</code></em> is a nonnegative integer or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and
   defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, which stands for <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a> <em class="replaceable"><code>string</code></em>)</code>.
   </p><p>The default method calls
   <code class="function">GRAY:STREAM-WRITE-CHAR-SEQUENCE</code>;
   this is always sufficient.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-TERPRI</code>
                 <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Outputs a <span class="keysym">#\Newline</span> character.</p><p>The default method calls <a href="#st-wc"><code class="function">GRAY:STREAM-WRITE-CHAR</code></a>; this is always
   sufficient.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-FRESH-LINE</code>
                 <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Possibly outputs a <span class="keysym">#\Newline</span> character, so as to ensure
   that the next character would be written at the start of a new line.
   Returns true if it did output a <span class="keysym">#\Newline</span> character.</p><p>The default method calls
   <code class="function">GRAY:STREAM-START-LINE-P</code> and then
   <code class="function">GRAY:STREAM-TERPRI</code> if necessary; this is always
   sufficient.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-FINISH-OUTPUT</code>
                 <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Ensures that any buffered output has reached its
   destination, and then returns.</p><p>The default method does nothing.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-FORCE-OUTPUT</code>
                 <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Brings any buffered output on its way towards its
   destination, and returns without waiting until it has reached its
   destination.</p><p>The default method does nothing.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-CLEAR-OUTPUT</code>
                 <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Attempts to discard any buffered output which has
   not yet reached its destination.</p><p>The default method does nothing.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-ADVANCE-TO-COLUMN</code>
                 <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>column</code></em>)</code></span></dt><dd><p>Ensures that the next character will be written at
   <em class="replaceable"><code>column</code></em> at least.</p><p>The default method outputs an appropriate amount of space
   characters; this is sufficient for non-proportional output.</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for binary input</b></p><dl><dt><a id="st-rb"></a><span class="term"><code class="code">(<a href="#st-rb"><code class="function">GRAY:STREAM-READ-BYTE</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>Returns and consumes the next integer from the
   stream. Returns <code class="constant">:EOF</code> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> is reached.</p><p>You must define a method for this function.</p></dd><dt><a id="st-rbla"></a><span class="term"><code class="code">(<a href="#st-rbla"><code class="function">GRAY:STREAM-READ-BYTE-LOOKAHEAD</code></a> <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>To be called only if <em class="replaceable"><code>stream</code></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if <a href="#st-rb"><code class="function">GRAY:STREAM-READ-BYTE</code></a> would return immediately with an
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> result.  Returns <code class="constant">:EOF</code> if the <a href="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file" target="_top"><code class="literal">end-of-stream</code></a> is already
   known to be reached.  If <a href="#st-rb"><code class="function">GRAY:STREAM-READ-BYTE</code></a>'s value is not available
   immediately, returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> instead of waiting.</p><p>You must define a method for this function.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see
   <a href="#rbla"><code class="function">EXT:READ-BYTE-LOOKAHEAD</code></a>).</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-READ-BYTE-WILL-HANG-P</code>
                 <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>To be called only if <em class="replaceable"><code>stream</code></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span>.
   Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if <a href="#st-rb"><code class="function">GRAY:STREAM-READ-BYTE</code></a> will return immediately.
   Otherwise it returns true.</p><p>The default method calls <a href="#st-rbla"><code class="function">GRAY:STREAM-READ-BYTE-LOOKAHEAD</code></a>; this is always sufficient.
   </p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see <a href="#rbwhp"><code class="function">EXT:READ-BYTE-WILL-HANG-P</code></a>).
 </p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-READ-BYTE-NO-HANG</code>
                 <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd><p>To be called only if <em class="replaceable"><code>stream</code></em>'s
   <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> is <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span>.
   Returns an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> or <code class="constant">:EOF</code>, like <a href="#st-rb"><code class="function">GRAY:STREAM-READ-BYTE</code></a>, if that would
   return immediately.  If <a href="#st-rb"><code class="function">GRAY:STREAM-READ-BYTE</code></a>'s value is not available immediately,
   returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> instead of waiting.</p><p>The default method calls <a href="#st-rb"><code class="function">GRAY:STREAM-READ-BYTE</code></a> if <a href="#st-rbla"><code class="function">GRAY:STREAM-READ-BYTE-LOOKAHEAD</code></a> returns true;
    this is always sufficient.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see <a href="#rbnh"><code class="function">EXT:READ-BYTE-NO-HANG</code></a>).
 </p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-READ-BYTE-SEQUENCE</code>
     <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>sequence</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
      [<em class="replaceable"><code>start</code></em> [<em class="replaceable"><code>end</code></em> [<em class="replaceable"><code>no-hang</code></em> [<em class="replaceable"><code>interactive</code></em>]]]])</code></span></dt><dd><p>Fills the subsequence of <em class="replaceable"><code>sequence</code></em> specified by
    <code class="constant">:START</code> and <code class="constant">:END</code> with integers consecutively read from <em class="replaceable"><code>stream</code></em>.
    Returns the index of the first element of <em class="replaceable"><code>sequence</code></em> that was not
    updated (<a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><code class="function">=</code></a> <em class="replaceable"><code>end</code></em>, or <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><code class="function">&lt;</code></a> <em class="replaceable"><code>end</code></em> if the stream reached its end).
   </p><p><em class="replaceable"><code>sequence</code></em> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s.
    <em class="replaceable"><code>start</code></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> and defaults to 0.
    <em class="replaceable"><code>end</code></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
    which stands for <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a> <em class="replaceable"><code>sequence</code></em>)</code>.
    If <em class="replaceable"><code>no-hang</code></em> is true, the function should avoid blocking and instead fill
    only as many elements as are immediately available. If <em class="replaceable"><code>no-hang</code></em> is false
    and <em class="replaceable"><code>interactive</code></em> is true, the function can block for reading the first
    byte but should avoid blocking for any further bytes.</p><p>The default method repeatedly calls <a href="#st-rb"><code class="function">GRAY:STREAM-READ-BYTE</code></a>; this
    is always sufficient if speed does not matter.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see
    <a href="#rd-by-seq"><code class="function">EXT:READ-BYTE-SEQUENCE</code></a>).</p></dd></dl></div><div class="variablelist"><p class="title"><b>generic functions for binary output</b></p><dl><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-WRITE-BYTE</code>
                 <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>integer</code></em>)</code></span></dt><dd><p>Writes <em class="replaceable"><code>integer</code></em>.</p><p>You must define a method for this function.</p></dd><dt><span class="term"><code class="code">(<code class="function">GRAY:STREAM-WRITE-BYTE-SEQUENCE</code>
     <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>sequence</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
      [<em class="replaceable"><code>start</code></em> [<em class="replaceable"><code>end</code></em> [<em class="replaceable"><code>no-hang</code></em>]]])</code></span></dt><dd><p>Outputs the subsequence of <em class="replaceable"><code>sequence</code></em> specified
    by <code class="constant">:START</code> and <code class="constant">:END</code> to <em class="replaceable"><code>stream</code></em></p><p><em class="replaceable"><code>sequence</code></em> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s.
    <em class="replaceable"><code>start</code></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> and defaults to 0.
    <em class="replaceable"><code>end</code></em> is a nonnegative <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
    which stands for <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a> <em class="replaceable"><code>sequence</code></em>)</code>.
    If <em class="replaceable"><code>no-hang</code></em> is true, the function should avoid blocking and instead output
    only as many elements as it can immediately proceed. If <em class="replaceable"><code>no-hang</code></em> is false
    and <em class="replaceable"><code>interactive</code></em> is true, the function can block for writing the first
    byte but should avoid blocking for any further bytes.</p><p>The default method repeatedly calls
    <code class="function">GRAY:STREAM-WRITE-BYTE</code>; this is always
    sufficient if speed does not matter.</p><p>This function is a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> extension (see
    <a href="#wr-by-seq"><code class="function">EXT:WRITE-BYTE-SEQUENCE</code></a>).</p></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fill-stream"></a>29.2.1. Class <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM"><code class="classname">EXT:FILL-STREAM</code></a></h3></div></div></div><p>As an example of the use of <a href="#gray" title="29.2.&#xA0;Gray streams"><strong class="package">“<span class="quote">GRAY</span>”</strong></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 offers an additional class, <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM"><code class="classname">EXT:FILL-STREAM</code></a>.  An instance of this class
 is a “<span class="quote">formatting</span>” <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>, which makes the final
 output to the underlying stream look neat: indented and filled.
 An instance of <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM"><code class="classname">EXT:FILL-STREAM</code></a> is created like this:
</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a> '<a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM"><code class="classname">EXT:FILL-STREAM</code></a> :stream <em class="replaceable"><code>stream</code></em>
               [:text-indent symbol-or-number]
               [:sexp-indent symbol-or-number-or-function])
</pre><p>where</p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>stream</code></em></span></dt><dd>is the target <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> where the output actually
    goes.</dd><dt><span class="term"><em class="replaceable"><code>symbol-or-number</code></em></span></dt><dd>is the variable whose value is the <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> text
    indentation or the indentation itself (defaults to 0).
 </dd><dt><span class="term"><em class="replaceable"><code>symbol-or-number-or-function</code></em></span></dt><dd><p>When <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> writes an S-expression to a
    <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM"><code class="classname">EXT:FILL-STREAM</code></a> using <a href="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html" target="_top"><code class="literal">~S</code></a>, and the expression's printed
    representation does not fit on the current line, it is printed on
    separate lines, ignoring the prescribed text indentation and
    preserving spacing.  When this argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the
    S-expression <span class="strong"><strong>is</strong></span> indented by:</p><div class="variablelist"><dl><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></span></dt><dd>the text indentation above;
     </dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html" target="_top"><code class="function">SYMBOL-VALUE</code></a> is the indentation;
     </dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></span></dt><dd>the indentation itself;
     </dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a></span></dt><dd>called with one argument, the text indentation,
        and the value is used as S-expression indentation;
        thus <a href="http://www.lisp.org/HyperSpec/Body/fun_identity.html" target="_top"><code class="function">IDENTITY</code></a> is equivalent to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> above.
    </dd></dl></div><p>
    Defaults to <a href="impnotes.html#fill-stream" class="olink"><code class="varname">CUSTOM:*FILL-INDENT-SEXP*</code></a>, whose initial value is <a href="http://www.lisp.org/HyperSpec/Body/fun_1plcm_1-.html" target="_top"><code class="function">1+</code></a>.
</p></dd></dl></div><p></p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Note that, due to buffering, one must call <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FORCE-OUTPUT</code></a>
 when done with the <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM"><code class="classname">EXT:FILL-STREAM</code></a> (and before changing the indent variable).
 The former is done automatically by the macro
<code class="code">(with-fill-stream (fill target-stream ...) ...)</code>.</p></div><div class="example"><a id="ex-fill-stream"></a><p class="title"><b>Example 29.1. Example of <a href="#fill-stream" title="29.2.1.&#xA0;Class EXT:FILL-STREAM"><code class="classname">EXT:FILL-STREAM</code></a> usage</b></p><pre class="programlisting">
(defvar *my-indent-level*)
(with-output-to-string (out)
  (let ((*print-right-margin* 20)
        (*print-pretty* t)
        (*my-indent-level* 2))
    (with-fill-stream (fill out :text-indent '*my-indent-level*)
      (format fill "~%this is some long sentence which will      be broken at spaces")
      (force-output fill)
      (let ((*my-indent-level* 5))
        (format fill "~%and    properly indented to the level specified by the ~S argument which can be a ~S or an ~S - cool!"
                :TEXT-INDENT 'symbol 'integer))
      (format fill "~%Don't forget  to call ~S on it, and/or use ~S   Pretty formatting of the  S-expressions    printed with ~~S is  preserved: ~S"
              'force-output 'with-fill-stream '(defun foo (x y z) (if x (+ y z) (* y z)))))))
⇒ <code class="computeroutput">"
  this is some long
  sentence which
  will be broken at
  spaces
     and properly
     indented to
     the level
     specified by
     the :TEXT-INDENT
     argument which
     can be a
SYMBOL
     or an INTEGER
     - cool!
  Don't forget to
  call FORCE-OUTPUT
  on it, and/or use
WITH-FILL-STREAM
  Pretty formatting
  of the
  S-expressions
  printed with ~S
  is preserved:
(DEFUN FOO (X Y Z)
 (IF X (+ Y Z)
  (* Y Z)))
"</code></pre></div></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ext-p-indep"></a>Chapter 30. Platform Independent Extensions</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#custom-init-fini">30.1. Customizing <span><strong class="command">CLISP</strong></span> Process
  Initialization and Termination</a></span></dt><dd><dl><dt><span class="section"><a href="#cradle-grave">30.1.1. Cradle to Grave</a></span></dt><dt><span class="section"><a href="#init-hooks">30.1.2. Customizing Initialization</a></span></dt><dd><dl><dt><span class="section"><a href="#init-hooks-function">30.1.2.1. The difference between
  <code class="varname">CUSTOM:*INIT-HOOKS*</code> and <code class="constant">:INIT-FUNCTION</code></a></span></dt></dl></dd><dt><span class="section"><a href="#fini-hooks">30.1.3. Customizing Termination</a></span></dt></dl></dd><dt><span class="section"><a href="#image">30.2. Saving an Image</a></span></dt><dt><span class="section"><a href="#quit">30.3. Quitting <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#i18n">30.4. Internationalization of <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#language">30.4.1. The Language</a></span></dt></dl></dd><dt><span class="section"><a href="#encoding">30.5. Encodings</a></span></dt><dd><dl><dt><span class="section"><a href="#encodings-intro">30.5.1. Introduction</a></span></dt><dt><span class="section"><a href="#charset">30.5.2. Character Sets</a></span></dt><dt><span class="section"><a href="#newline">30.5.3. Line Terminators</a></span></dt><dt><span class="section"><a href="#make-encoding">30.5.4. Function <code class="function">EXT:MAKE-ENCODING</code></a></span></dt><dt><span class="section"><a href="#enc-charset">30.5.5. Function <code class="function">EXT:ENCODING-CHARSET</code></a></span></dt><dt><span class="section"><a href="#enc-dflt">30.5.6. Default encodings</a></span></dt><dt><span class="section"><a href="#string-byte">30.5.7. Converting between strings and byte vectors</a></span></dt></dl></dd><dt><span class="section"><a href="#gstream">30.6. Generic streams</a></span></dt><dt><span class="section"><a href="#weak">30.7. Weak Objects</a></span></dt><dd><dl><dt><span class="section"><a href="#weak-pointer">30.7.1. Weak Pointers</a></span></dt><dt><span class="section"><a href="#weak-list">30.7.2. Weak Lists</a></span></dt><dt><span class="section"><a href="#weak-and-relation">30.7.3. Weak “<span class="quote">And</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-or-relation">30.7.4. Weak “<span class="quote">Or</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-mapping">30.7.5. Weak Associations</a></span></dt><dt><span class="section"><a href="#weak-and-mapping">30.7.6. Weak “<span class="quote">And</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-or-mapping">30.7.7. Weak “<span class="quote">Or</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-alist">30.7.8. Weak Association Lists</a></span></dt><dt><span class="section"><a href="#weak-ht">30.7.9. Weak Hash Tables</a></span></dt></dl></dd><dt><span class="section"><a href="#final">30.8. Finalization</a></span></dt><dt><span class="section"><a href="#prompt">30.9. The Prompt</a></span></dt><dt><span class="section"><a href="#ansi">30.10. Maximum ANSI CL compliance</a></span></dt><dt><span class="section"><a href="#macros3">30.11. Additional Fancy Macros and Functions</a></span></dt><dd><dl><dt><span class="section"><a href="#ethe">30.11.1. Macro <code class="function">EXT:ETHE</code></a></span></dt><dt><span class="section"><a href="#letf">30.11.2. Macros <code class="function">EXT:LETF</code> &amp; <code class="function">EXT:LETF*</code></a></span></dt><dt><span class="section"><a href="#memoized">30.11.3. Macro <code class="function">EXT:MEMOIZED</code></a></span></dt><dt><span class="section"><a href="#with-collect">30.11.4. Macro <code class="function">EXT:WITH-COLLECT</code></a></span></dt><dt><span class="section"><a href="#with-gensyms">30.11.5. Macro <code class="function">EXT:WITH-GENSYMS</code></a></span></dt><dt><span class="section"><a href="#remove-plist">30.11.6. Function <code class="function">EXT:REMOVE-PLIST</code></a></span></dt><dt><span class="section"><a href="#html-http-output">30.11.7. Macros <code class="function">EXT:WITH-HTML-OUTPUT</code> and
  <code class="function">EXT:WITH-HTTP-OUTPUT</code></a></span></dt><dt><span class="section"><a href="#open-http">30.11.8. Function <code class="function">EXT:OPEN-HTTP</code> and
  macro <code class="function">EXT:WITH-HTTP-INPUT</code></a></span></dt><dt><span class="section"><a href="#browse-url">30.11.9. Function <code class="function">EXT:BROWSE-URL</code></a></span></dt><dt><span class="section"><a href="#http-proxy">30.11.10. Variable <code class="varname">CUSTOM:*HTTP-PROXY*</code></a></span></dt></dl></dd><dt><span class="section"><a href="#customize">30.12. Customizing <span><strong class="command">CLISP</strong></span> behavior</a></span></dt><dt><span class="section"><a href="#code-walk">30.13. Code Walker</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="custom-init-fini"></a>30.1. Customizing <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> Process
  Initialization and Termination</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#cradle-grave">30.1.1. Cradle to Grave</a></span></dt><dt><span class="section"><a href="#init-hooks">30.1.2. Customizing Initialization</a></span></dt><dd><dl><dt><span class="section"><a href="#init-hooks-function">30.1.2.1. The difference between
  <code class="varname">CUSTOM:*INIT-HOOKS*</code> and <code class="constant">:INIT-FUNCTION</code></a></span></dt></dl></dd><dt><span class="section"><a href="#fini-hooks">30.1.3. Customizing Termination</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="cradle-grave"></a>30.1.1. Cradle to Grave</h3></div><div><h4 class="subtitle">What is done when</h4></div></div></div><div class="procedure"><ol type="1"><li><p class="title"><b>Initialization</b></p><ol type="a"><li><p>Load the <a href="impnotes.html#image" class="olink">memory image</a>.</p></li><li><p>Install internal signal handlers.</p></li><li><p>Initialize time variables.</p></li><li><p>Initialize <a href="#enc-dflt" title="30.5.6.&#xA0;Default encodings">locale-dependent
     encodings</a>.</p></li><li><p>Initialize stream variables.</p></li><li><p>Initialize pathname variables.</p></li><li><p>Initialize <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.</p></li><li><p><a href="#modinit" title="31.2.2.&#xA0;Module initialization">Initialize
     modules</a>.</p></li><li><p>Run all functions in <a href="impnotes.html#init-hooks" class="olink"><code class="varname">CUSTOM:*INIT-HOOKS*</code></a>.</p></li><li><p>Say “<span class="quote">hi</span>”, unless suppressed by <code class="option"><a href="clisp.html#opt-verbose" class="olink">-v</a></code>.
  </p></li><li><p>Load <a href="clisp.html#opt-norc" class="olink">RC file</a>, unless suppressed by
    <code class="option"><a href="clisp.html#opt-norc" class="olink">-norc</a></code>.</p></li></ol></li><li><p class="title"><b>The actual work</b></p><p>Handle command line options: file
  <a href="clisp.html#opt-init" class="olink">loading</a> and/or
  <a href="clisp.html#opt-compile" class="olink">compilation</a>,
  <a href="clisp.html#opt-exec-expr" class="olink">form evaluation</a>,
  <a href="clisp.html#opt-exec-file" class="olink">script execution</a>,
  <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a>.</p></li><li><p class="title"><b>Finalization (executed even on abnormal exit due
  to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/kill.html"><code class="function">kill</code></a>)</b></p><ol type="a"><li><p>Unwind the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, executing cleanup forms in
    <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a>.</p></li><li><p>Run all functions in <a href="#fini-hooks" title="30.1.3.&#xA0;Customizing Termination"><code class="varname">CUSTOM:*FINI-HOOKS*</code></a>.</p></li><li><p>Call <a href="http://www.lisp.org/HyperSpec/Body/fun_terpricm_fresh-line.html" target="_top"><code class="function">FRESH-LINE</code></a> on the standard streams.</p></li><li><p>Say “<span class="quote">bye</span>” unless suppressed by <code class="option"><a href="clisp.html#opt-verbose" class="olink">-v</a></code>.
  </p></li><li><p>Wait for a keypress if requested by
    <code class="option"><a href="clisp.html#opt-wait" class="olink">-w</a></code>.
  </p></li><li><p>Close all open <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a>s.</p></li><li><p><a href="#modfini" title="31.2.3.&#xA0;Module finalization">Finalize
     modules</a>.</p></li><li><p>Close all open DLLs.</p></li></ol></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="init-hooks"></a>30.1.2. Customizing Initialization</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#init-hooks-function">30.1.2.1. The difference between
  <code class="varname">CUSTOM:*INIT-HOOKS*</code> and <code class="constant">:INIT-FUNCTION</code></a></span></dt></dl></div><p><a href="impnotes.html#init-hooks" class="olink"><code class="varname">CUSTOM:*INIT-HOOKS*</code></a> is run like this:</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><code class="function">MAPC</code></a> #'<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a> <a href="impnotes.html#init-hooks" class="olink"><code class="varname">CUSTOM:*INIT-HOOKS*</code></a>)
</pre><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="init-hooks-function"></a>30.1.2.1. The difference between
  <a href="impnotes.html#init-hooks" class="olink"><code class="varname">CUSTOM:*INIT-HOOKS*</code></a> and <code class="constant">:INIT-FUNCTION</code></h4></div></div></div><p><a href="impnotes.html#init-hooks" class="olink"><code class="varname">CUSTOM:*INIT-HOOKS*</code></a> are <span class="emphasis"><em>always</em></span> run regardless of the
 command line options before even the banner is printed.
 The <a href="#image" title="30.2.&#xA0;Saving an Image"><code class="constant">:INIT-FUNCTION</code></a> is
 run <span class="emphasis"><em>only</em></span> if the <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> is ever entered and just
 before the first <a href="#prompt" title="30.9.&#xA0;The Prompt">prompt</a> is printed.
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fini-hooks"></a>30.1.3. Customizing Termination</h3></div></div></div><p><a href="#fini-hooks" title="30.1.3.&#xA0;Customizing Termination"><code class="varname">CUSTOM:*FINI-HOOKS*</code></a> is run like this:</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><code class="function">MAPC</code></a> #'<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a> <a href="#fini-hooks" title="30.1.3.&#xA0;Customizing Termination"><code class="varname">CUSTOM:*FINI-HOOKS*</code></a>)
</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="image"></a>30.2. Saving an Image</h2></div></div></div><p>The function <code class="code">(<a href="impnotes.html#image" class="olink"><code class="function">EXT:SAVEINITMEM</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
  (<em class="replaceable"><code>filename</code></em> "lispinit.mem") <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :KEEP-GLOBAL-HANDLERS :QUIET
  :INIT-FUNCTION :LOCKED-PACKAGES :START-PACKAGE :EXECUTABLE :NORC)</code>
 saves the running <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>'s memory to the file <em class="replaceable"><code>filename</code></em>;
 extension <code class="filename">#P".mem"</code> is recommended (when <em class="replaceable"><code>filename</code></em> does not have an
 extension, <code class="filename">#P".mem"</code> extension is automatically added unless the file
 being created is an executable).
</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:QUIET</code></span></dt><dd>If this argument is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the startup
    banner and the good-bye message will be suppressed, as if by <code class="option"><a href="clisp.html#opt-verbose" class="olink">-q</a></code>
 </dd><dt><span class="term"><code class="constant">:NORC</code></span></dt><dd>If this argument is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the <a href="clisp.html#opt-norc" class="olink">RC file</a>
    loading will be suppressed, as if by <code class="option"><a href="clisp.html#opt-norc" class="olink">-norc</a></code>.
 </dd><dt><span class="term"><code class="constant">:INIT-FUNCTION</code></span></dt><dd><p>This argument specifies a function that will be
   executed at startup of the saved image, before entering the standard
   <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a>; thus, if you want to avoid the <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a>, you have to call
   <a href="#quit" title="30.3.&#xA0;Quitting CLISP"><code class="function">EXT:EXIT</code></a> at the end
   of the init function yourself
   (this does not prevent <a href="#fini-hooks" title="30.1.3.&#xA0;Customizing Termination"><code class="varname">CUSTOM:*FINI-HOOKS*</code></a> from being run).</p><p>See <a href="clisp.html#opt-exec-file" class="olink">the
     manual</a> for passing command line arguments to this function.
 </p><p>See also <a href="impnotes.html#init-hooks" class="olink"><code class="varname">CUSTOM:*INIT-HOOKS*</code></a> and <a href="#fini-hooks" title="30.1.3.&#xA0;Customizing Termination"><code class="varname">CUSTOM:*FINI-HOOKS*</code></a>.</p></dd><dt><span class="term"><code class="constant">:LOCKED-PACKAGES</code></span></dt><dd>This argument specifies the packages to lock before
   saving the image; this is convenient for application delivery, when
   you do not want your users to mess up your product.
   This argument defaults to <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><code class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</code></a>.
 </dd><dt><span class="term"><code class="constant">:START-PACKAGE</code></span></dt><dd>This argument specifies the starting value of
   <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><code class="varname">*PACKAGE*</code></a> in the image being saved, and defaults to the current
   value of <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><code class="varname">*PACKAGE*</code></a>.</dd><dt><span class="term"><code class="constant">:KEEP-GLOBAL-HANDLERS</code></span></dt><dd><p>When non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the currently established global
    handlers (either with <a href="impnotes.html#global-handler" class="olink"><code class="function">EXT:SET-GLOBAL-HANDLER</code></a> or with <code class="option"><a href="clisp.html#opt-on-error" class="olink">-on-error</a></code>)
    are inherited by the image.  Defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, so that
    </p><pre class="screen"><code class="prompt">$</code> clisp -i myfile -x '(<a href="impnotes.html#image" class="olink"><code class="function">EXT:SAVEINITMEM</code></a>)'</pre><p>
    will produce an image without any global handlers inherited
    from the batch mode of the above command.</p></dd><dt><span class="term"><code class="constant">:EXECUTABLE</code></span></dt><dd>When non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the saved file will be an
    standalone executable.
    In this case, the <code class="filename">#P".mem"</code> extension is not added.
    On <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> and <a href="http://cygwin.com/" target="_top"><span class="strong"><strong>Cygwin</strong></span></a> the extension <code class="filename">#P".exe"</code>
    is added instead.</dd></dl></div><p>
You can use this memory image with the <code class="option"><a href="clisp.html#opt-memfile" class="olink">-M</a></code> option.
On <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> systems, you may compress it with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gzip.org/" target="_top"><span><strong class="command">gzip</strong></span></a> to save disk
space.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="image-portability"></a>Image Portability</h3><p>Memory images are <span class="strong"><strong>not</strong></span> portable across different platforms
  (in contrast with platform-independent <code class="filename">#P".fas"</code> files).
  They are <span class="strong"><strong>not</strong></span> even portable across <a href="impnotes.html#linkset" class="olink">linking set</a>s: image saved using
  the <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">full</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a> cannot be used with the <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">base</strong></span></a> runtime:</p><pre class="screen">
<code class="prompt">$</code> clisp -K full -x '(<a href="impnotes.html#image" class="olink"><code class="function">EXT:SAVEINITMEM</code></a>)'
<code class="prompt">$</code> clisp -K base -M lispinit.mem
base/lisp.run: initialization file `lispinit.mem' was not created by this version of CLISP runtime
</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="quit"></a>30.3. Quitting <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><p>The functions </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="code">(<code class="function">EXT:EXIT</code>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>status</code></em>)</code></td></tr><tr><td><code class="code">(<code class="function">EXT:QUIT</code>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>status</code></em>)</code></td></tr><tr><td><code class="code">(<code class="function">EXT:BYE</code>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>status</code></em>)</code></td></tr></table><p>
 - all synonymous - terminate <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.  If <em class="replaceable"><code>status</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> aborts with the supplied numeric error <em class="replaceable"><code>status</code></em>, i.e.,
 the OS environment is informed that the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> session did not
 succeed.</p><p><a href="#fin-delim">Final delimiter</a>s also terminate
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="i18n"></a>30.4. Internationalization of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#language">30.4.1. The Language</a></span></dt></dl></div><div class="variablelist"><dl><dt><span class="term">Internationalization
   (“<span class="quote">i18n</span>”)</span></dt><dd>preparing a program so that it can use multiple
    national languages and national cultural conventions without requiring
    further source code changes.</dd><dt><span class="term">Localization (“<span class="quote">l10n</span>”)</span></dt><dd>providing the data - mostly textual translations -
   necessary for an internationalized program to work in a particular
   language and with particular cultural conventions.
</dd></dl></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is internationalized, and is localized for the languages
English, German, French, Spanish, Dutch, Russian, and Danish.
<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> also supports internationalized Lisp programs, through
<a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a>, see <a href="#i18n-mod" title="32.9.&#xA0;Internationalization of User Programs">Section 32.9, “Internationalization of User Programs”</a>.</p><p>User programs can also be internationalized,
 see <a href="#i18n-mod" title="32.9.&#xA0;Internationalization of User Programs">Section 32.9, “Internationalization of User Programs”</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="language"></a>30.4.1. The Language</h3></div></div></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>The facilities described in this section will
  work only for the languages for which <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> itself is already
  localized.</p></div><p>The language <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses to communicate with the user can be one of
</p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">ENGLISH</code></td></tr><tr><td><code class="constant">DEUTSCH</code> (i.e., German)</td></tr><tr><td><code class="constant">FRANÇAIS</code> (i.e., French)</td></tr><tr><td><code class="constant">ESPAÑOL</code> (i.e., Spanish)</td></tr><tr><td><code class="constant">NEDERLANDS</code> (i.e., Dutch)</td></tr><tr><td><code class="constant">РУССКИЙ</code>
  (i.e. Russian)</td></tr><tr><td><code class="constant">DANSK</code> (i.e., Danish)</td></tr></table><p>This is controlled by the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a>
 <strong class="first"><em class="firstterm"><a href="impnotes.html#language" class="olink"><code class="varname">CUSTOM:*CURRENT-LANGUAGE*</code></a><a id="curr-lang" class="indexterm"></a></em></strong>,
 which can be set at run time as well as using the <code class="option"><a href="clisp.html#opt-lang" class="olink">-L</a></code> start-up option.
 If you wish to change the
 <a href="clisp.html#opt-locale" class="olink">locale directory</a>
 at run time too, you can do that by setting <a href="impnotes.html#language" class="olink"><code class="varname">CUSTOM:*CURRENT-LANGUAGE*</code></a> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a>
 cell, whose <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CAR</code></a> is the language (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>, one of the above),
 and whose <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a> is the new locale directory.</p><p>More languages can be defined through the macro
 <strong class="first"><em class="firstterm"><a href="#deflang"><code class="function">I18N:DEFLANGUAGE</code></a><a id="deflang" class="indexterm"></a></em></strong>:
 <code class="code">(<a href="#deflang"><code class="function">I18N:DEFLANGUAGE</code></a> <em class="replaceable"><code>language</code></em>)</code>.
 For such an additional language to take effect, you must install the
 corresponding message catalog, or translate the messages yourself,
 using <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> and <a href="http://www.gnu.org/software/emacs/" target="_top">Emacs</a> (or <a href="http://www.xemacs.org" target="_top">XEmacs</a>) po-mode.</p><p>This works only for strings.  For arbitrary language-dependent
 Lisp objects, you define one through the macro
 <strong class="first"><em class="firstterm"><a href="#def-i-l"><code class="function">I18N:DEFINTERNATIONAL</code></a><a id="def-i-l" class="indexterm"></a></em></strong>:
 <code class="code">(<a href="#def-i-l"><code class="function">I18N:DEFINTERNATIONAL</code></a> <em class="replaceable"><code>symbol</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
 (<em class="replaceable"><code>default-language</code></em> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>))</code> and add
 language-dependent values through the macro
 <strong class="first"><em class="firstterm"><a href="#defloc"><code class="function">I18N:DEFLOCALIZED</code></a><a id="defloc" class="indexterm"></a></em></strong>:
 <code class="code">(<a href="#defloc"><code class="function">I18N:DEFLOCALIZED</code></a> <em class="replaceable"><code>symbol</code></em> <em class="replaceable"><code>language</code></em>
  <em class="replaceable"><code>value-form</code></em>)</code>
 (One such form for each language.  Languages without an assigned
 value will be treated like the default-language.)
 You can then access the localized value by calling
 <strong class="first"><em class="firstterm"><a href="#localized"><code class="function">I18N:LOCALIZED</code></a><a id="localized" class="indexterm"></a></em></strong>:
 <code class="code">(<a href="#localized"><code class="function">I18N:LOCALIZED</code></a> <em class="replaceable"><code>symbol</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>language</code></em>)</code></p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="encoding"></a>30.5. Encodings</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#encodings-intro">30.5.1. Introduction</a></span></dt><dt><span class="section"><a href="#charset">30.5.2. Character Sets</a></span></dt><dt><span class="section"><a href="#newline">30.5.3. Line Terminators</a></span></dt><dt><span class="section"><a href="#make-encoding">30.5.4. Function <code class="function">EXT:MAKE-ENCODING</code></a></span></dt><dt><span class="section"><a href="#enc-charset">30.5.5. Function <code class="function">EXT:ENCODING-CHARSET</code></a></span></dt><dt><span class="section"><a href="#enc-dflt">30.5.6. Default encodings</a></span></dt><dt><span class="section"><a href="#string-byte">30.5.7. Converting between strings and byte vectors</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="encodings-intro"></a>30.5.1. Introduction</h3></div></div></div><p>An “<span class="quote">encoding</span>” describes the correspondence
 between <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s and raw bytes during input/output via
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s with <a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>.</p><p>An <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a> is an object composed of the following facets:
</p><div class="variablelist"><dl><dt><span class="term"><a href="#charset" title="30.5.2.&#xA0;Character Sets">character set</a></span></dt><dd>This denotes both the set of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s that
    can be represented and passed through the I/O channel, and the way
    these characters translate into raw bytes, i.e., the map between
    sequences of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> and <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> in the form of <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s
    and <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span> as well as character and byte <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s.
    In this context, for example, <a href="#charset-UTF-8"><code class="constant">CHARSET:UTF-8</code></a> and
    <a href="#charset-UCS-4"><code class="constant">CHARSET:UCS-4</code></a>
    are considered different, although they can represent the same set
    of characters.</dd><dt><span class="term"><a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a> mode</span></dt><dd>This denotes the way newline characters are
    represented.</dd></dl></div><p><a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a>s are also <a href="http://www.lisp.org/HyperSpec/Body/glo_t.html" target="_top"><code class="literal">TYPE</code></a>s.  As such, they represent the set of
 characters encodable in the character set.  In this context, the way
 characters are translated into raw bytes is ignored, and the line
 terminator mode is ignored as well.  <a href="http://www.lisp.org/HyperSpec/Body/fun_typep.html" target="_top"><code class="function">TYPEP</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_subtypep.html" target="_top"><code class="function">SUBTYPEP</code></a> can be used
 on encodings:</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_subtypep.html" target="_top"><code class="function">SUBTYPEP</code></a> <a href="#charset-UTF-8"><code class="constant">CHARSET:UTF-8</code></a> <a href="#charset-UTF-16"><code class="constant">CHARSET:UTF-16</code></a>)
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></code> ;
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></code>
(<a href="http://www.lisp.org/HyperSpec/Body/fun_subtypep.html" target="_top"><code class="function">SUBTYPEP</code></a> <a href="#charset-UTF-16"><code class="constant">CHARSET:UTF-16</code></a> <a href="#charset-UTF-8"><code class="constant">CHARSET:UTF-8</code></a>)
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></code> ;
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></code>
(<a href="http://www.lisp.org/HyperSpec/Body/fun_subtypep.html" target="_top"><code class="function">SUBTYPEP</code></a> CHARSET:ASCII CHARSET:ISO-8859-1)
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></code> ;
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></code>
(<a href="http://www.lisp.org/HyperSpec/Body/fun_subtypep.html" target="_top"><code class="function">SUBTYPEP</code></a> CHARSET:ISO-8859-1 CHARSET:ASCII)
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></code> ;
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></code>
</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="charset"></a>30.5.2. Character Sets</h3></div></div></div><div class="variablelist">
<!--#ifndef UNICODE-->
<dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep">Only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built <span class="strong"><strong>without</strong></span> compile-time flag <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a></span></span></span></dt><dd>Only one character set is understood: the platform's
 native (8-bit) character set.  See <a href="#characters" title="Chapter&#xA0;13.&#xA0;Characters&#10;   [CLHS-13]">Chapter 13, <i>Characters
   [CLHS-13]</i></a>.
</dd>
<!--#else-->
<dt><a id="charset-symbols"></a><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep">Only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built <span class="strong"><strong>with</strong></span> compile-time flag <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a></span></span></span></dt><dd><p>The following character sets are supported, as values
 of the corresponding (constant) symbol in the <a href="#encoding" title="30.5.&#xA0;Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a> package:
</p><div class="orderedlist"><a id="charset-symbol-list"></a><p class="title"><b>Symbols in package <a href="#encoding" title="30.5.&#xA0;Encodings"><strong class="package">“<span class="quote">CHARSET</span>”</strong></a></b></p><ol type="1"><li><a id="charset-UCS-2"></a><code class="constant">UCS-2</code>
   ≡ <code class="constant">UNICODE-16</code>
   ≡ <code class="constant">UNICODE-16-BIG-ENDIAN</code>,
   the 16-bit basic multilingual plane of the <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> character set.
   Every character is represented as two bytes.</li><li><a id="charset-UNICODE-16-LITTLE-ENDIAN"></a><code class="constant">UNICODE-16-LITTLE-ENDIAN</code>
    </li><li><a id="charset-UCS-4"></a><code class="constant">UCS-4</code>
   ≡ <code class="constant">UNICODE-32</code>
   ≡ <code class="constant">UNICODE-32-BIG-ENDIAN</code>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> character set. Every character is represented as
   four bytes. This encoding is used by <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> internally.</li><li><a id="charset-UNICODE-32-LITTLE-ENDIAN"></a><code class="constant">UNICODE-32-LITTLE-ENDIAN</code></li><li><a id="charset-UTF-8"></a><code class="constant">UTF-8</code>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> character set.
   Every character is represented as one to four bytes.
   <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> characters represent themselves and need one byte per character.
   Most Latin/Greek/Cyrillic/Hebrew characters need two bytes per
   character. Most other characters need three bytes per character,
   and the rarely used remaining characters need four bytes per
   character. This is therefore, in general, the most space-efficient
   encoding of all of Unicode.</li>
<!--#ifdef GNU_LIBICONV-->
<li><a id="charset-UTF-16"></a><code class="constant">UTF-16</code>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> character set. Every character in the 16-bit
   basic multilingual plane is represented as two bytes, and the
   rarely used remaining characters need four bytes per character.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-UTF-7"></a><code class="constant">UTF-7</code>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> character set. This is a stateful 7-bit encoding.
   Not all <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> characters represent themselves.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */-->
<li><a id="charset-JAVA"></a><code class="constant">JAVA</code>,
   the 21-bit <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> character set.
   <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> characters represent themselves and need one byte per character.
   All other characters of the basic multilingual plane are represented
   by <code class="literal">\u<em class="replaceable"><code>nnnn</code></em></code> sequences
   (<em class="replaceable"><code>nnnn</code></em> a hexadecimal number)
   and need 6 bytes per character. The remaining characters are represented
   by <code class="literal">\u<em class="replaceable"><code>xxxx</code></em>\u<em class="replaceable"><code>yyyy</code></em></code>
   and need 12 bytes per character. While this encoding is very comfortable
   for editing Unicode files using only <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a>-aware tools and editors, it
   cannot faithfully represent all <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> text. Only text which
   does not contain <code class="literal">\u</code> (backslash followed by
   lowercase Latin u) can be faithfully represented by this encoding.
 </li><li><a id="charset-ASCII"></a><code class="constant">ASCII</code>,
   the well-known US-centric 7-bit character set (American Standard
   Code for Information Interchange - <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a>).</li><li><a id="charset-ISO-8859-1"></a><p><code class="constant">ISO-8859-1</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Afrikaans, Albanian, Basque, Breton, Catalan,
   Cornish, Danish, Dutch, English, Færoese, Finnish, French,
   Frisian, Galician, German, Greenlandic, Icelandic, Irish, Italian,
   Latin, Luxemburgish, Norwegian, Portuguese, Ræto-Romanic,
   Scottish, Spanish, and Swedish languages.</p><p>This encoding has the nice property that</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a> :for i :from 0 :to <a href="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html" target="_top"><code class="constant">CHAR-CODE-LIMIT</code></a> :for c = (<a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a> i)
  :always (<a href="http://www.lisp.org/HyperSpec/Body/mac_or.html" target="_top"><code class="function">OR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_not.html" target="_top"><code class="function">NOT</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_typep.html" target="_top"><code class="function">TYPEP</code></a> c CHARSET:ISO-8859-1))
              (<a href="http://www.lisp.org/HyperSpec/Body/fun_equalp.html" target="_top"><code class="function">EQUALP</code></a> (EXT:CONVERT-STRING-TO-BYTES (<a href="http://www.lisp.org/HyperSpec/Body/fun_string.html" target="_top"><code class="function">STRING</code></a> c) CHARSET:ISO-8859-1)
                      (<a href="http://www.lisp.org/HyperSpec/Body/fun_vector.html" target="_top"><code class="function">VECTOR</code></a> i))))
⇒ <code class="computeroutput">T</code></pre><p>
   i.e., it is compatible with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_code-char.html" target="_top"><code class="function">CODE-CHAR</code></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_char-code.html" target="_top"><code class="function">CHAR-CODE</code></a>
   in its own domain.</p></li><li><a id="charset-ISO-8859-2"></a><code class="constant">ISO-8859-2</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Croatian, Czech, German, Hungarian, Polish,
   Slovak, Slovenian, and Sorbian languages. </li><li><a id="charset-ISO-8859-3"></a><code class="constant">ISO-8859-3</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Esperanto and Maltese languages.</li><li><a id="charset-ISO-8859-4"></a><code class="constant">ISO-8859-4</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Estonian, Latvian, Lithuanian and Sami (Lappish)
   languages.</li><li><a id="charset-ISO-8859-5"></a><code class="constant">ISO-8859-5</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Bulgarian, Byelorussian, Macedonian, Russian,
   Serbian, and Ukrainian languages.</li><li><a id="charset-ISO-8859-6"></a><code class="constant">ISO-8859-6</code>,
   suitable for the Arabic language.</li><li><a id="charset-ISO-8859-7"></a><code class="constant">ISO-8859-7</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Greek language.</li><li><a id="charset-ISO-8859-8"></a><code class="constant">ISO-8859-8</code>,
      an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Hebrew language (without punctuation).
 </li><li><a id="charset-ISO-8859-9"></a><code class="constant">ISO-8859-9</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Turkish language.</li><li><a id="charset-ISO-8859-10"></a><code class="constant">ISO-8859-10</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Estonian, Icelandic, Inuit (Greenlandic), Latvian,
   Lithuanian, and Sami (Lappish) languages.</li><li><a id="charset-ISO-8859-13"></a><code class="constant">ISO-8859-13</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Estonian, Latvian, Lithuanian, Polish and Sami
   (Lappish) languages.</li><li><a id="charset-ISO-8859-14"></a><code class="constant">ISO-8859-14</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Irish Gælic, Manx Gælic, Scottish
   Gælic, and Welsh languages.</li><li><a id="charset-ISO-8859-15"></a><code class="constant">ISO-8859-15</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the ISO-8859-1 languages, with improvements for
   French, Finnish and the Euro.</li><li><a id="charset-ISO-8859-16"></a><code class="constant">ISO-8859-16</code>
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Rumanian language.</li><li><a id="charset-KOI8-R"></a><code class="constant">KOI8-R</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Russian language (very popular, especially on the
   internet).</li><li><a id="charset-KOI8-U"></a><code class="constant">KOI8-U</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Ukrainian language (very popular, especially on the
   internet).</li>
<!--#ifdef GNU_LIBICONV-->
<li><a id="charset-KOI8-RU"></a><code class="constant">KOI8-RU</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Russian language. This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */-->
<li><code class="constant">JIS_X0201</code>,
   a character set for the Japanese language.</li><li><a id="charset-MAC-ARABIC"></a><code class="constant">MAC-ARABIC</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-CENTRAL-EUROPE"></a><code class="constant">MAC-CENTRAL-EUROPE</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-CROATIAN"></a><code class="constant">MAC-CROATIAN</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-CYRILLIC"></a><code class="constant">MAC-CYRILLIC</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-DINGBAT"></a><code class="constant">MAC-DINGBAT</code>,
   a platform specific character set.
 </li><li><a id="charset-MAC-GREEK"></a><code class="constant">MAC-GREEK</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-HEBREW"></a><code class="constant">MAC-HEBREW</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-ICELAND"></a><code class="constant">MAC-ICELAND</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-ROMAN"></a><code class="constant">MAC-ROMAN</code>
   ≡ <code class="constant">MACINTOSH</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-ROMANIA"></a><code class="constant">MAC-ROMANIA</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-SYMBOL"></a><code class="constant">MAC-SYMBOL</code>,
   a platform specific character set.</li><li><a id="charset-MAC-THAI"></a><code class="constant">MAC-THAI</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-TURKISH"></a><code class="constant">MAC-TURKISH</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-MAC-UKRAINE"></a><code class="constant">MAC-UKRAINE</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP437"></a><code class="constant">CP437</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP437-IBM"></a><code class="constant">CP437-IBM</code>,
   an IBM variant of <code class="constant">CP437</code>.
 </li><li><a id="charset-CP737"></a><code class="constant">CP737</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Greek language.
 </li><li><a id="charset-CP775"></a><code class="constant">CP775</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for some Baltic languages.
 </li><li><a id="charset-CP850"></a><code class="constant">CP850</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP852"></a><code class="constant">CP852</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP852-IBM"></a><code class="constant">CP852-IBM</code>,
   an IBM variant of <code class="constant">CP852</code>.</li><li><a id="charset-CP855"></a><code class="constant">CP855</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Russian language.
 </li><li><a id="charset-CP857"></a><code class="constant">CP857</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Turkish language.
 </li><li><a id="charset-CP860"></a><code class="constant">CP860</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Portuguese language.
 </li><li><a id="charset-CP860-IBM"></a><code class="constant">CP860-IBM</code>,
   an IBM variant of <code class="constant">CP860</code>.
 </li><li><a id="charset-CP861"></a><code class="constant">CP861</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Icelandic language.
 </li><li><a id="charset-CP861-IBM"></a><code class="constant">CP861-IBM</code>,
   an IBM variant of <code class="constant">CP861</code>.
 </li><li><a id="charset-CP862"></a><code class="constant">CP862</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Hebrew language.
 </li><li><a id="charset-CP862-IBM"></a><code class="constant">CP862-IBM</code>,
   an IBM variant of <code class="constant">CP862</code>.
 </li><li><a id="charset-CP863"></a><code class="constant">CP863</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-CP863-IBM"></a><code class="constant">CP863-IBM</code>,
   an IBM variant of <code class="constant">CP863</code>.
 </li><li><a id="charset-CP864"></a><code class="constant">CP864</code>, a DOS oldie,
   meant to be suitable for the Arabic language.
 </li><li><a id="charset-CP864-IBM"></a><code class="constant">CP864-IBM</code>,
   an IBM variant of <code class="constant">CP864</code>.
 </li><li><a id="charset-CP865"></a><code class="constant">CP865</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for some Nordic languages.
 </li><li><a id="charset-CP865-IBM"></a><code class="constant">CP865-IBM</code>,
   an IBM variant of <code class="constant">CP865</code>.
 </li><li><a id="charset-CP866"></a><code class="constant">CP866</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Russian language.
 </li><li><a id="charset-CP869"></a><code class="constant">CP869</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Greek language.
 </li><li><a id="charset-CP869-IBM"></a><code class="constant">CP869-IBM</code>,
   an IBM variant of <code class="constant">CP869</code>.
 </li><li><a id="charset-CP874"></a><code class="constant">CP874</code>, a DOS oldie,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Thai language.
 </li><li><a id="charset-CP874-IBM"></a><code class="constant">CP874-IBM</code>,
   an IBM variant of <code class="constant">CP874</code>.
 </li><li><a id="charset-WINDOWS-1250"></a><code class="constant">WINDOWS-1250</code>
   ≡ <code class="constant">CP1250</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, heavily incompatible with ISO-8859-2.
 </li><li><a id="charset-WINDOWS-1251"></a><code class="constant">WINDOWS-1251</code>
   ≡ <code class="constant">CP1251</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, heavily incompatible with ISO-8859-5,
   meant to be suitable for the Russian language.
 </li><li><a id="charset-WINDOWS-1252"></a><code class="constant">WINDOWS-1252</code>
   ≡ <code class="constant">CP1252</code>,
   a platform specific extension of the ISO-8859-1 character set.
 </li><li><a id="charset-WINDOWS-1253"></a><code class="constant">WINDOWS-1253</code>
   ≡ <code class="constant">CP1253</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, gratuitously incompatible with ISO-8859-7,
   meant to be suitable for the Greek language.
 </li><li><a id="charset-WINDOWS-1254"></a><code class="constant">WINDOWS-1254</code>
   ≡ <code class="constant">CP1254</code>,
   a platform specific extension of the ISO-8859-9 character set.
 </li>
<!--#ifdef GNU_LIBICONV-->
<li><a id="charset-WINDOWS-1255"></a><code class="constant">WINDOWS-1255</code>
   ≡ <code class="constant">CP1255</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, gratuitously incompatible with ISO-8859-8,
   suitable for the Hebrew language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */-->
<li><a id="charset-WINDOWS-1256"></a><code class="constant">WINDOWS-1256</code>
   ≡ <code class="constant">CP1256</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Arabic language.
 </li><li><a id="charset-WINDOWS-1257"></a><code class="constant">WINDOWS-1257</code>
   ≡ <code class="constant">CP1257</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li>
<!--#ifdef GNU_LIBICONV-->
<li><a id="charset-WINDOWS-1258"></a><code class="constant">WINDOWS-1258</code>
   ≡ <code class="constant">CP1258</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>, meant to be suitable for the Vietnamese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */-->
<li><a id="charset-HP-ROMAN8"></a><code class="constant">HP-ROMAN8</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li><li><a id="charset-NEXTSTEP"></a><code class="constant">NEXTSTEP</code>,
   a platform specific extension of the <a href="#charset-ASCII">ASCII character set</a>.</li>
<!--#ifdef GNU_LIBICONV-->
<li><a id="charset-EUC-JP"></a><code class="constant">EUC-JP</code>,
   a multibyte character set for the Japanese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-SHIFT-JIS"></a><code class="constant">SHIFT-JIS</code>,
   a multibyte character set for the Japanese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP932"></a><code class="constant">CP932</code>,
   a Microsoft variant of <code class="constant">SHIFT-JIS</code>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-JP"></a><code class="constant">ISO-2022-JP</code>,
   a stateful 7-bit multibyte character set for the Japanese language.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-JP-2"></a><code class="constant">ISO-2022-JP-2</code>,
   a stateful 7-bit multibyte character set for the Japanese language.
   This character set is only available on platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> 2.3
   or newer or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-JP-1"></a><code class="constant">ISO-2022-JP-1</code>,
   a stateful 7-bit multibyte character set for the Japanese language.
   This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-EUC-CN"></a><code class="constant">EUC-CN</code>,
   a multibyte character set for simplified Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-HZ"></a><code class="constant">HZ</code>,
   a stateful 7-bit multibyte character set for simplified Chinese.
   This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GBK"></a><code class="constant">GBK</code>,
   a multibyte character set for Chinese,
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP936"></a><code class="constant">CP936</code>,
   a Microsoft variant of <code class="constant">GBK</code>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GB18030"></a><code class="constant">GB18030</code>,
   a multibyte character set for Chinese,
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-EUC-TW"></a><code class="constant">EUC-TW</code>,
   a multibyte character set for traditional Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-BIG5"></a><code class="constant">BIG5</code>,
   a multibyte character set for traditional Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP950"></a><code class="constant">CP950</code>,
   a Microsoft variant of <code class="constant">BIG5</code>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-BIG5-HKSCS"></a><code class="constant">BIG5-HKSCS</code>,
   a multibyte character set for traditional Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-CN"></a><code class="constant">ISO-2022-CN</code>,
   a stateful 7-bit multibyte character set for Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-CN-EXT"></a><code class="constant">ISO-2022-CN-EXT</code>,
   a stateful 7-bit multibyte character set for Chinese.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-EUC-KR"></a><code class="constant">EUC-KR</code>,
   a multibyte character set for Korean.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP949"></a><code class="constant">CP949</code>,
   a Microsoft variant of <code class="constant">EUC-KR</code>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ISO-2022-KR"></a><code class="constant">ISO-2022-KR</code>,
   a stateful 7-bit multibyte character set for Korean.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-JOHAB"></a><code class="constant">JOHAB</code>,
   a multibyte character set for Korean used mostly on <a href="http://www.freedos.org/" target="_top"><span class="strong"><strong>DOS</strong></span></a>.
   This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-ARMSCII-8"></a><code class="constant">ARMSCII-8</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Armenian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GEORGIAN-ACADEMY"></a><code class="constant">GEORGIAN-ACADEMY</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Georgian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-GEORGIAN-PS"></a><code class="constant">GEORGIAN-PS</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Georgian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-TIS-620"></a><code class="constant">TIS-620</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Thai. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-MULELAO-1"></a><code class="constant">MULELAO-1</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Laotian. This character set is only available on
                           platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-CP1133"></a><code class="constant">CP1133</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Laotian. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-VISCII"></a><code class="constant">VISCII</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Vietnamese. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li><li><a id="charset-TCVN"></a><code class="constant">TCVN</code>,
   an extension of the <a href="#charset-ASCII">ASCII character set</a>, suitable for the Vietnamese. This character set is only available on
                                 platforms with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>.</li>
<!--#endif /* GNU_LIBICONV */-->
<li><p><a id="base64"></a><code class="constant">BASE64</code>, encodes
  arbitrary byte sequences with 64 <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> characters </p><div class="literallayout"><p><br />
   ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/<br />
  </p></div><p> as specifined by <a class="rfc" href="http://rfc.net/rfc2045.html"><code>MIME</code></a>; 3 bytes are encoded with 4
  characters, line breaks are inserted after every 76 characters.</p><p>While this is not a traditional character set (i.e., it does
  not map a set of characters in a natural language into bytes), it
  does define a map between arbitrary byte sequences and certain
  character sequences, so it falls naturally into the <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a> class.
</p></li></ol></div><p>


<!--#ifdef /* HAVE_ICONV */-->

</p><div class="variablelist"><dl><dt><a id="iconv"></a><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep">Only on <a href="http://www.gnu.org" target="_top">GNU</a> systems
  with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> 2.2 or better and other systems (<a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> and <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>)
  on which the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> library has been installed</span></span></span></dt><dd><p>The character sets provided by the library function
 <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"><code class="function">iconv</code></a> can also be used as encodings.  To create such an encoding,
 call <a href="#make-encoding" title="30.5.4.&#xA0;Function EXT:MAKE-ENCODING"><code class="function">EXT:MAKE-ENCODING</code></a> with the character set name (a string) as the
 <code class="constant">:CHARSET</code> argument.</p><p>When an <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a> is available both as a <a href="#charset-symbols">built-in</a> and
 through <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"><code class="function">iconv</code></a>, the <a href="#charset-symbols">built-in</a> is used, because it is more
 efficient and available across all platforms.</p><p>These encodings are not assigned to global variables, since
 there is no portable way to get the list of all character sets
 supported by <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"><code class="function">iconv</code></a>.</p><p>On standard-compliant <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> systems (e.g., <a href="http://www.gnu.org" target="_top">GNU</a> systems, such
 as <a href="http://www.gnu.org" target="_top">GNU</a>/<a href="http://www.linux.org/" target="_top"><span class="strong"><strong>Linux</strong></span></a> and <a href="http://www.gnu.org" target="_top">GNU</a>/<a href="http://www.gnu.org/software/hurd/" target="_top"><span class="strong"><strong>Hurd</strong></span></a>) and on systems with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a> you
 get this list by calling the <span class="emphasis"><em>program</em></span>:
 <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/iconv.html"><span><strong class="command">iconv -l</strong></span></a>.</p><p>The reason we use only <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a> 2.2 or <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a> is
 that the other <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"><code class="function">iconv</code></a> implementations are broken in various ways and
 we do not want to deal with random <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> crashes caused by those bugs.
 If your system supplies an <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"><code class="function">iconv</code></a> implementation which passes the
 <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libiconv/" target="_top">libiconv</a>'s test suite, please report that to <code class="email">&lt;<a href="mailto:clisp-list@lists.sourceforge.net">clisp-list@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-list</a>) and a
 future <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> version will use <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"><code class="function">iconv</code></a> on your system.</p></dd></dl></div><p>

<!--#endif /* HAVE_ICONV */-->

</p></dd>
<!--#endif /* UNICODE */-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="newline"></a>30.5.3. Line Terminators</h3></div></div></div><p>The line terminator mode can be one of the following three keywords:
</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:UNIX</code></span></dt><dd>Newline is represented by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a>
   <span class="keycode">LF</span> character (<span class="keycode">U000A</span>).
</dd><dt><span class="term"><code class="constant">:MAC</code></span></dt><dd>Newline is represented by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a>
   <span class="keycode">CR</span> character (<span class="keycode">U000D</span>).
</dd><dt><span class="term"><code class="constant">:DOS</code></span></dt><dd>Newline is represented by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a>
   <span class="keycode">CR</span> followed by the <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> <span class="keycode">LF</span>.
</dd></dl></div><p>Windows programs typically use the <code class="constant">:DOS</code> line terminator,
 sometimes they also accept <code class="constant">:UNIX</code> line terminators or produce
 <code class="constant">:MAC</code> line terminators.</p><p>The <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> protocol also requires <code class="constant">:DOS</code> line terminators.</p><p>The line terminator mode is relevant only for output (writing to a
 <a href="#open" title="21.3.9.&#xA0;Function OPEN">file</a>/<a href="#pipe" title="31.7.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>).  During input, all three kinds of line terminators
 are recognized.  See also <a href="#clhs-newline" title="13.8.&#xA0;Treatment of Newline during Input and Output&#10;   [CLHS-13.1.8]">Section 13.8, “Treatment of Newline during Input and Output
   [CLHS-13.1.8]”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="make-encoding"></a>30.5.4. Function <a href="#make-encoding" title="30.5.4.&#xA0;Function EXT:MAKE-ENCODING"><code class="function">EXT:MAKE-ENCODING</code></a></h3></div></div></div><p>The function <code class="code">(<a href="#make-encoding" title="30.5.4.&#xA0;Function EXT:MAKE-ENCODING"><code class="function">EXT:MAKE-ENCODING</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :CHARSET
     :LINE-TERMINATOR :INPUT-ERROR-ACTION :OUTPUT-ERROR-ACTION)</code>
 returns an <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a>. The <code class="constant">:CHARSET</code> argument may be
 an encoding, a string, or <code class="constant">:DEFAULT</code>.
 The possible values for the <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a> argument are the
 keywords <code class="constant">:UNIX</code>, <code class="constant">:MAC</code>, <code class="constant">:DOS</code>.</p><p>The <code class="constant">:INPUT-ERROR-ACTION</code> argument specifies
 what happens when an invalid byte sequence is encountered while
 converting bytes to characters.  Its value can be <code class="constant">:ERROR</code>, <code class="constant">:IGNORE</code>
 or a character to be used instead.  The <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a> character
 <span class="keysym">#\uFFFD</span> is typically used to indicate an error in the
 input sequence.</p><p>The <code class="constant">:OUTPUT-ERROR-ACTION</code> argument specifies
 what happens when an invalid character is encountered while converting
 characters to bytes.  Its value can be <code class="constant">:ERROR</code>, <code class="constant">:IGNORE</code>, a byte to
 be used instead, or a character to be used instead.  The <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a>
 character <span class="keysym">#\uFFFD</span> can be used here only if it is
 encodable in the character set.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="enc-charset"></a>30.5.5. Function <a href="#enc-charset" title="30.5.5.&#xA0;Function EXT:ENCODING-CHARSET"><code class="function">EXT:ENCODING-CHARSET</code></a></h3></div><div><h4 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep">Only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built <span class="strong"><strong>with</strong></span> compile-time flag <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a></span></span></h4></div></div></div><p>The function <code class="code">(<a href="#enc-charset" title="30.5.5.&#xA0;Function EXT:ENCODING-CHARSET"><code class="function">EXT:ENCODING-CHARSET</code></a> <em class="replaceable"><code>encoding</code></em>)</code> returns the
 charset of the <em class="replaceable"><code>encoding</code></em>, as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_string.html" target="_top"><code class="function">STRING</code></a> (<a href="#enc-charset" title="30.5.5.&#xA0;Function EXT:ENCODING-CHARSET"><code class="function">EXT:ENCODING-CHARSET</code></a> <em class="replaceable"><code>encoding</code></em>))</code> is
  not necessarily a valid <a class="rfc" href="http://rfc.net/rfc2045.html"><code>MIME</code></a> name.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="enc-dflt"></a>30.5.6. Default encodings</h3></div></div></div><p>Besides every <a href="#open" title="21.3.9.&#xA0;Function OPEN">file</a>/<a href="#pipe" title="31.7.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> containing an encoding,
 the following <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> places contain global <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a>s:</p><p><a id="def-file-enc"></a><b><a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> <a href="impnotes.html#def-file-enc" class="olink"><code class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</code></a>. </b>The <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> <a href="impnotes.html#def-file-enc" class="olink"><code class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</code></a> is the encoding used for
 new <a href="#open" title="21.3.9.&#xA0;Function OPEN">file</a>/<a href="#pipe" title="31.7.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>, when no <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> argument was specified.
</p>
<!--#ifdef UNICODE-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep">Only in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> built <span class="strong"><strong>with</strong></span> compile-time flag <a href="http://www.unicode.org/" target="_top"><span class="strong"><strong>UNICODE</strong></span></a></span></span></span></dt><dd><p>The following are <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> places.</p><div class="variablelist"><dl><dt><span class="term"><strong class="first"><em class="firstterm"><a href="impnotes.html#path-enc" class="olink"><code class="varname">CUSTOM:*PATHNAME-ENCODING*</code></a>
   <a id="path-enc" class="indexterm"></a></em></strong></span></dt><dd>is the encoding used for pathnames in the file
   system. Normally, this should be a 1:1 encoding.
   Its <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a> mode is ignored.</dd><dt><span class="term"><strong class="first"><em class="firstterm"><a href="impnotes.html#term-enc" class="olink"><code class="varname">CUSTOM:*TERMINAL-ENCODING*</code></a>
   <a id="term-enc" class="indexterm"></a></em></strong></span></dt><dd>is the encoding used for communication with the
  terminal, in particular by <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a>.
 </dd><dt><span class="term"><strong class="first"><em class="firstterm"><a href="impnotes.html#misc-enc" class="olink"><code class="varname">CUSTOM:*MISC-ENCODING*</code></a>
   <a id="misc-enc" class="indexterm"></a></em></strong></span></dt><dd>is the encoding used for access to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a>s,
 command line options, and the like.  Its <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a> mode is ignored.
 </dd>
<!--#if defined(HAVE_AFFI) || defined(DYNAMIC_FFI)-->
<dt><span class="term"><strong class="first"><em class="firstterm"><a href="impnotes.html#foreign-enc" class="olink"><code class="varname">CUSTOM:*FOREIGN-ENCODING*</code></a>
   <a id="foreign-enc" class="indexterm"></a></em></strong></span></dt><dd>is the encoding for strings passed through the
 <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> (some platforms only). If it is a 1:1 encoding,
 i.e. an encoding in which every character is represented by one byte,
 it is also used for passing characters through the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.
</dd>
<!--#endif-->
</dl></div></dd></dl></div>
<!--#endif-->
<p>The default encoding objects are initialized according to <code class="option"><a href="clisp.html#opt-enc" class="olink">-Edomain encoding</a></code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Reminder</h3><p>You have to use <a href="#letf" title="30.11.2.&#xA0;Macros EXT:LETF &amp; EXT:LETF*"><code class="function">EXT:LETF</code></a>/<a href="#letf" title="30.11.2.&#xA0;Macros EXT:LETF &amp; EXT:LETF*"><code class="function">EXT:LETF*</code></a>
  for <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a>s; <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET</code></a>/<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET*</code></a> will <span class="strong"><strong>not</strong></span> work!</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="string-byte"></a>30.5.7. Converting between strings and byte vectors</h3></div></div></div><p>Encodings can also be used to convert directly between strings and
their corresponding byte vector representation according to that encoding.
</p><div class="variablelist"><dl><dt><span class="term"><code class="code">(<code class="function">EXT:CONVERT-STRING-FROM-BYTES</code>
      <em class="replaceable"><code>vector</code></em> <em class="replaceable"><code>encoding</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:START</code> <code class="constant">:END</code>)</code></span></dt><dd>converts the subsequence of <em class="replaceable"><code>vector</code></em> (a <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span>)
   from <em class="replaceable"><code>start</code></em> to <em class="replaceable"><code>end</code></em> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>, according to the given
   <em class="replaceable"><code>encoding</code></em>, and returns the resulting string.
</dd><dt><span class="term"><code class="code">(<code class="function">EXT:CONVERT-STRING-TO-BYTES</code>
      <em class="replaceable"><code>string</code></em> <em class="replaceable"><code>encoding</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:START</code> <code class="constant">:END</code>)</code></span></dt><dd>converts the subsequence of <em class="replaceable"><code>string</code></em> from
   <em class="replaceable"><code>start</code></em> to <em class="replaceable"><code>end</code></em> to a <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span>, according to the given
   <em class="replaceable"><code>encoding</code></em>, and returns the resulting byte vector.
</dd></dl></div></div></div>
<!--#ifdef GENERIC_STREAMS-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gstream"></a>30.6. Generic streams</h2></div></div></div><p>This interface is <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>-specific and now obsolete.  Please use
 the <a href="#gray" title="29.2.&#xA0;Gray streams">Gray streams</a> interface instead.</p><p>Generic streams are user programmable streams.
 The programmer interface:</p><div class="variablelist"><dl><dt><span class="term"><code class="code">(<code class="function">gstream:make-generic-stream</code>
                 <em class="replaceable"><code>controller</code></em>)</code></span></dt><dd>returns a generic stream.
  </dd><dt><span class="term"><code class="code">(<code class="function">gstream:generic-stream-controller</code>
                 <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>returns a private object to which generic stream
   methods dispatch.  The typical usage is to retrieve the object
   originally provided by the user in
   <code class="function">gstream:make-generic-stream</code>.
  </dd><dt><span class="term"><code class="code">(<code class="function">gstream:generic-stream-p</code>
                 <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>determines whether a stream is a generic stream,
   returning <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if it is, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> otherwise.
  </dd></dl></div><p>In order to specify the behavior of a generic stream, the user
 must define <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> methods on the following <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> generic
 functions.  The function
 <code class="function">gstream:generic-stream-<em class="replaceable"><code>xyz</code></em></code>
 corresponds to the <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> function
 <code class="function"><em class="replaceable"><code>xyz</code></em></code>.  They all take a
 controller and some number of arguments.</p><div class="variablelist"><dl><dt><span class="term"><code class="code">(<code class="function">gstream:generic-stream-read-char</code>
                 <em class="replaceable"><code>controller</code></em>)</code></span></dt><dd> Returns and consumes the next character, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> at
    end of file.  Takes one argument, the controller object.
  </dd><dt><span class="term"><code class="code">(<code class="function">gstream:generic-stream-peek-char</code>
                 <em class="replaceable"><code>controller</code></em>)</code></span></dt><dd> Returns the next character, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> at end of file.  A
   second value indicates whether the side effects associated with
   consuming the character were executed: <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> means that a full
   <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> was done, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> means that no side effects were done.
   Takes one argument, the controller object.
  </dd><dt><span class="term"><code class="code">(<code class="function">gstream:generic-stream-read-byte</code>
                 <em class="replaceable"><code>controller</code></em>)</code></span></dt><dd>Returns and consumes the next integer, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> at end
   of file.  Takes one argument, the controller object.
  </dd><dt><span class="term"><code class="code">(<code class="function">gstream:generic-stream-read-char-will-hang-p</code>
     <em class="replaceable"><code>controller</code></em>)</code></span></dt><dd>This generic function is used to query the stream's
   input status.  It returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if
   <code class="function">gstream:generic-stream-read-char</code> and
   <code class="function">gstream:generic-stream-peek-char</code> will certainly
   return immediately.  Otherwise it returns true.
  </dd><dt><span class="term"><code class="code">(<code class="function">gstream:generic-stream-write-char</code>
                 <em class="replaceable"><code>controller</code></em> <em class="replaceable"><code>char</code></em>)</code></span></dt><dd>The first argument is the controller object.
   The second argument is the character to be written.
  </dd><dt><span class="term"><code class="code">(<code class="function">gstream:generic-stream-write-byte</code>
                 <em class="replaceable"><code>controller</code></em>
                 <em class="replaceable"><code>by</code></em>)</code></span></dt><dd>The first argument is the controller object.
   The second argument is the integer to be written.
  </dd><dt><span class="term"><code class="code">(<code class="function">gstream:generic-stream-write-string</code>
                 <em class="replaceable"><code>controller</code></em>
                 <em class="replaceable"><code>string</code></em> <em class="replaceable"><code>start</code></em> <em class="replaceable"><code>length</code></em>)</code></span></dt><dd>Writes the subsequence of <em class="replaceable"><code>string</code></em> starting from
   <em class="replaceable"><code>start</code></em> of length <em class="replaceable"><code>length</code></em>.
   The first argument is the controller object.
  </dd><dt><span class="term"><code class="code">(<code class="function">gstream:generic-stream-clear-input</code>
                 <em class="replaceable"><code>controller</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">gstream:generic-stream-clear-output</code>
     <em class="replaceable"><code>controller</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">gstream:generic-stream-finish-output</code>
     <em class="replaceable"><code>controller</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">gstream:generic-stream-force-output</code>
     <em class="replaceable"><code>controller</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">gstream:generic-stream-close</code>
     <em class="replaceable"><code>controller</code></em>)</code></span></dt><dd>Take one argument, the controller object.
 </dd></dl></div></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="weak"></a>30.7. Weak Objects</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#weak-pointer">30.7.1. Weak Pointers</a></span></dt><dt><span class="section"><a href="#weak-list">30.7.2. Weak Lists</a></span></dt><dt><span class="section"><a href="#weak-and-relation">30.7.3. Weak “<span class="quote">And</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-or-relation">30.7.4. Weak “<span class="quote">Or</span>” Relations</a></span></dt><dt><span class="section"><a href="#weak-mapping">30.7.5. Weak Associations</a></span></dt><dt><span class="section"><a href="#weak-and-mapping">30.7.6. Weak “<span class="quote">And</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-or-mapping">30.7.7. Weak “<span class="quote">Or</span>” Mappings</a></span></dt><dt><span class="section"><a href="#weak-alist">30.7.8. Weak Association Lists</a></span></dt><dt><span class="section"><a href="#weak-ht">30.7.9. Weak Hash Tables</a></span></dt></dl></div><p>Recall two terms: An object is called “<span class="quote">"alive"</span>” as
 long as it can be retrieved by the user or program, through any kind of
 references, starting from global and local variables. (Objects that
 consume no heap storage, also known as “<span class="quote">"immediate
 objects"</span>”, such as <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s, <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>s, and
 <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a>s, are alive indefinitely.) An object is said to be
 <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed when its storage is reclaimed, at some moment after it becomes
 “<span class="quote">"dead"</span>”.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-pointer"></a>30.7.1. Weak Pointers</h3></div></div></div><p>A <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><code class="classname">EXT:WEAK-POINTER</code></a> is an object holding a reference to a given object,
 without keeping the latter from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</p><div class="variablelist"><p class="title"><b>Weak Pointer API</b></p><dl><dt><span class="term"><code class="code">(<code class="function">EXT:MAKE-WEAK-POINTER</code>
   <em class="replaceable"><code>value</code></em>)</code></span></dt><dd>returns a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><code class="classname">EXT:WEAK-POINTER</code></a> referring to
   <em class="replaceable"><code>value</code></em>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-POINTER-P</code> <em class="replaceable"><code>object</code></em>)</code></span></dt><dd>returns true if the <em class="replaceable"><code>object</code></em> is of type
   <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><code class="classname">EXT:WEAK-POINTER</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-POINTER-VALUE</code>
   <em class="replaceable"><code>weak-pointer</code></em>)</code></span></dt><dd>returns two values: The original value and <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>,
   if the value has not yet been <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
   It is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>-able: you can change the value that the weak pointer
   points to.</dd></dl></div><p>Weak pointers are useful for notification-based communication
 protocols between software modules, e.g. when a change to an object
 <em class="replaceable"><code>x</code></em> requires a notification to an object <em class="replaceable"><code>y</code></em>, as long as <em class="replaceable"><code>y</code></em> is
 alive.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-list"></a>30.7.2. Weak Lists</h3></div></div></div><p>A <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><code class="classname">EXT:WEAK-LIST</code></a> is an ordered collection of references to objects
 that does <span class="strong"><strong>not</strong></span> keep the objects from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed. It is
 semantically equivalent to a list of <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><code class="classname">EXT:WEAK-POINTER</code></a>s, however with a
 more efficient in-memory representation than a plain list of
 <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><code class="classname">EXT:WEAK-POINTER</code></a>s would be.</p><div class="variablelist"><p class="title"><b>Weak List API</b></p><dl><dt><span class="term"><code class="code">(<code class="function">EXT:MAKE-WEAK-LIST</code> <em class="replaceable"><code>list</code></em>)</code></span></dt><dd>creates a <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><code class="classname">EXT:WEAK-LIST</code></a> pointing to each of the
   elements in the given <em class="replaceable"><code>list</code></em>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-LIST-P</code> <em class="replaceable"><code>object</code></em>)</code></span></dt><dd>returns true if the <em class="replaceable"><code>object</code></em> is of type
   <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><code class="classname">EXT:WEAK-LIST</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-LIST-LIST</code>
   <em class="replaceable"><code>weak-list</code></em>)</code></span></dt><dd>returns a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of those objects from the
   <em class="replaceable"><code>weak-list</code></em> that are still
   alive.</dd><dt><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<code class="function">EXT:WEAK-LIST-LIST</code>
   <em class="replaceable"><code>weak-list</code></em>) <em class="replaceable"><code>list</code></em>)</code></span></dt><dd>replaces the list of objects stored by the
   <em class="replaceable"><code>weak-list</code></em>.</dd></dl></div><p>Weak lists are useful for notification based communication
 protocols between software modules, e.g. when a change to an object
 <em class="replaceable"><code>x</code></em> requires a notification to objects <em class="replaceable"><code>k<sub>1</sub></code></em>, <em class="replaceable"><code>k<sub>2</sub></code></em>, ..., as long
 as such a particular <em class="replaceable"><code>k<sub>n</sub></code></em> is alive.</p><p>A <a href="#weak-list" title="30.7.2.&#xA0;Weak Lists"><code class="classname">EXT:WEAK-LIST</code></a> with a single element is semantically equivalent to a
 single <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><code class="classname">EXT:WEAK-POINTER</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-and-relation"></a>30.7.3. Weak “<span class="quote">And</span>” Relations</h3></div></div></div><p>A weak “<span class="quote">and</span>” relation is an ordered collection of
 references to objects, that does <span class="strong"><strong>not</strong></span> keep the objects from being
 <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, and which allows access to all the objects as long as all of
 them are still alive. As soon as one of them is <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, the entire
 collection of objects becomes empty.</p><div class="variablelist"><p class="title"><b>Weak “<span class="quote">And</span>” Relation API</b></p><dl><dt><span class="term"><code class="code">(<code class="function">EXT:MAKE-WEAK-AND-RELATION</code>
   <em class="replaceable"><code>list</code></em>)</code></span></dt><dd>creates a <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><code class="classname">EXT:WEAK-AND-RELATION</code></a> between the objects in
   the given <em class="replaceable"><code>list</code></em>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-AND-RELATION-P</code>
   <em class="replaceable"><code>object</code></em>)</code></span></dt><dd>returns true if the <em class="replaceable"><code>object</code></em> is of type
   <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><code class="classname">EXT:WEAK-AND-RELATION</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-AND-RELATION-LIST</code>
   <em class="replaceable"><code>weak-and-relation</code></em>)</code></span></dt><dd>returns the list of objects stored in the
   <em class="replaceable"><code>weak-and-relation</code></em>. The returned list must not
   be destructively modified.</dd></dl></div><p><a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><code class="classname">EXT:WEAK-AND-RELATION</code></a>s are useful to model relations between objects
 that become worthless when one of the objects dies.</p><p>A <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><code class="classname">EXT:WEAK-AND-RELATION</code></a> with a single element is semantically
 equivalent to a <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><code class="classname">EXT:WEAK-POINTER</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-or-relation"></a>30.7.4. Weak “<span class="quote">Or</span>” Relations</h3></div></div></div><p>A weak “<span class="quote">or</span>” relation is an ordered collection of
 references to objects, that keeps all objects from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed as long
 as one of them is still alive. In other words, each of them keeps all
 others among them from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed. When all of them are unreferenced,
 the collection of objects becomes empty.</p><div class="variablelist"><p class="title"><b>Weak “<span class="quote">Or</span>” Relation API</b></p><dl><dt><span class="term"><code class="code">(<code class="function">EXT:MAKE-WEAK-OR-RELATION</code>
   <em class="replaceable"><code>list</code></em>)</code></span></dt><dd>creates a <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><code class="classname">EXT:WEAK-OR-RELATION</code></a> between the objects in
   the given <em class="replaceable"><code>list</code></em>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-OR-RELATION-P</code>
   <em class="replaceable"><code>object</code></em>)</code></span></dt><dd>returns true if the <em class="replaceable"><code>object</code></em> is of type
   <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><code class="classname">EXT:WEAK-OR-RELATION</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-OR-RELATION-LIST</code>
   <em class="replaceable"><code>weak-or-relation</code></em>)</code></span></dt><dd>returns the list of objects stored in the
   <em class="replaceable"><code>weak-or-relation</code></em>. The returned list must not
   be destructively modified.</dd></dl></div><p><a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><code class="classname">EXT:WEAK-OR-RELATION</code></a>s are useful to model relations between objects
 that do not become worthless when one of the objects dies.</p><p>A <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><code class="classname">EXT:WEAK-OR-RELATION</code></a> with a single element is semantically
 equivalent to a <a href="#weak-pointer" title="30.7.1.&#xA0;Weak Pointers"><code class="classname">EXT:WEAK-POINTER</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-mapping"></a>30.7.5. Weak Associations</h3></div></div></div><p>A weak association is a mapping from an object called <em class="replaceable"><code>key</code></em> to
 an object called <em class="replaceable"><code>value</code></em>, that exists as long as the key is alive. In
 other words, as long as the key is alive, it keeps the value from being
 <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</p><div class="variablelist"><p class="title"><b>Weak Association API</b></p><dl><dt><span class="term"><code class="code">(<code class="function">EXT:MAKE-WEAK-MAPPING</code>
   <em class="replaceable"><code>key</code></em> <em class="replaceable"><code>value</code></em>)</code></span></dt><dd>creates a <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><code class="classname">EXT:WEAK-MAPPING</code></a>.
</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-MAPPING-P</code>
   <em class="replaceable"><code>object</code></em>)</code></span></dt><dd>returns true if the object is of type
   <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><code class="classname">EXT:WEAK-MAPPING</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-MAPPING-PAIR</code>
   <em class="replaceable"><code>weak-mapping</code></em>)</code></span></dt><dd>returns three values: the original key, the original
   value, and <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, if the key has not yet been <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-MAPPING-VALUE</code>
   <em class="replaceable"><code>weak-mapping</code></em>)</code></span></dt><dd>returns the value, if the key has not yet been <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed,
   else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<code class="function">EXT:WEAK-MAPPING-VALUE</code>
   <em class="replaceable"><code>weak-mapping</code></em>) <em class="replaceable"><code>value</code></em>)</code></span></dt><dd>replaces the value stored in the
   <em class="replaceable"><code>weak-mapping</code></em>. It has no effect when the
   key has already been <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd></dl></div><p>Weak associations are useful to supplement objects with additional
 information that is stored outside of the object.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-and-mapping"></a>30.7.6. Weak “<span class="quote">And</span>” Mappings</h3></div></div></div><p>A weak “<span class="quote">and</span>” mapping is a mapping from a tuple of
 objects called <em class="replaceable"><code>keys</code></em> to an object called <em class="replaceable"><code>value</code></em>, that does
 <span class="strong"><strong>not</strong></span> keep the keys from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed and that exists as long as all
 keys are alive. As soon as one of the keys is <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, the entire
 mapping goes away.</p><div class="variablelist"><p class="title"><b>Weak “<span class="quote">And</span>” Mapping API</b></p><dl><dt><span class="term"><code class="code">(<code class="function">EXT:MAKE-WEAK-AND-MAPPING</code>
   <em class="replaceable"><code>keys</code></em> <em class="replaceable"><code>value</code></em>)</code></span></dt><dd>creates a <a href="#weak-and-mapping" title="30.7.6.&#xA0;Weak &#x201C;And&#x201D; Mappings"><code class="classname">EXT:WEAK-AND-MAPPING</code></a> between the <em class="replaceable"><code>keys</code></em>
   objects in the given list and the given <em class="replaceable"><code>value</code></em>.
   The <em class="replaceable"><code>keys</code></em> list must be non-empty.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-AND-MAPPING-P</code>
   <em class="replaceable"><code>object</code></em>)</code></span></dt><dd>returns true if the <em class="replaceable"><code>object</code></em> is of type
   <a href="#weak-and-mapping" title="30.7.6.&#xA0;Weak &#x201C;And&#x201D; Mappings"><code class="classname">EXT:WEAK-AND-MAPPING</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-AND-MAPPING-PAIR</code>
   <em class="replaceable"><code>weak-and-mapping</code></em>)</code></span></dt><dd>returns three values: the list of keys, the value,
   and <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, if none of the keys have been <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
   The returned keys list must not be destructively modified.
</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-AND-MAPPING-VALUE</code>
   <em class="replaceable"><code>weak-and-mapping</code></em>)</code></span></dt><dd>returns the value, if none of the keys have been
   <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>
   (<code class="function">EXT:WEAK-AND-MAPPING-VALUE</code>
   <em class="replaceable"><code>weak-and-mapping</code></em>) <em class="replaceable"><code>value</code></em>)</code></span></dt><dd>replaces the value stored in the
   <em class="replaceable"><code>weak-and-mapping</code></em>. It has no effect when
   some key has already been <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd></dl></div><p><a href="#weak-and-mapping" title="30.7.6.&#xA0;Weak &#x201C;And&#x201D; Mappings"><code class="classname">EXT:WEAK-AND-MAPPING</code></a>s are useful to model properties of sets of
 objects that become worthless when one of the objects dies.</p><p>A <a href="#weak-and-mapping" title="30.7.6.&#xA0;Weak &#x201C;And&#x201D; Mappings"><code class="classname">EXT:WEAK-AND-MAPPING</code></a> with a single key is semantically equivalent
 to a weak association.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-or-mapping"></a>30.7.7. Weak “<span class="quote">Or</span>” Mappings</h3></div></div></div><p>A weak “<span class="quote">or</span>” mapping is a mapping from a tuple of
 objects called <em class="replaceable"><code>keys</code></em> to an object called <em class="replaceable"><code>value</code></em>, that keeps all
 keys and the value from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed as long as one of the keys is
 still alive. In other words, each of the keys keeps all others among
 them and the value from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.  When all of them are
 unreferenced, the entire mapping goes away.</p><div class="variablelist"><p class="title"><b>Weak “<span class="quote">Or</span>” Mapping API</b></p><dl><dt><span class="term"><code class="code">(<code class="function">EXT:MAKE-WEAK-OR-MAPPING</code>
   <em class="replaceable"><code>keys</code></em> <em class="replaceable"><code>value</code></em>)</code></span></dt><dd> creates a <a href="#weak-or-mapping" title="30.7.7.&#xA0;Weak &#x201C;Or&#x201D; Mappings"><code class="classname">EXT:WEAK-OR-MAPPING</code></a> between the
   <em class="replaceable"><code>keys</code></em> objects in the given list and the given
   <em class="replaceable"><code>value</code></em>. The <em class="replaceable"><code>keys</code></em> list must be
   non-empty.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-OR-MAPPING-P</code>
   <em class="replaceable"><code>object</code></em>)</code></span></dt><dd>returns true if the <em class="replaceable"><code>object</code></em> is of type
   <a href="#weak-or-mapping" title="30.7.7.&#xA0;Weak &#x201C;Or&#x201D; Mappings"><code class="classname">EXT:WEAK-OR-MAPPING</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-OR-MAPPING-PAIR</code>
   <em class="replaceable"><code>weak-or-mapping</code></em>)</code></span></dt><dd>returns three values: the list of keys, the value,
   and <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, if the keys have not yet been <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
   The returned keys list must not be destructively modified.
</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-OR-MAPPING-VALUE</code>
   <em class="replaceable"><code>weak-or-mapping</code></em>)</code></span></dt><dd>returns the value, if the keys have not yet been <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed,
   else <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<code class="function">EXT:WEAK-OR-MAPPING-VALUE</code>
   <em class="replaceable"><code>weak-or-mapping</code></em>) <em class="replaceable"><code>value</code></em>)</code></span></dt><dd>replaces the value stored in the
   <em class="replaceable"><code>weak-or-mapping</code></em>. It has no effect when the
   keys have already been <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd></dl></div><p><a href="#weak-or-mapping" title="30.7.7.&#xA0;Weak &#x201C;Or&#x201D; Mappings"><code class="classname">EXT:WEAK-OR-MAPPING</code></a>s are useful to model properties of sets of
 objects that do not become worthless when one of the objects dies.</p><p>A <a href="#weak-or-mapping" title="30.7.7.&#xA0;Weak &#x201C;Or&#x201D; Mappings"><code class="classname">EXT:WEAK-OR-MAPPING</code></a> with a single key is semantically equivalent
 to a weak association.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-alist"></a>30.7.8. Weak Association Lists</h3></div></div></div><p>A weak association list is an ordered collection of pairs, each
 pair being built from an object called <em class="replaceable"><code>key</code></em> and an object called
 <em class="replaceable"><code>value</code></em>.  The lifetime of each pair depends on the type of the weak
 <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>:
</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:KEY</code></span></dt><dd>The pair exists as long as the <em class="replaceable"><code>key</code></em> is not <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.
    As long as the <em class="replaceable"><code>key</code></em> is alive, it prevents the <em class="replaceable"><code>value</code></em> from
    being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd><dt><span class="term"><code class="constant">:VALUE</code></span></dt><dd>The pair exists as long as the <em class="replaceable"><code>value</code></em> is not <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.
   As long as the <em class="replaceable"><code>value</code></em> is alive, it prevents the <em class="replaceable"><code>key</code></em> from
   being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd><dt><span class="term"><code class="constant">:KEY-AND-VALUE</code></span></dt><dd>The pair exists as long as the <em class="replaceable"><code>key</code></em> and the <em class="replaceable"><code>value</code></em>
   are alive.
 </dd><dt><span class="term"><code class="constant">:KEY-OR-VALUE</code></span></dt><dd>The pair exists as long as the <em class="replaceable"><code>key</code></em> or the <em class="replaceable"><code>value</code></em>
   are alive.  As long as the <em class="replaceable"><code>key</code></em> is alive, it prevents the <em class="replaceable"><code>value</code></em>
   from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, and as long as the <em class="replaceable"><code>value</code></em> is alive, it prevents the
   <em class="replaceable"><code>key</code></em> from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd></dl></div><p>
In other words, each pair is:
</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:KEY</code></span></dt><dd>a <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><code class="classname">EXT:WEAK-MAPPING</code></a> from the <em class="replaceable"><code>key</code></em> to the <em class="replaceable"><code>value</code></em>,
 </dd><dt><span class="term"><code class="constant">:VALUE</code></span></dt><dd>a <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><code class="classname">EXT:WEAK-MAPPING</code></a> from the <em class="replaceable"><code>value</code></em> to the <em class="replaceable"><code>key</code></em>,
 </dd><dt><span class="term"><code class="constant">:KEY-AND-VALUE</code></span></dt><dd>a <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><code class="classname">EXT:WEAK-AND-RELATION</code></a> of the <em class="replaceable"><code>key</code></em> and the <em class="replaceable"><code>value</code></em>,
 </dd><dt><span class="term"><code class="constant">:KEY-OR-VALUE</code></span></dt><dd>a <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><code class="classname">EXT:WEAK-OR-RELATION</code></a> of the <em class="replaceable"><code>key</code></em> and the <em class="replaceable"><code>value</code></em>.
 </dd></dl></div><div class="variablelist"><p class="title"><b>Weak Association List API</b></p><dl><dt><span class="term"><code class="code">(<code class="function">EXT:MAKE-WEAK-ALIST</code>
   :type :initial-contents)</code></span></dt><dd>creates a <a href="#weak-alist" title="30.7.8.&#xA0;Weak Association Lists"><code class="classname">EXT:WEAK-ALIST</code></a>. The <em class="replaceable"><code>type</code></em> argument
   must be one of the four aforementioned types; the default is <code class="constant">:KEY</code>.
   The <em class="replaceable"><code>initial-contents</code></em> argument must be an
   <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-ALIST-P</code> <em class="replaceable"><code>object</code></em>)</code></span></dt><dd>returns true if the <em class="replaceable"><code>object</code></em> is of type
   <a href="#weak-alist" title="30.7.8.&#xA0;Weak Association Lists"><code class="classname">EXT:WEAK-ALIST</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-ALIST-TYPE</code>
   <em class="replaceable"><code>weak-alist</code></em>)</code></span></dt><dd>returns the type of the
   <em class="replaceable"><code>weak-alist</code></em>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-ALIST-CONTENTS</code>
   <em class="replaceable"><code>weak-alist</code></em>)</code></span></dt><dd>returns an <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> that corresponds to the current
   contents of the <em class="replaceable"><code>weak-alist</code></em>.
</dd><dt><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<code class="function">EXT:WEAK-ALIST-CONTENTS</code>
   <em class="replaceable"><code>weak-alist</code></em>)
   <em class="replaceable"><code>contents</code></em>)</code></span></dt><dd>replaces the contents of a
   <em class="replaceable"><code>weak-alist</code></em>. The
   <em class="replaceable"><code>contents</code></em> argument must be an
   <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-ALIST-ASSOC</code> <em class="replaceable"><code>item</code></em>
   <em class="replaceable"><code>weak-alist</code></em>
   [:test] [:test-not] [:key])</code></span></dt><dd>is equivalent to
   <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_assoccm_a_assoc-if-not.html" target="_top"><code class="function">ASSOC</code></a> <em class="replaceable"><code>item</code></em> (<code class="function">EXT:WEAK-ALIST-CONTENTS</code>
    <em class="replaceable"><code>weak-alist</code></em>)
    [:test] [:test-not] [:key])</code>.
</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-ALIST-RASSOC</code> <em class="replaceable"><code>item</code></em>
   <em class="replaceable"><code>weak-alist</code></em>
   [:test] [:test-not] [:key])</code></span></dt><dd>is equivalent to
   <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_rassoccm__assoc-if-not.html" target="_top"><code class="function">RASSOC</code></a> <em class="replaceable"><code>item</code></em> (<code class="function">EXT:WEAK-ALIST-CONTENTS</code>
    <em class="replaceable"><code>weak-alist</code></em>)
    [:test] [:test-not] [:key])</code>.
</dd><dt><span class="term"><code class="code">(<code class="function">EXT:WEAK-ALIST-VALUE</code> <em class="replaceable"><code>item</code></em>
   <em class="replaceable"><code>weak-alist</code></em> [:test] [:test-not])</code></span></dt><dd>is equivalent to
   <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a> (<code class="function">EXT:WEAK-LIST-ASSOC</code>
    <em class="replaceable"><code>item</code></em> <em class="replaceable"><code>weak-alist</code></em>
    [:test] [:test-not]))</code>.
</dd><dt><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<code class="function">EXT:WEAK-ALIST-VALUE</code>
   <em class="replaceable"><code>item</code></em> <em class="replaceable"><code>weak-alist</code></em> [:test] [:test-not])
   <em class="replaceable"><code>value</code></em>)</code></span></dt><dd>replaces the value stored for <em class="replaceable"><code>item</code></em> in
   a <em class="replaceable"><code>weak-alist</code></em>.  When a pair with the given
   <em class="replaceable"><code>item</code></em> as key does not exist or has already been <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, a new pair
   is added to the <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.</dd></dl></div><p>Weak associations lists are useful to supplement objects with
 additional information that is stored outside of the object, when the
 number of such objects is known to be small.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="weak-ht"></a>30.7.9. Weak Hash Tables</h3></div></div></div><p>A weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a> is an unordered collection of pairs, each
 pair being built from an object called <em class="replaceable"><code>key</code></em> and an object called
 <em class="replaceable"><code>value</code></em>. There can be only one pair with a given <em class="replaceable"><code>key</code></em> in a weak
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>. The lifetime of each pair depends on the type of the
 weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>
</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:KEY</code></span></dt><dd>The pair exists as long as the <em class="replaceable"><code>key</code></em> is not <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.
    As long as the <em class="replaceable"><code>key</code></em> is alive, it prevents the <em class="replaceable"><code>value</code></em> from
    being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd><dt><span class="term"><code class="constant">:VALUE</code></span></dt><dd>The pair exists as long as the <em class="replaceable"><code>value</code></em> is not <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.
     As long as the <em class="replaceable"><code>value</code></em> is alive, it prevents the <em class="replaceable"><code>key</code></em> from
     being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.</dd><dt><span class="term"><code class="constant">:KEY-AND-VALUE</code></span></dt><dd>The pair exists as long as the <em class="replaceable"><code>key</code></em> and the
     <em class="replaceable"><code>value</code></em> are alive.</dd><dt><span class="term"><code class="constant">:KEY-OR-VALUE</code></span></dt><dd>The pair exists as long as the <em class="replaceable"><code>key</code></em> or the
     <em class="replaceable"><code>value</code></em> are alive.  As long as the <em class="replaceable"><code>key</code></em> is alive, it prevents
     the <em class="replaceable"><code>key</code></em> from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, and as long as the <em class="replaceable"><code>value</code></em> is
     alive, it prevents the <em class="replaceable"><code>key</code></em> from being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed.
  </dd></dl></div><p>
In other words, each pair is:
</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:KEY</code></span></dt><dd>a <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><code class="classname">EXT:WEAK-MAPPING</code></a> from the <em class="replaceable"><code>key</code></em> to the <em class="replaceable"><code>value</code></em>,
 </dd><dt><span class="term"><code class="constant">:VALUE</code></span></dt><dd>a <a href="#weak-mapping" title="30.7.5.&#xA0;Weak Associations"><code class="classname">EXT:WEAK-MAPPING</code></a> from the <em class="replaceable"><code>value</code></em> to the <em class="replaceable"><code>key</code></em>,
 </dd><dt><span class="term"><code class="constant">:KEY-AND-VALUE</code></span></dt><dd>a <a href="#weak-and-relation" title="30.7.3.&#xA0;Weak &#x201C;And&#x201D; Relations"><code class="classname">EXT:WEAK-AND-RELATION</code></a> of the <em class="replaceable"><code>key</code></em> and the <em class="replaceable"><code>value</code></em>,
 </dd><dt><span class="term"><code class="constant">:KEY-OR-VALUE</code></span></dt><dd>a <a href="#weak-or-relation" title="30.7.4.&#xA0;Weak &#x201C;Or&#x201D; Relations"><code class="classname">EXT:WEAK-OR-RELATION</code></a> of the <em class="replaceable"><code>key</code></em> and the <em class="replaceable"><code>value</code></em>.
</dd></dl></div><p>See also <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE">Section 18.1.1, “Function <code class="function">MAKE-HASH-TABLE</code>”</a>.</p><p>Weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>s are useful to supplement objects with
 additional information that is stored outside of the object. This data
 structure scales up without performance degradation when the number of
 pairs is big.</p><p>Weak <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>s are also useful to implement canonicalization
 tables.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="final"></a>30.8. Finalization</h2></div></div></div><p>Calling <code class="code">(<a href="#final" title="30.8.&#xA0;Finalization"><code class="function">EXT:FINALIZE</code></a> <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>function</code></em>)</code>
 has the effect that when the specified object is being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed,
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a> <em class="replaceable"><code>function</code></em> <em class="replaceable"><code>object</code></em>)</code> will be executed.</p><p>Calling <code class="code">(<a href="#final" title="30.8.&#xA0;Finalization"><code class="function">EXT:FINALIZE</code></a> <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>function</code></em>
  <em class="replaceable"><code>guardian</code></em>)</code>
 has a similar effect, but only as long as the
 <em class="replaceable"><code>guardian</code></em> has not been <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed:
 when <em class="replaceable"><code>object</code></em> is being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed, <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_funcall.html" target="_top"><code class="function">FUNCALL</code></a> <em class="replaceable"><code>function</code></em>
 <em class="replaceable"><code>object</code></em> <em class="replaceable"><code>guardian</code></em>)</code> will be executed.
 If the <em class="replaceable"><code>guardian</code></em> is <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed before <em class="replaceable"><code>object</code></em>
 is, nothing happens.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The time when “<span class="quote">the <em class="replaceable"><code>object</code></em> is being <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ed</span>” is
  not defined deterministically.  (Actually, it might possibly never
  occur.)  It denotes a moment at which no references to <em class="replaceable"><code>object</code></em>
  exist from other Lisp objects.  When the <em class="replaceable"><code>function</code></em> is called,
  <em class="replaceable"><code>object</code></em> (and possibly <em class="replaceable"><code>guardian</code></em>) enter
  the “<span class="quote">arena of live Lisp objects</span>” again.</p></div><p>No finalization request will be executed more than once.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="prompt"></a>30.9. The Prompt</h2></div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> prompt consists of 3 mandatory parts: “<span class="quote">start</span>”,
 “<span class="quote">body</span>”, and “<span class="quote">finish</span>”; and 2 optional parts:
 “<span class="quote">break</span>”, which appears only during
 <a href="#debugger" title="25.1.&#xA0;Debugging Utilities&#10;   [CLHS-25.1.2]">debugging</a> (after <a href="http://www.lisp.org/HyperSpec/Body/fun_break.html" target="_top"><code class="function">BREAK</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><code class="function">ERROR</code></a>),
 and “<span class="quote">step</span>”, which appears only during <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><code class="function">STEP</code></a>ping.
 Each part is controlled by a custom variable, which can be either a
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> of no arguments returning a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>
 (if it is something else - or if the return value was not a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>
 - it is printed with <a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRINC</code></a>).  In the order of invocation:
 </p><div class="variablelist"><dl><dt><a id="prompt-start"></a><span class="term"><a href="#prompt-start"><code class="varname">CUSTOM:*PROMPT-START*</code></a></span></dt><dd>Defaults to an empty string.
  </dd><dt><a id="prompt-step"></a><span class="term"><a href="#prompt-step"><code class="varname">CUSTOM:*PROMPT-STEP*</code></a></span></dt><dd>Used only during <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><code class="function">STEP</code></a>ping.
     Defaults to “<span class="quote"><code class="prompt">Step n </code></span>”,
     where <em class="replaceable"><code>n</code></em> is the stepping level as returned by <a href="#step-level"><code class="function">EXT:STEP-LEVEL</code></a>.
  </dd><dt><a id="prompt-break"></a><span class="term"><a href="#prompt-break"><code class="varname">CUSTOM:*PROMPT-BREAK*</code></a></span></dt><dd>Used only inside break loop (during debugging).
     Defaults to “<span class="quote"><code class="prompt">Break n </code></span>”,
     where <em class="replaceable"><code>n</code></em> is the break level as returned by <a href="#break-level"><code class="function">EXT:BREAK-LEVEL</code></a>.
  </dd><dt><a id="prompt-body"></a><span class="term"><a href="#prompt-body"><code class="varname">CUSTOM:*PROMPT-BODY*</code></a></span></dt><dd>Defaults to “<span class="quote"><code class="prompt">package[n]</code></span>”
     where <em class="replaceable"><code>package</code></em> is the shortest (nick)name (as returned by
     <a href="#package-shortest-name"><code class="function">EXT:PACKAGE-SHORTEST-NAME</code></a>) of the current package <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><code class="varname">*PACKAGE*</code></a>
     if it is <span class="strong"><strong>not</strong></span> the same as it was in the beginning
     (determined by <a href="#prompt-new-package"><code class="function">EXT:PROMPT-NEW-PACKAGE</code></a>)
     or if it does not contain symbol <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>,
     (it is assumed that in the latter case you would want to keep in
     mind that your current package is something weird);
     and <em class="replaceable"><code>n</code></em> is the index of the current prompt, kept in <a href="#command-index"><code class="varname">EXT:*COMMAND-INDEX*</code></a>;
  </dd><dt><a id="prompt-finish"></a><span class="term"><a href="#prompt-finish"><code class="varname">CUSTOM:*PROMPT-FINISH*</code></a></span></dt><dd>Defaults to “<span class="quote"><code class="prompt">&gt; </code></span>”.
</dd></dl></div><p>To facilitate your own custom prompt creation, the following
 functions and variables are available:
 </p><div class="variablelist"><dl><dt><a id="break-level"></a><span class="term"><a href="#break-level"><code class="function">EXT:BREAK-LEVEL</code></a></span></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> returns current <a href="http://www.lisp.org/HyperSpec/Body/fun_break.html" target="_top"><code class="function">BREAK</code></a>/<a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><code class="function">ERROR</code></a> level.
  </dd><dt><a id="step-level"></a><span class="term"><a href="#step-level"><code class="function">EXT:STEP-LEVEL</code></a></span></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> returns current <a href="http://www.lisp.org/HyperSpec/Body/mac_step.html" target="_top"><code class="function">STEP</code></a> level.
  </dd><dt><a id="prompt-new-package"></a><span class="term"><a href="#prompt-new-package"><code class="function">EXT:PROMPT-NEW-PACKAGE</code></a></span></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> returns <a href="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html" target="_top"><code class="varname">*PACKAGE*</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
     if the current package is the same as it was initially.
  </dd><dt><a id="package-shortest-name"></a><span class="term"><a href="#package-shortest-name"><code class="function">EXT:PACKAGE-SHORTEST-NAME</code></a></span></dt><dd>This <a href="http://www.lisp.org/HyperSpec/Body/syscla_function.html" target="_top"><code class="classname">FUNCTION</code></a> takes one argument, a
     <a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><code class="classname">PACKAGE</code></a>, and returns its shortest name or nickname.
  </dd><dt><a id="command-index"></a><span class="term"><a href="#command-index"><code class="varname">EXT:*COMMAND-INDEX*</code></a></span></dt><dd>contains the current prompt number;
     it is your responsibility to increment it
     (this variable is bound to 0 before saving the <a href="impnotes.html#image" class="olink">memory image</a>).
  </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ansi"></a>30.10. Maximum ANSI CL compliance</h2></div></div></div><p>Some [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] features are turned off by default for convenience and
 for backwards compatibility.
 They can be switched on, all at once, by setting the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a>
 <a href="impnotes.html#ansi" class="olink"><code class="varname">CUSTOM:*ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, or they can be switched on individually.
 Setting <a href="impnotes.html#ansi" class="olink"><code class="varname">CUSTOM:*ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> implies the following:</p><div class="orderedlist"><ol type="1"><li>Setting <a href="#pathprint" title="22.7.3.&#xA0;Pathnames"><code class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#spacecharprint" title="22.7.4.&#xA0;Characters"><code class="varname">CUSTOM:*PRINT-SPACE-CHAR-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#fixnum-char-ansi" title="4.7.1.&#xA0;Function COERCE"><code class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#count-ansi"><code class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><code class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><code class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><code class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><code class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#phasecont" title="Variable CUSTOM:*PHASE-ANSI*"><code class="varname">CUSTOM:*PHASE-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#loop-ansi" title="6.1.2.&#xA0;Backward Compatibility"><code class="varname">CUSTOM:*LOOP-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#pr-empty-arr-ansi"><code class="varname">CUSTOM:*PRINT-EMPTY-ARRAYS-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#pr-unreadable-ansi"><code class="varname">CUSTOM:*PRINT-UNREADABLE-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>Setting <a href="#defun-accept-spelalist"><code class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If you run <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> with the <a href="clisp.html#opt-ansi" class="olink"><code class="option">-ansi</code></a> switch or set
 the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> <a href="impnotes.html#ansi" class="olink"><code class="varname">CUSTOM:*ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> and then save <a href="impnotes.html#image" class="olink">memory image</a>,
 then all subsequent invocations of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> with this image
 will be as if with <a href="clisp.html#opt-ansi" class="olink"><code class="option">-ansi</code></a>
 (regardless whether you actually supply the <a href="clisp.html#opt-ansi" class="olink"><code class="option">-ansi</code></a> switch).
 You can always set the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> <a href="impnotes.html#ansi" class="olink"><code class="varname">CUSTOM:*ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, or invoke
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> with the <a href="clisp.html#opt-traditional" class="olink"><code class="option">-traditional</code></a> switch, reversing the above
 settings, i.e.,</p></div><div class="orderedlist"><ol type="1"><li>Setting <a href="#pathprint" title="22.7.3.&#xA0;Pathnames"><code class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#spacecharprint" title="22.7.4.&#xA0;Characters"><code class="varname">CUSTOM:*PRINT-SPACE-CHAR-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#fixnum-char-ansi" title="4.7.1.&#xA0;Function COERCE"><code class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#count-ansi"><code class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><code class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><code class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><code class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><code class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#phasecont" title="Variable CUSTOM:*PHASE-ANSI*"><code class="varname">CUSTOM:*PHASE-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#loop-ansi" title="6.1.2.&#xA0;Backward Compatibility"><code class="varname">CUSTOM:*LOOP-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#pr-empty-arr-ansi"><code class="varname">CUSTOM:*PRINT-EMPTY-ARRAYS-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#pr-unreadable-ansi"><code class="varname">CUSTOM:*PRINT-UNREADABLE-ANSI*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</li><li>Setting <a href="#defun-accept-spelalist"><code class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="macros3"></a>30.11. Additional Fancy Macros and Functions</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#ethe">30.11.1. Macro <code class="function">EXT:ETHE</code></a></span></dt><dt><span class="section"><a href="#letf">30.11.2. Macros <code class="function">EXT:LETF</code> &amp; <code class="function">EXT:LETF*</code></a></span></dt><dt><span class="section"><a href="#memoized">30.11.3. Macro <code class="function">EXT:MEMOIZED</code></a></span></dt><dt><span class="section"><a href="#with-collect">30.11.4. Macro <code class="function">EXT:WITH-COLLECT</code></a></span></dt><dt><span class="section"><a href="#with-gensyms">30.11.5. Macro <code class="function">EXT:WITH-GENSYMS</code></a></span></dt><dt><span class="section"><a href="#remove-plist">30.11.6. Function <code class="function">EXT:REMOVE-PLIST</code></a></span></dt><dt><span class="section"><a href="#html-http-output">30.11.7. Macros <code class="function">EXT:WITH-HTML-OUTPUT</code> and
  <code class="function">EXT:WITH-HTTP-OUTPUT</code></a></span></dt><dt><span class="section"><a href="#open-http">30.11.8. Function <code class="function">EXT:OPEN-HTTP</code> and
  macro <code class="function">EXT:WITH-HTTP-INPUT</code></a></span></dt><dt><span class="section"><a href="#browse-url">30.11.9. Function <code class="function">EXT:BROWSE-URL</code></a></span></dt><dt><span class="section"><a href="#http-proxy">30.11.10. Variable <code class="varname">CUSTOM:*HTTP-PROXY*</code></a></span></dt></dl></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> comes with some extension macros, mostly defined in the
 file <a href="#macros3-lisp"><code class="filename">macros3.lisp</code></a> and loaded from the file <a href="#init-lisp"><code class="filename">init.lisp</code></a> during
 <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/make.html"><span><strong class="command">make</strong></span></a>:</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ethe"></a>30.11.1. Macro <a href="#ethe" title="30.11.1.&#xA0;Macro EXT:ETHE"><code class="function">EXT:ETHE</code></a></h3></div></div></div><p><code class="code">(<a href="#ethe" title="30.11.1.&#xA0;Macro EXT:ETHE"><code class="function">EXT:ETHE</code></a> <em class="replaceable"><code>value-type</code></em> <em class="replaceable"><code>form</code></em>)</code>
 enforces a type check in both interpreted and compiled code.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="letf"></a>30.11.2. Macros <a href="#letf" title="30.11.2.&#xA0;Macros EXT:LETF &amp; EXT:LETF*"><code class="function">EXT:LETF</code></a> &amp; <a href="#letf" title="30.11.2.&#xA0;Macros EXT:LETF &amp; EXT:LETF*"><code class="function">EXT:LETF*</code></a></h3></div></div></div><p>These macros are similar to <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET*</code></a>, respectively,
 except that they can bind <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s, even <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s with <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.
 Example:
</p><pre class="programlisting">(letf (((values a b) form)) ...)
</pre><p>
is equivalent to
</p><pre class="programlisting">(multiple-value-bind (a b) form ...)
</pre><p>
while
</p><pre class="programlisting">(letf (((first l) 7)) ...)
</pre><p>
is approximately equivalent to
</p><pre class="programlisting">
 (<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET*</code></a> ((#:g1 l) (#:g2 (first #:g1)))
   (<a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_progn.html" target="_top"><code class="function">PROGN</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (first #:g1) 7) ...)
      (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (first #:g1) #:g2)))
</pre></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="memoized"></a>30.11.3. Macro <code class="function">EXT:MEMOIZED</code></h3></div></div></div><p><code class="code">(<code class="function">EXT:MEMOIZED</code> <em class="replaceable"><code>form</code></em>)</code>
 memoizes the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#primary_value" target="_top">primary value</a> of <em class="replaceable"><code>form</code></em> from its first evaluation.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="with-collect"></a>30.11.4. Macro <code class="function">EXT:WITH-COLLECT</code></h3></div></div></div><p>Similar to the <a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a>'s
 <a href="http://www.lisp.org/HyperSpec/Body/sec_6-1-3.html" target="_top"><code class="constant">collect</code></a>
 construct, except that it is looks more "Lispy" and can appear
 arbitrarily deep.  It defines local macros (with <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><code class="function">MACROLET</code></a>) which
 collect objects given to it into lists, which are then returned as
 <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.  E.g., </p><pre class="programlisting">
(ext:with-collect (c0 c1)
  (dotimes (i 10) (if (oddp i) (c0 i) (c1 i))))
⇒ <code class="computeroutput">(1 3 5 7 9)</code> ;
⇒ <code class="computeroutput">(0 2 4 6 8)</code>
</pre><p> returns two <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>s <span class="returnvalue">(1 3 5 7 9)</span>
and <span class="returnvalue">(0 2 4 6 8)</span> as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="with-gensyms"></a>30.11.5. Macro <code class="function">EXT:WITH-GENSYMS</code></h3></div></div></div><p>Similar to its namesake from
 <a href="http://www.paulgraham.com/" target="_top">Paul Graham</a>'s book
 <a href="http://www.paulgraham.com/onlisp.html" target="_top">“<span class="quote">On
  Lisp</span>”</a>, this macro is useful for writing other macros:
</p><pre class="programlisting">
(with-gensyms ("FOO-" bar baz zot) ...)
</pre><p>
expands to
</p><pre class="programlisting">
(let ((bar (gensym "FOO-BAR-"))
      (baz (gensym "FOO-BAZ-"))
      (zot (gensym "FOO-ZOT-")))
  ...)
</pre><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="remove-plist"></a>30.11.6. Function <code class="function">EXT:REMOVE-PLIST</code></h3></div></div></div><p>Similar to <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><code class="function">REMOVE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_remf.html" target="_top"><code class="function">REMF</code></a>, this function removes some
 properties from a property list.  It is non-destructive and thus can be
 used on <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> arguments to remove some keyword parameters, e.g.,
</p><pre class="programlisting">
(defmacro with-foo ((<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> foo1 foo2) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> body)
  `(... ,foo1 ... ,foo2 ... ,@body))
(defmacro with-foo-bar ((<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> opts <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> bar1 bar2
                         <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)
                        <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> body)
  `(with-foo (,@(remove-plist opts :bar1 :bar2)
     ... ,bar1 ... ,bar2 ... ,@body)))
(defun foo-bar ()
  (with-foo-bar (:bar1 1 :foo2 2) ...))
</pre><p>
here <code class="function">WITH-FOO</code> does not receive the
<code class="literal">:BAR1 1</code> argument from <code class="function">FOO-BAR</code>.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="html-http-output"></a>30.11.7. Macros <code class="function">EXT:WITH-HTML-OUTPUT</code> and
  <code class="function">EXT:WITH-HTTP-OUTPUT</code></h3></div></div></div><p>Defined in <a href="#inspect-lisp"><code class="filename">inspect.lisp</code></a>, these macros are useful
 for the rudimentary <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> server defined there.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="open-http"></a>30.11.8. Function <a href="#open-http" title="30.11.8.&#xA0;Function EXT:OPEN-HTTP and&#10;  macro EXT:WITH-HTTP-INPUT"><code class="function">EXT:OPEN-HTTP</code></a> and
  macro <code class="function">EXT:WITH-HTTP-INPUT</code></h3></div></div></div><p>Defined in
 <a href="#clhs-lisp"><code class="filename">clhs.lisp</code></a>,
 they allow downloading data over the Internet using the <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> protocol.
 <code class="code">(<a href="#open-http" title="30.11.8.&#xA0;Function EXT:OPEN-HTTP and&#10;  macro EXT:WITH-HTTP-INPUT"><code class="function">EXT:OPEN-HTTP</code></a> url <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:IF-DOES-NOT-EXIST</code>)</code> opens
 a <a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> connection to the
 <em class="replaceable"><code>url</code></em> host, sends the <span><strong class="command">GET</strong></span>
 request, and returns two values: the <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a> and content length.
<code class="code">(EXT:WITH-HTTP-INPUT (<em class="replaceable"><code>variable</code></em> url) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> body)</code> binds <em class="replaceable"><code>variable</code></em>
to the <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a> returned by <a href="#open-http" title="30.11.8.&#xA0;Function EXT:OPEN-HTTP and&#10;  macro EXT:WITH-HTTP-INPUT"><code class="function">EXT:OPEN-HTTP</code></a> and executes the <em class="replaceable"><code>body</code></em>.
<code class="code">(EXT:WITH-HTTP-INPUT ((<em class="replaceable"><code>variable</code></em> <em class="replaceable"><code>contents</code></em>) url) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> body)</code>
additionally binds <em class="replaceable"><code>contents</code></em> to the content length.</p><p><a href="#open-http" title="30.11.8.&#xA0;Function EXT:OPEN-HTTP and&#10;  macro EXT:WITH-HTTP-INPUT"><code class="function">EXT:OPEN-HTTP</code></a> will check <a href="#http-proxy" title="30.11.10.&#xA0;Variable CUSTOM:*HTTP-PROXY*"><code class="varname">CUSTOM:*HTTP-PROXY*</code></a> on startup and parse the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a>
 <code class="envar">HTTP_PROXY</code> if <a href="#http-proxy" title="30.11.10.&#xA0;Variable CUSTOM:*HTTP-PROXY*"><code class="varname">CUSTOM:*HTTP-PROXY*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="browse-url"></a>30.11.9. Function <a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="function">EXT:BROWSE-URL</code></a></h3></div></div></div><p>Function <code class="code">(<a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="function">EXT:BROWSE-URL</code></a> url <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="constant">:BROWSER</code></a> <code class="constant">:OUT</code>)</code>
  calls a browser on the URL. <em class="replaceable"><code>browser</code></em>
  (defaults to <a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="varname">CUSTOM:*BROWSER*</code></a>) should be a valid keyword in the <a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="constant">CUSTOM:*BROWSERS*</code></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.
  <code class="constant">:OUT</code> specifies the stream where the progress messages are printed
  (defaults to <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-OUTPUT*</code></a>).
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="http-proxy"></a>30.11.10. Variable <a href="#http-proxy" title="30.11.10.&#xA0;Variable CUSTOM:*HTTP-PROXY*"><code class="varname">CUSTOM:*HTTP-PROXY*</code></a></h3></div></div></div><p>If you are behind a proxy server, you will need to set <a href="#http-proxy" title="30.11.10.&#xA0;Variable CUSTOM:*HTTP-PROXY*"><code class="varname">CUSTOM:*HTTP-PROXY*</code></a> to
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> <span class="data"><code class="literal">(name:password host port)</code></span>.
 By default, the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a> <code class="envar">http_proxy</code> is used, the
 expected format is <span class="data"><code class="literal">"name:password@host:port"</code></span>.
 If no <span class="data"><code class="literal">#\@</code></span> is present,
 <em class="replaceable"><code>name</code></em> and <em class="replaceable"><code>password</code></em> are <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
 If no <span class="data"><code class="literal">#\:</code></span> is present,
 <em class="replaceable"><code>password</code></em> (or <em class="replaceable"><code>port</code></em>) are <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</p><p>Use function <code class="code">(EXT:HTTP-PROXY <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>
  (<a href="#getenv" title="31.8.&#xA0;Operating System Environment"><code class="function">EXT:GETENV</code></a> "http_proxy")))</code> to reset <a href="#http-proxy" title="30.11.10.&#xA0;Variable CUSTOM:*HTTP-PROXY*"><code class="varname">CUSTOM:*HTTP-PROXY*</code></a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="customize"></a>30.12. Customizing <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> behavior</h2></div></div></div><p>The user-customizable variables and functions are located in the
 package <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior"><strong class="package">“<span class="quote">CUSTOM</span>”</strong></a> and thus can be listed using
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><code class="function">APROPOS</code></a> "" "CUSTOM")</code>:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="impnotes.html#ansi" class="olink"><code class="varname">CUSTOM:*ANSI*</code></a></td><td><code class="varname">CUSTOM:*APPLYHOOK*</code></td></tr><tr><td><a href="#apropos" title="25.2.12.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><code class="varname">CUSTOM:*APROPOS-DO-MORE*</code></a></td><td><a href="#apropos" title="25.2.12.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><code class="varname">CUSTOM:*APROPOS-MATCHER*</code></a></td></tr><tr><td><code class="varname">CUSTOM:*BREAK-ON-WARNINGS*</code></td><td><a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="varname">CUSTOM:*BROWSER*</code></a></td></tr><tr><td><a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="constant">CUSTOM:*BROWSERS*</code></a></td><td><a href="impnotes.html#clhs-root" class="olink"><code class="function">CUSTOM:CLHS-ROOT</code></a></td></tr><tr><td><a href="#clhs-root"><code class="varname">CUSTOM:*CLHS-ROOT-DEFAULT*</code></a></td><td><a href="#fixnum-char-ansi" title="4.7.1.&#xA0;Function COERCE"><code class="varname">CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</code></a></td></tr><tr><td><a href="#compilefile" title="24.1.1.&#xA0;Function COMPILE-FILE"><code class="varname">CUSTOM:*COMPILE-WARNINGS*</code></a></td><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><code class="varname">CUSTOM:*COMPILED-FILE-TYPES*</code></a></td></tr><tr><td><a href="impnotes.html#language" class="olink"><code class="varname">CUSTOM:*CURRENT-LANGUAGE*</code></a></td><td><a href="impnotes.html#def-file-enc" class="olink"><code class="varname">CUSTOM:*DEFAULT-FILE-ENCODING*</code></a></td></tr><tr><td><a href="#default-float-format"><code class="varname">CUSTOM:*DEFAULT-FLOAT-FORMAT*</code></a></td><td><a href="#default-tz"><code class="varname">CUSTOM:*DEFAULT-TIME-ZONE*</code></a></td></tr><tr><td><code class="varname">CUSTOM:*DEFTYPE-DEPTH-LIMIT*</code></td><td><a href="#defun-accept-spelalist"><code class="varname">CUSTOM:*DEFUN-ACCEPT-SPECIALIZED-LAMBDA-LIST*</code></a></td></tr><tr><td><a href="#device-prefix"><code class="varname">CUSTOM:*DEVICE-PREFIX*</code></a></td><td><a href="#ed" title="25.2.9.&#xA0;Function ED"><code class="varname">CUSTOM:*EDITOR*</code></a></td></tr><tr><td><a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="varname">CUSTOM:*EQ-HASHFUNCTION*</code></a></td><td><a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="varname">CUSTOM:*EQL-HASHFUNCTION*</code></a></td></tr><tr><td><a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="varname">CUSTOM:*EQUAL-HASHFUNCTION*</code></a></td><td><code class="varname">CUSTOM:*ERROR-HANDLER*</code></td></tr><tr><td><code class="varname">CUSTOM:*EVALHOOK*</code></td><td><a href="impnotes.html#fill-stream" class="olink"><code class="varname">CUSTOM:*FILL-INDENT-SEXP*</code></a></td></tr><tr><td><a href="#fini-hooks" title="30.1.3.&#xA0;Customizing Termination"><code class="varname">CUSTOM:*FINI-HOOKS*</code></a></td><td><a href="#flocont" title="12.2.3.1.&#xA0;Rule of Float Precision Contagion&#10;   [CLHS-12.1.4.4]"><code class="varname">CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</code></a></td></tr><tr><td><a href="#floratcont" title="12.2.3.2.&#xA0;Rule of Float and Rational Contagion&#10;   [CLHS-12.1.4.1]"><code class="varname">CUSTOM:*FLOATING-POINT-RATIONAL-CONTAGION-ANSI*</code></a></td><td><a href="impnotes.html#foreign-enc" class="olink"><code class="varname">CUSTOM:*FOREIGN-ENCODING*</code></a></td></tr><tr><td><a href="#http-proxy" title="30.11.10.&#xA0;Variable CUSTOM:*HTTP-PROXY*"><code class="varname">CUSTOM:*HTTP-PROXY*</code></a></td><td><a href="impnotes.html#impnotes-root" class="olink"><code class="function">CUSTOM:IMPNOTES-ROOT</code></a></td></tr><tr><td><a href="#impnotes-root"><code class="varname">CUSTOM:*IMPNOTES-ROOT-DEFAULT*</code></a></td><td><a href="impnotes.html#init-hooks" class="olink"><code class="varname">CUSTOM:*INIT-HOOKS*</code></a></td></tr><tr><td><a href="#inspect" title="25.2.6.&#xA0;Function INSPECT"><code class="varname">CUSTOM:*INSPECT-BROWSER*</code></a></td><td><a href="#inspect" title="25.2.6.&#xA0;Function INSPECT"><code class="varname">CUSTOM:*INSPECT-FRONTEND*</code></a></td></tr><tr><td><a href="#inspect" title="25.2.6.&#xA0;Function INSPECT"><code class="varname">CUSTOM:*INSPECT-LENGTH*</code></a></td><td><a href="#inspect" title="25.2.6.&#xA0;Function INSPECT"><code class="varname">CUSTOM:*INSPECT-PRINT-LENGTH*</code></a></td></tr><tr><td><a href="#inspect" title="25.2.6.&#xA0;Function INSPECT"><code class="varname">CUSTOM:*INSPECT-PRINT-LEVEL*</code></a></td><td><a href="#inspect" title="25.2.6.&#xA0;Function INSPECT"><code class="varname">CUSTOM:*INSPECT-PRINT-LINES*</code></a></td></tr><tr><td><a href="clisp.html#opt-libdir" class="olink"><code class="varname">CUSTOM:*LIB-DIRECTORY*</code></a></td><td><a href="impnotes.html#loadfile" class="olink"><code class="varname">CUSTOM:*LOAD-COMPILING*</code></a></td></tr><tr><td><a href="impnotes.html#loadfile" class="olink"><code class="varname">CUSTOM:*LOAD-ECHO*</code></a></td><td><a href="impnotes.html#load-lpt" class="olink"><code class="varname">CUSTOM:*LOAD-LOGICAL-PATHNAME-TRANSLATIONS-DATABASE*</code></a></td></tr><tr><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><code class="varname">CUSTOM:*LOAD-OBSOLETE-ACTION*</code></a></td><td><a href="#load-paths"><code class="varname">CUSTOM:*LOAD-PATHS*</code></a></td></tr><tr><td><a href="#loop-ansi" title="6.1.2.&#xA0;Backward Compatibility"><code class="varname">CUSTOM:*LOOP-ANSI*</code></a></td><td><a href="#pathmerge" title="19.5.4.&#xA0;Function MERGE-PATHNAMES"><code class="varname">CUSTOM:*MERGE-PATHNAMES-ANSI*</code></a></td></tr><tr><td><a href="impnotes.html#misc-enc" class="olink"><code class="varname">CUSTOM:*MISC-ENCODING*</code></a></td><td><code class="varname">CUSTOM:*PACKAGE-TASKS-TREAT-SPECIALLY*</code></td></tr><tr><td><a href="#parsename" title="19.5.3.&#xA0;Function PARSE-NAMESTRING"><code class="varname">CUSTOM:*PARSE-NAMESTRING-ANSI*</code></a></td><td><a href="#name-type-split"><code class="varname">CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</code></a></td></tr><tr><td><a href="impnotes.html#path-enc" class="olink"><code class="varname">CUSTOM:*PATHNAME-ENCODING*</code></a></td><td><a href="#phasecont" title="Variable CUSTOM:*PHASE-ANSI*"><code class="varname">CUSTOM:*PHASE-ANSI*</code></a></td></tr><tr><td><a href="#ppr-first-newline"><code class="varname">CUSTOM:*PPRINT-FIRST-NEWLINE*</code></a></td><td><a href="#pr-closure"><code class="varname">CUSTOM:*PRINT-CLOSURE*</code></a></td></tr><tr><td><a href="#pr-empty-arr-ansi"><code class="varname">CUSTOM:*PRINT-EMPTY-ARRAYS-ANSI*</code></a></td><td><a href="#pr-indent"><code class="varname">CUSTOM:*PRINT-INDENT-LISTS*</code></a></td></tr><tr><td><a href="#pr-sym-pack-prefix"><code class="function">CUSTOM:*PRINT-SYMBOL-PACKAGE-PREFIX-SHORTEST*</code></a></td><td><a href="#pathprint" title="22.7.3.&#xA0;Pathnames"><code class="varname">CUSTOM:*PRINT-PATHNAMES-ANSI*</code></a></td></tr><tr><td><code class="varname">CUSTOM:*PRINT-PRETTY-FILL*</code></td><td><a href="#pr-rpars"><code class="varname">CUSTOM:*PRINT-RPARS*</code></a></td></tr><tr><td><a href="#spacecharprint" title="22.7.4.&#xA0;Characters"><code class="varname">CUSTOM:*PRINT-SPACE-CHAR-ANSI*</code></a></td><td><a href="#pr-unreadable-ansi"><code class="varname">CUSTOM:*PRINT-UNREADABLE-ANSI*</code></a></td></tr><tr><td><a href="#prompt-body"><code class="varname">CUSTOM:*PROMPT-BODY*</code></a></td><td><a href="#prompt-break"><code class="varname">CUSTOM:*PROMPT-BREAK*</code></a></td></tr><tr><td><a href="#prompt-finish"><code class="varname">CUSTOM:*PROMPT-FINISH*</code></a></td><td><a href="#prompt-start"><code class="varname">CUSTOM:*PROMPT-START*</code></a></td></tr><tr><td><a href="#prompt-step"><code class="varname">CUSTOM:*PROMPT-STEP*</code></a></td><td><a href="impnotes.html#err-pr-bt" class="olink"><code class="varname">CUSTOM:*REPORT-ERROR-PRINT-BACKTRACE*</code></a></td></tr><tr><td><a href="#count-ansi"><code class="varname">CUSTOM:*SEQUENCE-COUNT-ANSI*</code></a></td><td><a href="#loadfile" title="24.1.4.&#xA0;Function LOAD"><code class="varname">CUSTOM:*SOURCE-FILE-TYPES*</code></a></td></tr><tr><td><a href="#suppress-check-redef"><code class="varname">CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</code></a></td><td><a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><code class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</code></a></td></tr><tr><td><a href="impnotes.html#term-enc" class="olink"><code class="varname">CUSTOM:*TERMINAL-ENCODING*</code></a></td><td><a href="#trace-indent"><code class="varname">CUSTOM:*TRACE-INDENT*</code></a></td></tr><tr><td><a href="#user-commands" title="25.1.1.&#xA0;User-customizable Commands"><code class="varname">CUSTOM:*USER-COMMANDS*</code></a></td><td><code class="varname">CUSTOM:*USER-MAIL-ADDRESS*</code></td></tr><tr><td><a href="#warn-fpc" title="Variable CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*"><code class="varname">CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</code></a></td><td><a href="#hashtable-gc-rehash-warn"><code class="varname">CUSTOM:*WARN-ON-HASHTABLE-NEEDING-REHASH-AFTER-GC*</code></a></td></tr><tr><td><code class="varname">CUSTOM:*WITH-HTML-OUTPUT-DOCTYPE*</code></td><td> </td></tr></table><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Some of these variables are
  platform-specific.</p></div><p>You should set these variables (and do whatever other
 customization you see fit) in the file <a href="#config-lisp"><code class="filename">config.lisp</code></a> in the build
 directory before building <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 Alternatively, after building <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, or if you are using a binary
 distribution of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, you can modify <a href="#config-lisp"><code class="filename">config.lisp</code></a>, compile and load
 it, and then save the <a href="impnotes.html#image" class="olink">memory image</a>.
 Finally, you can create an <a href="clisp.html#opt-norc" class="olink">RC file</a> which is loaded whenever <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 is started.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="code-walk"></a>30.13. Code Walker</h2></div></div></div><p>You can use function <a href="#code-walk" title="30.13.&#xA0;Code Walker"><code class="function">EXT:EXPAND-FORM</code></a> to expand all the macros,
 <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a>s, etc, in a single form:
</p><pre class="programlisting">
(<a href="#code-walk" title="30.13.&#xA0;Code Walker"><code class="function">EXT:EXPAND-FORM</code></a> '(macrolet ((bar (x) `(print ,x)))
                    (macrolet ((baz (x) `(bar ,x)))
                      (symbol-macrolet ((z 3))
                        (baz z)))))
⇒ <code class="computeroutput">(locally (print 3))</code> ; the expansion
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></code>               ; indicator: some expansion has actually been done
</pre><p>This is sometimes called a “<span class="quote">code walker</span>”,
 except that the code walker would probably leave the <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><code class="function">MACROLET</code></a> and
 <a href="http://www.lisp.org/HyperSpec/Body/speope_symbol-macrolet.html" target="_top"><code class="function">SYMBOL-MACROLET</code></a> forms intact and just do the expansion.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Function <a href="#code-walk" title="30.13.&#xA0;Code Walker"><code class="function">EXT:EXPAND-FORM</code></a> expands forms by assuming the
  <a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><code class="function">EVAL-WHEN</code></a> situation <code class="constant">:EXECUTE</code> and is therefore
  unsuitable for forms that may later be passed to the compiler:
</p><pre class="programlisting">
(<a href="#code-walk" title="30.13.&#xA0;Code Walker"><code class="function">EXT:EXPAND-FORM</code></a> '(<a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><code class="function">EVAL-WHEN</code></a> (:COMPILE-TOPLEVEL) (foo)))
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></code> ;
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></code>
(<a href="#code-walk" title="30.13.&#xA0;Code Walker"><code class="function">EXT:EXPAND-FORM</code></a> '(<a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><code class="function">EVAL-WHEN</code></a> (:LOAD-TOPLEVEL) (foo)))
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></code> ;
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a></code>
</pre></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ext-platform"></a>Chapter 31. Platform Specific Extensions</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#screen">31.1. Random Screen Access</a></span></dt><dt><span class="section"><a href="#modules">31.2. External Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#mod-overview">31.2.1. Overview</a></span></dt><dt><span class="section"><a href="#modinit">31.2.2. Module initialization</a></span></dt><dt><span class="section"><a href="#modfini">31.2.3. Module finalization</a></span></dt><dt><span class="section"><a href="#modinfo">31.2.4. Function <code class="function">EXT:MODULE-INFO</code></a></span></dt><dt><span class="section"><a href="#mod-dynload">31.2.5. Function <code class="function">SYS::DYNLOAD-MODULES</code></a></span></dt><dt><span class="section"><a href="#mod-set-example">31.2.6. Example</a></span></dt><dt><span class="section"><a href="#module-tools">31.2.7. Module tools</a></span></dt><dd><dl><dt><span class="section"><a href="#modprep">31.2.7.1. Modprep</a></span></dt><dt><span class="section"><a href="#clisp-h">31.2.7.2. clisp.h</a></span></dt><dt><span class="section"><a href="#exporting">31.2.7.3. Exporting</a></span></dt></dl></dd><dt><span class="section"><a href="#mod-ffi-vs-c">31.2.8. Trade-offs: <strong class="package">“<span class="quote">FFI</span>”</strong> vs. <span><strong class="command">C</strong></span>
  modules</a></span></dt><dt><span class="section"><a href="#included-modules">31.2.9. Modules included in the source distribution</a></span></dt><dd><dl><dt><span class="section"><a href="#base-modules">31.2.9.1. Base and Full Modules</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#dffi">31.3. The Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#dffi-intro">31.3.1. Introduction</a></span></dt><dt><span class="section"><a href="#dffi-overview">31.3.2. Overview</a></span></dt><dt><span class="section"><a href="#dffi-types">31.3.3. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#c-flavor">31.3.4. The choice of the <span><strong class="command">C</strong></span> flavor</a></span></dt><dt><span class="section"><a href="#dffi-variables">31.3.5. Foreign variables</a></span></dt><dt><span class="section"><a href="#dffi-places">31.3.6. Operations on foreign places</a></span></dt><dt><span class="section"><a href="#dffi-functions">31.3.7. Foreign functions</a></span></dt><dt><span class="section"><a href="#allocation">31.3.8. Argument and result passing conventions</a></span></dt><dt><span class="section"><a href="#param-mode">31.3.9. Parameter Mode</a></span></dt><dt><span class="section"><a href="#dffi-examples">31.3.10. Examples</a></span></dt><dd><dl><dt><span class="section"><a href="#dffi-ex-more">31.3.10.1. More examples</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#affi">31.4. The Amiga Foreign Function Call Facility</a></span></dt><dd><dl><dt><span class="section"><a href="#affi-design">31.4.1. Design issues</a></span></dt><dt><span class="section"><a href="#affi-overview">31.4.2. Overview</a></span></dt><dt><span class="section"><a href="#affi-libs">31.4.3. Foreign Libraries</a></span></dt><dt><span class="section"><a href="#affi-types">31.4.4. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#affi-functions">31.4.5. Foreign functions</a></span></dt><dt><span class="section"><a href="#affi-memory-access">31.4.6. Memory access</a></span></dt><dt><span class="section"><a href="#affi-func-def">31.4.7. Function Definition Files</a></span></dt><dt><span class="section"><a href="#affi-hints">31.4.8. Hints</a></span></dt><dt><span class="section"><a href="#affi-caveats">31.4.9. Caveats</a></span></dt><dt><span class="section"><a href="#affi-examples">31.4.10. Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#socket">31.5. Socket Streams</a></span></dt><dd><dl><dt><span class="section"><a href="#socket-intro">31.5.1. Introduction</a></span></dt><dt><span class="section"><a href="#socket-api">31.5.2. Socket API Reference</a></span></dt></dl></dd><dt><span class="section"><a href="#quickstart">31.6. Quickstarting delivery with <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#quickstart-summary">31.6.1. Summary</a></span></dt><dt><span class="section"><a href="#quickstart-unix">31.6.2. Scripting with <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#quickstart-desktop">31.6.3. Desktop Environments</a></span></dt><dt><span class="section"><a href="#quickstart-linux">31.6.4. Associating extensions with <span><strong class="command">CLISP</strong></span> via kernel</a></span></dt></dl></dd><dt><span class="section"><a href="#shell">31.7. Shell, Pipes and Printing</a></span></dt><dd><dl><dt><span class="section"><a href="#exec">31.7.1. Shell</a></span></dt><dt><span class="section"><a href="#pipe">31.7.2. Pipes</a></span></dt><dt><span class="section"><a href="#hardcopy">31.7.3. Printing</a></span></dt></dl></dd><dt><span class="section"><a href="#getenv">31.8. Operating System Environment</a></span></dt></dl></div>
<!--#if defined(SCREEN)-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="screen"></a>31.1. Random Screen Access</h2></div><div><h3 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="code">(<code class="function">SCREEN:MAKE-WINDOW</code>)</code></span></dt><dd>returns a <span class="type">WINDOW-STREAM</span>.
    As long as this stream is open, the terminal is in cbreak/noecho mode.
    <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a> should not be used for input or output during this
    time.  (Use <a href="#with-kbd" title="21.2.2.&#xA0;Macro EXT:WITH-KEYBOARD"><code class="function">EXT:WITH-KEYBOARD</code></a> and <a href="impnotes.html#with-kbd" class="olink"><code class="varname">EXT:*KEYBOARD-INPUT*</code></a> instead.)
  </dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:WITH-WINDOW</code> .
    <em class="replaceable"><code>body</code></em>)</code></span></dt><dd>binds
    <strong class="first"><em class="firstterm"><a href="#screen" title="31.1.&#xA0;Random Screen Access"><code class="varname">SCREEN:*WINDOW*</code></a><a id="scr-win" class="indexterm"></a></em></strong>
    to a <span class="type">WINDOW-STREAM</span> and executes <em class="replaceable"><code>body</code></em>.
    The stream is guaranteed to be closed when the body is left.
    During its execution, <a href="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html" target="_top"><code class="varname">*TERMINAL-IO*</code></a> should not be used, as above.
  </dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:WINDOW-SIZE</code>
    <em class="replaceable"><code>window-stream</code></em>)</code></span></dt><dd>returns the window's size, as two values:
   height (= y<sub>max</sub>+1) and width (= x<sub>max</sub>+1).
  </dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:WINDOW-CURSOR-POSITION</code>
    <em class="replaceable"><code>window-stream</code></em>)</code></span></dt><dd>returns the position of the cursor in the window,
   as two values: line (≥0, ≤y<sub>max</sub>, 0 means top), column
   (≥0, ≤x<sub>max</sub>, 0 means left margin).
 </dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:SET-WINDOW-CURSOR-POSITION</code>
    <em class="replaceable"><code>window-stream</code></em> <em class="replaceable"><code>line</code></em>
      <em class="replaceable"><code>column</code></em>)</code></span></dt><dd>sets the position of the cursor in the window.
  </dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:CLEAR-WINDOW</code>
    <em class="replaceable"><code>window-stream</code></em>)</code></span></dt><dd>clears the window's contents and puts the cursor
    in the upper left corner.</dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:CLEAR-WINDOW-TO-EOT</code>
    <em class="replaceable"><code>window-stream</code></em>)</code></span></dt><dd>clears the window's contents from the cursor
    position to the end of window.</dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:CLEAR-WINDOW-TO-EOL</code>
    <em class="replaceable"><code>window-stream</code></em>)</code></span></dt><dd>clears the window's contents from the cursor
    position to the end of line.</dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:DELETE-WINDOW-LINE</code>
    <em class="replaceable"><code>window-stream</code></em>)</code></span></dt><dd>removes the cursor's line, moves the lines below
    it up by one line and clears the window's last line.
 </dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:INSERT-WINDOW-LINE</code>
    <em class="replaceable"><code>window-stream</code></em>)</code></span></dt><dd>inserts a line at the cursor's line, moving the
    lines below it down by one line.</dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:HIGHLIGHT-ON</code>
    <em class="replaceable"><code>window-stream</code></em>)</code></span></dt><dd>switches highlighted output on.
 </dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:HIGHLIGHT-OFF</code>
    <em class="replaceable"><code>window-stream</code></em>)</code></span></dt><dd>switches highlighted output off.
 </dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:WINDOW-CURSOR-ON</code>
    <em class="replaceable"><code>window-stream</code></em>)</code></span></dt><dd>makes the cursor visible, a cursor block in most
    implementations.</dd><dt><span class="term"><code class="code">(<code class="function">SCREEN:WINDOW-CURSOR-OFF</code>
    <em class="replaceable"><code>window-stream</code></em>)</code></span></dt><dd>makes the cursor invisible, in implementations
    where this is possible.</dd></dl></div></div>
<!--#endif-->
<!--#if defined(UNIX) || defined(WIN32_NATIVE)-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="modules"></a>31.2. External Modules</h2></div><div><h3 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#mod-overview">31.2.1. Overview</a></span></dt><dt><span class="section"><a href="#modinit">31.2.2. Module initialization</a></span></dt><dt><span class="section"><a href="#modfini">31.2.3. Module finalization</a></span></dt><dt><span class="section"><a href="#modinfo">31.2.4. Function <code class="function">EXT:MODULE-INFO</code></a></span></dt><dt><span class="section"><a href="#mod-dynload">31.2.5. Function <code class="function">SYS::DYNLOAD-MODULES</code></a></span></dt><dt><span class="section"><a href="#mod-set-example">31.2.6. Example</a></span></dt><dt><span class="section"><a href="#module-tools">31.2.7. Module tools</a></span></dt><dd><dl><dt><span class="section"><a href="#modprep">31.2.7.1. Modprep</a></span></dt><dt><span class="section"><a href="#clisp-h">31.2.7.2. clisp.h</a></span></dt><dt><span class="section"><a href="#exporting">31.2.7.3. Exporting</a></span></dt></dl></dd><dt><span class="section"><a href="#mod-ffi-vs-c">31.2.8. Trade-offs: <strong class="package">“<span class="quote">FFI</span>”</strong> vs. <span><strong class="command">C</strong></span>
  modules</a></span></dt><dt><span class="section"><a href="#included-modules">31.2.9. Modules included in the source distribution</a></span></dt><dd><dl><dt><span class="section"><a href="#base-modules">31.2.9.1. Base and Full Modules</a></span></dt></dl></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="mod-win32"></a>Modules on <span class="strong"><strong>Win32</strong></span></h3><p>Everything described in the section will work verbatim on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>
  when using <a href="http://cygwin.com/" target="_top"><span class="strong"><strong>Cygwin</strong></span></a> or <a href="http://www.mingw.org/" target="_top"><span class="strong"><strong>MinGW</strong></span></a>, <span class="emphasis"><em>except</em></span> for one
  thing - you will need to replace the <code class="filename">run</code>
  extension in <code class="filename">lisp.run</code> with the <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> executable
  extension <code class="filename">exe</code>.</p><p>For historical reasons, all examples appear to assume <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> and
  use the <code class="filename">run</code> file type (“<span class="quote">extension</span>”)
  for the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> run-time.
  This does <span class="strong"><strong>not</strong></span> mean that they will not work on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mod-overview"></a>31.2.1. Overview</h3></div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has a facility for adding external modules (written in
 <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, for example).  It is invoked through <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a>.</p><p>A <strong class="first"><em class="firstterm">module<a id="module" class="indexterm"></a></em></strong> is a
 piece of external code which defines extra Lisp objects, symbols and
 functions.  A module <strong class="first"><em class="firstterm">name</em></strong> must consist of the
 characters <code class="filename">A</code>-<code class="filename">Z</code>,
 <code class="filename">a</code>-<code class="filename">z</code>, <code class="filename">_</code>,
 <code class="filename">0</code>-<code class="filename">9</code>.
 The module name “<span class="quote">clisp</span>” is reserved.
 Normally a module name is derived from the corresponding file name.</p><p><a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> needs a directory containing:
</p><div class="itemizedlist"><ul type="disc"><li><code class="filename">"modules.d"</code></li><li><code class="filename">"modules.c"</code></li><li><a href="#clisp-h" title="31.2.7.2.&#xA0;clisp.h"><code class="filename">"clisp.h"</code></a></li></ul></div><p>
<a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> expects to find these files in a
subdirectory <code class="filename">linkkit/</code> of the current directory.
This can be overridden by the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a> <code class="envar">CLISP_LINKKIT</code>.</p><p><a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> operates on <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a>s and on <a href="impnotes.html#modset" class="olink">module set</a>s.</p><p><a id="linkset"></a><b><a href="impnotes.html#linkset" class="olink">linking set</a>. </b>A <strong class="first"><em class="firstterm"><a href="impnotes.html#linkset" class="olink">linking set</a><a id="linkseti" class="indexterm"></a></em></strong>
   is a directory containing:
</p><div class="variablelist"><dl><dt><span class="term"><code class="filename">makevars</code></span></dt><dd><p>some <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"><span><strong class="command">/bin/sh</strong></span></a> commands, setting the variables
</p><div class="variablelist"><dl><dt><span class="term"><code class="envar">CC</code></span></dt><dd>the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler
 </dd><dt><span class="term"><code class="envar">CPPFLAGS</code></span></dt><dd>flags for the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler, when preprocessing
    or compiling</dd><dt><span class="term"><code class="envar">CFLAGS</code></span></dt><dd>flags for the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler, when compiling or
    linking</dd><dt><span class="term"><code class="envar">CLFLAGS</code></span></dt><dd>flags for the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler, when linking
 </dd><dt><span class="term"><code class="envar">LIBS</code></span></dt><dd>libraries to use when linking
 </dd><dt><span class="term"><code class="envar">X_LIBS</code></span></dt><dd>additional <a href="http://www.x.org/" target="_top">X Window System</a> libraries to use
 </dd><dt><span class="term"><code class="envar">RANLIB</code></span></dt><dd>the ranlib command
 </dd><dt><span class="term"><code class="envar">FILES</code></span></dt><dd>the list of files needed when linking
 </dd></dl></div></dd><dt><span class="term"><code class="filename">modules.h</code></span></dt><dd>the list of modules contained in this <a href="impnotes.html#linkset" class="olink">linking set</a>
</dd><dt><span class="term"><code class="filename">modules.o</code></span></dt><dd>the compiled list of modules contained in this <a href="impnotes.html#linkset" class="olink">linking set</a>
</dd><dt><span class="term">all the <code class="filename">FILES</code></span></dt><dd>listed in <code class="filename">makevars</code>
</dd><dt><span class="term"><code class="filename">lisp.run</code></span></dt><dd>the executable</dd><dt><span class="term"><a href="#image" title="30.2.&#xA0;Saving an Image"><code class="filename">lispinit.mem</code></a></span></dt><dd>the <a href="impnotes.html#image" class="olink">memory image</a></dd></dl></div><p>To run a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> contained in some <a href="impnotes.html#linkset" class="olink">linking set</a> <em class="replaceable"><code>directory</code></em>, call
 <span><strong class="command"><em class="replaceable"><code>directory</code></em>/lisp.run -M <em class="replaceable"><code>directory</code></em>/lispinit.mem</strong></span>
 or <span><strong class="command">clisp <code class="option"><a href="clisp.html#opt-link-set" class="olink">-K</a></code> <em class="replaceable"><code>directory</code></em></strong></span>.</p><p><a id="modset"></a><b><a href="impnotes.html#modset" class="olink">module set</a>. </b>A <strong class="first"><em class="firstterm"><a href="impnotes.html#modset" class="olink">module set</a><a id="modseti" class="indexterm"></a></em></strong>
   is a directory containing:
</p><div class="variablelist"><dl><dt><span class="term"><a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a></span></dt><dd>some <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"><span><strong class="command">/bin/sh</strong></span></a> commands, which prepare the directory
  before linking, and set the variables <code class="envar">NEW_FILES</code>,
  <code class="envar">NEW_LIBS</code>, <code class="envar">NEW_MODULES</code>, <a href="#mod-load"><code class="envar">TO_LOAD</code></a>
  and optionally <a href="#mod-preload"><code class="envar">TO_PRELOAD</code></a></dd><dt><span class="term">and any other files</span></dt><dd>needed by <a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a>
 </dd></dl></div><p>In <a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a> the <a href="impnotes.html#modset" class="olink">module set</a> directory
 is referred to as <code class="varname">$modulename/</code>.</p><div class="variablelist"><dl><dt><span class="term"><code class="envar">NEW_FILES</code></span></dt><dd>the space-separated list of files that
  belong to the <a href="impnotes.html#modset" class="olink">module set</a> and will belong to every new <a href="impnotes.html#linkset" class="olink">linking set</a>.
 </dd><dt><span class="term"><code class="envar">NEW_LIBS</code></span></dt><dd>the space-separated list of files or
  <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler switches that need to be passed to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
  compiler when linking the <code class="filename">lisp.run</code> belonging to a new <a href="impnotes.html#linkset" class="olink">linking set</a>.
 </dd><dt><span class="term"><code class="envar">NEW_MODULES</code></span></dt><dd>the space-separated list of the module names
  belonging to the <a href="impnotes.html#modset" class="olink">module set</a>.  Normally, every <code class="filename">#P".c"</code> file in the
  <a href="impnotes.html#modset" class="olink">module set</a> defines a module of its own.  The module name is derived
  from the file name.</dd><dt><a id="mod-load"></a><span class="term"><a href="#mod-load"><code class="envar">TO_LOAD</code></a></span></dt><dd>the space-separated list of Lisp files to load
  before building the <a href="#image" title="30.2.&#xA0;Saving an Image"><code class="filename">lispinit.mem</code></a> belonging to a new <a href="impnotes.html#linkset" class="olink">linking set</a>.
 </dd><dt><a id="mod-preload"></a><span class="term"><a href="#mod-preload"><code class="envar">TO_PRELOAD</code></a> (optional)</span></dt><dd><p>the space-separated list of Lisp files to load
   into an intermediate <a href="#image" title="30.2.&#xA0;Saving an Image"><code class="filename">lispinit.mem</code></a> file, before building the <a href="#image" title="30.2.&#xA0;Saving an Image"><code class="filename">lispinit.mem</code></a>
   belonging to a new <a href="impnotes.html#linkset" class="olink">linking set</a>.
   This variable is usually used to <a href="#make-pack" title="11.5.1.&#xA0;Function MAKE-PACKAGE">create</a>
   (or <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]">unlock</a>) the Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><code class="classname">PACKAGE</code></a>s which
   must be present when the new <code class="filename">#P".c"</code> files are initialized.
   E.g., the <a href="#def-call-in"><code class="function">FFI:DEF-CALL-IN</code></a> functions must reside in already defined packages;
   see <a href="#ex-call-in" title="Example&#xA0;31.6.&#xA0;Calling Lisp from C">Example 31.6, “Calling Lisp from <span><strong class="command">C</strong></span>”</a>.  You can find a live example in
   <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/syscalls/preload.lisp"><code class="filename">modules/syscalls/preload.lisp</code></a>
   and <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/syscalls/link.sh.in"><code class="filename">modules/syscalls/link.sh.in</code></a>.
  </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you are unlocking a package, you must also
    <a href="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html" target="_top"><code class="function">DELETE</code></a> it from <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><code class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</code></a> (see <a href="#image" title="30.2.&#xA0;Saving an Image">Section 30.2, “Saving an Image”</a>) here
    and re-add it to <a href="#pack-lock" title="11.1.&#xA0;Constraints on the &#x201C;COMMON-LISP&#x201D; Package&#10;  for Conforming Programs - package locking&#10; [CLHS-11.1.2.1.2]"><code class="varname">CUSTOM:*SYSTEM-PACKAGE-LIST*</code></a> in one of the <a href="#mod-load"><code class="envar">TO_LOAD</code></a> files.
    See, e.g., <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/i18n/preload.lisp"><code class="filename">modules/i18n/preload.lisp</code></a>
    and <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/i18n/link.sh.in"><code class="filename">modules/i18n/link.sh.in</code></a>.
</p></div></dd></dl></div><p>The command </p><pre class="screen">
<code class="prompt">$</code> <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> create-module-set <em class="replaceable"><code>module</code></em> <em class="replaceable"><code>file1.c</code></em> ...
</pre><p> creates a <a href="impnotes.html#modset" class="olink">module set</a> in <em class="replaceable"><code>module</code></em> directory which refers
 (via symbolic links) to <em class="replaceable"><code>file1.c</code></em> etc.
 The files are expected to be modules of their own.</p><p>The command </p><pre class="screen">
<code class="prompt">$</code> <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> add-module-set <em class="replaceable"><code>module</code></em> <em class="replaceable"><code>source</code></em> <em class="replaceable"><code>destination</code></em>
</pre><p> combines a <a href="impnotes.html#linkset" class="olink">linking set</a> in directory <em class="replaceable"><code>source</code></em> and a
 <a href="#modules" title="31.2.&#xA0;External Modules">module</a> in directory <em class="replaceable"><code>module</code></em> to a new <a href="impnotes.html#linkset" class="olink">linking set</a>, in the directory
 <em class="replaceable"><code>destination</code></em> which is newly created.</p><p>The command </p><pre class="screen">
<code class="prompt">$</code> <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> run <em class="replaceable"><code>source</code></em> <em class="replaceable"><code>module</code></em> ...
</pre><p> runs the <a href="impnotes.html#linkset" class="olink">linking set</a> in directory <em class="replaceable"><code>source</code></em>, with the <a href="#modules" title="31.2.&#xA0;External Modules">module</a>
 in directory <em class="replaceable"><code>module</code></em> loaded.
 More than one module can be specified.
 If <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has been built with the configuration option
 <code class="option">--with-dynamic-modules</code>, the loading will be performed
 through <a href="#mod-dynload" title="31.2.5.&#xA0;Function SYS::DYNLOAD-MODULES">dynamic loading</a>.
 Otherwise - this is much slower - a temporary <a href="impnotes.html#linkset" class="olink">linking set</a> will be created
 and deleted afterwards.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="modinit"></a>31.2.2. Module initialization</h3></div></div></div><p>Each module has two initialization functions:
 </p><div class="variablelist"><dl><dt><span class="term">void
    <code class="function">module__<em class="replaceable"><code>name</code></em>__init_function_1</code>
    (struct module_t* module)</span></dt><dd><p>called only <span class="emphasis"><em>once</em></span> when <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
  discovers while loading a <a href="impnotes.html#image" class="olink">memory image</a> that there is a module present
  in the executable (<code class="filename">lisp.run</code>) which was not present at the time the
  image was saved.  It can be used to create Lisp objects,
  e.g. functions or keywords, and is indeed used for that purpose by
  <a href="#modprep-file"><span><strong class="command">modprep</strong></span></a>.</p><p>You do <span class="strong"><strong>not</strong></span> have to define this function yourself;
  <a href="#modprep-file"><span><strong class="command">modprep</strong></span></a> and <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> will do that for you.</p><p>If you use <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>, <code class="code">(<a href="#c-lines"><code class="function">FFI:C-LINES</code></a> :init-once ...)</code>
  will add code to this function.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>The <a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><code class="classname">PACKAGE</code></a>s must already exist and be unlocked,
   cf. <a href="#mod-preload"><code class="envar">TO_PRELOAD</code></a>.</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you are using <a href="#modprep-file"><span><strong class="command">modprep</strong></span></a> <span class="strong"><strong>and</strong></span> defining your
   own “<span class="quote">init-once</span>” function, it must call the
   <code class="function">module__<em class="replaceable"><code>name</code></em>__init_function_1__modprep</code>
   function!</p></div></dd><dt><span class="term">void <code class="function">module__<em class="replaceable"><code>name</code></em>__init_function_2</code>
  (struct module_t* module)</span></dt><dd><p>called <span class="emphasis"><em>every time</em></span> <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> starts.
  It can be used to bind names to foreign addresses, since the address
  will be different in each invocation of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, and is indeed used
  for that purpose by <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> (e.g., by <a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a>).
  It can also be used to set parameters of the libraries to which the
  module interfaces, e.g., the <a href="#pcre" title="32.7.&#xA0;Perl Compatible Regular Expressions">pcre</a> module
  sets <code class="varname">pcre_malloc</code> and <code class="varname">pcre_free</code>.
 </p><p>You do <span class="strong"><strong>not</strong></span> have to defined this function yourself;
  <a href="#modprep-file"><span><strong class="command">modprep</strong></span></a> and <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> will do that for you.</p><p>If you use <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>, <code class="code">(<a href="#c-lines"><code class="function">FFI:C-LINES</code></a> :init-always ...)</code>
  will add code to this function.</p></dd></dl></div><p>
<em class="replaceable"><code>name</code></em> is the <a href="#mod-overview" title="31.2.1.&#xA0;Overview">module name</a>.</p><p>See also <a href="#custom-init-fini" title="30.1.&#xA0;Customizing CLISP Process&#10;  Initialization and Termination">Section 30.1, “Customizing <span><strong class="command">CLISP</strong></span> Process
  Initialization and Termination”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="modfini"></a>31.2.3. Module finalization</h3></div></div></div><p>Each module has a finalization function
</p><div class="variablelist"><dl><dt><span class="term">void
   <code class="function">module__<em class="replaceable"><code>name</code></em>__fini_function</code>
   (struct module_t* module)</span></dt><dd><p>called before exiting <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p><p>You do <span class="strong"><strong>not</strong></span> have to defined this function yourself;
  <a href="#modprep-file"><span><strong class="command">modprep</strong></span></a> and <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> will do that for you.</p><p>If you use <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>, <code class="code">(<a href="#c-lines"><code class="function">FFI:C-LINES</code></a> :fini ...)</code> will
  add code to this function.</p></dd></dl></div><p>
<em class="replaceable"><code>name</code></em> is the <a href="#mod-overview" title="31.2.1.&#xA0;Overview">module name</a>.</p><p>See also <a href="#custom-init-fini" title="30.1.&#xA0;Customizing CLISP Process&#10;  Initialization and Termination">Section 30.1, “Customizing <span><strong class="command">CLISP</strong></span> Process
  Initialization and Termination”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="modinfo"></a>31.2.4. Function <a href="#modinfo" title="31.2.4.&#xA0;Function EXT:MODULE-INFO"><code class="function">EXT:MODULE-INFO</code></a></h3></div></div></div><p>Function <code class="code">(<a href="#modinfo" title="31.2.4.&#xA0;Function EXT:MODULE-INFO"><code class="function">EXT:MODULE-INFO</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>name</code></em>
  <em class="replaceable"><code>verbose</code></em>)</code> allows one to inquire
 about what modules are available in the currently running image.
 When called without arguments, it returns the list of module names,
 starting with “<span class="quote">clisp</span>”.  When <em class="replaceable"><code>name</code></em> is supplied and
 names a module, 3 values are returned - <em class="replaceable"><code>name</code></em>,
 <em class="replaceable"><code>subr-count</code></em>,
 <em class="replaceable"><code>object-count</code></em>.
 When <em class="replaceable"><code>verbose</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the full list of
 module lisp function names written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> (<span class="type">Subr</span>s) and
 the full list of internal lisp objects available in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code
 are additionally returned for the total of 5 values.</p><p>When <em class="replaceable"><code>name</code></em> is <code class="constant">:FFI</code>, returns the list of
 shared libraries opened using <code class="constant">:LIBRARY</code>.
 When <em class="replaceable"><code>verbose</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, return the
 <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> of DLL names and all foreign objects associated with it.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mod-dynload"></a>31.2.5. Function <a href="#mod-dynload" title="31.2.5.&#xA0;Function SYS::DYNLOAD-MODULES"><code class="function">SYS::DYNLOAD-MODULES</code></a></h3></div><div><h4 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep">Only when compiled <span class="strong"><strong>with</strong></span> configure
  flag <code class="option">--with-dynamic-modules</code>.</span></span></h4></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Dynamic loading does not work on all operating systems
  (<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html"><code class="function">dlopen</code></a> or equivalent is required).
</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><code class="option">--with-dynamic-modules</code> precludes some
  efficiency optimizations which are enabled by default.</p></div><p>Function <code class="code">(<a href="#mod-dynload" title="31.2.5.&#xA0;Function SYS::DYNLOAD-MODULES"><code class="function">SYS::DYNLOAD-MODULES</code></a> <em class="replaceable"><code>filename</code></em> ({<em class="replaceable"><code>name</code></em>}+))</code>
 loads a shared object file or library containing a number of named
 external <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> modules.
 </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This facility <span class="emphasis"><em>cannot</em></span> be used to
   access arbitrary shared libraries.  To do that, use the <code class="constant">:LIBRARY</code>
   argument to <a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> and <a href="#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a> instead.</p></div><p>
</p><p>External modules for <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> are shared objects
 (dynamic libraries) that contain the
 <code class="literal">module__<em class="replaceable"><code>name</code></em>__subr_tab</code> variable, among others.
 This serves to register external functions which operate on Lisp-level
 structures with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p><p>To use <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html"><code class="function">dlopen</code></a> with modules,
 you should add <code class="option">-fPIC</code> to the module's compilation options.
 Something like <span><strong class="command">cc -shared -o <em class="replaceable"><code>name</code></em>.so <em class="replaceable"><code>name</code></em>.o</strong></span>
 may be needed to produce the shared object file.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mod-set-example"></a>31.2.6. Example</h3></div></div></div><p>To link in the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> bindings for the <a href="http://www.gnu.org" target="_top">GNU</a>/<a href="http://www.linux.org/" target="_top"><span class="strong"><strong>Linux</strong></span></a> operating
 system, the following steps are needed.  (Step 1 and step 2 need not be
 executed in this order.)</p><div class="procedure"><ol type="1"><li><p class="title"><b>Create a new <a href="impnotes.html#modset" class="olink">module set</a></b></p><pre class="screen"><code class="prompt">$</code> <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> create-module-set linux /<em class="replaceable"><code>somewhere</code></em>/bindings/linux.c</pre></li><li><p class="title"><b>Modify the newly created
  <code class="filename">linux/<a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a></code></b></p><ol type="a"><li><p class="title"><b>add <code class="option">-lm</code> to the libraries</b></p><p>replace </p><pre class="screen">NEW_LIBS="$file_list"</pre><p>
    with </p><pre class="screen">NEW_LIBS="$file_list -lm"</pre></li><li><p class="title"><b>load <code class="filename">linux.fas</code> before saving the
    <a href="impnotes.html#image" class="olink">memory image</a></b></p><p>replace </p><pre class="screen">TO_LOAD=''</pre><p> with
      </p><pre class="screen">TO_LOAD='/<em class="replaceable"><code>somewhere</code></em>/bindings/linux.fas'</pre></li></ol></li><li><p class="title"><b>Compile <code class="filename">linux.lisp</code>, creating
  <code class="filename">linux.c</code></b></p><pre class="screen"><code class="prompt">$</code> clisp -c /<em class="replaceable"><code>somewhere</code></em>/bindings/linux.lisp</pre></li><li><p class="title"><b>Create a new <a href="impnotes.html#linkset" class="olink">linking set</a></b></p><pre class="screen"><code class="prompt">$</code> <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> add-module-set linux base base+linux</pre></li><li><p class="title"><b>Run and try it</b></p><pre class="screen"><code class="prompt">$</code> base+linux/lisp.run -M base+linux/lispinit.mem -x '(linux:stat "/tmp")'</pre></li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="module-tools"></a>31.2.7. Module tools</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#modprep">31.2.7.1. Modprep</a></span></dt><dt><span class="section"><a href="#clisp-h">31.2.7.2. clisp.h</a></span></dt><dt><span class="section"><a href="#exporting">31.2.7.3. Exporting</a></span></dt></dl></div><p>There are some tools to facilitate easy module writing.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="modprep"></a>31.2.7.1. Modprep</h4></div></div></div><p>If your module is written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, you can pre-process your
 sources with <a href="#modprep-file"><span><strong class="command">modprep</strong></span></a> in the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> distribution and define lisp
 functions with the <code class="function">DEFUN</code> macro:
 </p><pre class="programlisting">
DEFUN(MY-PACKAGE:MY-FUNCTION-NAME, arg1 arg2 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> FOO BAR) {
  if (!boundp(STACK_0)) STACK_0 = fixnum(0); /* BAR */
  if (!boundp(STACK_1)) STACK_1 = fixnum(1); /* FOO */
  pushSTACK(`MY-PACKAGE::SOME-SYMBOL`); /* create a symbol in the package */
  pushSTACK(`#(:THIS :IS :A :VECTOR)`); /* some vector, created once */
  pushSTACK(``MY-PACKAGE::MY-FUNCTION-NAME``); /* double `` means FUNCTION */
  VALUES1(listof(7)); /* cons up a new list and clean up the STACK */
}</pre><p>
Then <code class="code">(MY-PACKAGE:MY-FUNCTION-NAME 'A 12 :FOO T)</code> will
 return <span class="returnvalue">(A 12 T 0 MY-PACKAGE::SOME-SYMBOL #(:THIS
  :IS :A :VECTOR) #&lt;ADD-ON-SYSTEM-FUNCTION
  MY-PACKAGE:MY-FUNCTION-NAME&gt;)</span>
(assuming you <a href="http://www.lisp.org/HyperSpec/Body/fun_export.html" target="_top"><code class="function">EXPORT</code></a>ed <code class="literal">MY-FUNCTION-NAME</code> from
 <strong class="package">“<span class="quote">MY-PACKAGE</span>”</strong>).</p><p>Another useful macros are:
 </p><div class="variablelist"><dl><dt><span class="term"><code class="function">DEFVAR</code></span></dt><dd>create a GC-visible private object
  </dd><dt><span class="term"><code class="function">DEFFLAGSET</code></span></dt><dd>define a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function which will remove
     several flag arguments from the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> and return the combined flag
     value</dd><dt><span class="term"><code class="function">DEFCHECKER</code></span></dt><dd>define a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function which will check that
     its argument is one of the specified keywords and return the value
     of the appropriate <a href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span><strong class="command">cpp</strong></span></a> macro</dd></dl></div><p>See <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/syscalls/"><code class="filename">modules/syscalls/</code></a> and
 other included modules for more examples and file <a href="#modprep-file"><span><strong class="command">modprep</strong></span></a> for full
 documentation.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you manipulate Lisp objects, you need to watch out for
  <a href="#gc-safety" title="34.5.&#xA0;The burden of garbage-collection upon the rest of CLISP">GC-safety</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="clisp-h"></a>31.2.7.2. clisp.h</h4></div></div></div><p>If your module is written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, you will probably want
 to <code class="literal">#include "clisp.h"</code> to access <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects.
 You will certainly need to read <a href="#clisp-h" title="31.2.7.2.&#xA0;clisp.h"><code class="filename">"clisp.h"</code></a> and the code in
 <a href="#included-modules" title="31.2.9.&#xA0;Modules included in the source distribution">included modules</a>, but here are
 some important hints that you will need to keep in mind:
</p><div class="itemizedlist"><ul type="disc"><li>Lisp objects have type <span class="type">object</span>.
 </li><li>Variables of this type are invalidated by
   <a href="#gc-safety" title="34.5.&#xA0;The burden of garbage-collection upon the rest of CLISP">lisp memory allocation</a>
   (<code class="function">allocate_*()</code> functions) - but <span class="strong"><strong>not</strong></span> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
   allocations (<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"><code class="function">malloc</code></a> et al) -
   and must be saved on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> using <a href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span><strong class="command">cpp</strong></span></a> macros
   <code class="function">pushSTASK()</code>, <code class="function">popSTACK()</code>
   and <code class="function">skipSTACK()</code>.</li><li>Access object slots using the
   appropriate <code class="function">TheFoo()</code> macro, e.g.,
   <code class="function">TheCons(my_cons)-&gt;Car</code>, but first check the
   type with <code class="function">consp()</code>.</li><li>Arguments are passed on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, as illustrated
   in the <a href="#modprep" title="31.2.7.1.&#xA0;Modprep">above example</a>.</li><li>Wrap your system calls in
   <code class="literal">begin_system_call()</code>/<code class="literal">end_system_call()</code>
   pairs.  These macros, defined in <a href="#clisp-h" title="31.2.7.2.&#xA0;clisp.h"><code class="filename">"clisp.h"</code></a>, save and restore
   registers used by <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> which could be clobbered by a system call.
 </li></ul></div><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="exporting"></a>31.2.7.3. Exporting</h4></div></div></div><p>If your module uses <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> to interface to a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> library,
 you might want to make your module package
 <a href="#make-pack" title="11.5.1.&#xA0;Function MAKE-PACKAGE">case-sensitive</a> and use
 <a href="#exporting-lisp"><code class="filename">exporting.lisp</code></a> in the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> distribution to make <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms
 and <a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><code class="function">DEFMACRO</code></a> at al export the symbols they define.
 See <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/netica/"><code class="filename">modules/netica/</code></a>,
 <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/matlab/"><code class="filename">modules/matlab/</code></a> and
 <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/bindings/"><code class="filename">modules/bindings/</code></a> for examples.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="mod-ffi-vs-c"></a>31.2.8. Trade-offs: <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> vs. <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
  modules</h3></div></div></div><p>When deciding how to write a module: whether to use <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>  or
 to stick with <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> and <a href="#modprep-file"><span><strong class="command">modprep</strong></span></a>, one has to take into account
 several issues: </p><div class="variablelist"><dl><dt><span class="term">Speed: <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> wins</span></dt><dd><p><a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> has a noticeable overhead:
   compare <code class="function">RAWSOCK:HTONS</code> (defined
   in <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/rawsock/rawsock.c"><code class="filename">modules/rawsock/rawsock.c</code></a>)
   with </p><pre class="programlisting">
(<a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> htons (:name "htons") (:library :default)
  (:arguments (s ffi:short)) (:return-type ffi:short) (:language :stdc))
</pre><p> and observe that <code class="function">RAWSOCK:HTONS</code> is
   almost 3 times as fast (this really does compare the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>
   overhead to the normal lisp function call because
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/htons.html"><code class="function">htons</code></a> is computationally trivial).
   This difference will matter only if you call a simple function very
   many times, in which case it would make sense to put the loop itself
   into <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>.</p></dd><dt><span class="term">Portability: <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> wins</span></dt><dd><p>First of all, <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> is <span class="strong"><strong>not</strong></span> as widely ported
   as <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, so it is possible that you will face a platform where
   <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> runs but <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> is not present.</p><p>Second, it is much easier to handle portability in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>:
   observe the alternative implementations
   of <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/htonl.html"><code class="function">htonl</code></a> et al in
   <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/rawsock/rawsock.c"><code class="filename">modules/rawsock/rawsock.c</code></a>.</p><p>Third, certain <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> structures have different layout on
   different platforms, and functions may take 64-bit arguments on some
   platforms and 32-bit arguments on others; so the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> code has
   to track those differences.</p></dd><dt><span class="term">Code size: <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> wins</span></dt><dd>You need to type much fewer characters with <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>,
   and, if you use the <code class="constant">:LIBRARY</code> argument to <a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> and
   <a href="#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a>, you do not need to leave your <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> session to try
   out your code.  This is a huge advantage for rapid prototyping.
</dd><dt><span class="term">UI: <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> wins</span></dt><dd>To produce a nice lispy UI (using <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> and
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>word arguments etc), you will need to write wrappers to your
   <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a>s, while in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> you can do that directly.
   The same goes for “<span class="quote">polymorphism</span>”: accepting different
   argument types (like, e.g., <a href="#resolve-host"><code class="function">POSIX:RESOLVE-HOST-IPADDR</code></a> does) would require a lisp
   wrapper for <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a>s.
</dd><dt><span class="term">Learning curve: unclear</span></dt><dd><p>If you are comfortable with <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, you might
   find the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> module facilities (e.g., <a href="#modprep-file"><span><strong class="command">modprep</strong></span></a>) very
   easy to use.</p><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>, on the other hand, is quite high-level,
   so, if you are more comfortable with high-level languages, you might
   find it easier to write <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms than <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code.
</p></dd><dt><span class="term">Safety: unclear</span></dt><dd>One can get a segfault either way: if your
   <a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> form does not describe the function's expectations
   with respect to the arguments and return values (including
   <a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a>), you will probably learn that the hard way.
   If the module is written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, all the opportunities to shoot
   oneself in the foot (and other body parts) are wide open
   (although well known to most <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> users).
   However, with <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, one has to watch
   for <a href="#gc-safety" title="34.5.&#xA0;The burden of garbage-collection upon the rest of CLISP">GC-safety</a> too.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="included-modules"></a>31.2.9. Modules included in the source distribution</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#base-modules">31.2.9.1. Base and Full Modules</a></span></dt></dl></div><p>The following modules come with the <span class="emphasis"><em>source</em></span>
 distribution of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> (but are not necessarily built in a
 particular <span class="emphasis"><em>binary</em></span> distribution):</p><div class="variablelist"><dl><dt><span class="term">bindings</span></dt><dd><p>Call the operating system functions from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
    The following platforms are supported:
   </p><div class="itemizedlist"><ul type="disc"><li><a href="http://www.linux.org/" target="_top"><span class="strong"><strong>Linux</strong></span></a>/<a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/libc/" target="_top">libc</a></li><li><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a></li></ul></div></dd><dt><span class="term"><a href="http://www.cliki.net/CLX" target="_top"><span><strong class="command">CLX</strong></span></a></span></dt><dd><p>Call
    <a href="http://www.the-labs.com/X11/XLib-Manual/" target="_top">Xlib</a>
    functions from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.  Two implementations are supplied:
    </p><div class="variablelist"><dl><dt><span class="term">mit-clx, from MIT
       <a href="ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z" target="_top">ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z</a></span></dt><dd>the standard implementation
     </dd><dt><span class="term">new-clx, by <span class="author"><span class="firstname">Gilbert</span> <span class="surname">Baumann</span></span></span></dt><dd><p>faster, with additional features, but not
        quite complete yet.  Please try it first and use mit-clx only
        if new-clx does not work for you. new-clx comes with several
        demos, please try them: run
        </p><pre class="screen"><code class="prompt">$</code> clisp <code class="option"><a href="clisp.html#opt-link-set" class="olink">-K</a></code> <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">full</strong></span></a> <code class="option"><a href="clisp.html#opt-init" class="olink">-i</a></code> <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/clx/new-clx/demos/clx-demos.lisp"><code class="filename">modules/clx/new-clx/demos/clx-demos.lisp</code></a></pre><p>
        and follow the intructions.</p></dd></dl></div></dd><dt><span class="term"><a href="#oracle" title="32.12.&#xA0;Oracle Interface">oracle</a></span></dt><dd>Access
    <a href="http://www.oracle.com/" target="_top">Oracle</a> from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>;
    by <span class="author"><span class="firstname">John</span> <span class="surname">Hinsdale</span></span>.</dd><dt><span class="term"><a href="#fastcgi" title="32.13.&#xA0;The FastCGI Interface">fastcgi</a></span></dt><dd>Access
    <a href="http://www.fastcgi.com/" target="_top">FastCGI</a> from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>;
    by <span class="author"><span class="firstname">John</span> <span class="surname">Hinsdale</span></span>.</dd><dt><span class="term"><a href="#matlab" title="32.1.&#xA0;Matlab Interface">matlab</a></span></dt><dd>Do matrix computations via
    <a href="http://www.mathworks.com/products/matlab/" target="_top">MATLAB</a>.
 </dd><dt><span class="term"><a href="#netica" title="32.2.&#xA0;Netica Interface">netica</a></span></dt><dd>Work with Bayesian belief networks and influence
    diagrams using <a href="http://norsys.com/netica_c_api.htm" target="_top">Netica C API</a>.</dd><dt><span class="term"><a href="#postgresql" title="32.8.&#xA0;PostgreSQL Database Access">postgresql</a></span></dt><dd>Access <a href="http://www.PostgreSQL.org/" target="_top">PostgreSQL</a> from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
  </dd><dt><span class="term">queens</span></dt><dd>Compute the number of solutions to the <em class="replaceable"><code>n</code></em>-queens
    problem on a <em class="replaceable"><code>n</code></em>×<em class="replaceable"><code>n</code></em> checkboard (a toy
    example for the users to explore the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="#modules" title="31.2.&#xA0;External Modules">module</a> system,
    see <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/queens/"><code class="filename">modules/queens/</code></a>).
 </dd><dt><span class="term"><a href="#dir-key" title="32.3.&#xA0;Directory Access">dirkey</a></span></dt><dd>Directory Access (LDAP, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> registry etc).
 </dd><dt><span class="term"><a href="#berkeley-db" title="32.4.&#xA0;Berkeley DB access">berkeley-db</a></span></dt><dd><a class="bdb" href="http://www.sleepycat.com/docs/index.html">Berkeley DB
     from Sleepycat Software</a> interface.
 </dd><dt><span class="term"><a href="#regexp-mod" title="32.5.&#xA0;POSIX Regular Expressions">regexp</a></span></dt><dd>The <a href="regexp.html" target="_top">POSIX Regular
     Expressions</a> matching, compiling, executing.
    See <a href="#base-modules" title="31.2.9.1.&#xA0;Base and Full Modules">Section 31.2.9.1, “Base and Full Modules”</a>.</dd><dt><span class="term"><a href="#pari" title="32.6.&#xA0;Computer Algebra System PARI">pari</a></span></dt><dd>Interface to the computer algebra system <a href="http://pari.math.u-bordeaux.fr/" target="_top">PARI</a>.
 </dd><dt><span class="term"><a href="#pcre" title="32.7.&#xA0;Perl Compatible Regular Expressions">pcre</a></span></dt><dd>The <a href="http://www.pcre.org/" target="_top">Perl
     Compatible Regular Expressions</a> matching, compiling,
    executing.</dd><dt><span class="term"><a href="#i18n-mod" title="32.9.&#xA0;Internationalization of User Programs">i18n</a></span></dt><dd>Internationalization of User Programs.
    See <a href="#base-modules" title="31.2.9.1.&#xA0;Base and Full Modules">Section 31.2.9.1, “Base and Full Modules”</a>.</dd><dt><span class="term"><a href="#syscalls" title="32.11.&#xA0;System Calls">syscalls</a></span></dt><dd>Use some system calls in a platform-independent way.
    See <a href="#base-modules" title="31.2.9.1.&#xA0;Base and Full Modules">Section 31.2.9.1, “Base and Full Modules”</a>.</dd><dt><span class="term"><a href="#readline-mod" title="32.10.&#xA0;Advanced Readline and History Functionality">readline</a></span></dt><dd>When <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> and <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> are available,
    some advanced readline and history features are exported using this module.
    See <a href="#base-modules" title="31.2.9.1.&#xA0;Base and Full Modules">Section 31.2.9.1, “Base and Full Modules”</a>.</dd><dt><span class="term"><a href="#wildcard" title="32.15.&#xA0;The Wildcard Module">wildcard</a></span></dt><dd>Shell (<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"><span><strong class="command">/bin/sh</strong></span></a>) globbing (<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/xcu_chap02.html#tag_02_13">Pathname Matching</a>).
 </dd><dt><span class="term"><a href="#rawsock" title="32.14.&#xA0;Raw Socket Access">rawsock</a></span></dt><dd>Raw socket access.</dd><dt><span class="term"><a href="#zlib" title="32.16.&#xA0;ZLIB Interface">zlib</a></span></dt><dd>Compress <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>s using
    <a href="http://www.zlib.org" target="_top">ZLIB</a>.
 </dd></dl></div><p>To use modules, read <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/unix/INSTALL"><code class="filename">unix/INSTALL</code></a>
 and build <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> in directory <code class="filename">build-dir</code> with,
 e.g.,</p><pre class="screen">
<code class="prompt">$</code> ./configure --with-module=pcre --with-module=clx/new-clx --build build-dir
</pre><p>then run it with
</p><pre class="screen"><code class="prompt">$</code> ./build-dir/clisp <code class="option"><a href="clisp.html#opt-link-set" class="olink">-K</a></code> full</pre><p>
This will create a <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">base</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a> with modules i18n, regexp and
syscalls; and a <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">full</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a> with modules pcre and new/clx in
addition to the 3 <a href="#base-modules" title="31.2.9.1.&#xA0;Base and Full Modules">base modules</a>.</p><p>See <a href="#ext-modules" title="Chapter&#xA0;32.&#xA0;Extensions Implemented as Modules">Chapter 32, <i>Extensions Implemented as Modules</i></a>
 for individual module documentation.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="base-modules"></a>31.2.9.1. Base and Full Modules</h4></div></div></div><p>Note that the default build process includes the following
  modules in <span class="emphasis"><em>both</em></span> <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">base</strong></span></a> <span class="strong"><strong>and</strong></span> <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">full</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a>s:
  </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="#i18n-mod" title="32.9.&#xA0;Internationalization of User Programs">i18n</a></td></tr><tr><td><a href="#regexp-mod" title="32.5.&#xA0;POSIX Regular Expressions">regexp</a></td></tr><tr><td><a href="#syscalls" title="32.11.&#xA0;System Calls">syscalls</a></td></tr><tr><td><a href="#readline-mod" title="32.10.&#xA0;Advanced Readline and History Functionality">readline</a> (only when both
    <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> and <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> are available)</td></tr></table><p>The composition of the <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">full</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a> depends on the platform
  and on the vendor preferences.</p></div></div></div>
<!--#endif-->
<!--#ifdef DYNAMIC_FFI-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="dffi"></a>31.3. The Foreign Function Call Facility</h2></div><div><h3 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep">Many <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms
  only.</span></span></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#dffi-intro">31.3.1. Introduction</a></span></dt><dt><span class="section"><a href="#dffi-overview">31.3.2. Overview</a></span></dt><dt><span class="section"><a href="#dffi-types">31.3.3. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#c-flavor">31.3.4. The choice of the <span><strong class="command">C</strong></span> flavor</a></span></dt><dt><span class="section"><a href="#dffi-variables">31.3.5. Foreign variables</a></span></dt><dt><span class="section"><a href="#dffi-places">31.3.6. Operations on foreign places</a></span></dt><dt><span class="section"><a href="#dffi-functions">31.3.7. Foreign functions</a></span></dt><dt><span class="section"><a href="#allocation">31.3.8. Argument and result passing conventions</a></span></dt><dt><span class="section"><a href="#param-mode">31.3.9. Parameter Mode</a></span></dt><dt><span class="section"><a href="#dffi-examples">31.3.10. Examples</a></span></dt><dd><dl><dt><span class="section"><a href="#dffi-ex-more">31.3.10.1. More examples</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-intro"></a>31.3.1. Introduction</h3></div></div></div><p>This facility, also known as “<span class="quote">Foreign Language Interface</span>”,
allows one to call a function implemented in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> from inside <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
and to do many related things, like inspect and modify foreign memory,
define a “<span class="quote">callback</span>” (i.e., make a lisp function available
to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> world), etc.
To use this facility, one writes a foreign function description into an
ordinary Lisp file, which is then compiled and loaded as usual.</p><p>There are two basic ways to do define a foreign function:</p><div class="orderedlist"><ol type="1"><li>Use <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html"><code class="function">dlopen</code></a> and
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dlsym.html"><code class="function">dlsym</code></a> to get to the location of the
  function code in a dynamic library.
  To access this facility, pass the <code class="constant">:LIBRARY</code> option to <a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a>
  and <a href="#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a>.
  Unfortunately, this functionality is not available on some operating
  systems, and, also, it offers only a part of the foreign functionality:
  <a href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span><strong class="command">cpp</strong></span></a> macros and <code class="literal">inline</code> functions cannot be
  accessed this way.</li><li>Use a somewhat less direct way: when you do not use
  the <code class="constant">:LIBRARY</code> argument, <a href="impnotes.html#compilefile" class="olink"><code class="function">COMPILE-FILE</code></a> produces a <code class="filename">#P".c"</code> file (in
  addition to a <code class="filename">#P".fas"</code> and a <a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><code class="filename">#P".lib"</code></a>).
  Then you compile (with a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler) and link it into <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
  (statically, linking it into <code class="filename">lisp.a</code>, or
  dynamically, loading it into a running <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> using
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html"><code class="function">dlopen</code></a> and
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dlsym.html"><code class="function">dlsym</code></a>).
  This way you can use any functionality your foreign library exports,
  whether using ordinary functions, <code class="literal">inline</code> functions,
  or <a href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span><strong class="command">cpp</strong></span></a> macros (see <a href="#dffi-ex-macro" title="Example&#xA0;31.5.&#xA0;Accessing cpp macros">Example 31.5, “Accessing <span><strong class="command">cpp</strong></span> macros”</a>).
 </li></ol></div><p>
</p><p>All symbols relating to the foreign function interface are
 exported from the package <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.  To use them,
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><code class="function">USE-PACKAGE</code></a> <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>)</code>.</p><p>Special <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms may appear anywhere in the Lisp file.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-overview"></a>31.3.2. Overview</h3></div></div></div><p>These are the special <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms.  We have taken a pragmatic
 approach: the only foreign languages we support for now are <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
 and ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Unless specifically noted otherwise, type specification
  parameters are not evaluated, so that they can be compiled by
  <a href="#c-type-parse"><code class="function">FFI:PARSE-C-TYPE</code></a> into the internal format at macroexpansion time.
</p></div><div class="variablelist"><p class="title"><b>High-level <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms; <em class="replaceable"><code>name</code></em> is any Lisp
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>; <em class="replaceable"><code>c-name</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a></b></p><dl><dt><a id="def-c-type"></a><span class="term"><code class="code">(<a href="#def-c-type"><code class="function">FFI:DEF-C-TYPE</code></a> <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>c-type</code></em>)</code></span></dt><dd>This form makes <em class="replaceable"><code>name</code></em> a shortcut for <em class="replaceable"><code>c-type</code></em>.
   Note that <em class="replaceable"><code>c-type</code></em> may already refer to name.
   Forward declarations of types are not possible, however.
</dd><dt><a id="def-c-var"></a><span class="term"><code class="code">(<a href="#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a> <em class="replaceable"><code>name</code></em>
   {<em class="replaceable"><code>option</code></em>}*)</code></span></dt><dd><p>This form defines a <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a>.
  <em class="replaceable"><code>name</code></em> is the Lisp name, a regular Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>.</p><div class="variablelist"><a id="def-c-var-opts"></a><p class="title"><b>Options for <a href="#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a></b></p><dl><dt><span class="term"><code class="code">(<code class="constant">:NAME</code> <em class="replaceable"><code>c-name</code></em>)</code></span></dt><dd>specifies the name as seen from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, as a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>.  If not specified, it is derived from the print name of
   the Lisp name.</dd><dt><span class="term"><code class="code">(<code class="constant">:TYPE</code> <em class="replaceable"><code>c-type</code></em>)</code></span></dt><dd>specifies the variable's foreign type.
</dd><dt><span class="term"><code class="code">(<code class="constant">:READ-ONLY</code> <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a>)</code></span></dt><dd>If this option is specified and non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
   it will be impossible to change the variable's value from within
   Lisp (using <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> or similar).</dd><dt><span class="term"><code class="code">(:ALLOC <a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a>)</code></span></dt><dd>This option can be either <code class="constant">:NONE</code> or
   <code class="constant">:MALLOC-FREE</code> and defaults to <code class="constant">:NONE</code>.  If it is
   <code class="constant">:MALLOC-FREE</code>, any values of type <a href="#c-string"><span class="type">FFI:C-STRING</span></a>, <a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>,
   <a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a>, <a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a> within the foreign value are assumed
   to be pointers to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"><code class="function">malloc</code></a>-allocated storage, and when <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a>
   replaces an old value by a new one, the old storage is freed using
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"><code class="function">free</code></a> and the new storage allocated using <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"><code class="function">malloc</code></a>.  If it is
   <code class="constant">:NONE</code>, <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> assumes that the pointers point to good storage
   (not <code class="constant">NULL</code>!) and overwrites the old values by the new ones.
   This is dangerous (just think of overwriting a string with a
   longer one or storing some data in a <code class="constant">NULL</code> pointer...)  and
   deprecated.</dd><dt><span class="term"><code class="code">(<code class="constant">:LIBRARY</code> <em class="replaceable"><code>name</code></em>)</code></span></dt><dd><p>Specifies the (optional) dynamic library
   which contains the variable.</p><p><em class="replaceable"><code>name</code></em> should <span class="emphasis"><em>evaluate</em></span> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>
   or, depending on the underlying <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dlsym.html"><code class="function">dlsym</code></a>
   implementation, <code class="constant">:DEFAULT</code> or <code class="constant">:NEXT</code>.
</p></dd><dt><span class="term"><code class="code">(<code class="constant">:DOCUMENTATION</code> <em class="replaceable"><code>string</code></em>)</code></span></dt><dd>Specifies the (optional) <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><code class="function">VARIABLE</code></a> documentation.
</dd></dl></div></dd><dt><a id="def-c-const"></a><span class="term"><code class="code">(<a href="#def-c-const"><code class="function">FFI:DEF-C-CONST</code></a> <em class="replaceable"><code>name</code></em>
   {<em class="replaceable"><code>option</code></em>}*)</code></span></dt><dd><p>This form defines a Lisp <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-1-3.html" target="_top">constant variable</a> <em class="replaceable"><code>name</code></em> whose
   value is determined at link time using an internal <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a>.
   When the <a href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span><strong class="command">cpp</strong></span></a> constant is not defined, <em class="replaceable"><code>name</code></em> is unbound.</p><div class="variablelist"><a id="def-c-const-opts"></a><p class="title"><b>Options for <a href="#def-c-const"><code class="function">FFI:DEF-C-CONST</code></a></b></p><dl><dt><span class="term"><code class="code">(<code class="constant">:NAME</code> <em class="replaceable"><code>c-name</code></em>)</code></span></dt><dd>specifies the name as seen from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, as a
      <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>.  If not specified, it is derived from the print name
      of the Lisp name.</dd><dt><span class="term"><code class="code">(<code class="constant">:TYPE</code> <em class="replaceable"><code>c-type</code></em>)</code></span></dt><dd><p>specifies the constant's foreign type, one of
      </p><table class="simplelist" border="0" summary="Simple list"><tr><td><span class="type">FFI:INT</span></td></tr><tr><td><a href="#c-string"><span class="type">FFI:C-STRING</span></a></td></tr><tr><td><a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a></td></tr></table></dd><dt><span class="term"><code class="code">(<code class="constant">:DOCUMENTATION</code> <em class="replaceable"><code>string</code></em>)</code></span></dt><dd>Specifies the (optional) <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><code class="function">VARIABLE</code></a> documentation.
  </dd></dl></div><p>See also <a href="#dffi-ex-macro" title="Example&#xA0;31.5.&#xA0;Accessing cpp macros">Example 31.5, “Accessing <span><strong class="command">cpp</strong></span> macros”</a>.</p></dd><dt><a id="def-call-out"></a><span class="term"><code class="code">(<a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a>
              <em class="replaceable"><code>name</code></em> {<em class="replaceable"><code>option</code></em>}*)</code></span></dt><dd><p>This form defines a named call-out function (a
 foreign function called from Lisp: control flow temporarily leaves Lisp).
 </p><div class="variablelist"><a id="def-call-out-opts"></a><p class="title"><b>Options for <a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a></b></p><dl><dt><span class="term"><code class="code">(<code class="constant">:NAME</code> <em class="replaceable"><code>c-name</code></em>)</code></span></dt><dd>Any Lisp function call to <code class="function">#'<em class="replaceable"><code>name</code></em></code>
  is redirected to call the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function <em class="replaceable"><code>c-name</code></em>.
</dd><dt><span class="term"><code class="code">(<code class="constant">:ARGUMENTS</code>
   {(<em class="replaceable"><code>argument</code></em> <em class="replaceable"><code>c-type</code></em> [<a href="#param-mode" title="31.3.9.&#xA0;Parameter Mode"><em class="replaceable"><code>PARAM-MODE</code></em></a> [<a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a>]])}*)</code><br /></span><span class="term"><code class="code">(<code class="constant">:RETURN-TYPE</code> <em class="replaceable"><code>c-type</code></em> [<a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a>])</code></span></dt><dd>Argument list and return value, see
   <a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions">Section 31.3.8, “Argument and result passing conventions”</a> and <a href="#param-mode" title="31.3.9.&#xA0;Parameter Mode">Section 31.3.9, “Parameter Mode”</a>.
</dd><dt><span class="term"><code class="code">(<a href="#c-flavor" title="31.3.4.&#xA0;The choice of the C flavor"><code class="constant">:LANGUAGE</code></a> <em class="replaceable"><code>language</code></em>)</code></span></dt><dd>See <a href="#c-flavor" title="31.3.4.&#xA0;The choice of the C flavor">Section 31.3.4, “The choice of the <span><strong class="command">C</strong></span> flavor”</a>.
</dd><dt><span class="term"><code class="code">(:BUILT-IN <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a>)</code></span></dt><dd>When the function is a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> built-in, the full
   prototype will be output (unless suppressed by <a href="#ffi-extern-output"><code class="varname">FFI:*OUTPUT-C-FUNCTIONS*</code></a>).
</dd><dt><span class="term"><code class="code">(<code class="constant">:LIBRARY</code> <em class="replaceable"><code>name</code></em>)</code></span></dt><dd><p>Specifies the (optional) dynamic library
   which contains the function.</p><p><em class="replaceable"><code>name</code></em> should <span class="emphasis"><em>evaluate</em></span> to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>,
   or, depending on the underlying <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dlsym.html"><code class="function">dlsym</code></a>
   implementation, <code class="constant">:DEFAULT</code> or <code class="constant">:NEXT</code>.
</p></dd><dt><span class="term"><code class="code">(<code class="constant">:DOCUMENTATION</code> <em class="replaceable"><code>string</code></em>)</code></span></dt><dd>Specifies the (optional) <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html" target="_top"><code class="function">FUNCTION</code></a> documentation.
</dd></dl></div></dd><dt><a id="def-call-in"></a><span class="term"><code class="code">(<a href="#def-call-in"><code class="function">FFI:DEF-CALL-IN</code></a>
              <em class="replaceable"><code>name</code></em> {<em class="replaceable"><code>option</code></em>}*)</code></span></dt><dd><p>This form defines a named call-in function (i.e., a Lisp
 function called from the foreign language: control flow temporary
 enters Lisp)</p><div class="variablelist"><a id="def-call-in-opts"></a><p class="title"><b>Options for <a href="#def-call-in"><code class="function">FFI:DEF-CALL-IN</code></a></b></p><dl><dt><span class="term"><code class="code">(<code class="constant">:NAME</code> <em class="replaceable"><code>c-name</code></em>)</code></span></dt><dd>Any <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function call to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function
   <em class="replaceable"><code>c-name</code></em> is redirected to call the <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> function
   <code class="function">#'<em class="replaceable"><code>name</code></em></code>.</dd><dt><span class="term"><code class="code">(<code class="constant">:ARGUMENTS</code>
   {(<em class="replaceable"><code>argument</code></em> <em class="replaceable"><code>c-type</code></em> [<a href="#param-mode" title="31.3.9.&#xA0;Parameter Mode"><em class="replaceable"><code>PARAM-MODE</code></em></a> [<a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a>]])}*)</code><br /></span><span class="term"><code class="code">(<code class="constant">:RETURN-TYPE</code> <em class="replaceable"><code>c-type</code></em> [<a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a>])</code></span></dt><dd>Argument list and return value, see
   <a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions">Section 31.3.8, “Argument and result passing conventions”</a> and <a href="#param-mode" title="31.3.9.&#xA0;Parameter Mode">Section 31.3.9, “Parameter Mode”</a>.
</dd><dt><span class="term"><code class="code">(<a href="#c-flavor" title="31.3.4.&#xA0;The choice of the C flavor"><code class="constant">:LANGUAGE</code></a> <em class="replaceable"><code>language</code></em>)</code></span></dt><dd>See <a href="#c-flavor" title="31.3.4.&#xA0;The choice of the C flavor">Section 31.3.4, “The choice of the <span><strong class="command">C</strong></span> flavor”</a>.
</dd></dl></div></dd><dt><a id="dffi-close-lib"></a><span class="term"><code class="code">(<a href="#dffi-close-lib"><code class="function">FFI:CLOSE-FOREIGN-LIBRARY</code></a>
   <em class="replaceable"><code>name</code></em>)</code></span></dt><dd><p>Close (unload) a shared foreign library (opened by the
   <code class="constant">:LIBRARY</code> argument to <a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> or <a href="#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a>).</p><p>If you modify your shared library, you need to use close it
   using <a href="#dffi-close-lib"><code class="function">FFI:CLOSE-FOREIGN-LIBRARY</code></a> first.  When you try to use the
   <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> or the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a> which resides in the
   library <em class="replaceable"><code>name</code></em>, it will be re-opened automatically.
</p></dd><dt><a id="def-c-struct"></a><span class="term"><code class="code">(<a href="#def-c-struct"><code class="function">FFI:DEF-C-STRUCT</code></a>
   <em class="replaceable"><code>name</code></em> (<em class="replaceable"><code>symbol</code></em> <em class="replaceable"><code>c-type</code></em>)*)</code></span></dt><dd><p>This form defines <em class="replaceable"><code>name</code></em> to be both a
  <a href="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html" target="_top"><code class="classname">STRUCTURE-CLASS</code></a> and a foreign <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type with the given slots.
  If this class representation overhead is not needed one should consider
  writing <code class="code">(<a href="#def-c-type"><code class="function">FFI:DEF-C-TYPE</code></a> <em class="replaceable"><code>name</code></em> (<a href="#c-struct"><span class="type">FFI:C-STRUCT</span></a>
  {<a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> | <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>} (<em class="replaceable"><code>symbol</code></em> <em class="replaceable"><code>c-type</code></em>)*))</code> instead.
  <em class="replaceable"><code>name</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> (structure name) or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> whose <a href="http://www.lisp.org/HyperSpec/Body/acc_firstcm_s_inthcm_tenth.html" target="_top"><code class="function">FIRST</code></a>
  element is the structure name and the <a href="http://www.lisp.org/HyperSpec/Body/acc_rest.html" target="_top"><code class="function">REST</code></a> is options.
  Two options are supported at this time:
  </p><div class="variablelist"><a id="def-c-struct-opts"></a><p class="title"><b>Options for <a href="#def-c-struct"><code class="function">FFI:DEF-C-STRUCT</code></a></b></p><dl><dt><a id="def-c-struct-typedef"></a><span class="term"><code class="constant">:TYPEDEF</code></span></dt><dd>means that the name of this structure is a
      <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type defined with <code class="function">typedef</code>
      elsewhere.</dd><dt><a id="def-c-struct-external"></a><span class="term"><code class="constant">:EXTERNAL</code></span></dt><dd>means that this structure is defined in a
      <code class="filename">#P".c"</code> file that you include with, e.g.,
      <code class="code">(<a href="#c-lines"><code class="function">FFI:C-LINES</code></a> "#include &lt;filename.h&gt;~%")</code>.
  </dd></dl></div><p>
  These options determine how the struct is written to the <code class="filename">#P".c"</code>.
</p></dd><dt><a id="def-c-enum"></a><span class="term"><code class="code">(<a href="#def-c-enum"><code class="function">FFI:DEF-C-ENUM</code></a>
   <em class="replaceable"><code>name</code></em> {<em class="replaceable"><code>symbol</code></em> | (<em class="replaceable"><code>symbol</code></em> [<em class="replaceable"><code>value</code></em>])}*)</code></span></dt><dd><p>This form defines <em class="replaceable"><code>symbol</code></em>s
  as constants, similarly to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> declaration <span class="type">enum {
  <em class="replaceable"><code>symbol</code></em> [= <em class="replaceable"><code>value</code></em>], ... };</span></p><p>You can use <code class="code">(<code class="function">FFI:ENUM-FROM-VALUE</code>
  <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>value</code></em>)</code> and
 <code class="code">(<code class="function">FFI:ENUM-TO-VALUE</code> <em class="replaceable"><code>name</code></em>
  <em class="replaceable"><code>symbol</code></em>)</code> to convert between the numeric and symbolic
 representations (of course, the latter function boils down to
 <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html" target="_top"><code class="function">SYMBOL-VALUE</code></a> plus a check that the <em class="replaceable"><code>symbol</code></em> is indeed a constant
 defined in the <a href="#def-c-enum"><code class="function">FFI:DEF-C-ENUM</code></a> <em class="replaceable"><code>name</code></em>).</p></dd><dt><a id="c-lines"></a><span class="term"><code class="code">(<a href="#c-lines"><code class="function">FFI:C-LINES</code></a> <em class="replaceable"><code>format-string</code></em>
   {<em class="replaceable"><code>argument</code></em>}*)</code></span></dt><dd><p>This form outputs the string
   <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> <em class="replaceable"><code>format-string</code></em> {<em class="replaceable"><code>argument</code></em>}*)</code>
   to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> output file's top level.
   This is usually used to include the relevant header files,
   see <a href="#def-c-struct-external"><code class="constant">:EXTERNAL</code></a>
   and <a href="#ffi-extern-output"><a href="#ffi-extern-output"><code class="varname">FFI:*OUTPUT-C-FUNCTIONS*</code></a></a>.</p><p>When <em class="replaceable"><code>format-string</code></em> is not a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>, is should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>,
   and then the <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> {<em class="replaceable"><code>argument</code></em>}*)</code>
   is added to the appropriate <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function:</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:INIT-ALWAYS</code><br /></span><span class="term"><code class="constant">:INIT-ONCE</code></span></dt><dd><a href="#modinit" title="31.2.2.&#xA0;Module initialization">initialization
        function</a></dd><dt><span class="term"><code class="constant">:FINI</code></span></dt><dd><a href="#modfini" title="31.2.3.&#xA0;Module finalization">finalization
        function</a></dd></dl></div></dd><dt><a id="element"></a><span class="term"><code class="code">(<a href="#element"><code class="function">FFI:ELEMENT</code></a>
     <em class="replaceable"><code>c-place</code></em> <em class="replaceable"><code>index<sub>1</sub></code></em> ...
     <em class="replaceable"><code>index<sub>n</sub></code></em>)</code></span></dt><dd>Array element: If <em class="replaceable"><code>c-place</code></em> is of foreign type
  <span class="type"><code class="literal">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <em class="replaceable"><code>c-type</code></em>
  (<em class="replaceable"><code>dim<sub>1</sub></code></em>
  ... <em class="replaceable"><code>dim<sub>n</sub></code></em>))</code></span>
  and 0 ≤ <em class="replaceable"><code>index<sub>1</sub></code></em>
  &lt; <em class="replaceable"><code>dim<sub>1</sub></code></em>, ..., 0
  ≤ <em class="replaceable"><code>index<sub>n</sub></code></em> &lt;
  <em class="replaceable"><code>dim<sub>n</sub></code></em>, this will be
  the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> corresponding to <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_aref.html" target="_top"><code class="function">AREF</code></a>
  <em class="replaceable"><code>c-place</code></em> <em class="replaceable"><code>index<sub>1</sub></code></em>
  ... <em class="replaceable"><code>index<sub>n</sub></code></em>)</code> or
  <code class="varname"><em class="replaceable"><code>c-place</code></em>[<em class="replaceable"><code>index<sub>1</sub></code></em>]...[<em class="replaceable"><code>index<sub>n</sub></code></em>]</code>.
  It is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> of type <em class="replaceable"><code>c-type</code></em>.
  If <em class="replaceable"><code>c-place</code></em> is of foreign type <span class="type"><code class="literal">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a>
  <em class="replaceable"><code>c-type</code></em> <em class="replaceable"><code>dim</code></em>)</code></span> and 0 ≤
  <em class="replaceable"><code>index</code></em> &lt; <em class="replaceable"><code>dim</code></em>,
  this will be the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> corresponding to <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_aref.html" target="_top"><code class="function">AREF</code></a>
  <em class="replaceable"><code>c-place</code></em> <em class="replaceable"><code>index</code></em>)</code> or
  <code class="varname"><em class="replaceable"><code>c-place</code></em>[<em class="replaceable"><code>index</code></em>]</code>.
  It is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> of type <em class="replaceable"><code>c-type</code></em>.
</dd><dt><a id="deref"></a><span class="term"><code class="code">(<a href="#deref"><code class="function">FFI:DEREF</code></a> <em class="replaceable"><code>c-place</code></em>)</code></span></dt><dd>Dereference pointer: If
  <em class="replaceable"><code>c-place</code></em> is of foreign type
  <span class="type"><code class="literal">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> <em class="replaceable"><code>c-type</code></em>)</code></span>,
  <span class="type"><code class="literal">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> <em class="replaceable"><code>c-type</code></em>)</code></span> or
  <span class="type"><code class="literal">(<a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> <em class="replaceable"><code>c-type</code></em>)</code></span>,
  this will be the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> the pointer points to.
  It is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> of type <em class="replaceable"><code>c-type</code></em>.
  For <span class="type"><code class="literal">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> <em class="replaceable"><code>c-type</code></em>)</code></span>,
  the <em class="replaceable"><code>c-place</code></em> may not be <code class="constant">NULL</code>.
</dd><dt><a id="slot"></a><span class="term"><code class="code">(<a href="#slot"><code class="function">FFI:SLOT</code></a> <em class="replaceable"><code>c-place</code></em>
   <em class="replaceable"><code>slot-name</code></em>)</code></span></dt><dd>Struct or union component: If <em class="replaceable"><code>c-place</code></em> is of
   foreign type <span class="type"><code class="literal">(<a href="#c-struct"><span class="type">FFI:C-STRUCT</span></a> <em class="replaceable"><code>class</code></em> ...
    (<em class="replaceable"><code>slot-name</code></em> <em class="replaceable"><code>c-type</code></em>) ...)</code></span> or of
   type <span class="type"><code class="literal">(<a href="#c-union"><span class="type">FFI:C-UNION</span></a>
    ... (<em class="replaceable"><code>slot-name</code></em> <em class="replaceable"><code>c-type</code></em>) ...)</code></span>,
   this will be of type <em class="replaceable"><code>c-type</code></em>.</dd><dt><a id="cast"></a><span class="term"><code class="code">(<a href="#cast"><code class="function">FFI:CAST</code></a>
           <em class="replaceable"><code>c-place</code></em> <em class="replaceable"><code>c-type</code></em>)</code></span></dt><dd>Type change: A <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> denoting the same memory
  locations as the original <em class="replaceable"><code>c-place</code></em>, but of type <em class="replaceable"><code>c-type</code></em>.
 </dd><dt><a id="offset"></a><span class="term"><code class="code">(<a href="#offset"><code class="function">FFI:OFFSET</code></a>
           <em class="replaceable"><code>c-place</code></em> <em class="replaceable"><code>offset</code></em> <em class="replaceable"><code>c-type</code></em>)</code></span></dt><dd>Type change and displacement: return a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> denoting
  a memory locations displaced from the original <em class="replaceable"><code>c-place</code></em> by an
  <em class="replaceable"><code>offset</code></em> counted in bytes, with type <em class="replaceable"><code>c-type</code></em>.
  This can be used to resize an array, e.g. of <em class="replaceable"><code>c-type</code></em>
  <span class="type"><code class="literal">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <span class="type">uint16</span> <em class="replaceable"><code>n</code></em>)</code></span>
  via <code class="code">(<a href="#offset"><code class="function">FFI:OFFSET</code></a> <em class="replaceable"><code>c-place</code></em> 0 '(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <span class="type">uint16</span>
   <em class="replaceable"><code>k</code></em>))</code>.
 </dd><dt><a id="c-var-addr"></a><span class="term"><code class="code">(<a href="#c-var-addr"><code class="function">FFI:C-VAR-ADDRESS</code></a>
           <em class="replaceable"><code>c-place</code></em>)</code></span></dt><dd>Return the address of <em class="replaceable"><code>c-place</code></em> as a Lisp object of
  type <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a>.  This is useful as an argument
  to foreign functions expecting a parameter of <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>.
 </dd><dt><a id="c-var-object"></a><span class="term"><code class="code">(<a href="#c-var-object"><code class="function">FFI:C-VAR-OBJECT</code></a>
   <em class="replaceable"><code>c-place</code></em>)</code></span></dt><dd>Return the <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> object underlying the
   <em class="replaceable"><code>c-place</code></em>.  This is also an acceptable argument type to a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>
   declaration.</dd><dt><a id="typeof"></a><span class="term"><code class="code">(<a href="#typeof"><code class="function">FFI:TYPEOF</code></a> <em class="replaceable"><code>c-place</code></em>)</code></span></dt><dd>returns the <em class="replaceable"><code>c-type</code></em> corresponding to the <em class="replaceable"><code>c-place</code></em>.
</dd><dt><a id="sizeof"></a><span class="term"><code class="code">(<a href="#sizeof"><code class="function">FFI:SIZEOF</code></a> <em class="replaceable"><code>c-type</code></em>)</code><br /></span><span class="term"><code class="code">(<a href="#sizeof"><code class="function">FFI:SIZEOF</code></a> <em class="replaceable"><code>c-place</code></em>)</code></span></dt><dd><p>The first form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <em class="replaceable"><code>c-type</code></em>, measured in bytes.</p><p>The second form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type of <em class="replaceable"><code>c-place</code></em>, measured in bytes.
</p></dd><dt><a id="bitsizeof"></a><span class="term"><code class="code">(<a href="#bitsizeof"><code class="function">FFI:BITSIZEOF</code></a> <em class="replaceable"><code>c-type</code></em>)</code><br /></span><span class="term"><code class="code">(<a href="#bitsizeof"><code class="function">FFI:BITSIZEOF</code></a> <em class="replaceable"><code>c-place</code></em>)</code></span></dt><dd><p>The first form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <em class="replaceable"><code>c-type</code></em>, measured in bits.</p><p>The second form returns the size and alignment of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type of <em class="replaceable"><code>c-place</code></em>, measured in bits.
</p></dd><dt><a id="fa-null"></a><span class="term"><code class="code">(<a href="#fa-null"><code class="function">FFI:FOREIGN-ADDRESS-NULL</code></a> <em class="replaceable"><code>foreign-entity</code></em>)</code></span></dt><dd>This predicate returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if the
  <em class="replaceable"><code>foreign-entity</code></em> refers to the <code class="constant">NULL</code> address (and thus <em class="replaceable"><code>foreign-entity</code></em> should
  probably not be passed to most foreign functions).
</dd><dt><a id="faddr-u"></a><span class="term"><code class="code">(<a href="#faddr-u"><code class="function">FFI:FOREIGN-ADDRESS-UNSIGNED</code></a> <em class="replaceable"><code>foreign-entity</code></em>)</code><br /></span><span class="term"><code class="code">(<a href="#faddr-u"><code class="function">FFI:UNSIGNED-FOREIGN-ADDRESS</code></a> <em class="replaceable"><code>number</code></em>)</code></span></dt><dd><p><a href="#faddr-u"><code class="function">FFI:FOREIGN-ADDRESS-UNSIGNED</code></a> returns the <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>
   address embodied in the Lisp object of type <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a>,
   <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a>, <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> or <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a>.</p><p><a href="#faddr-u"><code class="function">FFI:UNSIGNED-FOREIGN-ADDRESS</code></a> returns a <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a>
   object pointing to the given <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> address.
</p></dd><dt><a id="faddr"></a><span class="term"><code class="code">(<a href="#faddr"><code class="function">FFI:FOREIGN-ADDRESS</code></a> <em class="replaceable"><code>foreign-entity</code></em>)</code></span></dt><dd><p><a href="#faddr"><code class="function">FFI:FOREIGN-ADDRESS</code></a> is both a type name and a
   selector/constructor function. It is the Lisp object type
   corresponding to a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> external type declaration, e.g. a
   call-out function with <code class="code">(<code class="constant">:RETURN-TYPE</code> <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>)</code> yields
   a Lisp object of type <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a>.</p><p>The function extracts the object of type <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a>
   living within any <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> or <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a> object.
   If the <em class="replaceable"><code>foreign-entity</code></em> already is a <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a>, it returns it.
   If it is a <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a> (e.g. a base foreign library address),
   it encapsulates it into a <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a> object, as suitable
   for use with a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> external type declaration.
   It does not construct addresses out of <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a>s,
   <a href="#faddr-u"><code class="function">FFI:UNSIGNED-FOREIGN-ADDRESS</code></a> must be used for that purpose.
</p></dd><dt><a id="dffi-make-var"></a><span class="term"><code class="code">(<a href="#dffi-make-var"><code class="function">FFI:FOREIGN-VARIABLE</code></a> <em class="replaceable"><code>foreign-entity</code></em>
   <em class="replaceable"><code>c-type-internal</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <em class="replaceable"><code>name</code></em>)</code></span></dt><dd> This constructor creates a new <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a>
   from the given <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a> or <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> and the
   internal <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type descriptor (as obtained from <a href="#c-type-parse"><code class="function">FFI:PARSE-C-TYPE</code></a>).
   <em class="replaceable"><code>name</code></em>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>, is mostly useful for documentation and
   interactive debugging since it appears in the printed representation
   of the <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> object, as in
   <code class="computeroutput">#&lt;<a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> "foo"
    #x0ADD4E55&gt;</code>.
   In effect, this is similar to <a href="#cast"><code class="function">FFI:CAST</code></a> (or rather
   <code class="code">(<a href="#offset"><code class="function">FFI:OFFSET</code></a> ... 0 ...)</code> for places),
   except that it works with <a href="#faddr"><code class="function">FFI:FOREIGN-ADDRESS</code></a> objects and allows
   caching of the internal <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types.</dd><dt><a id="dffi-make-func"></a><span class="term"><code class="code">(<a href="#dffi-make-func"><code class="function">FFI:FOREIGN-FUNCTION</code></a>
   <em class="replaceable"><code>foreign-entity</code></em> <em class="replaceable"><code>c-type-internal</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <em class="replaceable"><code>name</code></em>)</code></span></dt><dd>This constructor creates a <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a>
   from the given <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a> or <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a> and the
   internal <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type descriptor (as obtained from
   <code class="code">(<a href="#c-type-parse"><code class="function">FFI:PARSE-C-TYPE</code></a> '(<a href="#c-function"><span class="type">FFI:C-FUNCTION</span></a> ...))</code>,
   in which case it is important to specify the <a href="#c-flavor" title="31.3.4.&#xA0;The choice of the C flavor"><code class="constant">:LANGUAGE</code></a> because the
   expressions are likely to be evaluated at run time, outside the <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compilation_unit" target="_top">compilation unit</a>).
   <em class="replaceable"><code>name</code></em>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>, is mostly useful for documentation and
   interactive debugging since it appears in the printed representation
   of the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a> object, as in
   <code class="computeroutput">#&lt;<a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a> "foo"
    #x0052B060&gt;</code>.
   It is inherited from the given <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a> object when
   available.</dd><dt><a id="validp"></a><span class="term"><code class="code">(<a href="#validp"><code class="function">FFI:VALIDP</code></a> <em class="replaceable"><code>foreign-entity</code></em>)</code><br /></span><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="#validp"><code class="function">FFI:VALIDP</code></a> <em class="replaceable"><code>foreign-entity</code></em>) <em class="replaceable"><code>value</code></em>)</code></span></dt><dd><p>This predicate returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if the <em class="replaceable"><code>foreign-entity</code></em>
  (e.g. the Lisp equivalent of a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>) refers to a pointer
  which is invalid (e.g., because it comes from a previous Lisp session).
  It returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if <em class="replaceable"><code>foreign-entity</code></em> can be used within the current Lisp process
  (thus it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> for all non-foreign arguments).</p><p>You can invalidate a foreign object using
  <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="#validp"><code class="function">FFI:VALIDP</code></a>)</code>.
  You cannot resurrect a zombie, nor can you kill a non-foreign object.
</p></dd><dt><a id="fptr"></a><span class="term"><code class="code">(<a href="#fptr"><code class="function">FFI:FOREIGN-POINTER</code></a> <em class="replaceable"><code>foreign-entity</code></em>)</code></span></dt><dd><a href="#fptr"><code class="function">FFI:FOREIGN-POINTER</code></a> returns the <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a>
   associated with the Lisp object of type <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a>,
   <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a>, <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> or <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a>.
</dd><dt><span class="term"><code class="code">(<a href="#fptr"><code class="function">FFI:SET-FOREIGN-POINTER</code></a> <em class="replaceable"><code>foreign-entity</code></em> {<em class="replaceable"><code>foreign-entity</code></em> |
   <code class="constant">:COPY</code>})</code></span></dt><dd><a href="#fptr"><code class="function">FFI:SET-FOREIGN-POINTER</code></a> changes the
   <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a> associated with the Lisp object of type
   <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a>, <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> or <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a> to
   that of the other entity.
   With <code class="constant">:COPY</code>, a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a> is allocated.
   The original <em class="replaceable"><code>foreign-entity</code></em> still points to the same object and is returned.
   This is particularly useful with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="#validp"><code class="function">FFI:VALIDP</code></a>)</code>,
   see <a href="#ex-dffi-validity" title="Example&#xA0;31.10.&#xA0;Controlling validity of resources">Example 31.10, “Controlling validity of resources”</a>.</dd><dt><a id="foreign-stack"></a><span class="term"><code class="code">(<a href="#foreign-stack"><code class="function">FFI:WITH-FOREIGN-OBJECT</code></a> (<em class="replaceable"><code>variable</code></em> <em class="replaceable"><code>c-type</code></em>
      [<em class="replaceable"><code>initarg</code></em>]) <em class="replaceable"><code>body</code></em>)</code><br /></span><span class="term"><code class="code">(<a href="#foreign-stack"><code class="function">FFI:WITH-C-VAR</code></a> (<em class="replaceable"><code>variable</code></em> <em class="replaceable"><code>c-type</code></em>
      [<em class="replaceable"><code>initarg</code></em>]) <em class="replaceable"><code>body</code></em>)</code></span></dt><dd><p>These forms allocate space on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> execution
  stack, bind respectively a <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> object or
  a local <a href="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html" target="_top"><code class="classname">SYMBOL-MACRO</code></a> to <em class="replaceable"><code>variable</code></em> and execute <em class="replaceable"><code>body</code></em>.</p><p>When <em class="replaceable"><code>initarg</code></em> is not supplied,
  they allocate space only for <code class="code">(<a href="#sizeof"><code class="function">FFI:SIZEOF</code></a>
  <em class="replaceable"><code>c-type</code></em>)</code> bytes.  This space is filled with zeroes.  E.g.,
  using a <em class="replaceable"><code>c-type</code></em> of <a href="#c-string"><span class="type">FFI:C-STRING</span></a> or even <span class="type"><code class="literal">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>
  (<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <span class="type">uint8</span> 32))</code></span> (!) both allocate place
  for a single pointer, initialized to <code class="constant">NULL</code>.</p><p>When <em class="replaceable"><code>initarg</code></em> is supplied, they
  allocate space for an arbitrarily complex set of structures rooted in
  <em class="replaceable"><code>c-type</code></em>.  Therefore, <a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a>, <span class="data"><code class="literal">#()</code></span>
  and <span class="data"><code class="literal">""</code></span> are your friends for creating a
  pointer to the empty arrays:
</p><pre class="programlisting">(with-c-var (v '(c-ptr (c-array-max uint8 32)) #())
  (setf (element (deref v) 0) 127) v)</pre><p>
  <em class="replaceable"><code>c-type</code></em> is evaluated, making creation of variable sized buffers easy:
</p><pre class="programlisting">(with-c-var (fv `(c-array uint8 ,(length my-vector)) my-vector)
  (print fv))</pre><p>
 </p></dd><dt><a id="foreign-value"></a><span class="term"><code class="code">(<a href="#foreign-value"><code class="function">FFI:FOREIGN-VALUE</code></a> <a href="#dffi-make-var"><code class="function">FFI:FOREIGN-VARIABLE</code></a>)</code><br /></span><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="#foreign-value"><code class="function">FFI:FOREIGN-VALUE</code></a> <a href="#dffi-make-var"><code class="function">FFI:FOREIGN-VARIABLE</code></a>) ...)</code></span></dt><dd><p>This functions converts the reference to a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
  data structure which the <a href="#dffi-make-var"><code class="function">FFI:FOREIGN-VARIABLE</code></a> describes, to Lisp. Such a
  reference is typically obtained from <a href="#foreign-heap"><code class="function">FFI:ALLOCATE-SHALLOW</code></a>,
  <a href="#foreign-heap"><code class="function">FFI:ALLOCATE-DEEP</code></a>, <a href="#foreign-heap"><code class="function">FFI:FOREIGN-ALLOCATE</code></a> or via a <code class="code">(<a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>
  <em class="replaceable"><code>c-type</code></em>)</code> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type description.
  Alternatively, macros like <a href="#with-c-place"><code class="function">FFI:WITH-C-PLACE</code></a> or <a href="#foreign-stack"><code class="function">FFI:WITH-C-VAR</code></a> and the
  concept of foreign <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> hide many uses of this function.</p><p>The <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> form performs conversion from Lisp to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>,
  following to the <a href="#dffi-make-var"><code class="function">FFI:FOREIGN-VARIABLE</code></a>'s type description.
</p></dd><dt><a id="foreign-stack-string"></a><span class="term"><code class="code">(<a href="#foreign-stack-string"><code class="function">FFI:WITH-FOREIGN-STRING</code></a>
   (<em class="replaceable"><code>foreign-address</code></em> <em class="replaceable"><code>char-count</code></em>
    <em class="replaceable"><code>byte-count</code></em> <em class="replaceable"><code>string</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <em class="replaceable"><code>encoding</code></em> <em class="replaceable"><code>null-terminated-p</code></em>
    <em class="replaceable"><code>start</code></em> <em class="replaceable"><code>end</code></em>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <em class="replaceable"><code>body</code></em>)</code></span></dt><dd><p>This forms converts a Lisp <em class="replaceable"><code>string</code></em> according to
   the <em class="replaceable"><code>encoding</code></em>, allocating space on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> execution stack.
   <em class="replaceable"><code>encoding</code></em> can be any <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a>, e.g. <a href="#charset-UTF-16"><code class="constant">CHARSET:UTF-16</code></a> or <a href="#charset-UTF-8"><code class="constant">CHARSET:UTF-8</code></a>,
   whereas <a href="impnotes.html#foreign-enc" class="olink"><code class="varname">CUSTOM:*FOREIGN-ENCODING*</code></a> must be an <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a>-compatible encoding.
   </p><p><em class="replaceable"><code>body</code></em> is then executed with the three variables <em class="replaceable"><code>foreign-address</code></em>,
   <em class="replaceable"><code>char-count</code></em> and
   <em class="replaceable"><code>byte-count</code></em> respectively bound to an
   untyped <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a> (as known from the <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> foreign
   type specification) pointing to the stack location, the number of
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s of the Lisp <em class="replaceable"><code>string</code></em> that were considered and the
   number of <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> bytes that were allocated for it on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
   stack.</p><p>When <em class="replaceable"><code>null-terminated-p</code></em> is true,
   which is the default, a variable number of zero bytes is appended,
   depending on the encoding, e.g. 2 for <a href="#charset-UTF-16"><code class="constant">CHARSET:UTF-16</code></a>,
   and accounted for in <em class="replaceable"><code>byte-count</code></em>,
   and <em class="replaceable"><code>char-count</code></em> is incremented by one.</p><p>The <a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a> object bound to <em class="replaceable"><code>foreign-address</code></em> is
   invalidated upon the exit from the form.</p><p>A stupid example (a quite costly interface
   to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/mblen.html"><code class="function">mblen</code></a>):
</p><pre class="programlisting">(with-foreign-string (fv elems bytes string
                      :encoding charset:jis... :null-terminated-p nil
                      :end 5)
 (declare (ignore fv elems))
 (format t "This string would take ~D bytes." bytes))</pre><p>
</p></dd><dt><a id="c-type-parse"></a><span class="term"><code class="code">(<a href="#c-type-parse"><code class="function">FFI:PARSE-C-TYPE</code></a> <em class="replaceable"><code>c-type</code></em>)</code><br /></span><span class="term"><code class="code">(<a href="#c-type-parse"><code class="function">FFI:DEPARSE-C-TYPE</code></a> <em class="replaceable"><code>c-type-internal</code></em>)</code></span></dt><dd><p>Convert between the external (<a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>) and internal
   (<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>) <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type representations (used by <a href="impnotes.html#describe" class="olink"><code class="function">DESCRIBE</code></a>).
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Although you can memoize a <em class="replaceable"><code>c-type-internal</code></em> (see
    <a href="#memoized" title="30.11.3.&#xA0;Macro EXT:MEMOIZED">Section 30.11.3, “Macro <code class="function">EXT:MEMOIZED</code>”</a> - but do not expect type redefinitions to
    work across memoization!), you cannot serialize it (write to
    disk) because deserialization loses object identity.</p></div></dd><dt><a id="foreign-heap"></a><span class="term"><code class="code">(<a href="#foreign-heap"><code class="function">FFI:ALLOCATE-SHALLOW</code></a>
   <em class="replaceable"><code>c-type</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:COUNT</code> <code class="constant">:READ-ONLY</code>)</code><br /></span><span class="term"><code class="code">(<a href="#foreign-heap"><code class="function">FFI:ALLOCATE-DEEP</code></a> <em class="replaceable"><code>c-type</code></em> <em class="replaceable"><code>contents</code></em>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:COUNT</code> <code class="constant">:READ-ONLY</code>)</code><br /></span><span class="term"><code class="code">(<a href="#foreign-heap"><code class="function">FFI:FOREIGN-FREE</code></a> <em class="replaceable"><code>foreign-entity</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :FULL)</code><br /></span><span class="term"><code class="code">(<a href="#foreign-heap"><code class="function">FFI:FOREIGN-ALLOCATE</code></a> <em class="replaceable"><code>c-type-internal</code></em>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :INITIAL-CONTENTS <code class="constant">:COUNT</code> <code class="constant">:READ-ONLY</code>)</code></span></dt><dd><p>Macro <a href="#foreign-heap"><code class="function">FFI:ALLOCATE-SHALLOW</code></a> allocates
   <code class="code">(<a href="#sizeof"><code class="function">FFI:SIZEOF</code></a> <em class="replaceable"><code>c-type</code></em>)</code>
   bytes on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> heap and zeroes them out
   (like <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/calloc.html"><code class="function">calloc</code></a>).
   When <code class="constant">:COUNT</code> is supplied, <em class="replaceable"><code>c-type</code></em> is substituted with
   <span class="type"><code class="literal">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <em class="replaceable"><code>c-type</code></em> <em class="replaceable"><code>count</code></em>)</code></span>,
   except when <em class="replaceable"><code>c-type</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>, in which case
   <span class="type"><code class="literal">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> <em class="replaceable"><code>count</code></em>)</code></span>
   is used instead.
   When <code class="constant">:READ-ONLY</code> is supplied, the Lisp side is prevented from modifying the
   memory contents.  This can be used as an indication that some foreign
   side is going to fill this memory
   (e.g. via <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/read.html"><code class="function">read</code></a>).</p><p>Returns a <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> object of the actual <em class="replaceable"><code>c-type</code></em>,
   whose address part points to the newly allocated memory.</p><p><a href="#foreign-heap"><code class="function">FFI:ALLOCATE-DEEP</code></a> will call <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"><code class="function">malloc</code></a> as many times
   as necessary to build a structure on the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> heap of the given
   <em class="replaceable"><code>c-type</code></em>, initialized from the given <em class="replaceable"><code>contents</code></em>.</p><p>E.g., <code class="code">(<a href="#foreign-heap"><code class="function">FFI:ALLOCATE-DEEP</code></a> '<a href="#c-string"><span class="type">FFI:C-STRING</span></a> "ABCDE")</code>
    performs 2 allocations: one for a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> pointer to a string,
    another for the contents of that string.  This would be useful in
    conjunction with a <span class="type">char**</span> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type
    declaration.  <code class="code">(<a href="#foreign-heap"><code class="function">FFI:ALLOCATE-SHALLOW</code></a> '<a href="#c-string"><span class="type">FFI:C-STRING</span></a>)</code>
    allocates room for a single pointer (probably 4 bytes).</p><p><code class="code">(<a href="#foreign-heap"><code class="function">FFI:ALLOCATE-DEEP</code></a> '<a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> "ABCDEF" :count
    10)</code> allocates and initializes room for the type <span class="type"><code class="literal">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> 10)</code></span>,
    corresponding to <span class="type">char*</span> or, more specifically,
   <span class="type">char[10]</span> in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>.</p><p>Function <a href="#foreign-heap"><code class="function">FFI:FOREIGN-FREE</code></a> deallocates memory at the address
   held by the given <em class="replaceable"><code>foreign-entity</code></em>. If <code class="constant">:FULL</code> is supplied
   and the argument is of type <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a>, recursively frees
   the whole complex structure pointed to by this variable.</p><p>If given a <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><code class="classname">FFI:FOREIGN-FUNCTION</code></a> object that corresponds to a
   <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> callback, deallocates it.  Callbacks are automatically
   created each time you pass a Lisp function via the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.</p><p>Use <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="#validp"><code class="function">FFI:VALIDP</code></a>)</code> to disable further
   references to this address from Lisp.  This is currently not done
   automatically.  If the given pointer is already invalid,
   <a href="#foreign-heap"><code class="function">FFI:FOREIGN-FREE</code></a> (currently) <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>. This may change to
   make it easier to integrate with <a href="#final" title="30.8.&#xA0;Finalization"><code class="function">EXT:FINALIZE</code></a>.</p><p>Function <a href="#foreign-heap"><code class="function">FFI:FOREIGN-ALLOCATE</code></a> is a lower-level interface as it
   requires an internal <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type descriptor as returned by
   <a href="#c-type-parse"><code class="function">FFI:PARSE-C-TYPE</code></a>.</p></dd><dt><a id="with-c-place"></a><span class="term"><code class="code">(<a href="#with-c-place"><code class="function">FFI:WITH-C-PLACE</code></a> (<em class="replaceable"><code>variable</code></em> <em class="replaceable"><code>foreign-entity</code></em>)
   <em class="replaceable"><code>body</code></em>)</code></span></dt><dd><p>Create a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> out of the given <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a>
  object so operations on places (e.g. <a href="#cast"><code class="function">FFI:CAST</code></a>, <a href="#deref"><code class="function">FFI:DEREF</code></a>, <a href="#slot"><code class="function">FFI:SLOT</code></a> etc.) can
  be used within <em class="replaceable"><code>body</code></em>.  <a href="#foreign-stack"><code class="function">FFI:WITH-C-VAR</code></a> appears as a composition of
  <a href="#foreign-stack"><code class="function">FFI:WITH-FOREIGN-OBJECT</code></a> and <a href="#with-c-place"><code class="function">FFI:WITH-C-PLACE</code></a>.</p><p>Such a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> can be used to access memory referenced by a <em class="replaceable"><code>foreign-entity</code></em>
  object:
  </p><pre class="programlisting">(setq foo (allocate-deep '(c-array uint8 3) rgb))
(with-c-place (place foo) (element place 0))</pre><p>
</p></dd><dt><a id="ffi-extern-output"></a><span class="term"><a href="#ffi-extern-output"><code class="varname">FFI:*OUTPUT-C-FUNCTIONS*</code></a><br /></span><span class="term"><code class="varname">FFI:*OUTPUT-C-VARIABLES*</code></span></dt><dd><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will write the <span class="type">extern</span>
   declarations for foreign functions (defined with <a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a>) and
   foreign variables (defined with <a href="#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a>) into the output <code class="filename">#P".c"</code>
   (when the Lisp file is compiled with <a href="impnotes.html#compilefile" class="olink"><code class="function">COMPILE-FILE</code></a>)
   <span class="emphasis"><em>unless</em></span> these variables are <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
   They are <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> by default, so the <span class="type">extern</span>
   declarations are <span class="strong"><strong>not</strong></span> written; you are encouraged to use
   <a href="#c-lines"><code class="function">FFI:C-LINES</code></a> to include the appropriate <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> headers.
   Set these variables to non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if the headers are not available or
   not usable.</dd><dt><a id="ffi-guard"></a><span class="term"><a href="#ffi-guard"><code class="varname">FFI:*FOREIGN-GUARD*</code></a></span></dt><dd><p>When this variable is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> at <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compile_time" target="_top">compile time</a>,
  <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will guard the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> statements in the output file with
  <a href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span><strong class="command">cpp</strong></span></a> conditionals to take advantage of <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/autoconf/" target="_top">autoconf</a> feature detection.
  E.g., </p><pre class="programlisting">
(eval-when (compile) (setq *foreign-guard* t))
(def-call-out some-function (:name "function_name") ...)
</pre><p> will produce </p><pre class="programlisting">
# if defined(HAVE_FUNCTION_NAME)
  register_foreign_function((void*)&amp;function_name,"function_name",1024);
# endif
</pre><p> and will compile and link on any system.</p><p>This is mostly useful for product delivery when you want your
  module to build on any system even if some features will not be
  available.</p><p><a href="#ffi-guard"><code class="varname">FFI:*FOREIGN-GUARD*</code></a> is initialized to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> for backwards compatibility.
</p></dd></dl></div><div class="variablelist"><a id="dffi-low"></a><p class="title"><b>Low-level <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms</b></p><dl><dt><a id="memory-as"></a><span class="term"><code class="code">(<a href="#memory-as"><code class="function">FFI:MEMORY-AS</code></a> <em class="replaceable"><code>foreign-address</code></em> <em class="replaceable"><code>c-type-internal</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
   <em class="replaceable"><code>offset</code></em>)</code><br /></span><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="#memory-as"><code class="function">FFI:MEMORY-AS</code></a> <em class="replaceable"><code>foreign-address</code></em> <em class="replaceable"><code>c-type-internal</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
   <em class="replaceable"><code>offset</code></em>) <em class="replaceable"><code>value</code></em>)</code></span></dt><dd><p>This accessor is useful when operating with untyped
   foreign pointers (<a href="#faddr"><code class="classname">FFI:FOREIGN-ADDRESS</code></a>) as opposed to typed ones
   (represented by <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a>).  It allows to type and
   dereference the given pointer without the need to create an object of
   type <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a>.</p><p>Alternatively, one could use <code class="code">(<a href="#foreign-value"><code class="function">FFI:FOREIGN-VALUE</code></a>
    (<a href="#dffi-make-var"><code class="function">FFI:FOREIGN-VARIABLE</code></a> <em class="replaceable"><code>foreign-entity</code></em> <em class="replaceable"><code>c-type-internal</code></em>))</code>
   (also <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>able).</p><p>Note that <em class="replaceable"><code>c-type-internal</code></em> is the <span class="emphasis"><em>internal</em></span>
   representation of a foreign type, thus <a href="#c-type-parse"><code class="function">FFI:PARSE-C-TYPE</code></a> is required
   with literal names or types, e.g. <code class="code">(<a href="#memory-as"><code class="function">FFI:MEMORY-AS</code></a> <em class="replaceable"><code>foreign-address</code></em>
    (<a href="#c-type-parse"><code class="function">FFI:PARSE-C-TYPE</code></a> '(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> uint8 3)))</code> or <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>
    (<a href="#memory-as"><code class="function">FFI:MEMORY-AS</code></a> <em class="replaceable"><code>foreign-address</code></em> (<a href="#c-type-parse"><code class="function">FFI:PARSE-C-TYPE</code></a> 'uint32)) 0)</code>.</p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-types"></a>31.3.3. (Foreign) <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types</h3></div></div></div><p>Foreign <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types are used in the <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.
They are <span class="strong"><strong>not</strong></span> regular <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> types or <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> classes.</p><p>A <em class="replaceable"><code>c-type</code></em> is either a predefined <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type or the name of a
 type defined by <a href="#def-c-type"><code class="function">FFI:DEF-C-TYPE</code></a>.</p><div class="variablelist"><p class="title"><b>the predefined <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types (<em class="replaceable"><code>c-type</code></em>)</b></p><dl><dt><a id="simple-c-type"></a><span class="term"><em class="replaceable"><code>simple-c-type</code></em></span></dt><dd><p>the simple <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types
  </p><div class="informaltable"><a id="simple-c-type-tab"></a><table border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center">Lisp name</th><th align="center">Lisp equivalent</th><th align="center"><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> equivalent</th><th align="center"><a href="http://www2.parc.com/istl/projects/ILU/" target="_top"><acronym class="acronym" title="Inter-Language Unification">ILU</acronym></a> equivalent</th><th align="center">Comment</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td><td align="center"><span class="type">void</span></td><td align="center"> </td><td align="center">as a result type only</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a></td><td align="center"><span class="type">int</span></td><td align="center"><span class="type">BOOLEAN</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a></td><td align="center"><span class="type">char</span></td><td align="center"><span class="type">SHORT CHARACTER</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">char</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></td><td align="center"><span class="type">signed char</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uchar</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></td><td align="center"><span class="type">unsigned char</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">short</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></td><td align="center"><span class="type">short</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">ushort</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></td><td align="center"><span class="type">unsigned short</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">int</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></td><td align="center"><span class="type">int</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></td><td align="center"><span class="type">unsigned int</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">long</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></td><td align="center"><span class="type">long</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">ulong</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></td><td align="center"><span class="type">unsigned long</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint8</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span></td><td align="center"><span class="type">uint8</span></td><td align="center"><span class="type">BYTE</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">sint8</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span></td><td align="center"><span class="type">sint8</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint16</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 16)</code></span></td><td align="center"><span class="type">uint16</span></td><td align="center"><span class="type">SHORT CARDINAL</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">sint16</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 16)</code></span></td><td align="center"><span class="type">sint16</span></td><td align="center"><span class="type">SHORT INTEGER</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint32</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 32)</code></span></td><td align="center"><span class="type">uint32</span></td><td align="center"><span class="type">CARDINAL</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">sint32</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 32)</code></span></td><td align="center"><span class="type">sint32</span></td><td align="center"><span class="type">INTEGER</span></td><td class="auto-generated"> </td></tr><tr><td align="center"><span class="type">uint64</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 64)</code></span></td><td align="center"><span class="type">uint64</span></td><td align="center"><span class="type">LONG CARDINAL</span></td><td align="center">does not work on all platforms</td></tr><tr><td align="center"><span class="type">sint64</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 64)</code></span></td><td align="center"><span class="type">sint64</span></td><td align="center"><span class="type">LONG INTEGER</span></td><td align="center">does not work on all platforms</td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a></td><td align="center"><span class="type">float</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a></td><td align="center"><span class="type">double</span></td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr></tbody></table></div></dd><dt><a id="c-pointer"></a><span class="term"><a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a></span></dt><dd>This type corresponds to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
   <span class="type">void*</span>, an opaque pointer.
   When used as an argument, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> is accepted as a <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> and
   treated as <code class="constant">NULL</code>; when a function wants to return a <code class="constant">NULL</code>
   <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>, it actually returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
</dd><dt><span class="term"><span class="type"><code class="literal">(<a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>
  <em class="replaceable"><code>c-type</code></em>)</code></span></span></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><code>c-type</code></em> *</span>: a pointer to a single item of the given
  <em class="replaceable"><code>c-type</code></em>. It differs from <span class="type"><code class="literal">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a>
  <em class="replaceable"><code>c-type</code></em>)</code></span> (see below) in that no conversion to and from
  Lisp will occur (beyond the usual one of the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> <code class="constant">NULL</code> pointer
  to or from Lisp <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>). Instead, an object of type <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a>
  is used to represent the foreign place. It is assimilable to a typed
  pointer.</dd><dt><a id="c-string"></a><span class="term"><a href="#c-string"><span class="type">FFI:C-STRING</span></a></span></dt><dd>This type corresponds to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type">char*</span>, a zero-terminated string.  Its Lisp equivalent is
  a string, without the trailing zero character.
 </dd><dt><a id="c-struct"></a><span class="term"><span class="type"><code class="literal">(<a href="#c-struct"><span class="type">FFI:C-STRUCT</span></a>
  <em class="replaceable"><code>class</code></em> (<em class="replaceable"><code>ident<sub>1</sub></code></em>
   <em class="replaceable"><code>c-type<sub>1</sub></code></em>) ...
  (<em class="replaceable"><code>ident<sub>n</sub></code></em>
   <em class="replaceable"><code>c-type<sub>n</sub></code></em>))</code></span></span></dt><dd><p>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
 <span class="type">struct { <em class="replaceable"><code>c-type<sub>1</sub></code></em>
 <em class="replaceable"><code>ident<sub>1</sub></code></em>; ...;
 <em class="replaceable"><code>c-type<sub>n</sub></code></em>
 <em class="replaceable"><code>ident<sub>n</sub></code></em>; }</span>.
 Its Lisp equivalent is: if <em class="replaceable"><code>class</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>, a
 <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a>; if <em class="replaceable"><code>class</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>, a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list" target="_top">proper list</a>;
 if <em class="replaceable"><code>class</code></em> is a symbol naming a structure or <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> class, an
 instance of this class, with slots of names
 <em class="replaceable"><code>ident<sub>1</sub></code></em>, ...,
 <em class="replaceable"><code>ident<sub>n</sub></code></em>.</p><p>
 <em class="replaceable"><code>class</code></em> may also be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a> of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a> (as above) and
 a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of <a href="#def-c-struct"><code class="function">FFI:DEF-C-STRUCT</code></a> options.
 </p></dd><dt><a id="c-union"></a><span class="term"><span class="type"><code class="literal">(<a href="#c-union"><span class="type">FFI:C-UNION</span></a>
  (<em class="replaceable"><code>ident<sub>1</sub></code></em>
   <em class="replaceable"><code>c-type<sub>1</sub></code></em>) ...
  (<em class="replaceable"><code>ident<sub>n</sub></code></em>
   <em class="replaceable"><code>c-type<sub>n</sub></code></em>))</code></span></span></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type">union { <em class="replaceable"><code>c-type<sub>1</sub></code></em>
  <em class="replaceable"><code>ident<sub>1</sub></code></em>; ...;
  <em class="replaceable"><code>c-type<sub>n</sub></code></em>
  <em class="replaceable"><code>ident<sub>n</sub></code></em>;
  }</span>.
  Conversion to and from Lisp assumes that a value is to be viewed as
  being of <em class="replaceable"><code>c-type<sub>1</sub></code></em>.
 </dd><dt><a id="c-array"></a><span class="term"><span class="type"><code class="literal">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a>
   <em class="replaceable"><code>c-type</code></em> <em class="replaceable"><code>dim<sub>1</sub></code></em>)</code></span><br /></span><span class="term"><span class="type"><code class="literal">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a>
   <em class="replaceable"><code>c-type</code></em> (<em class="replaceable"><code>dim<sub>1</sub></code></em> ...
   <em class="replaceable"><code>dim<sub>n</sub></code></em>))</code></span></span></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><code>c-type</code></em> [<em class="replaceable"><code>dim<sub>1</sub></code></em>]
  ... [<em class="replaceable"><code>dim<sub>n</sub></code></em>]</span>.
  Note that when an array is passed as an argument to a function in
  <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, it is actually passed as a pointer; you therefore have to
  write <span class="type"><code class="literal">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> (<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> ...))</code></span> for this
  argument's type.</dd><dt><a id="c-array-max"></a><span class="term"><span class="type"><code class="literal">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a>
  <em class="replaceable"><code>c-type</code></em> <em class="replaceable"><code>maxdimension</code></em>)</code></span></span></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><code>c-type</code></em> [<em class="replaceable"><code>maxdimension</code></em>]</span>, an array containing up to
  <em class="replaceable"><code>maxdimension</code></em> elements.
  The array is zero-terminated if it contains less than <em class="replaceable"><code>maxdimension</code></em> elements.
  Conversion from Lisp of an array with more than <em class="replaceable"><code>maxdimension</code></em> elements
  silently ignores the superfluous elements.
  </dd><dt><a id="c-function"></a><span class="term"><span class="type"><code class="literal">(<a href="#c-function"><span class="type">FFI:C-FUNCTION</span></a> (<code class="constant">:ARGUMENTS</code>
      {(<em class="replaceable"><code>argument</code></em> <em class="replaceable"><code>a-c-type</code></em>
        [<a href="#param-mode" title="31.3.9.&#xA0;Parameter Mode"><em class="replaceable"><code>PARAM-MODE</code></em></a> [<a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a>]])}*)
    (<code class="constant">:RETURN-TYPE</code> <em class="replaceable"><code>r-c-type</code></em> [<a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a>])
    (<a href="#c-flavor" title="31.3.4.&#xA0;The choice of the C flavor"><code class="constant">:LANGUAGE</code></a> <em class="replaceable"><code>language</code></em>))</code></span></span></dt><dd>This type designates a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function that can be
  called according to the given prototype
   <code class="code">(<em class="replaceable"><code>r-c-type</code></em> (*)
    (<em class="replaceable"><code>a-c-type<sub>1</sub></code></em>, ...))</code>.
  Conversion between <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> functions and Lisp functions
  is transparent, and <code class="constant">NULL</code>/<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> is recognized and
  accepted.</dd><dt><a id="c-ptr"></a><span class="term"><span class="type"><code class="literal">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>
              <em class="replaceable"><code>c-type</code></em>)</code></span></span></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><code>c-type</code></em> *</span>: a pointer to a single item of the given
  <em class="replaceable"><code>c-type</code></em>.</dd><dt><a id="c-ptr-null"></a><span class="term"><span class="type"><code class="literal">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> <em class="replaceable"><code>c-type</code></em>)</code></span></span></dt><dd>This type is also equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><code>c-type</code></em> *</span>: a pointer to a single item of the given
  <em class="replaceable"><code>c-type</code></em>, with the exception that <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> <code class="constant">NULL</code> corresponds to
  Lisp <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><a id="c-array-ptr"></a><span class="term"><span class="type"><code class="literal">(<a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a> <em class="replaceable"><code>c-type</code></em>)</code></span></span></dt><dd>This type is equivalent to what <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> calls
  <span class="type"><em class="replaceable"><code>c-type</code></em> (*)[]</span>: a pointer to a zero-terminated array of
  items of the given <em class="replaceable"><code>c-type</code></em>.</dd></dl></div>
<!--#ifdef UNICODE-->
<p>The conversion of <a href="#c-string"><span class="type">FFI:C-STRING</span></a>,
 <span class="type"><code class="literal">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> <em class="replaceable"><code>dim<sub>1</sub></code></em>)</code></span>,
 <span class="type"><code class="literal">(<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a> <em class="replaceable"><code>maxdimension</code></em>)</code></span>,
 <span class="type"><code class="literal">(<a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>)</code></span>
 is governed by <a href="impnotes.html#foreign-enc" class="olink"><code class="varname">CUSTOM:*FOREIGN-ENCODING*</code></a> and dimensions are given
 in <span class="emphasis"><em>bytes</em></span>.
 The conversion of <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>, and as such of
 <span class="type"><code class="literal">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>)</code></span>, or
 <span class="type"><code class="literal">(<a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>)</code></span>, as well as
 that of multi-dimensional arrays <span class="type"><code class="literal">(<a href="#c-array"><span class="type">FFI:C-ARRAY</span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>
 (<em class="replaceable"><code>dim<sub>1</sub></code></em> ... <em class="replaceable"><code>dim<sub>n</sub></code></em>))</code></span>,
 are governed by <a href="impnotes.html#foreign-enc" class="olink"><code class="varname">CUSTOM:*FOREIGN-ENCODING*</code></a> if the latter is a 1:1 encoding, or by the
 <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> encoding otherwise.</p>
<!--#endif-->
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Remember that the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <span class="type">char</span> is
  a <span class="emphasis"><em>numeric</em></span> type and does not use <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>
  <a href="#encoding" title="30.5.&#xA0;Encodings"><code class="classname">EXT:ENCODING</code></a>s.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="c-flavor"></a>31.3.4. The choice of the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> flavor</h3></div></div></div><p><a href="#c-function"><span class="type">FFI:C-FUNCTION</span></a>, <a href="#def-call-in"><code class="function">FFI:DEF-CALL-IN</code></a>, <a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> take a <a href="#c-flavor" title="31.3.4.&#xA0;The choice of the C flavor"><code class="constant">:LANGUAGE</code></a> argument.
The <em class="replaceable"><code>language</code></em> is either <code class="constant">:C</code> (denotes K&amp;R <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>) or <code class="constant">:STDC</code>
(denotes ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>) or <code class="constant">:STDC-STDCALL</code> (denotes ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
with the <span class="emphasis"><em>stdcall</em></span> calling convention).
It specifies whether the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function (caller or callee) has been
compiled by a K&amp;R <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler or by an ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler,
and possibly the calling convention.</p><p>The default language is set using the macro
 <strong class="first"><em class="firstterm"><code class="function">FFI:DEFAULT-FOREIGN-LANGUAGE</code>
  <a id="dflt-ffi-lang" class="indexterm"></a></em></strong>.
 If this macro has not been called in the current <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#compilation_unit" target="_top">compilation unit</a>
 (usually a file), a warning is issued and
<code class="constant">:STDC</code> is used for the rest of the unit.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-variables"></a>31.3.5. Foreign variables</h3></div></div></div><p>Foreign variables are variables whose storage is allocated in the
 foreign language module.
 They can nevertheless be evaluated and modified through <a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a>,
 just as normal variables can, except that the range of allowed values
 is limited according to the variable's foreign type.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>For a foreign variable <em class="replaceable"><code>x</code></em> the form <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a> <em class="replaceable"><code>x</code></em>
   <em class="replaceable"><code>x</code></em>)</code> is not necessarily true, since every time <em class="replaceable"><code>x</code></em> is
  evaluated its foreign value is converted to a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> Lisp value.
  Ergo, <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_aref.html" target="_top"><code class="function">AREF</code></a> <em class="replaceable"><code>x</code></em> <em class="replaceable"><code>n</code></em>) <em class="replaceable"><code>y</code></em>)</code> modifies this
  <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> Lisp value (immediately discarded), <span class="strong"><strong>not</strong></span> the foreign data.
  Use <a href="#element"><code class="function">FFI:ELEMENT</code></a> et al instead,
  see <a href="#dffi-places" title="31.3.6.&#xA0;Operations on foreign places">Section 31.3.6, “Operations on foreign places”</a>.</p></div><p>Foreign variables are defined using <a href="#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a> and <a href="#foreign-stack"><code class="function">FFI:WITH-C-VAR</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-places"></a>31.3.6. Operations on foreign places</h3></div></div></div><p>A <a href="#dffi-variables" title="31.3.5.&#xA0;Foreign variables"><code class="classname">FFI:FOREIGN-VARIABLE</code></a> <em class="replaceable"><code>name</code></em> defined by <a href="#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a>, <a href="#foreign-stack"><code class="function">FFI:WITH-C-VAR</code></a>
 or <a href="#with-c-place"><code class="function">FFI:WITH-C-PLACE</code></a> defines a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>,
 i.e., a form which can also be used as argument to <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>.
 (An "lvalue" in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> terminology.)
 The following operations are available on foreign places:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="#element"><code class="function">FFI:ELEMENT</code></a></td><td><a href="#c-var-addr"><code class="function">FFI:C-VAR-ADDRESS</code></a></td></tr><tr><td><a href="#deref"><code class="function">FFI:DEREF</code></a></td><td><a href="#c-var-object"><code class="function">FFI:C-VAR-OBJECT</code></a></td></tr><tr><td><a href="#slot"><code class="function">FFI:SLOT</code></a></td><td><a href="#typeof"><code class="function">FFI:TYPEOF</code></a></td></tr><tr><td><a href="#cast"><code class="function">FFI:CAST</code></a></td><td><a href="#sizeof"><code class="function">FFI:SIZEOF</code></a></td></tr><tr><td><a href="#offset"><code class="function">FFI:OFFSET</code></a></td><td><a href="#bitsizeof"><code class="function">FFI:BITSIZEOF</code></a></td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-functions"></a>31.3.7. Foreign functions</h3></div></div></div><p>Foreign functions are functions which are defined in the foreign
 language.  There are <strong class="first"><em class="firstterm">named foreign functions</em></strong>
 (imported via <a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> or created via <a href="#def-call-in"><code class="function">FFI:DEF-CALL-IN</code></a>) and
 <strong class="first"><em class="firstterm">anonymous foreign functions</em></strong>; they arise through
 conversion of function pointers.</p><p>A <strong class="first"><em class="firstterm">call-out function</em></strong> is a foreign function
 called from Lisp: control flow temporarily leaves Lisp.
 A <strong class="first"><em class="firstterm">call-in function</em></strong> is a Lisp function called
 from the foreign language: control flow temporary enters Lisp.</p><p>The following operators define foreign functions:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="#def-call-in"><code class="function">FFI:DEF-CALL-IN</code></a></td><td><a href="#dffi-make-func"><code class="function">FFI:FOREIGN-FUNCTION</code></a></td></tr><tr><td><a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a></td><td> </td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="allocation"></a>31.3.8. Argument and result passing conventions</h3></div></div></div><p>When passed to and from functions, allocation of arguments and
 results is handled as follows:</p><p>Values of <a href="#simple-c-type"><em class="replaceable"><code>SIMPLE-C-TYPE</code></em></a>, <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a> are passed on the stack,
 with dynamic extent. The <a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a> is effectively ignored.</p><p>Values of type <a href="#c-string"><span class="type">FFI:C-STRING</span></a>, <a href="#c-ptr"><span class="type">FFI:C-PTR</span></a>, <a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a>, <a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a>
 need storage.  The <a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a> specifies the allocation policy:
</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:NONE</code></span></dt><dd>no storage is allocated.
</dd><dt><span class="term"><code class="constant">:ALLOCA</code></span></dt><dd>allocation of storage on the stack, which has
   dynamic extent.</dd><dt><span class="term"><code class="constant">:MALLOC-FREE</code></span></dt><dd>storage will be allocated via <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"><code class="function">malloc</code></a> and released via
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"><code class="function">free</code></a>.</dd></dl></div><p>If no <a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a> is specified, the default <a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a> is
 <code class="constant">:NONE</code> for most types, but <code class="constant">:ALLOCA</code> for <a href="#c-string"><span class="type">FFI:C-STRING</span></a> and <a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> and
 <a href="#c-ptr-null"><span class="type">FFI:C-PTR-NULL</span></a> and <a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a> and for <code class="constant">:OUT</code> arguments.
 The <code class="constant">:MALLOC-FREE</code> policy provides the ability to pass
 arbitrarily nested structures within a single conversion.</p><p><a id="dffi-allocation-out"></a><b>Call-out function arguments: </b></p><div class="variablelist"><dl><dt><span class="term">For arguments passed from Lisp to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>:</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><code class="constant">:MALLOC-FREE</code></span></dt><dd>Lisp allocates the storage using <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"><code class="function">malloc</code></a> and
     never deallocates it.  The <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function is supposed to call
     <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"><code class="function">free</code></a> when done with it.</dd><dt><span class="term"><code class="constant">:ALLOCA</code></span></dt><dd>Lisp allocates the storage on the stack, with
     dynamic extent.  It is freed when the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function returns.
    </dd><dt><span class="term"><code class="constant">:NONE</code></span></dt><dd><p>Lisp assumes that the pointer already points to a
     valid area of the proper size and puts the result value there.</p><p>This is dangerous and deprecated.</p></dd></dl></div></dd><dt><span class="term">For results passed from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> to Lisp:</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><code class="constant">:MALLOC-FREE</code></span></dt><dd>Lisp calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"><code class="function">free</code></a> on it when done.
    </dd><dt><span class="term"><code class="constant">:NONE</code></span></dt><dd>Lisp does nothing.
    </dd></dl></div></dd></dl></div><p><a id="dffi-allocation-in"></a><b>Call-in function arguments: </b></p><div class="variablelist"><dl><dt><span class="term">For arguments passed from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> to Lisp:</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><code class="constant">:MALLOC-FREE</code></span></dt><dd>Lisp calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"><code class="function">free</code></a> on it when done.
     </dd><dt><span class="term"><code class="constant">:ALLOCA</code><br /></span><span class="term"><code class="constant">:NONE</code></span></dt><dd>Lisp does nothing.
     </dd></dl></div></dd><dt><span class="term">For results passed from Lisp to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>:</span></dt><dd><div class="variablelist"><dl><dt><span class="term"><code class="constant">:MALLOC-FREE</code></span></dt><dd>Lisp allocates the storage using <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"><code class="function">malloc</code></a> and
      never deallocates it.  The <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function is supposed to call
      <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"><code class="function">free</code></a> when done with it.</dd><dt><span class="term"><code class="constant">:NONE</code></span></dt><dd><p>Lisp assumes that the pointer already points to a
     valid area of the proper size and puts the result value there.</p><p>This is dangerous and deprecated.</p></dd></dl></div></dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="ffi-struct-arg"></a>Warning</h3><p>Passing <a href="#c-struct"><span class="type">FFI:C-STRUCT</span></a>, <a href="#c-union"><span class="type">FFI:C-UNION</span></a>,
  <a href="#c-array"><span class="type">FFI:C-ARRAY</span></a>, <a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> values as arguments (not via pointers) is
  only possible to the extent the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler supports it.
  Most <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compilers do it right, but some <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compilers
  (such as <a href="http://gcc.gnu.org/" target="_top"><span><strong class="command">gcc</strong></span></a> on hppa and <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>) have problems with this.
  The recommended workaround is to pass pointers; this is fully supported.
  See also this <code class="email">&lt;<a href="mailto:clisp-list@lists.sourceforge.net">clisp-list@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-list</a>)
  <a href="http://article.gmane.org/gmane.lisp.clisp.devel/10089" target="_top">message</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="param-mode"></a>31.3.9. Parameter Mode</h3></div></div></div><p>A function parameter's <a href="#param-mode" title="31.3.9.&#xA0;Parameter Mode"><em class="replaceable"><code>PARAM-MODE</code></em></a> may be</p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:IN</code> (means: read-only):</span></dt><dd>The caller passes information to the callee.
  </dd><dt><span class="term"><code class="constant">:OUT</code> (means: write-only):</span></dt><dd>The callee passes information back to the caller on
   return.  When viewed as a Lisp function, there is no Lisp argument
   corresponding to this, instead it means an additional return value.
   Requires <a href="#allocation" title="31.3.8.&#xA0;Argument and result passing conventions"><em class="replaceable"><code>ALLOCATION</code></em></a> = <code class="constant">:ALLOCA</code>.</dd><dt><span class="term"><code class="constant">:IN-OUT</code> (means: read-write):</span></dt><dd>Information is passed from the caller to the callee
   and then back to the caller.  When viewed as a Lisp function, the
   <code class="constant">:OUT</code> value is returned as an additional multiple value.
  </dd></dl></div><p>The default is <code class="constant">:IN</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="dffi-examples"></a>31.3.10. Examples</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#dffi-ex-more">31.3.10.1. More examples</a></span></dt></dl></div><div class="example"><a id="dffi-simple"></a><p class="title"><b>Example 31.1. Simple declarations and access</b></p><p>The <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> declaration

</p><pre class="programlisting">
struct foo {
    int a;
    struct foo * b[100];
};
</pre><p>

corresponds to

</p><pre class="programlisting">
(def-c-struct foo
  (a int)
  (b (c-array (c-ptr foo) 100)))
</pre><p>The element access

</p><pre class="programlisting">
struct foo f;
f.b[7].a
</pre><p>

corresponds to

</p><pre class="programlisting">
(declare (type foo f))
(foo-a (aref (foo-b f) 7)) or (slot-value (aref (slot-value f 'b) 7) 'a)
</pre></div><div class="example"><a id="dffi-extern-var"></a><p class="title"><b>Example 31.2. external <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> variable and some accesses</b></p><pre class="programlisting">
struct bar {
    short x, y;
    char a, b;
    int z;
    struct bar * n;
};

extern struct bar * my_struct;

my_struct-&gt;x++;
my_struct-&gt;a = 5;
my_struct = my_struct-&gt;n;
</pre><p>

corresponds to

</p><pre class="programlisting">
(def-c-struct bar
  (x short)
  (y short)
  (a char)
  (b char) ; or (b character) if it represents a character, not a number
  (z int)
  (n (c-ptr bar)))

(def-c-var my_struct (:type (c-ptr bar)))

(setq my_struct (let ((s my_struct)) (incf (slot-value s 'x)) s))
or (incf (slot my_struct 'x))
(setq my_struct (let ((s my_struct)) (setf (slot-value s 'a) 5) s))
or (setf (slot my_struct 'a) 5)
(setq my_struct (slot-value my_struct 'n))
or (setq my_struct (deref (slot my_struct 'n)))
</pre></div><div class="example"><a id="dffi-extern-func1"></a><p class="title"><b>Example 31.3. Calling an external function</b></p><p>On ANSI <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> systems, <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/stdlib.h.html">&lt;<code class="filename">stdlib.h</code>&gt;</a>
 contains the declarations:

</p><pre class="programlisting">
typedef struct {
  int quot;   /* Quotient */
  int rem;    /* Remainder */
} div_t;
extern div_t div (int numer, int denom);
</pre><p>

This translates to

</p><pre class="programlisting">
(def-c-struct (div_t :typedef)
  (quot int)
  (rem int))
(default-foreign-language :stdc)
(def-call-out div (:arguments (numer int) (denom int))
  (:return-type div_t))
</pre><p>

Sample call from within Lisp (after running <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a>):

</p><pre class="programlisting">
(div 20 3)
⇒ <code class="computeroutput">#S(DIV_T :QUOT 6 :REM 2)</code>
</pre></div><div class="example"><a id="dffi-extern-func2"></a><p class="title"><b>Example 31.4. Another example for calling an external function</b></p><p>Suppose the following is defined in a file
 <code class="filename">cfun.c</code>:

</p><pre class="programlisting">
struct cfunr { int x; char *s; };
struct cfunr * cfun (int i,char *s,struct cfunr * r,int a[10]) {
  int j;
  struct cfunr * r2;
  printf("i = %d\n", i);
  printf("s = %s\n", s);
  printf("r-&gt;x = %d\n", r-&gt;x);
  printf("r-&gt;s = %s\n", r-&gt;s);
  for (j = 0; j &lt; 10; j++) printf("a[%d] = %d.\n", j, a[j]);
  r2 = (struct cfunr *) malloc (sizeof (struct cfunr));
  r2-&gt;x = i+5;
  r2-&gt;s = "A C string";
  return r2;
}
</pre><p>

It is possible to call this function from Lisp using the file
<code class="filename">callcfun.lisp</code> (do not call it
<code class="filename">cfun.lisp</code> - <a href="impnotes.html#compilefile" class="olink"><code class="function">COMPILE-FILE</code></a> will
<a href="#c-file-overwrite">overwrite</a>
<code class="filename">cfun.c</code>) whose contents is:

</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> "TEST-C-CALL" (:use <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><code class="function">IN-PACKAGE</code></a> "TEST-C-CALL")
(eval-when (compile) (setq <a href="#ffi-extern-output"><code class="varname">FFI:*OUTPUT-C-FUNCTIONS*</code></a> t))
(def-c-struct cfunr (x int) (s c-string))
(default-foreign-language :stdc)
(def-call-out cfun
    (:arguments (i int)
                (s c-string)
                (r (c-ptr cfunr) :in :alloca)
                (a (c-ptr (c-array int 10)) :in :alloca))
  (:return-type (c-ptr cfunr)))
(defun call-cfun ()
  (cfun 5 "A Lisp string" (make-cfunr :x 10 :s "Another Lisp string")
        '#(0 1 2 3 4 5 6 7 8 9)))
</pre><p>

Use the <a href="#modules" title="31.2.&#xA0;External Modules">module</a> facility:

</p><pre class="screen">
<code class="prompt">$</code> <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> create-module-set cfun callcfun.c
<code class="prompt">$</code> cc -O -c cfun.c
<code class="prompt">$</code> cd cfun
<code class="prompt">$</code> ln -s ../cfun.o cfun.o
Add cfun.o to NEW_LIBS and NEW_FILES in <a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a>.
<code class="prompt">$</code> cd ..
<code class="prompt">$</code> base/lisp.run -M base/lispinit.mem -c callcfun.lisp
<code class="prompt">$</code> <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> add-module-set cfun base base+cfun
<code class="prompt">$</code> base+cfun/lisp.run -M base+cfun/lispinit.mem -i callcfun
&gt; (test-c-call::call-cfun)
i = 5
s = A Lisp string
r-&gt;x = 10
r-&gt;s = Another Lisp string
a[0] = 0.
a[1] = 1.
a[2] = 2.
a[3] = 3.
a[4] = 4.
a[5] = 5.
a[6] = 6.
a[7] = 7.
a[8] = 8.
a[9] = 9.
#S(TEST-C-CALL::CFUNR :X 10 :S "A C string")
&gt;
<code class="prompt">$</code> rm -r base+cfun
</pre><p>Note that there is a memory leak here: The return value
<code class="varname">r2</code> of <code class="function">cfun()</code> is
<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"><code class="function">malloc</code></a>ed but never <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"><code class="function">free</code></a>d. Specifying</p><pre class="programlisting">
(:return-type (c-ptr cfunr) :malloc-free)
</pre><p>
is not an alternative because this would also
<code class="function">free(r2-&gt;x)</code> but <code class="varname">r2-&gt;x</code> is a
pointer to static data.</p><p>The memory leak can be avoided using
</p><pre class="programlisting">
(:return-type (c-pointer cfunr))
</pre><p>
instead, in conjunction with
</p><pre class="programlisting">
(defun call-cfun ()
  (let ((data (cfun ...)))
    (prog1 (<a href="#foreign-value"><code class="function">FFI:FOREIGN-VALUE</code></a> data)
      (<a href="#foreign-heap"><code class="function">FFI:FOREIGN-FREE</code></a> data :FULL nil))))
</pre></div><div class="example"><a id="dffi-ex-macro"></a><p class="title"><b>Example 31.5. Accessing <a href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span><strong class="command">cpp</strong></span></a> macros</b></p><p>Suppose you are interfacing to a library <code class="filename">mylib.so</code>
 which defines macros and <code class="literal">inline</code> functions
 in <code class="filename">mylib.h</code>:</p><pre class="programlisting">
#define FOO(x)  .....
inline int bar (int x) { ... }
</pre><p>
 To make them available from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, write these forms into the lisp
 file <code class="filename">my.lisp</code>:</p><pre class="programlisting">
(<a href="#c-lines"><code class="function">FFI:C-LINES</code></a> "#include &lt;mylib.h&gt;
int my_foo (int x) { return FOO(x); }
int my_bar (int x) { return bar(x); }~%")
(<a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> my-foo (:name "my_foo") (:arguments (x int)) (:return-type int))
(<a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> my-bar (:name "my_bar") (:arguments (x int)) (:return-type int))
</pre><p>Compiling this file will produce <code class="filename">my.c</code>
 and <code class="filename">my.fas</code> and you have two options:
 </p><div class="orderedlist"><ol type="1"><li><p>Compile <code class="filename">my.c</code>
    into <code class="filename">my.o</code> with </p><pre class="screen">
<code class="prompt">$</code> gcc -c my.c -lmylib
</pre><p> and use <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> to create a new <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a>.
  </p></li><li><p>Add <code class="code">(:library "my.dll")</code> to the
    <a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> forms, compile <code class="filename">my.c</code>
    into <code class="filename">my.so</code> (or <code class="filename">my.dll</code> on
    <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>) with </p><pre class="screen">
<code class="prompt">$</code> gcc -shared -o my.so my.c -lmylib
</pre><p> and load <code class="filename">my.fas</code>.
</p></li></ol></div><p>Of course, you could have created <code class="filename">my1.c</code>
 containing</p><pre class="programlisting">
#include &lt;mylib.h&gt;
int my_foo (int x) { return FOO(x); }
int my_bar (int x) { return bar(x); }
</pre><p>manually, but <a href="#c-lines"><code class="function">FFI:C-LINES</code></a> allows you to keep the
 definitions of <code class="function">my_foo</code> and <code class="function">my-foo</code>
 close together for easier maintenance.</p></div><div class="example"><a id="ex-call-in"></a><p class="title"><b>Example 31.6. Calling Lisp from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a></b></p><p>To sort an array of double-floats using the Lisp function <a href="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html" target="_top"><code class="function">SORT</code></a>
 instead of the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> library function
 <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/qsort.html"><code class="function">qsort</code></a>, one can use the
 following interface code <code class="filename">sort1.c</code>.
 The main problem is to pass a variable-sized array.

</p><pre class="programlisting">
extern void lispsort_begin (int);
void* lispsort_function;
void lispsort_double (int n, double * array) {
    double * sorted_array;
    int i;
    lispsort_begin(n); /* store #'sort2 in lispsort_function */
    sorted_array = ((double * (*) (double *)) lispsort_function) (array);
    for (i = 0; i &lt; n; i++) array[i] = sorted_array[i];
    free(sorted_array);
}
</pre><p>

This is accompanied by <code class="filename">sort2.lisp</code>:

</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> "FFI-TEST" (:use <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><code class="function">IN-PACKAGE</code></a> "FFI-TEST")
(eval-when (compile) (setq <a href="#ffi-extern-output"><code class="varname">FFI:*OUTPUT-C-FUNCTIONS*</code></a> t))
(def-call-in lispsort_begin (:arguments (n int))
  (:return-type nil)
  (:language :stdc))
(def-c-var lispsort_function (:type c-pointer))
(defun lispsort_begin (n)
  (setf (cast lispsort_function
              `(c-function
                 (:arguments (v (c-ptr (c-array double-float ,n))))
                 (:return-type (c-ptr (c-array double-float ,n))
                               :malloc-free)))
        #'sort2))
(defun sort2 (v)
  (declare (type vector v))
  (sort v #'&lt;))
</pre><p>

To test this, use the following test file <code class="filename">sorttest.lisp</code>:

</p><pre class="programlisting">
(eval-when (compile) (setq <a href="#ffi-extern-output"><code class="varname">FFI:*OUTPUT-C-FUNCTIONS*</code></a> t))
(def-call-out sort10
  (:name "lispsort_double")
  (:language :stdc)
  (:arguments (n int)
              (array (c-ptr (c-array double-float 10)) :in-out)))
</pre><p>

Now try

</p><pre class="screen">
<code class="prompt">$</code> <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> create-module-set sort sort2.c sorttest.c
<code class="prompt">$</code> cc -O -c sort1.c
<code class="prompt">$</code> cd sort
<code class="prompt">$</code> ln -s ../sort1.o sort1.o
</pre><p>

Add <code class="filename">sort1.o</code> to <code class="envar">NEW_LIBS</code>
and <code class="envar">NEW_FILES</code> in <a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a>.
Create a file <code class="filename">package.lisp</code> containing the form
</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_make-package.html" target="_top"><code class="function">MAKE-PACKAGE</code></a> "FFI-TEST" :use '(<a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>))</pre><p>
and add <code class="filename">package.lisp</code> to <a href="#mod-preload"><code class="envar">TO_PRELOAD</code></a> in <a href="impnotes.html#modset" class="olink"><span><strong class="command">link.sh</strong></span></a>.
Proceed:

</p><pre class="screen">
<code class="prompt">$</code> cd ..
<code class="prompt">$</code> base/lisp.run -M base/lispinit.mem -c sort2.lisp sorttest.lisp
<code class="prompt">$</code> <a href="#mod-overview" title="31.2.1.&#xA0;Overview"><span><strong class="command">clisp-link</strong></span></a> add-module-set sort base base+sort
<code class="prompt">$</code> base+sort/lisp.run -M base+sort/lispinit.mem -i sort2 sorttest
&gt; (sort10 10 '#(0.501d0 0.528d0 0.615d0 0.550d0 0.711d0
                0.523d0 0.585d0 0.670d0 0.271d0 0.063d0))
#(0.063d0 0.271d0 0.501d0 0.523d0 0.528d0 0.55d0 0.585d0 0.615d0 0.67d0 0.711d0)
<code class="prompt">$</code> rm -r base+sort
</pre></div><div class="example"><a id="ex-call-in-dll"></a><p class="title"><b>Example 31.7. Calling Lisp from <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> dynamically</b></p><p>Create a dynamic library <code class="filename">lispdll</code>
 (<code class="filename">#P".dll"</code> on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>,
  <code class="filename">#P".so"</code> on <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>)
  with the following function:</p><pre class="programlisting">
typedef int (*LispFunc)(int parameter);
int CallInFunc(LispFunc f) {
  return f(5)+11;
}
</pre><p>
  and call it from Lisp:
  </p><pre class="programlisting">
(ffi:def-call-out callout
  (:name "CallInFunc")
  (:library "lispdll.dll")
  (:arguments (function-arg
               (ffi:c-function (:arguments (number ffi:int))
                               (:return-type ffi:int) (:language :stdc))))
  (:return-type ffi:int)
  (:language :stdc))
(defun f (x) (* x 2))
⇒ <code class="computeroutput">F</code>
(callout #'f)
⇒ <code class="computeroutput">21</code>
</pre></div><div class="example"><a id="dffi-gethostname"></a><p class="title"><b>Example 31.8. Variable size arguments:
  calling <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostname.html"><code class="function">gethostname</code></a> from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></b></p><div class="funcsynopsis"><a id="gethostname-synopsis"></a><p><code class="funcdef">int <b class="fsfunc">gethostname</b>(</code><var class="pdparam">name</var>, <var class="pdparam">namelen</var><code>)</code>;<br />char* <var class="pdparam">name</var>;<br />size_t <var class="pdparam">namelen</var>;</p></div><p>
 follows a typical pattern of <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> "out"-parameter convention - it
 expects a pointer to a buffer it is going to fill.
 So you must view this parameter as either <code class="constant">:OUT</code> or <code class="constant">:IN-OUT</code>.
 Additionally, one must tell the function the size of the buffer.
 Here <em class="replaceable"><code>namelen</code></em> is just an <code class="constant">:IN</code> parameter.
 Sometimes this will be an <code class="constant">:IN-OUT</code> parameter, returning the
 number of bytes actually filled in.</p><p>So <em class="replaceable"><code>name</code></em> is actually a pointer to an array of up to
 <em class="replaceable"><code>namelen</code></em> characters, regardless of what the
 poor <span class="type">char*</span> <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> prototype says, to be used like a
 <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> <span class="type">string</span> (<code class="constant">NULL</code>-termination).  <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> specifies
 that “<span class="quote">host names are limited to
  <code class="constant">HOST_NAME_MAX</code> bytes</span>”, which is, of course,
 system dependent, but it appears that 256 is sufficient.</p><p>In the present example, you can use allocation <code class="constant">:ALLOCA</code>, like
 you would do in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>: stack-allocate a temporary.</p><pre class="programlisting">
(<a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> gethostname
  (:arguments (name (<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> (<a href="#c-array-max"><span class="type">FFI:C-ARRAY-MAX</span></a> ffi:char 256))
                    <code class="constant">:OUT</code> <code class="constant">:ALLOCA</code>)
              (len ffi:int))
  (:language :stdc)
  (:return-type ffi:int))

(defun myhostname ()
  (multiple-value-bind (success name)
      ;; <code class="constant">:OUT</code> and <code class="constant">:IN-OUT</code> parameters are returned as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>
      (gethostname 256)
    (if (zerop success) name
        (error ...)))) ;; <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/strerror.html"><code class="function">strerror</code></a>(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/errno.html"><code class="varname">errno</code></a>)

(defvar hostname (myhostname))
</pre></div><div class="example"><a id="dffi-dll-var"></a><p class="title"><b>Example 31.9. Accessing variables in shared libraries</b></p><p>Suppose one wants to access and modify variables that reside in
 shared libraries:
</p><pre class="programlisting">
struct bar {
  double x, y;
  double out;
};

struct bar my_struct = {10.0, 20.5, 0.0};

double test_dll(struct bar *ptr)
{
  return ptr-&gt;out = ptr-&gt;out + ptr-&gt;x + ptr-&gt;y;
}
</pre><p>This is compiled to <code class="filename">libtest.so</code> (or
 <code class="filename">libtest.dll</code>, depending on your platform).</p><p>Use the following lisp code:
</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><code class="function">USE-PACKAGE</code></a> <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>)

(<a href="#def-c-struct"><code class="function">FFI:DEF-C-STRUCT</code></a> bar
  (x double-float)
  (y double-float)
  (out double-float))

(<a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> get-own-c-float
  (:library "libtest.so")
  (:language :stdc)
  (:name "test_dll")
  (:arguments (ptr c-pointer :in :alloca))
  (:return-type double-float))

(<a href="#def-c-var"><code class="function">FFI:DEF-C-VAR</code></a> my-c-var (:name "my_struct")
  (:library "libtest.so") (:type (c-ptr bar)))
</pre><p>Note that <code class="function">get-own-c-float</code> takes a
 <a href="#c-pointer"><span class="type">FFI:C-POINTER</span></a>, not a <span class="type"><code class="literal">(<a href="#c-ptr"><span class="type">FFI:C-PTR</span></a> bar)</code></span> as the
 argument.</p><p>Now you can access call <code class="function">get-own-c-float</code> on
<code class="varname">my-c-var</code>:
</p><pre class="programlisting">
(<a href="#c-var-addr"><code class="function">FFI:C-VAR-ADDRESS</code></a> my-c-var)
⇒ <code class="computeroutput">#&lt;FOREIGN-ADDRESS #x282935D8&gt;</code>
(get-own-c-float (<a href="#c-var-addr"><code class="function">FFI:C-VAR-ADDRESS</code></a> my-c-var))
⇒ <code class="computeroutput">30.5d0</code>
(get-own-c-float (<a href="#c-var-addr"><code class="function">FFI:C-VAR-ADDRESS</code></a> my-c-var))
⇒ <code class="computeroutput">61.0d0</code>
(get-own-c-float (<a href="#c-var-addr"><code class="function">FFI:C-VAR-ADDRESS</code></a> my-c-var))
⇒ <code class="computeroutput">91.5d0</code>
(get-own-c-float (<a href="#c-var-addr"><code class="function">FFI:C-VAR-ADDRESS</code></a> my-c-var))
⇒ <code class="computeroutput">122.0d0</code>
</pre></div><div class="example"><a id="ex-dffi-validity"></a><p class="title"><b>Example 31.10. Controlling validity of resources</b></p><p><a href="#fptr"><code class="function">FFI:SET-FOREIGN-POINTER</code></a> is useful in conjunction with <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>
  <a href="#validp"><code class="function">FFI:VALIDP</code></a>)</code> to limit the extent of external resources.
 Closing twice can be avoided by checking <a href="#validp"><code class="function">FFI:VALIDP</code></a>.
 All pointers depending on this resource can be disabled at once upon
 close by sharing their <a href="#fptr"><code class="function">FFI:FOREIGN-POINTER</code></a> using <a href="#fptr"><code class="function">FFI:SET-FOREIGN-POINTER</code></a>.
</p><pre class="programlisting">
(def-c-type PGconn c-pointer) ; opaque pointer
(def-call-out PQconnectdb (:return-type PGconn)
  (:arguments (conninfo c-string)))
(defun sql-connect (conninfo)
  (let ((conn (PQconnectdb conninfo)))
    (unless conn (error "NULL pointer"))
    ;; may wish to use <a href="#final" title="30.8.&#xA0;Finalization"><code class="function">EXT:FINALIZE</code></a> as well
    (<a href="#fptr"><code class="function">FFI:SET-FOREIGN-POINTER</code></a> conn <code class="constant">:COPY</code>)))
(defun sql-dependent-resource (conn arg1)
  (let ((res (PQxxx conn arg1)))
    (<a href="#fptr"><code class="function">FFI:SET-FOREIGN-POINTER</code></a> res conn)))
(defun sql-close (connection)
  (when (<a href="#validp"><code class="function">FFI:VALIDP</code></a> connection)
    (PQfinish connection)
    (setf (<a href="#validp"><code class="function">FFI:VALIDP</code></a> connection) nil)
    T))
</pre><p>
</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Sharing <a href="#fptr"><code class="function">FFI:FOREIGN-POINTER</code></a> goes both ways: invalidating
  the dependent resource will invalidate the primary one.</p></div><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>An alternative approach to resource management,
  more suitable to non-<a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> <a href="#modules" title="31.2.&#xA0;External Modules">module</a>s,
  is implemented in the <a href="#berkeley-db" title="32.4.&#xA0;Berkeley DB access">berkeley-db</a>
  module, see <a href="#bdb-close" title="32.4.2.&#xA0;Closing handles">Section 32.4.2, “Closing handles”</a>.</p></div></div><div class="example"><a id="ex-dffi-float"></a><p class="title"><b>Example 31.11. Float point array computations</b></p><p>Save this code into <code class="filename">sum.c</code>:
</p><pre class="programlisting">
double sum (int len, double *vec) {
  int i;
  double s=0;
  for (i=0; i&lt;len; i++) s+= vec[i];
  return s;
}
</pre><p>
and compile it with
</p><pre class="screen"><code class="prompt">$</code> gcc -shared -o libsum.so sum.c</pre><p>
Now you can sum doubles:
</p><pre class="programlisting">
(<a href="#def-call-out"><code class="function">FFI:DEF-CALL-OUT</code></a> sum (:name "sum") (:library "libsum.so") (:language :stdc)
  (:return-type double-float)
  (:arguments (len int) (vec (<a href="#c-array-ptr"><span class="type">FFI:C-ARRAY-PTR</span></a> double-float))))
(sum 3 #(1d0 2d0 3d0))
⇒ <code class="computeroutput">6d0</code>
</pre><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="dffi-ex-more"></a>31.3.10.1. More examples</h4></div></div></div><p>You can find more information and examples of the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> in the following <code class="email">&lt;<a href="mailto:clisp-list@lists.sourceforge.net">clisp-list@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-list</a>) messages:
 </p><div class="itemizedlist"><ul type="disc"><li><a href="http://article.gmane.org/gmane.lisp.clisp.general/7278" target="_top">"variable size values"</a></li><li><a href="http://article.gmane.org/gmane.lisp.clisp.general/6626" target="_top">"variable length arrays"</a></li></ul></div><p>
</p><p>Even more examples can be found in the file
 <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/tests/ffi.tst"><code class="filename">tests/ffi.tst</code></a>
 in the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> source distribution.</p></div></div></div>
<!--#endif-->
<!--#ifdef HAVE_AFFI-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="affi"></a>31.4. The Amiga Foreign Function Call Facility</h2></div><div><h3 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep">No platform supports this currently</span></span></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#affi-design">31.4.1. Design issues</a></span></dt><dt><span class="section"><a href="#affi-overview">31.4.2. Overview</a></span></dt><dt><span class="section"><a href="#affi-libs">31.4.3. Foreign Libraries</a></span></dt><dt><span class="section"><a href="#affi-types">31.4.4. (Foreign) <span><strong class="command">C</strong></span> types</a></span></dt><dt><span class="section"><a href="#affi-functions">31.4.5. Foreign functions</a></span></dt><dt><span class="section"><a href="#affi-memory-access">31.4.6. Memory access</a></span></dt><dt><span class="section"><a href="#affi-func-def">31.4.7. Function Definition Files</a></span></dt><dt><span class="section"><a href="#affi-hints">31.4.8. Hints</a></span></dt><dt><span class="section"><a href="#affi-caveats">31.4.9. Caveats</a></span></dt><dt><span class="section"><a href="#affi-examples">31.4.10. Examples</a></span></dt></dl></div><p><b>Another Foreign Function Interface. </b>All symbols relating to the simple foreign function interface are
 exported from the package <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>. To use them,
 <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_use-package.html" target="_top"><code class="function">USE-PACKAGE</code></a> "AFFI")</code>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-design"></a>31.4.1. Design issues</h3></div></div></div><p><a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> was designed to be small in size but powerful enough to
use most library functions.  Lisp files may be compiled to <code class="filename">#P".fas"</code>
files without the need to load function definition files at run-time and
without external <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> or linker support.
<a href="impnotes.html#image" class="olink">memory image</a>s can be created, provided that the function libraries are
opened at run-time.</p><p>Therefore, <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> supports only primitive <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types
(integers 8, 16 and 32 bits wide, signed or unsigned, pointers) and
defines no new types or classes.  Foreign functions are not first-class
objects (you can define a <a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><code class="function">LAMBDA</code></a> yourself), name spaces are
separate.</p><p>The <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> does no tracking of resources.  Use <a href="#final" title="30.8.&#xA0;Finalization"><code class="function">EXT:FINALIZE</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-overview"></a>31.4.2. Overview</h3></div></div></div><p>These are the <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> forms:</p><p><code class="code">(declare-library-base
 <em class="replaceable"><code>keyword-base</code></em> <em class="replaceable"><code>library-name</code></em>)</code></p><p><code class="code">(require-library-functions <em class="replaceable"><code>library-name</code></em>
 [(:import {<em class="replaceable"><code>string-name</code></em>}*)])</code></p><p><code class="code">(open-library <em class="replaceable"><code>base-symbol</code></em>)</code></p><p><code class="code">(close-library <em class="replaceable"><code>base-symbol</code></em>)</code></p><p><code class="code">(with-open-library (<em class="replaceable"><code>base-symbol</code></em> |
 <em class="replaceable"><code>library-name</code></em>) {<em class="replaceable"><code>form</code></em>}*)</code></p><p><code class="code">(defflibfun <em class="replaceable"><code>function-name</code></em>
 <em class="replaceable"><code>base-symbol</code></em>
 <em class="replaceable"><code>offset</code></em> <em class="replaceable"><code>mask</code></em>
 <em class="replaceable"><code>result-type</code></em>
 {<em class="replaceable"><code>argument-type</code></em>}*)</code></p><p><code class="code">(declare-library-function
 <em class="replaceable"><code>function-name</code></em>
 <em class="replaceable"><code>library-name</code></em> {<em class="replaceable"><code>option</code></em>}*)</code></p><p><code class="code">(flibcall <em class="replaceable"><code>function-name</code></em>
 {<em class="replaceable"><code>argument</code></em>}*)</code></p><p><code class="code">(mlibcall <em class="replaceable"><code>function-name</code></em>
 {<em class="replaceable"><code>argument</code></em>}*)</code></p><p><code class="code">(mem-read <em class="replaceable"><code>address</code></em>
  <em class="replaceable"><code>result-type</code></em> [<em class="replaceable"><code>offset</code></em>])</code></p><p><code class="code">(mem-write <em class="replaceable"><code>address</code></em> <em class="replaceable"><code>type</code></em> <em class="replaceable"><code>value</code></em>
 [<em class="replaceable"><code>offset</code></em>])</code></p><p><code class="code">(mem-write-vector <em class="replaceable"><code>address</code></em> <em class="replaceable"><code>vector</code></em> [<em class="replaceable"><code>offset</code></em>])</code></p><p><code class="code">(nzero-pointer-p <em class="replaceable"><code>value</code></em>)</code></p><p>Except for <code class="function">with-open-library</code>,
<code class="function">declare-library-function</code> and
<code class="function">mlibcall</code>, all of the above are functions.</p><p>A library contains a collection of functions.  The library is
referred to by a symbol referred as library-base at the <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>
level.  This symbol is created in the package <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>.
The link between this symbol and the OS-level library name is
established by <code class="function">declare-library-base</code>.  To avoid
multiple package conflicts, this and only this function requires the
symbol-name to be in the <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-3.html" target="_top"><strong class="package">“<span class="quote">KEYWORD</span>”</strong></a> package. The function returns the
library-base.</p><p>A library may be opened by <code class="function">open-library</code> and
 closed by <code class="function">close-library</code>. An opened library must be
 closed. <code class="function">with-open-library</code> is provided to
 automatically close the library for you, thus it is much safer to
 use.</p><p>A function is contained in a library.  Every function is referred
to by a symbol.  A function is defined through
<code class="function">defflibfun</code> or
<code class="function">declare-library-function</code> by giving the function
name, the library-base, an offset into the library, a mask (or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>)
for register-based library calls, the result type and all
parameter-types.  <code class="function">require-library-functions</code> loads
the complete set of functions defined in a library file. Symbols are
created in the package <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> and imported into the current
package.</p><p><code class="function">flibcall</code> and <code class="function">mlibcall</code>
call library functions. <code class="function">mlibcall</code> is a macro that
does a few checks at macroexpansion time and allows the compiler to
inline the call, not requiring the foreign function to be defined again
at load or execution time. The use of this macro is advertised wherever
possible.</p><p><code class="function">mem-read</code> reads an arbitrary address (with
offset for structure references) and returns the given type.</p><p><code class="function">mem-write</code> writes an arbitrary
address. <code class="function">mem-write-vector</code> copies the content of a
Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span> into memory.</p><p><code class="function">nzero-pointer-p</code> tests for
non-<code class="constant">NULL</code> pointers in all recognized representations
(<a href="http://www.lisp.org/HyperSpec/Body/syscla_null.html" target="_top"><code class="classname">NULL</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> and <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-libs"></a>31.4.3. Foreign Libraries</h3></div></div></div><p><code class="function">declare-library-base</code> ought to be wrapped in an
<code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><code class="function">EVAL-WHEN</code></a> (compile eval load) ...)</code>
form and come before any function is referenced, because the library
base symbol must be known.</p><p><code class="function">open-library</code> tries to open the library
referenced by the base symbol.  Therefore it must have been preceded
with <code class="function">declare-library-base</code>.  The call returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
on failure. <code class="function">open-library</code> calls nest.  Every
successful call must be matched by <code class="function">close-library</code>.
<code class="function">with-open-library</code> does this for you and also allows
you to specify the library by name, provided that its base has been
declared.  It is recommended to use this macro and to reference the
library by name.</p><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will not close libraries for you at program exit.
 See <a href="#custom-init-fini" title="30.1.&#xA0;Customizing CLISP Process&#10;  Initialization and Termination">Section 30.1, “Customizing <span><strong class="command">CLISP</strong></span> Process
  Initialization and Termination”</a> and watch
 <code class="function">AFFI::*LIBRARIES-ALIST*</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-types"></a>31.4.4. (Foreign) <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types</h3></div></div></div><p>The following foreign <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> types are used in <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>.
They are <span class="strong"><strong>not</strong></span> regular <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> types or <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> classes.
</p><div class="informaltable"><a id="affi-types-tab"></a><table border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="center"><a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> name</th><th align="center">Lisp equivalent</th><th align="center"><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> equivalent</th><th align="center">Comment</th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td><td align="center"><span class="type">void</span></td><td align="center">as a result type for functions only</td></tr><tr><td align="center"><span class="type">4</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 32)</code></span></td><td align="center"><span class="type">unsigned long</span></td><td align="center"> </td></tr><tr><td align="center"><span class="type">2</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 16)</code></span></td><td align="center"><span class="type">unsigned short</span></td><td align="center"> </td></tr><tr><td align="center"><span class="type">1</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span></td><td align="center"><span class="type">unsigned char</span></td><td align="center"> </td></tr><tr><td align="center"><span class="type">-4</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 32)</code></span></td><td align="center"><span class="type">long</span></td><td align="center"> </td></tr><tr><td align="center"><span class="type">-2</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 16)</code></span></td><td align="center"><span class="type">short</span></td><td align="center"> </td></tr><tr><td align="center"><span class="type">-1</span></td><td align="center"><span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html" target="_top"><code class="classname">SIGNED-BYTE</code></a> 8)</code></span></td><td align="center"><span class="type">signed char</span></td><td align="center"> </td></tr><tr><td align="center"><span class="type">0</span></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a></td><td align="center"><span class="type">BOOL</span></td><td align="center">as a result type for functions only</td></tr><tr><td align="center"><span class="type">*</span></td><td align="center">opaque</td><td align="center"><span class="type">void*</span></td><td align="center"> </td></tr><tr><td align="center"><code class="constant">:EXTERNAL</code></td><td align="center">opaque</td><td align="center"><span class="type">void*</span></td><td align="center"> </td></tr><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a></td><td align="center"><span class="type">char*</span></td><td align="center"> </td></tr><tr><td align="center"><code class="constant">:IO</code></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a></td><td align="center"><span class="type">char*</span></td><td align="center"> </td></tr></tbody></table></div><p>Objects of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> are copied and passed
<code class="constant">NULL</code>-terminated on the execution stack.  On return, a Lisp string is
allocated and filled from the address returned (unless <code class="constant">NULL</code>).
Functions with <code class="constant">:IO</code> parameters are passed the address of the Lisp
string or unsigned byte vector. These are not <code class="constant">NULL</code>-terminated!
This is useful for functions like
like <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/read-c.html"><code class="function">read-c</code></a> which do not need an
array at a constant address longer than the dynamic extent of the call
(it is dangerous to define callback functions with <code class="constant">:IO</code> - or
<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> - type parameters).
Arguments of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> and <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a> are always
acceptable where a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <code class="constant">:IO</code> type is specified.</p>
<!--#ifdef UNICODE-->
<p>See also <a href="impnotes.html#foreign-enc" class="olink"><code class="varname">CUSTOM:*FOREIGN-ENCODING*</code></a>.</p>
<!--#endif-->
<p>To meet the design goals, predefined types and objects were
used. As such, pointers were represented as integers. Now that there is
the <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a> type, both representations may be used on input.
The pointer type should be therefore considered as opaque.
Use <code class="function">nzero-pointer-p</code> for <code class="constant">NULL</code> tests.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-functions"></a>31.4.5. Foreign functions</h3></div></div></div><p>Foreign Functions are declared either through
<code class="function">defflibfun</code> or
<code class="function">declare-library-function</code>.  The former is closer to
the low-level implementation of the interface, the latter is closer to
the other <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.</p><p><code class="function">defflibfun</code> requires the library base symbol
and register mask to be specified,
<code class="function">declare-library-function</code> requires the library name
and computes the mask from the declaration of the arguments.</p><p>The value of mask is implementation-dependent.</p><p>The <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> type <code class="literal">0</code> is only acceptable as a
function result type and yields either <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>. The difference
between <code class="function">*</code> and <code class="constant">:EXTERNAL</code> is the following:
<code class="function">*</code> uses integers, <code class="constant">:EXTERNAL</code> uses
<a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a> as function result-type (except from <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> for a
<code class="constant">NULL</code> pointer) and refuses objects of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or
<span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span> as input.  Thus <code class="constant">:EXTERNAL</code> provides some security
on the input and the ability to use <a href="#final" title="30.8.&#xA0;Finalization"><code class="function">EXT:FINALIZE</code></a> for resource-tracking on
the output side.</p><p><code class="code">(declare-library-function <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>library-name</code></em>
 {<em class="replaceable"><code>option</code></em>}*)</code>

</p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>option</code></em> ::==</span></dt><dd><div class="informaltable"><a id="affi-dec-lib-fun-opt-bnf"></a><table border="1"><colgroup><col /><col /></colgroup><tbody><tr><td align="left"> </td><td align="left"><code class="code">(:offset
    <em class="replaceable"><code>library-offset</code></em>)</code></td></tr><tr><td align="left">|</td><td align="left"><code class="code">(<code class="constant">:ARGUMENTS</code>
    {(<em class="replaceable"><code>argument</code></em> <em class="replaceable"><code><a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>-type</code></em>
      <em class="replaceable"><code>register</code></em>)}*)</code></td></tr><tr><td align="left">|</td><td align="left"><code class="code">(:return-type
    <em class="replaceable"><code><a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>-type</code></em>)</code></td></tr></tbody></table></div></dd><dt><span class="term"><em class="replaceable"><code>register</code></em> ::==</span></dt><dd><code class="constant">:d0</code> | <code class="constant">:d1</code>
 | ... | <code class="constant">:d7</code> | <code class="constant">:a0</code> | ... |
 <code class="constant">:a6</code></dd></dl></div><p>

declares a named library function for further reference through
<code class="function">flibcall</code> and <code class="function">mlibcall</code>.</p><p><code class="function">mlibcall</code> should be the preferred way of
calling foreign functions (when they are known at compile-time) as
macroexpansion-time checks may be performed and the call can be sort of
inlined.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-memory-access"></a>31.4.6. Memory access</h3></div></div></div><p><code class="code">(affi:mem-read <em class="replaceable"><code>address</code></em> <em class="replaceable"><code>type</code></em>
  <em class="replaceable"><code>offset</code></em>)</code> can read 8, 16 and 32 bit
signed or unsigned integers (<a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> types <span class="type">-4</span>,
<span class="type">-2</span>, <span class="type">-1</span>, <span class="type">1</span>, <span class="type">2</span>,
<span class="type">4</span>), a pointer (<span class="type">*</span>), a <code class="constant">NULL</code>-terminated
string (<span class="type">string</span>) or, if the type argument is of type
<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span>, it can fill this vector.
<code class="constant">:EXTERNAL</code> is not an acceptable type as no object can be created by
using <code class="function">affi:mem-read</code>.</p><p><code class="code">(affi:mem-write <em class="replaceable"><code>address</code></em> <em class="replaceable"><code>type</code></em> <em class="replaceable"><code>value</code></em>
[<em class="replaceable"><code>offset</code></em>])</code> writes integers (<a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a>
type <span class="type">-4</span>, <span class="type">-2</span>, <span class="type">-1</span>, <span class="type">1</span>,
<span class="type">2</span> and <span class="type">4</span>) or pointer values (type
<span class="type">*</span>), but not vectors to the specified memory address.</p><p><code class="code">(affi:mem-write-vector <em class="replaceable"><code>address</code></em> <em class="replaceable"><code>vector</code></em> [<em class="replaceable"><code>offset</code></em>])</code>
 can write memory from the given vector (of type <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span>).
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-func-def"></a>31.4.7. Function Definition Files</h3></div></div></div><p><code class="function">affi:require-library-functions</code> will <a href="impnotes.html#require" class="olink"><code class="function">REQUIRE</code></a> a
file of name derived from the library name and with type
<code class="filename">affi</code>. It may be used to import all names into the
current package or only a given subset identified by string names, using
the <code class="constant">:import</code> keyword (recommended use).
Some definition files for standard Amiga libraries are provided.
See <a href="#affi-ex-1-predefined" title="Example&#xA0;31.12.&#xA0;Using a predefined library function file">Example 31.12, “Using a predefined library function file”</a> below.</p><p>As <code class="function">affi:require-library-functions</code> loads a
global file which you, the programmer, may have not defined, you may
consider declaring every function yourself to be certain what the return
and argument types are.
See <a href="#affi-ex-4-sample" title="Example&#xA0;31.15.&#xA0;Some sample function definitions">Example 31.15, “Some sample function definitions”</a> below.</p><p>The file <code class="filename">read-fd.lisp</code> defines the function
<code class="function">make-partial-fd-file</code> with which the provided
<code class="filename">.affi</code> files have been prepared from the original
Amiga FD files (located in the directory <code class="filename">FD:</code>).
They must still be edited as the function cannot know whether a function
accepts a <code class="function">*</code>, <code class="constant">:IO</code>,
<code class="function">string</code> or <code class="constant">:EXTERNAL</code> argument and because files
in <code class="filename">FD:</code> only contain a register specification, not
the width of integer arguments (<code class="literal">-4</code>,
<code class="literal">-2</code>, <code class="literal">-1</code>, <code class="literal">1</code>,
<code class="literal">2</code>, or <code class="literal">4</code>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-hints"></a>31.4.8. Hints</h3></div></div></div><p>By using appropriate <a href="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html" target="_top"><code class="function">EVAL-WHEN</code></a> forms for
<code class="function">affi:declare-library-base</code> and
<code class="function">affi:require-library-functions</code> and not using
<code class="function">affi:flibcall</code>, it is possible to write code that
only loads library function definition files at compile-time.
See <a href="#affi-ex-1-predefined" title="Example&#xA0;31.12.&#xA0;Using a predefined library function file">Example 31.12, “Using a predefined library function file”</a> below.</p><p>Do not rely on <a href="#final" title="30.8.&#xA0;Finalization"><code class="function">EXT:FINALIZE</code></a> to free resources for you, as <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
does not call finalizers when it exits, use <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-caveats"></a>31.4.9. Caveats</h3></div></div></div><p>You can consider the library bases being symbols in need of being
imported from the package <a href="#affi" title="31.4.&#xA0;The Amiga Foreign Function Call Facility"><strong class="package">“<span class="quote">AFFI</span>”</strong></a> originating from a brain-damage, causing
the usual symbol headaches when using foreign functions calls within macros.
Luckily, even if the high-level interface (or its implementation in
<a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/affi1.lisp"><code class="filename">src/affi1.lisp</code></a>) were to change,
the low-level part (<a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/affi.d"><code class="filename">src/affi.d</code></a>)
should remain untouched as all it knows are <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s and
<a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a>s, no <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>s.
The difficulty is just to get the library base value at run-time.
Feel free to suggest enhancements to this facility!</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="affi-examples"></a>31.4.10. Examples</h3></div></div></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>These examples are somewhat specific to the
  Amiga.</p></div><div class="example"><a id="affi-ex-1-predefined"></a><p class="title"><b>Example 31.12. Using a predefined library function file</b></p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> "AFFI-TEST" (:use <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><code class="function">IN-PACKAGE</code></a> "AFFI-TEST")

;; SysBase is the conventional name for exec.library
;; It is only enforced by the file loaded by REQUIRE-LIBRARY-FUNCTIONS
(eval-when (compile eval load)
  (declare-library-base :SysBase "exec.library")) ;keyword avoids name conflicts

;; using only MLIBCALL allows not to load definitions at load-time
(eval-when (compile eval)
  (require-library-functions "exec.library" :import '("FindTask")))

(with-open-library ("exec.library")
  (print (mlibcall FindTask 0)))
</pre><p>

This file can be used in interpreted and compiled mode.
Compiled, it will have inlined the library function calls.
</p></div><div class="example"><a id="affi-ex-2-flibcall"></a><p class="title"><b>Example 31.13. Using flibcall</b></p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> "AFFI-TEST" (:use <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><code class="function">IN-PACKAGE</code></a> "AFFI-TEST")

(eval-when (compile eval load)
  ;; keyword avoids name conflicts
  (declare-library-base :SysBase "exec.library"))

;; The load situation permits the use of flibcall
(eval-when (eval compile load)
  (require-library-functions "exec.library"))

(unless (open-library 'SysBase) (error "No library for SysBase"))
(flibcall (if t 'FindTask 'Debug) 0)
(close-library 'SysBase)
</pre></div><div class="example"><a id="affi-ex-3-dynamic"></a><p class="title"><b>Example 31.14. Be fully dynamic, defining library bases ourselves</b></p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> "AFFI-TEST" (:use <a href="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html" target="_top"><strong class="package">“<span class="quote">COMMON-LISP</span>”</strong></a> "AFFI"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><code class="function">IN-PACKAGE</code></a> "AFFI-TEST")

(eval-when (compile eval load)
  (defvar mylib (declare-library-base :foobase "foo.library")))
(eval-when (eval compile load)          ;eval allows mlibcall, load flibcall
  (defflibfun 'foo1 mylib -30 '#xA '* 'string)
  (defflibfun 'foo2 mylib -36 '#x21 0 * 4))

(defun foo (name)
  (when (open-library mylib)
    (list (mlibcall foo1 name) (flibcall 'foo2 name 123213))
    (close-library mylib)))
</pre></div><div class="example"><a id="affi-ex-4-sample"></a><p class="title"><b>Example 31.15. Some sample function definitions</b></p><pre class="programlisting">
(defflibfun 'FindTask 'SysBase -294 #xA '* 'string)
(eval-library-function FindTask "exec.library"
  (:offset -294)
  (:return-type *)
  (:arguments
   (name   string   :A1)))
(declare-library-function NameFromLock "dos.library"
  (:offset -402)
  (:return-type 0)
  (:arguments
   (lock   4   :D1)
   (buffer :io :D2)
   (len    4   :D3)))

(eval-when (compile eval)
  (defconstant GVF_LOCAL_ONLY (ash 1 9))
  (defflibfun 'SetVar 'DosBase -900 #x5432 0 'string 'string -4 4))
(defun setvar (name value)
  (with-open-library (DosBase)
    ;; length of -1 means find length of <code class="constant">NULL</code>-terminated-string
    (mlibcall SetVar name value -1 GVF_LOCAL_ONLY)))
</pre></div></div></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="socket"></a>31.5. Socket Streams</h2></div><div><h3 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#socket-intro">31.5.1. Introduction</a></span></dt><dt><span class="section"><a href="#socket-api">31.5.2. Socket API Reference</a></span></dt></dl></div>
<!--#ifdef SOCKET_STREAMS-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="socket-intro"></a>31.5.1. Introduction</h3></div></div></div><p>Sockets are used for interprocess communications by processes
 running on the same host as well as by processes running on different
 hosts over a computer network.
 The most common kind of sockets is Internet stream sockets, and a
 high-level interface to them is described here.
 A more low level interface that closely follows the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> system
 calls is also available, see <a href="#rawsock" title="32.14.&#xA0;Raw Socket Access">Section 32.14, “Raw Socket Access”</a>.</p><p>Two main varieties of sockets are interfaced to:
 </p><div class="itemizedlist"><ul type="disc"><li>“<span class="quote">active</span>” sockets
    correspond to <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>s which are <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s
  </li><li>“<span class="quote">passive</span>” sockets correspond to
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-SERVER</code></a>s which are a special kind of objects that are used
    to allow the other side to initiate interaction with lisp.
</li></ul></div><div class="example"><a id="socket-ex-server"></a><p class="title"><b>Example 31.16. Lisp <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> server</b></p><p>Here is a simple lisp <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> server that waits for a remote
 connection and evaluates forms read from it:
</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET</code></a> ((server (<a href="#sose"><code class="function">SOCKET:SOCKET-SERVER</code></a>)))
  (<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> t "~&amp;Waiting for a connection on ~S:~D~%"
          (<a href="#sose-hopo"><code class="function">SOCKET:SOCKET-SERVER-HOST</code></a> server) (<a href="#sose-hopo"><code class="function">SOCKET:SOCKET-SERVER-PORT</code></a> server))
  (<a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a>
      ;; infinite loop, terminate with <span><strong class="keycap">Control</strong></span>-<span class="keysym">C</span>
      (<a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><code class="function">WITH-OPEN-STREAM</code></a> (socket (<a href="#so-accept"><code class="function">SOCKET:SOCKET-ACCEPT</code></a> server))
              (<a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html" target="_top"><code class="function">MULTIPLE-VALUE-BIND</code></a> (local-host local-port) (<a href="#sost-local"><code class="function">SOCKET:SOCKET-STREAM-LOCAL</code></a> socket)
                (<a href="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html" target="_top"><code class="function">MULTIPLE-VALUE-BIND</code></a> (remote-host remote-port) (<a href="#sost-peer"><code class="function">SOCKET:SOCKET-STREAM-PEER</code></a> socket)
                  (<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> "~&amp;Connection: ~S:~D -- ~S:~D~%"
                          remote-host remote-port local-host local-port)))
              ;; loop is terminated when the remote host closes the connection or on <a href="#quit" title="30.3.&#xA0;Quitting CLISP"><code class="function">EXT:EXIT</code></a>
              (<a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><code class="function">WHEN</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> :eof (<a href="#so-status"><code class="function">SOCKET:SOCKET-STATUS</code></a> (cons socket :input))) (<a href="http://www.lisp.org/HyperSpec/Body/mac_return.html" target="_top"><code class="function">RETURN</code></a>))
                    (<a href="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html" target="_top"><code class="function">PRINT</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_eval.html" target="_top"><code class="function">EVAL</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><code class="function">READ</code></a> socket)) socket)
                    ;; flush everything left in socket
                    (<a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a> :for c = (<a href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html" target="_top"><code class="function">READ-CHAR-NO-HANG</code></a> socket nil nil) :while c)
                    (<a href="http://www.lisp.org/HyperSpec/Body/fun_terpricm_fresh-line.html" target="_top"><code class="function">TERPRI</code></a> socket))))
    ;; make sure server is closed
    (<a href="#sose-close"><code class="function">SOCKET:SOCKET-SERVER-CLOSE</code></a> server)))
</pre><p>
</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">This opens a gaping security hole!</h3><p>Functions like <a href="impnotes.html#exec" class="olink"><code class="function">EXT:SHELL</code></a>, <a href="#exec" title="31.7.1.&#xA0;Shell"><code class="function">EXT:EXECUTE</code></a>, <a href="#run-prog"><code class="function">EXT:RUN-SHELL-COMMAND</code></a> will allow the
  remote host to execute arbitrary code with your permissions.
  While functions defined in lisp (like <a href="#run-prog"><code class="function">EXT:RUN-SHELL-COMMAND</code></a>) can be removed
  (using <a href="http://www.lisp.org/HyperSpec/Body/fun_fmakunbound.html" target="_top"><code class="function">FMAKUNBOUND</code></a>), the built-in functions (like <a href="impnotes.html#exec" class="olink"><code class="function">EXT:SHELL</code></a> and <a href="#exec" title="31.7.1.&#xA0;Shell"><code class="function">EXT:EXECUTE</code></a>)
  cannot be permanently removed from the run-time, and an experienced
  hacker will be able to invoke them even if you <a href="http://www.lisp.org/HyperSpec/Body/fun_fmakunbound.html" target="_top"><code class="function">FMAKUNBOUND</code></a> their names.
 </p><p>You should limit the socket server to local
  connections by passing string <span class="data"><code class="literal">"127.0.0.1"</code></span>
  as the <code class="constant">:INTERFACE</code> argument.</p></div></div><div class="example"><a id="socket-ex-client"></a><p class="title"><b>Example 31.17. Lisp <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> client</b></p><p>Here are a couple of simple lisp <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> clients that fetch a web
 page and a binary file, and upload a file:
</p><pre class="programlisting">
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a> wget-text (host page file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (port 80))
  ;; <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> requires the <code class="constant">:DOS</code> <a href="#newline" title="30.5.3.&#xA0;Line Terminators">line terminator</a>
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><code class="function">WITH-OPEN-STREAM</code></a> (socket (<a href="#so-connect"><code class="function">SOCKET:SOCKET-CONNECT</code></a> port host <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <code class="constant">:DOS</code>))
     (<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> socket "GET ~A HTTP/1.0~2%" page)
     ;; dump the whole thing - header+data - into the output file
     (<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-file.html" target="_top"><code class="function">WITH-OPEN-FILE</code></a> (out file :direction :output)
       (<a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a> :for line = (<a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><code class="function">READ-LINE</code></a> socket nil nil) :while line
          :do (<a href="http://www.lisp.org/HyperSpec/Body/fun_write-str_m_write-line.html" target="_top"><code class="function">WRITE-LINE</code></a> line out)))))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a> wget-binary (host page file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (port 80))
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><code class="function">WITH-OPEN-STREAM</code></a> (socket (<a href="#so-connect"><code class="function">SOCKET:SOCKET-CONNECT</code></a> port host <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <code class="constant">:DOS</code>))
    (<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> socket "GET ~A HTTP/1.0~2%" page)
    (<a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a> :with content-length :for line = (<a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><code class="function">READ-LINE</code></a> socket nil nil)
      ;; header is separated from the data with a blank line
      :until (<a href="http://www.lisp.org/HyperSpec/Body/fun_zerop.html" target="_top"><code class="function">ZEROP</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a> line)) :do
      (<a href="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html" target="_top"><code class="function">WHEN</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_stringeqc_ng-not-lessp.html" target="_top"><code class="function">STRING=</code></a> line #1="Content-length: " :end1 #2=#.(<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a> #1#))
        (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> content-length (<a href="http://www.lisp.org/HyperSpec/Body/fun_parse-integer.html" target="_top"><code class="function">PARSE-INTEGER</code></a> line :start #2#))
      ;; this will not work if the server does not supply the content-length header
      :finally (<a href="http://www.lisp.org/HyperSpec/Body/mac_return.html" target="_top"><code class="function">RETURN</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET</code></a> ((data (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><code class="function">MAKE-ARRAY</code></a> content-length
                                               :element-type '<span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>)))
                           ;; switch to binary i/o on socket
                           (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> socket) '<span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>)
                           ;; read the whole file in one system call
                           (<a href="#rd-by-seq"><code class="function">EXT:READ-BYTE-SEQUENCE</code></a> data socket)
                           (<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-file.html" target="_top"><code class="function">WITH-OPEN-FILE</code></a> (out file :direction :output
                                                <a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a> '<span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>)
                             ;; write the whole file in one system call
                             (<a href="#wr-by-seq"><code class="function">EXT:WRITE-BYTE-SEQUENCE</code></a> data out))
                           data))))))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a> wput (host page file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (port 80))
  (<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><code class="function">WITH-OPEN-STREAM</code></a> (socket (<a href="#so-connect"><code class="function">SOCKET:SOCKET-CONNECT</code></a> port host <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <code class="constant">:DOS</code>))
    (<a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-file.html" target="_top"><code class="function">WITH-OPEN-FILE</code></a> (in file :direction :inptut <a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a> '<span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>)
      (<a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET*</code></a> ((length (<a href="http://www.lisp.org/HyperSpec/Body/fun_file-length.html" target="_top"><code class="function">FILE-LENGTH</code></a> in))
             (data (<a href="http://www.lisp.org/HyperSpec/Body/fun_make-array.html" target="_top"><code class="function">MAKE-ARRAY</code></a> length :element-type '<span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>)))
        ;; some servers may not understand the "Content-length" header
        (<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> socket "PUT ~A HTTP/1.0~%Content-length: ~D~2%" page length)
        (<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html" target="_top"><code class="function">STREAM-ELEMENT-TYPE</code></a> socket) '<span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span>)
        (<a href="#rd-by-seq"><code class="function">EXT:READ-BYTE-SEQUENCE</code></a> data in)
        (<a href="#wr-by-seq"><code class="function">EXT:WRITE-BYTE-SEQUENCE</code></a> data socket)))
    ;; not necessary if the server understands the "Content-length" header
    (<a href="#sost-shut"><code class="function">SOCKET:SOCKET-STREAM-SHUTDOWN</code></a> socket :output)
    ;; get the server response
    (<a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a> :for line = (<a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><code class="function">READ-LINE</code></a> socket nil nil) :while line :collect line)))
</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="socket-api"></a>31.5.2. Socket API Reference</h3></div></div></div><div class="variablelist"><dl><dt><a id="sose"></a><span class="term"><code class="code">(<a href="#sose"><code class="function">SOCKET:SOCKET-SERVER</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>port</code></em>
     <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:INTERFACE</code>
     <code class="constant">:BACKLOG</code>)</code></span></dt><dd>This function creates a socket an binds a port to
    the socket.  The server exists to watch for client connect attempts.
    The optional argument is the port to use (non-negative <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>).
    The <code class="constant">:BACKLOG</code> parameter defines maximum length
    of queue of pending connections (see
    <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/listen.html"><code class="function">listen</code></a>) and defaults to 1.
    The <code class="constant">:INTERFACE</code> is either a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>,
    interpreted as the IP address that will be bound, or a socket, from
    whose peer the connections will be made.
    Default is (for backward compatibility) to bind to all local
    interfaces, but for security reasons it is advisable to bind to
    loopback <span class="data"><code class="literal">"127.0.0.1"</code></span> if you need only
    local connections.</dd><dt><a id="sose-close"></a><span class="term"><code class="code">(<a href="#sose-close"><code class="function">SOCKET:SOCKET-SERVER-CLOSE</code></a> <em class="replaceable"><code>socket-server</code></em>)</code></span></dt><dd>Closes down the server socket.
    <a href="#close" title="21.3.10.&#xA0;Function CLOSE">Just like streams</a>,
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-SERVER</code></a>s are closed at <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion.  You should not rely on
    this however, because <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion times are not deterministic.
 </dd><dt><a id="sose-hopo"></a><span class="term"><code class="code">(<a href="#sose-hopo"><code class="function">SOCKET:SOCKET-SERVER-HOST</code></a> <em class="replaceable"><code>socket-server</code></em>)</code><br /></span><span class="term"><code class="code">(<a href="#sose-hopo"><code class="function">SOCKET:SOCKET-SERVER-PORT</code></a> <em class="replaceable"><code>socket-server</code></em>)</code></span></dt><dd>Returns the host mask indicating which hosts can
    connect to this server and the port which was bound using <a href="#sose"><code class="function">SOCKET:SOCKET-SERVER</code></a>.
 </dd><dt><a id="so-wait"></a><span class="term"><code class="code">(<a href="#so-wait"><code class="function">SOCKET:SOCKET-WAIT</code></a>
    <em class="replaceable"><code>socket-server</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="#timeout-opt">[<em class="replaceable"><code>seconds</code></em> [<em class="replaceable"><code>microseconds</code></em>]]</a>)</code></span></dt><dd>Wait for a fixed time for a
    connection on the <em class="replaceable"><code>socket-server</code></em> (a <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-SERVER</code></a>).
    Without a timeout argument, <a href="#so-wait"><code class="function">SOCKET:SOCKET-WAIT</code></a> blocks indefinitely.
    When timeout is zero, poll.
    Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> when a connection is available (i.e., <a href="#so-accept"><code class="function">SOCKET:SOCKET-ACCEPT</code></a> will
    not block) and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> on timeout.</dd><dt><a id="so-accept"></a><span class="term"><code class="code">(<a href="#so-accept"><code class="function">SOCKET:SOCKET-ACCEPT</code></a> <em class="replaceable"><code>socket-server</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a> <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <a href="#buffered"><code class="constant">:BUFFERED</code></a> <a href="#timeout-k"><code class="constant">:TIMEOUT</code></a>)</code></span></dt><dd>Creates the server-side <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a>
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a> for the connection.
   Waits for an attempt to connect to the server for no more than
   <a href="#timeout-k"><code class="constant">:TIMEOUT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-4-4.html" target="_top">seconds</a> (which may be a non-negative <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><code class="classname">REAL</code></a> or a
   list <span class="data"><code class="literal">(sec usec)</code></span> or a pair
   <span class="data"><code class="literal">(sec . usec)</code></span>).
   <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>s an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> if no connection is made in that time.
  </dd><dt><a id="so-connect"></a><span class="term"><code class="code">(<a href="#so-connect"><code class="function">SOCKET:SOCKET-CONNECT</code></a>
    <em class="replaceable"><code>port</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> [<em class="replaceable"><code>host</code></em>] <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    <a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a> <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <a href="#buffered"><code class="constant">:BUFFERED</code></a> <a href="#timeout-k"><code class="constant">:TIMEOUT</code></a>)</code></span></dt><dd>Attempts to create a client-side <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a>
   <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>.  Blocks until the server accepts the connection, for
   no more than <a href="#timeout-k"><code class="constant">:TIMEOUT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-4-4.html" target="_top">seconds</a>.  If it is 0, returns immediately
   and (probably) blocks on the next i/o operation (you can use
   <a href="#so-status"><code class="function">SOCKET:SOCKET-STATUS</code></a> to check whether it will actually block).
 </dd><dt><a id="so-status"></a><span class="term"><code class="code">(<a href="#so-status"><code class="function">SOCKET:SOCKET-STATUS</code></a>
                 <em class="replaceable"><code>socket-stream-or-list</code></em>
                 <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="#timeout-opt">[<em class="replaceable"><code>seconds</code></em> [<em class="replaceable"><code>microseconds</code></em>]]</a>)</code></span></dt><dd><p>Checks whether it is possible to read from or write
    to a <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a> or whether a connection is available on a
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-SERVER</code></a> without blocking.</p><p>This is similar to <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a>, which checks only one
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> and only for input, and <a href="#so-wait"><code class="function">SOCKET:SOCKET-WAIT</code></a>, which works only with
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-SERVER</code></a>s.</p><p>We define <em class="replaceable"><code>status</code></em> for a <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-SERVER</code></a> or a <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>
    to be <code class="constant">:ERROR</code> if any i/o operation will cause an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>.</p><p>Additionally, for a <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-SERVER</code></a>, we define
    <em class="replaceable"><code>status</code></em> to be <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if a connection is available, i.e.,
    is <a href="#so-accept"><code class="function">SOCKET:SOCKET-ACCEPT</code></a> will not block, and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> otherwise.</p><p>Additionally, for a <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>, we define <em class="replaceable"><code>status</code></em> in the
    given <em class="replaceable"><code>direction</code></em> (one of <code class="constant">:INPUT</code>, <code class="constant">:OUTPUT</code>, and <code class="constant">:IO</code>) to be
    </p><div class="variablelist"><a id="so-status-values"></a><p class="title"><b>Possible status values for various directions:</b></p><table border="0"><col align="left" valign="top" /><tbody><tr><td><span class="term"><code class="constant">:INPUT</code> status:</span></td><td><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></span></td><td>reading will block
        </td></tr><tr><td><span class="term"><code class="constant">:INPUT</code></span></td><td>some input is available
        </td></tr><tr><td><span class="term"><code class="constant">:EOF</code></span></td><td>the stream has reached its end
       </td></tr></tbody></table></div></td></tr><tr><td><span class="term"><code class="constant">:OUTPUT</code> status:</span></td><td><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></span></td><td>writing will block
        </td></tr><tr><td><span class="term"><code class="constant">:OUTPUT</code></span></td><td>output to the stream will not block
       </td></tr></tbody></table></div></td></tr><tr><td><span class="term"><code class="constant">:IO</code> status:</span></td><td><div class="informaltable"><a id="so-status-i-o"></a><table border="1"><colgroup><col align="center" /><col align="center" /><col align="center" /><col align="center" /></colgroup><thead><tr><th rowspan="2" align="center" valign="bottom">output status</th><th colspan="3" align="center">input status</th></tr><tr><th align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></th><th align="center"><code class="constant">:INPUT</code></th><th align="center"><code class="constant">:EOF</code></th></tr></thead><tbody><tr><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td><td align="center"><code class="constant">:INPUT</code></td><td align="center"><code class="constant">:EOF</code></td></tr><tr><td align="center"><code class="constant">:OUTPUT</code></td><td align="center"><code class="constant">:OUTPUT</code></td><td align="center"><code class="constant">:IO</code></td><td align="center"><code class="constant">:APPEND</code></td></tr></tbody></table></div></td></tr></tbody></table></div><div class="variablelist"><p class="title"><b>Possible values of
     <em class="replaceable"><code>socket-stream-or-list</code></em>:</b></p><dl><dt><span class="term"><a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a> or <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-SERVER</code></a></span></dt><dd>Returns the appropriate status, as defined
       above (<code class="constant">:IO</code> status for <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>)
    </dd><dt><span class="term"><code class="code">(<a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a> . <em class="replaceable"><code>direction</code></em>)</code></span></dt><dd>Return the status in the specified direction
    </dd><dt><span class="term">a non-empty list of the above</span></dt><dd>Return a list of values, one for each element of the
       argument list (a la <a href="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html" target="_top"><code class="function">MAPCAR</code></a>)</dd></dl></div><p>If you want to avoid <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#cons" target="_top">consing[3]</a> up a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> list, you can
    make the elements of <em class="replaceable"><code>socket-stream-or-list</code></em>
    to be <span class="data"><code class="literal">(<em class="replaceable"><code>socket-stream</code></em> <em class="replaceable"><code>direction</code></em> .
     <em class="replaceable"><code>x</code></em>)</code></span> or <span class="data"><code class="literal">(<em class="replaceable"><code>socket-server</code></em> . <em class="replaceable"><code>x</code></em>)</code></span>.
    Then <a href="#so-status"><code class="function">SOCKET:SOCKET-STATUS</code></a> will destructively modify its argument and replace
    <em class="replaceable"><code>x</code></em> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> with the status and return the modified list.
    You can pass this modified list to <a href="#so-status"><code class="function">SOCKET:SOCKET-STATUS</code></a> again.</p><p>The optional arguments specify the timeout. <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> means
    wait forever, <code class="literal">0</code> means poll.</p><p>The second value returned is the number of objects with
    non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> status, i.e., “<span class="quote">actionable</span>” objects.
    <a href="#so-status"><code class="function">SOCKET:SOCKET-STATUS</code></a> returns either due to a timeout or when this number is
    positive, i.e., if the timeout was <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and <a href="#so-status"><code class="function">SOCKET:SOCKET-STATUS</code></a> did
    return, then the second value is positive (this is the reason <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
    is <span class="strong"><strong>not</strong></span> treated as an empty <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>, but as an invalid
    argument).</p><p>This is the interface to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/select.html"><code class="function">select</code></a>
    (on some platforms, <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/poll.html"><code class="function">poll</code></a>),
    so it will work on any <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> which is based on a
    <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>, e.g., <a href="impnotes.html#with-kbd" class="olink"><code class="varname">EXT:*KEYBOARD-INPUT*</code></a> and <a href="#open" title="21.3.9.&#xA0;Function OPEN">file</a>/<a href="#pipe" title="31.7.2.&#xA0;Pipes">pipe</a>/<a href="#socket" title="31.5.&#xA0;Socket Streams">socket</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s, as well as
    on <a href="#rawsock" title="32.14.&#xA0;Raw Socket Access">raw sockets</a>.</p></dd><dt><a id="sost-hopo"></a><span class="term"><code class="code">(<a href="#sost-hopo"><code class="function">SOCKET:SOCKET-STREAM-HOST</code></a> <em class="replaceable"><code>socket-stream</code></em>)</code><br /></span><span class="term"><code class="code">(<a href="#sost-hopo"><code class="function">SOCKET:SOCKET-STREAM-PORT</code></a> <em class="replaceable"><code>socket-stream</code></em>)</code></span></dt><dd>These two functions return information about the
    <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>.</dd><dt><a id="sost-peer"></a><span class="term"><code class="code">(<a href="#sost-peer"><code class="function">SOCKET:SOCKET-STREAM-PEER</code></a>
    <em class="replaceable"><code>socket-stream</code></em> [<em class="replaceable"><code>do-not-resolve-p</code></em>])</code></span></dt><dd><p>Given a <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>, this function returns the
    name of the host on the opposite side of the connection and its port
    number; the server-side can use this to see who connected.</p><p>When the optional second argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the hostname
    resolution is disabled and just the IP address is returned, without
    the <acronym class="acronym" title="Fully Qualified Domain Name">FQDN</acronym>.
 </p><p>The <em class="replaceable"><code>socket-stream</code></em> argument can also be a
                       <a href="#rawsock" title="32.14.&#xA0;Raw Socket Access">raw socket</a>.</p></dd><dt><a id="sost-local"></a><span class="term"><code class="code">(<a href="#sost-local"><code class="function">SOCKET:SOCKET-STREAM-LOCAL</code></a>
    <em class="replaceable"><code>socket-stream</code></em> [<em class="replaceable"><code>do-not-resolve-p</code></em>])</code></span></dt><dd><p>The dual to <a href="#sost-peer"><code class="function">SOCKET:SOCKET-STREAM-PEER</code></a> - same information,
   host name and port number, but for the local host.
   The difference from <a href="#sost-hopo"><code class="function">SOCKET:SOCKET-STREAM-HOST</code></a> and <a href="#sost-hopo"><code class="function">SOCKET:SOCKET-STREAM-PORT</code></a> is that this function
   asks the OS (and thus returns the correct trusted values) while the
   other two are just accessors to the internal data structure, and
   basically return the arguments given to the function which created
   the <em class="replaceable"><code>socket-stream</code></em>.</p><p>The <em class="replaceable"><code>socket-stream</code></em> argument can also be a
                       <a href="#rawsock" title="32.14.&#xA0;Raw Socket Access">raw socket</a>.</p></dd><dt><a id="sost-shut"></a><span class="term"><code class="code">(<a href="#sost-shut"><code class="function">SOCKET:SOCKET-STREAM-SHUTDOWN</code></a> <em class="replaceable"><code>socket-stream</code></em>
    <em class="replaceable"><code>direction</code></em>)</code></span></dt><dd><p>Some protocols provide for closing the connection
   in one <em class="replaceable"><code>direction</code></em> using <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/shutdown.html"><code class="function">shutdown</code></a>.
   This function provides an interface to this <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> system call.
   <em class="replaceable"><code>direction</code></em> should be <code class="constant">:INPUT</code> or <code class="constant">:OUTPUT</code>.  Note that you
   should still call <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> after you are done with your <em class="replaceable"><code>socket-stream</code></em>; this
   is best accomplished by using <a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><code class="function">WITH-OPEN-STREAM</code></a>.</p><p>All <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>s are <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s (i.e., both <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><code class="function">INPUT-STREAM-P</code></a>
   and <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><code class="function">OUTPUT-STREAM-P</code></a> return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> for them).
   <a href="#sost-shut"><code class="function">SOCKET:SOCKET-STREAM-SHUTDOWN</code></a> <span class="emphasis"><em>breaks</em></span> this and turns its argument
   stream into an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> (if <em class="replaceable"><code>direction</code></em> is <code class="constant">:OUTPUT</code>) or <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> (if
   <em class="replaceable"><code>direction</code></em> is <code class="constant">:INPUT</code>).
    Thus, the following important invariant is preserved: whenever
   </p><div class="itemizedlist"><ul type="disc"><li>a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> is open
    (i.e., <a href="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html" target="_top"><code class="function">OPEN-STREAM-P</code></a> returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>) and</li><li>a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> is an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> (i.e., <a href="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html" target="_top"><code class="function">INPUT-STREAM-P</code></a>
     returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)</li></ul></div><p>
   the <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> can be read from (e.g., with <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html" target="_top"><code class="function">READ-BYTE</code></a>).
   </p><p>The <em class="replaceable"><code>socket-stream</code></em> argument can also be a
                       <a href="#rawsock" title="32.14.&#xA0;Raw Socket Access">raw socket</a>.</p></dd><dt><a id="so-opt"></a><span class="term"><code class="code">(<a href="#so-opt"><code class="function">SOCKET:SOCKET-OPTIONS</code></a> <em class="replaceable"><code>socket-server</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a>
    {<em class="replaceable"><code>option</code></em>}*)</code></span></dt><dd><p>Query and, optionally, set socket options using
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getsockopt.html"><code class="function">getsockopt</code></a>
   and <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setsockopt.html"><code class="function">setsockopt</code></a>.
   An <em class="replaceable"><code>option</code></em> is a keyword, optionally followed by the new value.
   When the new value is not supplied,
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setsockopt.html"><code class="function">setsockopt</code></a> is not called.
   For each option the old (or current, if new value was not supplied)
   value is returned.  E.g., <code class="code">(<a href="#so-opt"><code class="function">SOCKET:SOCKET-OPTIONS</code></a> <em class="replaceable"><code>socket-server</code></em>
   :SO-LINGER 1 :SO-RCVLOWAT)</code> returns 2 values: <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the old
   value of the <code class="constant">:SO-LINGER</code> option, and 1, the
   current value of the <code class="constant">:SO-RCVLOWAT</code> option.
  </p><p>The <em class="replaceable"><code>socket-stream</code></em> argument can also be a
                       <a href="#rawsock" title="32.14.&#xA0;Raw Socket Access">raw socket</a>.</p></dd><dt><a id="so-handles"></a><span class="term"><code class="code">(<a href="#so-handles"><code class="function">SOCKET:STREAM-HANDLES</code></a>
    <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>Return the input and output OS <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>s of the
    <em class="replaceable"><code>stream</code></em> as <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.  See <a href="#rawsock" title="32.14.&#xA0;Raw Socket Access">Section 32.14, “Raw Socket Access”</a>.
 </dd></dl></div></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="quickstart"></a>31.6. Quickstarting delivery with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#quickstart-summary">31.6.1. Summary</a></span></dt><dt><span class="section"><a href="#quickstart-unix">31.6.2. Scripting with <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#quickstart-desktop">31.6.3. Desktop Environments</a></span></dt><dt><span class="section"><a href="#quickstart-linux">31.6.4. Associating extensions with <span><strong class="command">CLISP</strong></span> via kernel</a></span></dt></dl></div><p>This section describes three ways to turn <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> programs into
 executable programs, which can be started as quickly as executables
 written in other languages.
 Note that <a href="impnotes.html#image" class="olink"><code class="function">EXT:SAVEINITMEM</code></a> can also create standalone executables.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="quickstart-summary"></a>31.6.1. Summary</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a></span></dt><dd><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can act as a script interpreter.
  </dd><dt><span class="term">Desktop environments such as <a href="http://www.kde.org/" target="_top"><span class="strong"><strong>KDE</strong></span></a>, <a href="http://www.gnome.org/" target="_top"><span class="strong"><strong>Gnome</strong></span></a>,
   <a href="http://www.apple.com/macosx/" target="_top"><span class="strong"><strong>Mac OS X</strong></span></a> or <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>.</span></dt><dd>Files created with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can be associated with
   the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> executable so that clicking on them would make <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
   execute the appropriate code.</dd><dt><span class="term"><a href="http://www.linux.org/" target="_top"><span class="strong"><strong>Linux</strong></span></a> kernel with
   <code class="option">CONFIG_BINFMT_MISC=y</code></span></dt><dd>Associate the extensions <code class="filename">#P".fas"</code>
    and <code class="filename">#P".lisp"</code> with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>; then you can make the
    files executable and run them from the command line.
 </dd></dl></div><p>These three techniques apply to a single <code class="filename">#P".lisp"</code> or <code class="filename">#P".fas"</code> file.
 If your application is made up of several <code class="filename">#P".lisp"</code> or <code class="filename">#P".fas"</code> files,
 you can simply concatenate them (using <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/cat.html"><span><strong class="command">cat</strong></span></a>)
 into one file; the techniques then apply to that concatenated file.</p></div>
<!--#ifdef UNIX-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="quickstart-unix"></a>31.6.2. Scripting with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h3></div><div><h4 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></h4></div></div></div><p>On <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, a text file (<code class="filename">#P".fas"</code> or <code class="filename">#P".lisp"</code>) can
 be made executable by adding a first line of the form
 </p><pre class="screen">#!<em class="replaceable"><code>interpreter</code></em> [<em class="replaceable"><code>interpreter-arguments</code></em>]</pre><p>
 and using <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/chmod.html"><span><strong class="command">chmod</strong></span></a> to make the file
 executable.</p><p><b>OS Requirements. </b><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can be used as a script interpreter under the following
 conditions:
</p><div class="itemizedlist"><ul type="disc"><li>The <em class="replaceable"><code>interpreter</code></em> must be the full pathname of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 The recommended path is <code class="filename">/usr/local/bin/clisp</code>,
 and if <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is actually installed elsewhere, making
 <code class="filename">/usr/local/bin/clisp</code> be a symbolic link to the
 real <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</li><li>The <em class="replaceable"><code>interpreter</code></em> must be a real executable, not a script.
 Unfortunately, in the binary distributions of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> on Solaris,
 <span><strong class="command">clisp</strong></span> is a shell script because a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler cannot be
 assumed to be installed on this platform.  If you do have a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
 compiler installed, build <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> from the source yourself;
 <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/make.html"><span><strong class="command">make install</strong></span></a> will install <span><strong class="command">clisp</strong></span> as
 a real executable.</li><li><p>On some platforms, the first line which specifies the
 interpreter is limited in length:
   </p><div class="itemizedlist"><ul type="circle"><li>max. 32 characters on SunOS 4,</li><li>max. 80 characters on HP-UX,</li><li>max. 127 characters on <a href="http://www.linux.org/" target="_top"><span class="strong"><strong>Linux</strong></span></a>.</li></ul></div><p>
   Characters exceeding this limit are simply cut off by the system.
   At least 128 characters are accepted on Solaris, IRIX, AIX, OSF/1.
   There is no workaround: You have to keep the interpreter pathname
   and arguments short.</p></li><li>On Solaris and HP-UX, only the first
 <em class="replaceable"><code>interpreter-arg</code></em> is passed to the <em class="replaceable"><code>interpreter</code></em>.
 In order to pass more than one option (for example, <code class="option"><a href="clisp.html#opt-memfile" class="olink">-M</a></code> and
 <code class="option"><a href="clisp.html#opt-load-comp" class="olink">-C</a></code>) to <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, separate them with
 <a href="http://www.fileformat.info/info/unicode/char/00a0/" target="_top">no-break
 spaces</a> instead of normal spaces.  (But the separator between
 <em class="replaceable"><code>interpreter</code></em> and <em class="replaceable"><code>interpreter-arguments</code></em> must still be a normal space!) <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 will split the <em class="replaceable"><code>interpreter-arguments</code></em> both at no-break spaces and at normal spaces.
</li></ul></div><p><a id="script-exec"></a><b>Script execution. </b></p><div class="itemizedlist"><ul type="disc"><li>The script should contain Lisp
   forms, except in the <code class="literal">#!</code> line.</li><li>The file is loaded normally, through the function
   <a href="impnotes.html#loadfile" class="olink"><code class="function">LOAD</code></a> (in particular, the name of the script file, which
   is <code class="envar">$0</code> in <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"><span><strong class="command">/bin/sh</strong></span></a>, can be found in <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pa_d-truenamest.html" target="_top"><code class="varname">*LOAD-TRUENAME*</code></a> and
   <a href="http://www.lisp.org/HyperSpec/Body/var_stload-pa_d-truenamest.html" target="_top"><code class="varname">*LOAD-PATHNAME*</code></a>).</li><li>Before it is loaded, the variable <a href="impnotes.html#script-exec" class="olink"><code class="varname">EXT:*ARGS*</code></a> is bound
   to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s, representing the arguments given to the
   Lisp script (i.e., <code class="envar">$1</code> in <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"><span><strong class="command">/bin/sh</strong></span></a> becomes <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_firstcm_s_inthcm_tenth.html" target="_top"><code class="function">FIRST</code></a>
     <a href="impnotes.html#script-exec" class="olink"><code class="varname">EXT:*ARGS*</code></a>)</code> etc).</li><li>The standard <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> i/o facilities
    (see <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/stdio.h.html">&lt;<code class="filename">stdio.h</code>&gt;</a>) are used:
    <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-INPUT*</code></a> is bound to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/stdin.html"><code class="varname">stdin</code></a>,
    <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*STANDARD-OUTPUT*</code></a> to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/stdout.html"><code class="varname">stdout</code></a>, and
    <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*ERROR-OUTPUT*</code></a> to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/stderr.html"><code class="varname">stderr</code></a>.
    Note <a href="#dribble-script" title="25.2.13.1.&#xA0;Scripting and DRIBBLE">Section 25.2.13.1, “Scripting and <code class="function">DRIBBLE</code>”</a>.</li><li>The <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>s will be turned into <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a>s
   (using <a href="impnotes.html#appease-cerrors" class="olink"><code class="function">EXT:APPEASE-CERRORS</code></a>).</li><li>Non-<a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#continuable" target="_top">continuable</a> <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a>s and
   <span><strong class="keycap">Control</strong></span>-<span class="keysym">C</span> interrupts will
   terminate the execution of the Lisp script with an error status
   (using <a href="impnotes.html#exit-on-error" class="olink"><code class="function">EXT:EXIT-ON-ERROR</code></a>).</li><li>If you wish the script's contents to be compiled
    during loading, add <code class="option"><a href="clisp.html#opt-load-comp" class="olink">-C</a></code> to the <em class="replaceable"><code>interpreter-arguments</code></em>.
 </li></ul></div><p>
 See also <a href="clisp.html#opt-exec-file" class="olink">the manual</a>.
</p><p><a id="script-bad"></a><b>If nothing works. </b>Another, quite inferior, alternative is to put the following into
 a file:
</p><pre class="programlisting">
#!/bin/sh
exec clisp &lt;&lt;EOF
(lisp-form)
(another-lisp-form)
(yet-another-lisp-form)
EOF
</pre><p>
The problem with this approach is that the return values of each form
will be printed to the standard output.  Another problem is that no user
input will be available.</p></div>
<!--#endif-->
<div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="quickstart-desktop"></a>31.6.3. Desktop Environments</h3></div><div><h4 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>, <a href="http://www.gnome.org/" target="_top"><span class="strong"><strong>Gnome</strong></span></a>, <a href="http://www.kde.org/" target="_top"><span class="strong"><strong>KDE</strong></span></a>, <a href="http://www.apple.com/macosx/" target="_top"><span class="strong"><strong>Mac OS X</strong></span></a>
  desktop platforms only.</span></span></h4></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="quickstart-desktop-win32"></a>Notations</h3><p>Although we use <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>-specific notation, these techniques work
 on other desktop environments as well.</p></div><p>There are two different ways to make <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 “<span class="quote">executables</span>” on desktop platforms.</p><div class="orderedlist"><ol type="1"><li>Associate the <code class="filename">#P".mem"</code> extension with
   <span><strong class="command">c:\clisp\clisp.exe <code class="option"><a href="clisp.html#opt-memfile" class="olink">-M</a></code> %s</strong></span>.
  </li><li>Associate the <code class="filename">#P".fas"</code> extension with
   <span><strong class="command">c:\clisp\clisp.exe <code class="option"><a href="clisp.html#opt-init" class="olink">-i</a></code> %s</strong></span>
    Alternatively, you may want to have a function
    <code class="function">main</code> in your <code class="filename">#P".fas"</code> files and associate
    the <code class="filename">#P".fas"</code> extension with <span><strong class="command">c:\clisp\clisp.exe <code class="option"><a href="clisp.html#opt-init" class="olink">-i</a></code>
     %s <code class="option"><a href="clisp.html#opt-exec-expr" class="olink">-x</a></code> (main)</strong></span>.
  </li></ol></div><p>Then clicking on the compiled lisp file (with <code class="filename">#P".fas"</code>
 extension) will load the file (thus executing all the code in the
 file), while the clicking on a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="impnotes.html#image" class="olink">memory image</a> (with <code class="filename">#P".mem"</code>
 extension) will start <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> with the given <a href="impnotes.html#image" class="olink">memory image</a>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Note that <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is distributed with a file
 <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/install.bat"><code class="filename">src/install.bat</code></a>, which
 runs <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/install.lisp"><code class="filename">src/install.lisp</code></a> to create a
 file <code class="filename">clisp.lnk</code> on your desktop and also associates
 <code class="filename">#P".fas"</code>, <code class="filename">#P".lisp"</code>, and <code class="filename">#P".mem"</code> files with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="quickstart-linux"></a>31.6.4. Associating extensions with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> via kernel</h3></div><div><h4 class="subtitle"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.linux.org/" target="_top"><span class="strong"><strong>Linux</strong></span></a> platforms
   only.</span></span></h4></div></div></div><p>You have to build your kernel with
 <code class="option">CONFIG_BINFMT_MISC=y</code> and
 <code class="option">CONFIG_PROC_FS=y</code>.  Then you will have a
 <code class="filename">/proc/sys/fs/binfmt_misc/</code> directory and you will
 be able to do (as <code class="literal">root</code>; you might want to put
 these lines into <code class="filename">/etc/rc.d/rc.local</code>):

</p><pre class="screen">
<code class="prompt">#</code> echo ":CLISP:E::fas::/usr/local/bin/clisp:" &gt;&gt; /proc/sys/fs/binfmt_misc/register
<code class="prompt">#</code> echo ":CLISP:E::lisp::/usr/local/bin/clisp:" &gt;&gt; /proc/sys/fs/binfmt_misc/register
</pre><p>Then you can do the following:
</p><pre class="screen">
<code class="prompt">$</code> cat &lt;&lt; EOF &gt; hello.lisp
(print "hello, world!")
EOF
<code class="prompt">$</code> clisp -c hello.lisp
;; Compiling file hello.lisp ...
;; Wrote file hello.lisp
0 errors, 0 warnings
<code class="prompt">$</code> chmod +x hello.fas
<code class="prompt">$</code> hello.fas

"hello, world!"
<code class="prompt">$</code>
</pre><p>Please read
 <a href="http://www.linuxhq.com/kernel/file/Documentation/binfmt_misc.txt" target="_top">
  <code class="filename">/usr/src/linux/Documentation/binfmt_misc.txt</code></a>
 for details.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="shell"></a>31.7. Shell, Pipes and Printing</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#exec">31.7.1. Shell</a></span></dt><dt><span class="section"><a href="#pipe">31.7.2. Pipes</a></span></dt><dt><span class="section"><a href="#hardcopy">31.7.3. Printing</a></span></dt></dl></div><p>This section describes how <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can invoke external
 executables and communicate with the resulting processes.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="exec"></a>31.7.1. Shell</h3></div></div></div><div class="variablelist">
<!--#ifdef UNIX-->
<dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></span></dt><dd><code class="code">(<a href="#exec" title="31.7.1.&#xA0;Shell"><code class="function">EXT:EXECUTE</code></a> <em class="replaceable"><code>program</code></em>
       <em class="replaceable"><code>arg<sub>1</sub></code></em>
       <em class="replaceable"><code>arg<sub>2</sub></code></em> ...)</code>
   executes an external program.
   Its name is <em class="replaceable"><code>program</code></em> (a full pathname).
   It is given the <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s <em class="replaceable"><code>arg<sub>1</sub></code></em>,
   <em class="replaceable"><code>arg<sub>2</sub></code></em>, ... as arguments.
 </dd>
<!--#endif-->
<!--#ifdef HAVE_SHELL-->
<dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></span></dt><dd><code class="code">(<a href="impnotes.html#exec" class="olink"><code class="function">EXT:SHELL</code></a> [<em class="replaceable"><code>command</code></em>])</code>
   calls the operating system's shell, the value of the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a>
   <code class="envar">SHELL</code> on <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> and <code class="envar">COMSPEC</code> on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>.
   <code class="code">(<a href="impnotes.html#exec" class="olink"><code class="function">EXT:SHELL</code></a>)</code> calls the shell for interactive use.
   <code class="code">(<a href="impnotes.html#exec" class="olink"><code class="function">EXT:SHELL</code></a> <em class="replaceable"><code>command</code></em>)</code> calls the shell
   only for execution of the one given <em class="replaceable"><code>command</code></em>.
 </dd>
<!--#endif-->
<!--#ifdef PIPES2-->
<dt><a id="run-prog"></a><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></span></dt><dd><p>The functions <a href="#run-prog"><code class="function">EXT:RUN-SHELL-COMMAND</code></a> and <a href="#run-prog"><code class="function">EXT:RUN-PROGRAM</code></a> are the
   general interface to <a href="impnotes.html#exec" class="olink"><code class="function">EXT:SHELL</code></a> and the above:</p><p><code class="code">(<a href="#run-prog"><code class="function">EXT:RUN-SHELL-COMMAND</code></a> <em class="replaceable"><code>command</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    <code class="constant">:MAY-EXEC</code> <code class="constant">:INDIRECTP</code>
    <code class="constant">:INPUT</code> <code class="constant">:OUTPUT</code> <code class="constant">:IF-OUTPUT-EXISTS</code> <code class="constant">:WAIT</code>)</code>
   runs a shell command (including shell built-in commands,
   like <span><strong class="command">DIR</strong></span> on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>
   and <span><strong class="command">for/do/done</strong></span> on <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>).</p><p><code class="code">(<a href="#run-prog"><code class="function">EXT:RUN-PROGRAM</code></a> <em class="replaceable"><code>program</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    <code class="constant">:MAY-EXEC</code> <code class="constant">:INDIRECTP</code>
    <code class="constant">:ARGUMENTS</code> <code class="constant">:INPUT</code> <code class="constant">:OUTPUT</code> <code class="constant">:IF-OUTPUT-EXISTS</code> <code class="constant">:WAIT</code>)</code>
   runs an external program.</p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>command</code></em></span></dt><dd><p>the shell command.</p>
<!--#ifdef UNIX-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></span></dt><dd>The shell the command is passed to is the value
       of the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a> <code class="envar">SHELL</code>, which normally is <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"><span><strong class="command">/bin/sh</strong></span></a>.
       The command should be a “<span class="quote">simple command</span>”;
       a “<span class="quote">command list</span>” should be enclosed in "{
       ... ; }" (for <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"><span><strong class="command">/bin/sh</strong></span></a>) or "( ... )" (for <code class="filename">/bin/csh</code>).
     </dd></dl></div>
<!--#endif-->
</dd><dt><span class="term"><em class="replaceable"><code>program</code></em></span></dt><dd>the program.  The directories listed in the
     <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a> <code class="envar">PATH</code> will be searched for it.
    </dd><dt><span class="term"><code class="constant">:ARGUMENTS</code></span></dt><dd>a list of arguments (<a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s) that are given
      to the program.</dd><dt><span class="term"><code class="constant">:INPUT</code></span></dt><dd>where the program's input is to come from: either
     <code class="constant">:TERMINAL</code> (the standard input, default) or
     <code class="constant">:STREAM</code> (a Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> to be created) or
     a <a href="#path-des">pathname designator</a> (an input file) or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (no input at all).
   </dd><dt><span class="term"><code class="constant">:OUTPUT</code></span></dt><dd>where the program's output is to be sent to: either
     <code class="constant">:TERMINAL</code> (the standard output, default) or
     <code class="constant">:STREAM</code> (a Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> to be created) or
     a <a href="#path-des">pathname designator</a> (an output file) or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (ignore the output).
   </dd><dt><span class="term"><code class="constant">:IF-OUTPUT-EXISTS</code></span></dt><dd>what to do if the <code class="constant">:OUTPUT</code> file already exists.
     The possible values are <code class="constant">:OVERWRITE</code>, <code class="constant">:APPEND</code>, <code class="constant">:ERROR</code>,
     with the same meaning as for <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a>. The default is <code class="constant">:OVERWRITE</code>.
    </dd><dt><span class="term"><code class="constant">:WAIT</code></span></dt><dd>whether to wait for program termination or not
     (this is useful when no i/o to the process is needed);
     the default is <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, i.e., synchronous execution.
    </dd>
<!--#ifdef UNIX-->
<dt><span class="term"><code class="constant">:MAY-EXEC</code></span></dt><dd>pass <span><strong class="command">exec</strong></span> to the underlying
    shell (<a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> only).</dd>
<!--#endif-->
<!--#ifdef WIN32-->
<dt><span class="term"><code class="constant">:INDIRECTP</code></span></dt><dd>use a shell to run the command, e.g.,
    <code class="code">(<a href="#run-prog"><code class="function">EXT:RUN-PROGRAM</code></a> "dir" :indirectp <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)</code>
    will run the shell built-in command <span><strong class="command">DIR</strong></span>.
    This argument defaults to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> for <a href="#run-prog"><code class="function">EXT:RUN-SHELL-COMMAND</code></a> and to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> for <a href="#run-prog"><code class="function">EXT:RUN-PROGRAM</code></a>.
    (<a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> only).</dd>
<!--#endif-->
</dl></div><p>If <code class="constant">:STREAM</code> was specified for <code class="constant">:INPUT</code> or <code class="constant">:OUTPUT</code>, a Lisp
 <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> is returned.
 If <code class="constant">:STREAM</code> was specified for both <code class="constant">:INPUT</code> and <code class="constant">:OUTPUT</code>, three
 Lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s are returned, as for the function <a href="#pipe" title="31.7.2.&#xA0;Pipes"><code class="function">EXT:MAKE-PIPE-IO-STREAM</code></a>.
 Otherwise, the return value depends on the process termination
 status: if it ended normally (without signal, core-dump etc), its exit
 status is returned as an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>, otherwise <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> is returned.</p><p>This use of <a href="#run-prog"><code class="function">EXT:RUN-PROGRAM</code></a> can cause
 <a href="#deadlock">deadlocks</a>, see <a href="#pipe" title="31.7.2.&#xA0;Pipes"><code class="function">EXT:MAKE-PIPE-IO-STREAM</code></a>.</p></dd>
<!--#endif-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="pipe"></a>31.7.2. Pipes</h3></div></div></div>
<!--#ifdef PIPES-->
<div class="variablelist"><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></span></dt><dd><div class="variablelist"><dl><dt><span class="term"><code class="code">(<a href="#pipe" title="31.7.2.&#xA0;Pipes"><code class="function">EXT:MAKE-PIPE-INPUT-STREAM</code></a> <em class="replaceable"><code>command</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a>
    <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <a href="#buffered"><code class="constant">:BUFFERED</code></a>)</code></span></dt><dd>returns an <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> that will supply the output
   from the execution of the given operating system command.
</dd><dt><span class="term"><code class="code">(<a href="#pipe" title="31.7.2.&#xA0;Pipes"><code class="function">EXT:MAKE-PIPE-OUTPUT-STREAM</code></a> <em class="replaceable"><code>command</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a>
   <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <a href="#buffered"><code class="constant">:BUFFERED</code></a>)</code></span></dt><dd>returns an <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> that will pass its output as
   input to the execution of the given operating system command.
</dd>
<!--#ifdef PIPES2-->
<dt><span class="term"><code class="code">(<a href="#pipe" title="31.7.2.&#xA0;Pipes"><code class="function">EXT:MAKE-PIPE-IO-STREAM</code></a> <em class="replaceable"><code>command</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a>
   <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <a href="#buffered"><code class="constant">:BUFFERED</code></a>)</code></span></dt><dd><p>returns three values.
  The <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#primary_value" target="_top">primary value</a> is a <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> that will simultaneously pass its output
  as input to the execution of the given operating system command and
  supply the output from this command as input.
  The second and third value are the <a href="http://www.lisp.org/HyperSpec/Body/glo_i.html#input" target="_top">input</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> and the <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> that
  make up the <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>, respectively.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>These three streams must be closed individually, see
   <a href="http://www.lisp.org/HyperSpec/Issues/iss052.html" target="_top">CLOSE-CONSTRUCTED-STREAM:ARGUMENT-STREAM-ONLY</a>.</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="deadlock"></a>Warning</h3><p>Improper use of this function
   can lead to <span class="emphasis"><em>deadlocks</em></span>.
   Use it at your own risk!</p><p>A deadlock occurs if the command and your Lisp program either
   both try to read from each other at the same time or both try to
   write to each other at the same time.</p><p>To avoid deadlocks, it is recommended that you fix a
   protocol between the command and your program and avoid any hidden
   buffering: use <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char.html" target="_top"><code class="function">READ-CHAR</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html" target="_top"><code class="function">READ-CHAR-NO-HANG</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_listen.html" target="_top"><code class="function">LISTEN</code></a>,
   <a href="#so-status"><code class="function">SOCKET:SOCKET-STATUS</code></a> instead of <a href="http://www.lisp.org/HyperSpec/Body/fun_read-line.html" target="_top"><code class="function">READ-LINE</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html" target="_top"><code class="function">READ</code></a> on the input side, and
   complete every output operation by a <a href="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html" target="_top"><code class="function">FINISH-OUTPUT</code></a>.
   The same precautions must apply to the called command as well.
</p></div></dd>
<!--#endif-->
</dl></div></dd></dl></div>
<!--#endif-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="hardcopy"></a>31.7.3. Printing</h3></div></div></div><p>The macro
 <strong class="first"><em class="firstterm"><a href="#hardcopy" title="31.7.3.&#xA0;Printing"><code class="function">EXT:WITH-OUTPUT-TO-PRINTER</code></a><a id="with-print" class="indexterm"></a></em></strong>:
</p><pre class="programlisting">
(<a href="#hardcopy" title="31.7.3.&#xA0;Printing"><code class="function">EXT:WITH-OUTPUT-TO-PRINTER</code></a> (<em class="replaceable"><code>variable</code></em> [<a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a>])
  {<em class="replaceable"><code>declaration</code></em>}*
  {<em class="replaceable"><code>form</code></em>}*)
</pre><p>
 binds the variable <em class="replaceable"><code>variable</code></em> to an <a href="http://www.lisp.org/HyperSpec/Body/glo_o.html#output" target="_top">output</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>
 that sends its output to the printer.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="getenv"></a>31.8. Operating System Environment</h2></div></div></div><p>Most modern operating systems support <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a>s that associate
 strings (“<span class="quote">variables</span>”) with other strings
 (“<span class="quote">values</span>”).  These variables are somewhat similar to the
 <a href="http://www.lisp.org/HyperSpec/Body/dec_special.html" target="_top"><code class="literal">SPECIAL</code></a> variables in <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>: their values are inherited by the
 processes from their parent process.</p><p>You can access your OS <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a>s using the function
<code class="code">(<a href="#getenv" title="31.8.&#xA0;Operating System Environment"><code class="function">EXT:GETENV</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>string</code></em>)</code>,
where <em class="replaceable"><code>string</code></em> is the name of the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a>.
When <em class="replaceable"><code>string</code></em> is omitted or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, all the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a>s and their values
are returned in an <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>.</p><p>You can change the value of existing <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html">environment variable</a>s or create new ones
 using <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="#getenv" title="31.8.&#xA0;Operating System Environment"><code class="function">EXT:GETENV</code></a> <em class="replaceable"><code>string</code></em>) <em class="replaceable"><code>new-value</code></em>)</code>.
</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ext-modules"></a>Chapter 32. Extensions Implemented as Modules</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#matlab">32.1. Matlab Interface</a></span></dt><dt><span class="section"><a href="#netica">32.2. Netica Interface</a></span></dt><dt><span class="section"><a href="#dir-key">32.3. Directory Access</a></span></dt><dt><span class="section"><a href="#berkeley-db">32.4. Berkeley DB access</a></span></dt><dd><dl><dt><span class="section"><a href="#bdb-objects">32.4.1. Berkeley-DB Objects</a></span></dt><dt><span class="section"><a href="#bdb-close">32.4.2. Closing handles</a></span></dt><dt><span class="section"><a href="#bdb-db-environment">32.4.3. Database Environment</a></span></dt><dt><span class="section"><a href="#bdb-environment-config">32.4.4. Environment Configuration</a></span></dt><dt><span class="section"><a href="#bdb-operations">32.4.5. Database Operations</a></span></dt><dt><span class="section"><a href="#bdb-db-config">32.4.6. Database Configuration</a></span></dt><dt><span class="section"><a href="#bdb-cursor">32.4.7. Database Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-lock">32.4.8. Lock Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-log">32.4.9. Log Subsystem</a></span></dt><dd><dl><dt><span class="section"><a href="#bdb-log-cursor">32.4.9.1. Log Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-log-seq">32.4.9.2. Log Sequence Numbers</a></span></dt></dl></dd><dt><span class="section"><a href="#bdb-mem-pool">32.4.10. Memory Pool Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-replication">32.4.11. Replication</a></span></dt><dt><span class="section"><a href="#bdb-sequences">32.4.12. Sequences</a></span></dt><dt><span class="section"><a href="#bdb-transaction">32.4.13. Transaction Subsystem</a></span></dt></dl></dd><dt><span class="section"><a href="#regexp-mod">32.5. POSIX Regular Expressions</a></span></dt><dd><dl><dt><span class="section"><a href="#regexp-api">32.5.1. Regular Expression API</a></span></dt><dt><span class="section"><a href="#re-example">32.5.2. Example</a></span></dt></dl></dd><dt><span class="section"><a href="#pari">32.6. Computer Algebra System PARI</a></span></dt><dt><span class="section"><a href="#pcre">32.7. Perl Compatible Regular Expressions</a></span></dt><dt><span class="section"><a href="#postgresql">32.8. PostgreSQL Database Access</a></span></dt><dt><span class="section"><a href="#i18n-mod">32.9. Internationalization of User Programs</a></span></dt><dd><dl><dt><span class="section"><a href="#ggettext">32.9.1. The GNU gettext</a></span></dt><dd><dl><dt><span class="section"><a href="#domain">32.9.1.1. Domain</a></span></dt><dt><span class="section"><a href="#category">32.9.1.2. Category</a></span></dt><dt><span class="section"><a href="#i18n-example">32.9.1.3. Internationalization Example</a></span></dt></dl></dd><dt><span class="section"><a href="#i18n-locale">32.9.2. Locale</a></span></dt></dl></dd><dt><span class="section"><a href="#readline-mod">32.10. Advanced Readline and History Functionality</a></span></dt><dt><span class="section"><a href="#syscalls">32.11. System Calls</a></span></dt><dt><span class="section"><a href="#oracle">32.12. Oracle Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#ora-functionality">32.12.1. Functions and Macros in
  package <strong class="package">“<span class="quote">ORACLE</span>”</strong></a></span></dt><dt><span class="section"><a href="#ora-example">32.12.2. Oracle Example</a></span></dt><dt><span class="section"><a href="#ora-config">32.12.3. Oracle Configuration</a></span></dt><dt><span class="section"><a href="#ora-build">32.12.4. Building the Oracle Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#fastcgi">32.13. The FastCGI Interface</a></span></dt><dd><dl><dt><span class="section"><a href="#fcgi-overview">32.13.1. Overview of FastCGI</a></span></dt><dt><span class="section"><a href="#fcgi-functionality">32.13.2. Functions in Package <strong class="package">“<span class="quote">FASTCGI</span>”</strong></a></span></dt><dt><span class="section"><a href="#fcgi-example">32.13.3. FastCGI Example</a></span></dt><dt><span class="section"><a href="#fcgi-build">32.13.4. Building and configuring the
  FastCGI Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#rawsock">32.14. Raw Socket Access</a></span></dt><dd><dl><dt><span class="section"><a href="#rawsock-intro">32.14.1. Introduction</a></span></dt><dt><span class="section"><a href="#rawsock-func">32.14.2. Single System Call Functions</a></span></dt><dt><span class="section"><a href="#rawsock-args">32.14.3. Common arguments</a></span></dt><dd><dl><dt><span class="section"><a href="#rawsock-plat-dep-constants">32.14.3.1. Platform-dependent Keywords</a></span></dt></dl></dd><dt><span class="section"><a href="#rawsock-return">32.14.4. Return Values</a></span></dt><dt><span class="section"><a href="#rawsock-not-implemented">32.14.5. Not Implemented</a></span></dt><dt><span class="section"><a href="#rawsock-high-level">32.14.6. High-Level Functions</a></span></dt></dl></dd><dt><span class="section"><a href="#wildcard">32.15. The Wildcard Module</a></span></dt><dd><dl><dt><span class="section"><a href="#wildcard-syntax">32.15.1. Wildcard Syntax</a></span></dt></dl></dd><dt><span class="section"><a href="#zlib">32.16. ZLIB Interface</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="matlab"></a>32.1. Matlab Interface</h2></div></div></div><p>This is an interface to the
 <a class="matlab" href="http://www.mathworks.com/access/helpdesk/help/techdoc/apiref/apiref.shtml">Matlab C API</a>.
 The package <strong class="package">“<span class="quote">MATLAB</span>”</strong> is
 <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity">case-sensitive</a>, so you would write
 <code class="code">(matlab:engOpen ...)</code>
 when you need to call <a class="matlab" href="http://www.mathworks.com/access/helpdesk/help/techdoc/apiref/engopen.html"><code class="function">engOpen</code></a>.
</p><p>Additionally, some higher level functionality is available
 (see <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/matlab/test.tst"><code class="filename">modules/matlab/test.tst</code></a>
 for sample usage):</p><div class="variablelist"><dl><dt><a id="matlab-matfile-content"></a><span class="term"><code class="code">(matlab:matfile-content mf)</code></span></dt><dd>Return a <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> of <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s naming the
   variables in file <em class="replaceable"><code>mf</code></em>
   (opened using <a class="matlab" href="http://www.mathworks.com/access/helpdesk/help/techdoc/apiref/matopen.html"><code class="function">matOpen</code></a>).
</dd><dt><a id="matlab-command"></a><span class="term"><code class="varname">matlab:*command*</code></span></dt><dd>The default argument to
   <a class="matlab" href="http://www.mathworks.com/access/helpdesk/help/techdoc/apiref/engopen.html"><code class="function">engOpen</code></a>.
</dd><dt><a id="matlab-engine-v"></a><span class="term"><code class="varname">matlab:*engine*</code></span></dt><dd>The currrently open Matlab engine.
</dd><dt><a id="matlab-engine-f"></a><span class="term"><code class="code">(matlab:engine)</code></span></dt><dd>Make sure <code class="varname">*engine*</code> is valid and
   return it.</dd><dt><a id="matlab-with-engine"></a><span class="term"><code class="code">(matlab:with-engine
   (<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> engine command) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <em class="replaceable"><code>body</code></em>)</code></span></dt><dd>Run the <em class="replaceable"><code>body</code></em> wuth the <em class="replaceable"><code>engine</code></em>
   bound to a Matlab engine (default <code class="varname">*engine*</code>).
   The engine is opened with <a class="matlab" href="http://www.mathworks.com/access/helpdesk/help/techdoc/apiref/engopen.html"><code class="function">engOpen</code></a>,
   then closed with <a class="matlab" href="http://www.mathworks.com/access/helpdesk/help/techdoc/apiref/engclose.html"><code class="function">engClose</code></a>.
</dd><dt><a id="matlab-with-MATfile"></a><span class="term"><code class="code">(matlab:with-MATfile
   (file name <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> mode) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <em class="replaceable"><code>body</code></em>)</code></span></dt><dd><a class="matlab" href="http://www.mathworks.com/access/helpdesk/help/techdoc/apiref/matopen.html"><code class="function">matOpen</code></a> the
   matlab file, do the <em class="replaceable"><code>body</code></em>, <a class="matlab" href="http://www.mathworks.com/access/helpdesk/help/techdoc/apiref/matclose.html"><code class="function">matClose</code></a>
   it.</dd><dt><a id="copy-lisp-to-mxArray"></a><span class="term"><code class="code">(matlab:copy-lisp-to-mxArray
   lisp-array <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> matlab-matrix)</code></span></dt><dd>Copy data from the 2-dimensional lisp array to the
  Matlab matrix.</dd><dt><a id="copy-lisp-to-matlab"></a><span class="term"><code class="code">(matlab:copy-lisp-to-matlab
   lisp-array matlab-variable <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> engine)</code></span></dt><dd>Copy the 2-dimensional lisp array to the Matlab
  variable (a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>) in the supplied engine (defaults to
  <code class="varname">*engine*</code>).</dd><dt><a id="copy-mxArray-to-lisp"></a><span class="term"><code class="code">(matlab:copy-mxArray-to-lisp
   matlab-matrix <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> lisp-array)</code></span></dt><dd>Copy the matlab matrix to the 2-dimensional lisp array
   (created anew or re-used if supplied).</dd><dt><a id="copy-matlab-to-lisp"></a><span class="term"><code class="code">(matlab:copy-matlab-to-lisp
   matlab-variable <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> lisp-array <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> engine)</code></span></dt><dd>Copy data from the matlab variable to the
   2-dimensional lisp array
   (created anew or re-used if supplied).</dd><dt><a id="matlab-invert-matrix"></a><span class="term"><code class="code">(matlab:invert-matrix
   lisp-array <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> engine)</code></span></dt><dd>Invert the lisp matrix using the specified engine.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="netica"></a>32.2. Netica Interface</h2></div></div></div><p>This is an interface to the <a href="http://norsys.com/netica_c_api.htm" target="_top">Netica C API</a> for working with
 Bayesian belief networks and influence diagrams.</p><p>The package <strong class="package">“<span class="quote">NETICA</span>”</strong> is
 <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity">case-sensitive</a>, e.g., you would write
 <code class="code">(netica:GetNodeExpectedUtils_bn ...)</code>
 when you need to call
 <a class="netica" href="http://norsys.com/onLineAPIManual/functions/GetNodeExpectedUtils_bn.html"><code class="function">GetNodeExpectedUtils_bn</code></a>.</p><p>An interface to all public <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> functions is provided.
 Additionally, some higher level functionality is available
 (see <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/netica/demo.lisp"><code class="filename">modules/netica/demo.lisp</code></a>
 for sample usage):</p><div class="variablelist"><dl><dt><span class="term"><code class="code">(netica:start-netica <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   :license :verbose)</code></span></dt><dd>Call <a class="netica" href="http://norsys.com/onLineAPIManual/functions/NewNeticaEnviron_ns.html"><code class="function">NewNeticaEnviron_ns</code></a>
   and <a class="netica" href="http://norsys.com/onLineAPIManual/functions/InitNetica_bn.html"><code class="function">InitNetica_bn</code></a> and print some
   statistics; initialize <code class="varname">netica:*env*</code>.
</dd><dt><span class="term"><code class="code">(netica:check-errors <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   :env :clear :severity)</code></span></dt><dd>Show and, optionally, clear
   (<a class="netica" href="http://norsys.com/onLineAPIManual/functions/ClearError_ns.html"><code class="function">ClearError_ns</code></a>), the errors of the
   given severity (<a class="netica" href="http://norsys.com/onLineAPIManual/functions/ErrorSeverity_ns.html"><code class="function">ErrorSeverity_ns</code></a>)
   and above.
   You should call this function after <span class="emphasis"><em>every</em></span> call
   to a Netica function.  Every wrapper function in this list calls it,
   so you do <span class="strong"><strong>not</strong></span> need to call it after a call to a wrapper function.
</dd><dt><span class="term"><code class="code">(netica:error-message error)</code></span></dt><dd><p>Convert netica error to a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> containing</p><table class="simplelist" border="0" summary="Simple list"><tr><td><a class="netica" href="http://norsys.com/onLineAPIManual/functions/ErrorCategory_ns.html"><code class="function">ErrorCategory_ns</code></a></td></tr><tr><td><a class="netica" href="http://norsys.com/onLineAPIManual/functions/ErrorSeverity_ns.html"><code class="function">ErrorSeverity_ns</code></a></td></tr><tr><td><a class="netica" href="http://norsys.com/onLineAPIManual/functions/ErrorNumber_ns.html"><code class="function">ErrorNumber_ns</code></a></td></tr><tr><td><a class="netica" href="http://norsys.com/onLineAPIManual/functions/ErrorMessage_ns.html"><code class="function">ErrorMessage_ns</code></a></td></tr></table></dd><dt><span class="term"><code class="code">(netica:close-netica <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   :env :verbose)</code></span></dt><dd>Terminate the netica session.
   Sets <code class="varname">netica:*env*</code> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
</dd><dt><span class="term"><code class="code">(netica:make-net <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :name
   :comment :title :env :verbose)</code></span></dt><dd>Call <a class="netica" href="http://norsys.com/onLineAPIManual/functions/NewNet_bn.html"><code class="function">NewNet_bn</code></a>,
   <a class="netica" href="http://norsys.com/onLineAPIManual/functions/SetNetTitle_bn.html"><code class="function">SetNetTitle_bn</code></a> and
   <a class="netica" href="http://norsys.com/onLineAPIManual/functions/SetNetComment_bn.html"><code class="function">SetNetComment_bn</code></a>.
</dd><dt><span class="term"><code class="code">(netica:net-info net <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :out)</code></span></dt><dd><p>Print some information about the net:</p><table class="simplelist" border="0" summary="Simple list"><tr><td><a class="netica" href="http://norsys.com/onLineAPIManual/functions/GetNetName_bn.html"><code class="function">GetNetName_bn</code></a></td></tr><tr><td><a class="netica" href="http://norsys.com/onLineAPIManual/functions/GetNetTitle_bn.html"><code class="function">GetNetTitle_bn</code></a></td></tr><tr><td><a class="netica" href="http://norsys.com/onLineAPIManual/functions/GetNetComment_bn.html"><code class="function">GetNetComment_bn</code></a></td></tr><tr><td><a class="netica" href="http://norsys.com/onLineAPIManual/functions/GetNetFileName_bn.html"><code class="function">GetNetFileName_bn</code></a></td></tr><tr><td><a class="netica" href="http://norsys.com/onLineAPIManual/functions/GetNetNodes_bn.html"><code class="function">GetNetNodes_bn</code></a></td></tr></table></dd><dt><span class="term"><code class="code">(netica:make-node <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   :name :net :kind :levels :states :num-states :title :comment :parents
   :cpt :x :y :env :verbose)</code></span></dt><dd>Call <a class="netica" href="http://norsys.com/onLineAPIManual/functions/NewNode_bn.html"><code class="function">NewNode_bn</code></a>
   with the given name and many other parameters.
</dd><dt><span class="term"><code class="code">(netica:node-info node
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :header :out)</code></span></dt><dd>Print some information about the node, preceded by
   the header.</dd><dt><span class="term"><code class="code">(netica:get-beliefs node
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :env :verbose)</code></span></dt><dd>Call <a class="netica" href="http://norsys.com/onLineAPIManual/functions/GetNodeBeliefs_bn.html"><code class="function">GetNodeBeliefs_bn</code></a>
   on the node.</dd><dt><span class="term"><code class="code">(netica:enter-finding net node
   state <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :env :verbose)</code></span></dt><dd>Call <a class="netica" href="http://norsys.com/onLineAPIManual/functions/EnterFinding_bn.html"><code class="function">EnterFinding_bn</code></a>
   using <a class="netica" href="http://norsys.com/onLineAPIManual/functions/NodeNamed_bn.html"><code class="function">NodeNamed_bn</code></a>
   and <a class="netica" href="http://norsys.com/onLineAPIManual/functions/StateNamed_bn.html"><code class="function">StateNamed_bn</code></a>.
</dd><dt><span class="term"><code class="code">(netica:save-net net <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   :file :env :verbose)</code></span></dt><dd>Call <a class="netica" href="http://norsys.com/onLineAPIManual/functions/WriteNet_bn.html"><code class="function">WriteNet_bn</code></a>.
</dd><dt><span class="term"><code class="code">(netica:read-net file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   :env :verbose)</code></span></dt><dd>Call <a class="netica" href="http://norsys.com/onLineAPIManual/functions/ReadNet_bn.html"><code class="function">ReadNet_bn</code></a>.
</dd><dt><span class="term"><code class="code">(netica:with-open-dne-file (var
   file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> opts) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> body)</code></span></dt><dd>Call <a class="netica" href="http://norsys.com/onLineAPIManual/functions/NewStreamFile_ns.html"><code class="function">NewStreamFile_ns</code></a>,
   execute <em class="replaceable"><code>body</code></em>, then <a class="netica" href="http://norsys.com/onLineAPIManual/functions/DeleteStream_ns.html"><code class="function">DeleteStream_ns</code></a>
   - just like <a href="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html" target="_top"><code class="function">WITH-OPEN-STREAM</code></a>.</dd><dt><span class="term"><code class="varname">netica:*verbose*</code></span></dt><dd>The log <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>; the default value for
   the <code class="constant">:VERBOSE</code> argument (initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>).
</dd><dt><span class="term"><code class="varname">netica:*license*</code></span></dt><dd>The license key provided by
   <a href="http://norsys.com/" target="_top">Norsys</a>; the default value
   for the <code class="literal">:LICENSE</code> argument.
</dd><dt><span class="term"><code class="varname">netica:*env*</code></span></dt><dd>The Netica environment object; the default value
   for the <code class="literal">:ENV</code> argument.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="dir-key"></a>32.3. Directory Access</h2></div></div></div><p>This module provides some directory access from lisp,
 in package <a href="#dir-key" title="32.3.&#xA0;Directory Access"><strong class="package">“<span class="quote">LDAP</span>”</strong></a>.  3 types of directory keys
 may exist, depending on the compilation environment.</p><div class="variablelist"><a id="dir-key-type"></a><p class="title"><b>valid directory key types</b></p><dl><dt><span class="term">:win32</span></dt><dd><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> registry access
  </dd><dt><span class="term">:gnome</span></dt><dd><a href="http://developer.gnome.org/doc/API/libgnome/gnome-gnome-config.html" target="_top">gnome-config</a> access
  </dd><dt><span class="term">:ldap</span></dt><dd>LDAP interface via
   <a href="http://www.openldap.org" target="_top">OpenLDAP</a> or compatible
  </dd></dl></div><p>The following functions and macros are exported (please note that
these features are experimental and the API may be modified in the
future).</p><div class="variablelist"><dl><dt><a id="dir-key-open"></a><span class="term"><code class="code">(<a href="#dir-key-open"><code class="function">LDAP:DIR-KEY-OPEN</code></a>
   <em class="replaceable"><code>dkey</code></em> <em class="replaceable"><code>pathname</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> (<code class="constant">:DIRECTION</code> <code class="constant">:INPUT</code>)
   <code class="constant">:IF-DOES-NOT-EXIST</code>)</code></span></dt><dd>Open the directory key under <em class="replaceable"><code>dkey</code></em>, which should
   be either an open directory key or a valid <a href="#dir-key-type">directory key type</a>.
   The meaning of the <code class="constant">:DIRECTION</code> and <code class="constant">:IF-DOES-NOT-EXIST</code> keyword
   arguments is the same as for <a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a>.</dd><dt><a id="dir-key-close"></a><span class="term"><code class="code">(<a href="#dir-key-close"><code class="function">LDAP:DIR-KEY-CLOSE</code></a>
    <em class="replaceable"><code>dkey</code></em>)</code></span></dt><dd>Close the directory key.  The preferred way is to
   use the <a href="#with-dir-key-open"><code class="function">LDAP:WITH-DIR-KEY-OPEN</code></a> macro.</dd><dt><a id="with-dir-key-open"></a><span class="term"><code class="code">(<a href="#with-dir-key-open"><code class="function">LDAP:WITH-DIR-KEY-OPEN</code></a> (<em class="replaceable"><code>variable</code></em>
    <em class="replaceable"><code>dkey</code></em> <em class="replaceable"><code>pathname</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> {<em class="replaceable"><code>option</code></em>}*) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a>
    <em class="replaceable"><code>body</code></em>)</code></span></dt><dd>Open the directory key (by calling <a href="#dir-key-open"><code class="function">LDAP:DIR-KEY-OPEN</code></a>
   on <em class="replaceable"><code>dkey</code></em>, <em class="replaceable"><code>pathname</code></em> and <em class="replaceable"><code>option</code></em>s), bind it to <em class="replaceable"><code>variable</code></em>,
   execute <em class="replaceable"><code>body</code></em>, then close it with <a href="#dir-key-close"><code class="function">LDAP:DIR-KEY-CLOSE</code></a>.
 </dd><dt><span class="term"><code class="code">(<code class="function">LDAP:DIR-KEY-TYPE</code>
    <em class="replaceable"><code>dkey</code></em>)</code></span></dt><dd>Return the <a href="#dir-key-type">directory key type</a> of the directory key
  </dd><dt><span class="term"><code class="code">(<code class="function">LDAP:DIR-KEY-PATH</code>
                <em class="replaceable"><code>dkey</code></em>)</code></span></dt><dd>Return the path of this directory key, which is the
   <em class="replaceable"><code>pathname</code></em> argument of <a href="#dir-key-open"><code class="function">LDAP:DIR-KEY-OPEN</code></a> if <em class="replaceable"><code>dkey</code></em> was a <a href="#dir-key-type">directory key type</a> or the
   concatenation of the <em class="replaceable"><code>pathname</code></em> argument and the
   <code class="function">ldap:dir-key-path</code> of <em class="replaceable"><code>dkey</code></em>.
   </dd><dt><span class="term"><code class="code">(<code class="function">LDAP:DIR-KEY-DIRECTION</code>
    <em class="replaceable"><code>dkey</code></em>)</code></span></dt><dd>One of <code class="constant">:INPUT</code>, <code class="constant">:OUTPUT</code> and <code class="constant">:IO</code>, indicating
   the permitted operation on this key and its derivatives.
   </dd><dt><span class="term"><code class="code">(<code class="function">LDAP:DIR-KEY-CLOSED-P</code>
    <em class="replaceable"><code>dkey</code></em>)</code></span></dt><dd>Check whether the key has been closed.
   It is not an error to close a closed key.
   </dd><dt><span class="term"><code class="code">(<code class="function">LDAP:DIR-KEY-SUBKEY-DELETE</code>
     <em class="replaceable"><code>dkey</code></em> <em class="replaceable"><code>subkey</code></em>)</code>
   <code class="code">(<code class="function">LDAP:DIR-KEY-VALUE-DELETE</code>
     <em class="replaceable"><code>dkey</code></em> <em class="replaceable"><code>attribute</code></em>)</code></span></dt><dd>Delete the specified subkey or attribute.
  </dd><dt><span class="term"><code class="code">(<code class="function">LDAP:DIR-KEY-SUBKEY</code>
    <em class="replaceable"><code>dkey</code></em>)</code>
  <code class="code">(<code class="function">LDAP:DIR-KEY-ATTRIBUTES</code> <em class="replaceable"><code>dkey</code></em>)</code></span></dt><dd>Return the list of the subkeys or attributes.
  </dd><dt><span class="term"><code class="code">(<code class="function">LDAP:DIR-KEY-VALUE</code> <em class="replaceable"><code>dkey</code></em>
    <em class="replaceable"><code>attribute</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
    <em class="replaceable"><code>default</code></em>)</code></span></dt><dd>Return the value of the specified attribute,
   similar to <a href="http://www.lisp.org/HyperSpec/Body/acc_gethash.html" target="_top"><code class="function">GETHASH</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>able just like <a href="http://www.lisp.org/HyperSpec/Body/acc_gethash.html" target="_top"><code class="function">GETHASH</code></a>.
   </dd><dt><span class="term"><code class="code">(<code class="function">LDAP:DIR-KEY-INFO</code>
    <em class="replaceable"><code>dkey</code></em>)</code></span></dt><dd>Return some information about the directory key.
   This is highly platform-dependent and will probably be removed or
   replaced or modified in the future.</dd><dt><a id="with-dir-key-search"></a><span class="term"><code class="code">(<a href="#with-dir-key-search"><code class="function">LDAP:WITH-DIR-KEY-SEARCH</code></a>
    (<em class="replaceable"><code>key-iter</code></em>
    <em class="replaceable"><code>atribute-iter</code></em>
    <em class="replaceable"><code>dkey</code></em> <em class="replaceable"><code>pathname</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:scope</code>)
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <em class="replaceable"><code>body</code></em>)</code></span></dt><dd><p>This is the main way to iterate over the subtree
   under the key <em class="replaceable"><code>dkey</code></em>+<em class="replaceable"><code>pathname</code></em>.</p><p><em class="replaceable"><code>key-iter</code></em> is a non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> symbol
    and is bound via <a href="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html" target="_top"><code class="function">MACROLET</code></a> to a macro, each call of which returns
    the next subkey.</p><p><em class="replaceable"><code>atribute-iter</code></em> is a symbol and is
    bound, when non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, to a macro, each call of which returns two
   values - the next attribute and its value.</p><p>The <code class="constant">:scope</code> keyword argument specifies the
    scope of the search and can be
   </p><div class="variablelist"><dl><dt><span class="term"><code class="constant">:self</code></span></dt><dd>iterate over the key itself
     </dd><dt><span class="term"><code class="constant">:level</code></span></dt><dd>iterate over the children of the key
     </dd><dt><span class="term"><code class="constant">:tree</code></span></dt><dd>iterate over the subtree
     </dd></dl></div><p><a href="#with-dir-key-search"><code class="function">LDAP:WITH-DIR-KEY-SEARCH</code></a> is used to implement
    <code class="function">LDAP:DIR-KEY-VALUES</code>,
    <code class="function">LDAP:DIR-KEY-CHILDREN</code> and
    <code class="function">LDAP:DIR-KEY-DUMP-TREE</code> in
    <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/dirkey/dirkey.lisp"><code class="filename">modules/dirkey/dirkey.lisp</code></a>.
    </p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="berkeley-db"></a>32.4. Berkeley DB access</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#bdb-objects">32.4.1. Berkeley-DB Objects</a></span></dt><dt><span class="section"><a href="#bdb-close">32.4.2. Closing handles</a></span></dt><dt><span class="section"><a href="#bdb-db-environment">32.4.3. Database Environment</a></span></dt><dt><span class="section"><a href="#bdb-environment-config">32.4.4. Environment Configuration</a></span></dt><dt><span class="section"><a href="#bdb-operations">32.4.5. Database Operations</a></span></dt><dt><span class="section"><a href="#bdb-db-config">32.4.6. Database Configuration</a></span></dt><dt><span class="section"><a href="#bdb-cursor">32.4.7. Database Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-lock">32.4.8. Lock Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-log">32.4.9. Log Subsystem</a></span></dt><dd><dl><dt><span class="section"><a href="#bdb-log-cursor">32.4.9.1. Log Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-log-seq">32.4.9.2. Log Sequence Numbers</a></span></dt></dl></dd><dt><span class="section"><a href="#bdb-mem-pool">32.4.10. Memory Pool Subsystem</a></span></dt><dt><span class="section"><a href="#bdb-replication">32.4.11. Replication</a></span></dt><dt><span class="section"><a href="#bdb-sequences">32.4.12. Sequences</a></span></dt><dt><span class="section"><a href="#bdb-transaction">32.4.13. Transaction Subsystem</a></span></dt></dl></div><p>This interface to <a class="bdb" href="http://www.sleepycat.com/docs/index.html">Berkeley DB
  from Sleepycat Software</a> exports most
 functions in the official <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> API.
 Supported versions:</p><table class="simplelist" border="0" summary="Simple list"><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/ref/upgrade.4.2/toc.html">4.2</a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/ref/upgrade.4.3/toc.html">4.3</a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/ref/upgrade.4.4/toc.html">4.4</a></td></tr></table><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a> contains the
 symbol <code class="constant">:BERKELEY-DB</code>.</p><p>See <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/berkeley-db/test.tst"><code class="filename">modules/berkeley-db/test.tst</code></a>
 for sample usage.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-objects"></a>32.4.1. Berkeley-DB Objects</h3></div></div></div><p>Thie module exports the following opaque <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a> types:
 </p><div class="variablelist"><dl><dt><span class="term"><span class="type">BDB:DBE</span></span></dt><dd>environment handle</dd><dt><span class="term"><span class="type">BDB:DB</span></span></dt><dd>database handle</dd><dt><span class="term"><span class="type">BDB:DBC</span></span></dt><dd>cursor handle</dd><dt><span class="term"><span class="type">BDB:TXN</span></span></dt><dd>transaction handle</dd><dt><span class="term"><span class="type">BDB:LOGC</span></span></dt><dd>log cursor handle</dd><dt><span class="term"><span class="type">BDB:MPOOLFILE</span></span></dt><dd>memory pool file handle</dd><dt><span class="term"><span class="type">BDB:DBLOCK</span></span></dt><dd>lock handle</dd></dl></div><p>
 They contain the internal handle (a <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a>), the <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>
 of parents, and the <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of dependents.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-close"></a>32.4.2. Closing handles</h3></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> will close (or commit, in the case of a
 <a href="#bdb-transaction" title="32.4.13.&#xA0;Transaction Subsystem">transaction</a>, or
 put, in the case of a <a href="#bdb-lock" title="32.4.8.&#xA0;Lock Subsystem">lock</a>)
 the Berkeley-DB handle objects.  <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>or will also call <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a>.
 Closing an object will <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> all its dependents and remove the object
 itself from the dependents lists of its parents (but see
 <a href="#bdb-lock" title="32.4.8.&#xA0;Lock Subsystem"><code class="function">BDB:LOCK-CLOSE</code></a>).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-db-environment"></a>32.4.3. Database Environment</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="code">(BDB:DB-VERSION <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
    subsystems-too)</code></span></dt><dd><p>Return version information as multiple values:</p><div class="orderedlist"><ol type="1"><li>descriptive <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>
       (from <a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_version.html"><code class="function">db_version</code></a>)</li><li>major version number (<a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>)</li><li>minor version number (<a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>)</li><li>patch number (<a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>)</li></ol></div><p>When the optional argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, returns the
    <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> of the subsystem versions as the 5th value.
 </p></dd><dt><a id="dbe-create"></a><span class="term"><code class="code">(BDB:DBE-CREATE <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    PASSWORD ENCRYPT HOST CLIENT-TIMEOUT SERVER-TIMEOUT)</code></span></dt><dd>Create an environment handle
    (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_class.html"><code class="function">db_env_create</code></a>),
    possibly connecting to a remote host
    (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_rpc_server.html"><code class="function">DB_ENV-&gt;set_rpc_server</code></a>)
    and possibly using encryption with password
    (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_encrypt.html"><code class="function">DB_ENV-&gt;set_encrypt</code></a>).
 </dd><dt><span class="term"><code class="code">(BDB:DBE-CLOSE dbe)</code></span></dt><dd>Close an environment
    (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_close.html"><code class="function">DB_ENV-&gt;close</code></a>).
    You can also call <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a>.</dd><dt><span class="term"><code class="code">(BDB:DBE-MESSAGES dbe)</code></span></dt><dd>Return the verbose messages accumulated so far
    (requires Berkeley-DB 4.3 or better).</dd><dt><span class="term"><code class="code">(BDB:DBREMOVE dbe file
    database <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> TRANSACTION AUTO-COMMIT)</code></span></dt><dd>Remove a database
    (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_dbremove.html"><code class="function">DB_ENV-&gt;dbremove</code></a>).
 </dd><dt><span class="term"><code class="code">(BDB:DBREMOVE dbe file
    database newname <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> TRANSACTION AUTO-COMMIT)</code></span></dt><dd>Rename a database
    (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_dbrename.html"><code class="function">DB_ENV-&gt;dbrename</code></a>).
 </dd><dt><a id="dbe-open"></a><span class="term"><code class="code">(BDB:DBE-OPEN dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    FLAGS HOME JOIN INIT-CDB INIT-LOCK INIT-LOG INIT-MPOOL INIT-TXN
    RECOVER RECOVER-FATAL USE-ENVIRON USE-ENVIRON-ROOT CREATE
    LOCKDOWN PRIVATE SYSTEM-MEM THREAD MODE)</code></span></dt><dd>Open an environment
    (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_open.html"><code class="function">DB_ENV-&gt;open</code></a>).
    <code class="constant">:FLAGS</code> may be the value of a previous call
    to <code class="code">(<a href="#dbe-get-options"><code class="function">BDB:DBE-GET-OPTIONS</code></a> dbe :OPEN)</code>.
 </dd><dt><span class="term"><code class="code">(BDB:DBE-REMOVE dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    HOME FORCE USE-ENVIRON USE-ENVIRON-ROOT)</code></span></dt><dd>Destroy an environment
    (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_remove.html"><code class="function">DB_ENV-&gt;remove</code></a>).
 </dd><dt><a id="with-dbe"></a><span class="term"><code class="code">(BDB:WITH-DBE (var <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    <em class="replaceable"><code>create</code></em> <em class="replaceable"><code>options</code></em>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> body)</code></span></dt><dd>Create an environment, execute <em class="replaceable"><code>body</code></em>, close it.
    <em class="replaceable"><code>create</code></em> is a list of options to be passed to <a href="#dbe-create"><code class="function">BDB:DBE-CREATE</code></a>,
    <em class="replaceable"><code>options</code></em> is a list of options to be passed to <a href="#dbe-set-options"><code class="function">BDB:DBE-SET-OPTIONS</code></a>.
 </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-environment-config"></a>32.4.4. Environment Configuration</h3></div></div></div><div class="variablelist"><dl><dt><a id="dbe-set-options"></a><span class="term"><code class="code">(BDB:DBE-SET-OPTIONS dbe
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> MSGFILE ERRFILE ERRPFX PASSWORD ENCRYPT LOCK-TIMEOUT TXN-TIMEOUT
   SHM-KEY TAS-SPINS TX-TIMESTAMP TX-MAX DATA-DIR TMP-DIR LG-BSIZE LG-DIR
   LG-MAX LG-REGIONMAX LK-CONFLICTS LK-DETECT LK-MAX-LOCKERS LK-MAX-LOCKS
   LK-MAX-OBJECTS AUTO-COMMIT CDB-ALLDB DIRECT-DB DSYNC-LOG LOG-AUTOREMOVE
   LOG-INMEMORY DIRECT-LOG NOLOCKING NOMMAP NOPANIC OVERWRITE PANIC-ENVIRONMENT
   REGION-INIT TXN-NOSYNC TXN-WRITE-NOSYNC YIELDCPU VERB-CHKPOINT VERB-DEADLOCK
   VERB-RECOVERY VERB-REPLICATION VERB-WAITSFOR VERBOSE)</code></span></dt><dd><p>Set some environment options using </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_flags.html"><code class="function">DB_ENV-&gt;set_flags</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_timeout.html"><code class="function">DB_ENV-&gt;set_timeout</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_lg_regionmax.html"><code class="function">DB_ENV-&gt;set_lg_regionmax</code></a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_verbose.html"><code class="function">DB_ENV-&gt;set_verbose</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_encrypt.html"><code class="function">DB_ENV-&gt;set_encrypt</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_lk_conflicts.html"><code class="function">DB_ENV-&gt;set_lk_conflicts</code></a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_tmp_dir.html"><code class="function">DB_ENV-&gt;set_tmp_dir</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_errfile.html"><code class="function">DB_ENV-&gt;set_errfile</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_lk_detect.html"><code class="function">DB_ENV-&gt;set_lk_detect</code></a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_data_dir.html"><code class="function">DB_ENV-&gt;set_data_dir</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_msgfile.html"><code class="function">DB_ENV-&gt;set_msgfile</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_lk_max_lockers.html"><code class="function">DB_ENV-&gt;set_lk_max_lockers</code></a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_tx_max.html"><code class="function">DB_ENV-&gt;set_tx_max</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_errpfx.html"><code class="function">DB_ENV-&gt;set_errpfx</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_lk_max_locks.html"><code class="function">DB_ENV-&gt;set_lk_max_locks</code></a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_tx_timestamp.html"><code class="function">DB_ENV-&gt;set_tx_timestamp</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_lg_bsize.html"><code class="function">DB_ENV-&gt;set_lg_bsize</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_lk_max_objects.html"><code class="function">DB_ENV-&gt;set_lk_max_objects</code></a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_tas_spins.html"><code class="function">DB_ENV-&gt;set_tas_spins</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_lg_dir.html"><code class="function">DB_ENV-&gt;set_lg_dir</code></a></td><td> </td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_shm_key.html"><code class="function">DB_ENV-&gt;set_shm_key</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_lg_max.html"><code class="function">DB_ENV-&gt;set_lg_max</code></a></td><td> </td></tr></table></dd><dt><a id="dbe-get-options"></a><span class="term"><code class="code">(BDB:DBE-GET-OPTIONS dbe
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)</code></span></dt><dd><p>Retrieve some environment options.
   </p><div class="variablelist"><p class="title"><b>Values of <em class="replaceable"><code>what</code></em></b></p><dl><dt><span class="term">missing<br /></span><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></span></dt><dd>all options as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>
    </dd><dt><span class="term"><code class="constant">:TX-TIMESTAMP</code></span></dt><dd>Recover to the time specified by timestamp
       rather than to the most current possible date
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_tx_timestamp.html"><code class="function">DB_ENV-&gt;get_tx_timestamp</code></a>)
    </dd><dt><span class="term"><code class="constant">:TX-MAX</code></span></dt><dd>the number of active transactions
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_tx_max.html"><code class="function">DB_ENV-&gt;set_tx_max</code></a>)
    </dd><dt><span class="term"><code class="constant">:DATA-DIR</code></span></dt><dd>list of data directories
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_data_dir.html"><code class="function">DB_ENV-&gt;get_data_dir</code></a>)
    </dd><dt><span class="term"><code class="constant">:TMP-DIR</code></span></dt><dd>temporary directory
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_tmp_dir.html"><code class="function">DB_ENV-&gt;get_tmp_dir</code></a>).
       May be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><span class="term"><code class="constant">:VERBOSE</code></span></dt><dd>the <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of verbosity settings
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_verbose.html"><code class="function">DB_ENV-&gt;get_verbose</code></a>).
    </dd><dt><span class="term"><code class="constant">:AUTO-COMMIT</code><br /></span><span class="term"><code class="constant">:CDB-ALLDB</code><br /></span><span class="term"><code class="constant">:DIRECT-DB</code><br /></span><span class="term"><code class="constant">:DSYNC-LOG</code><br /></span><span class="term"><code class="constant">:LOG-AUTOREMOVE</code><br /></span><span class="term"><code class="constant">:LOG-INMEMORY</code><br /></span><span class="term"><code class="constant">:DIRECT-LOG</code><br /></span><span class="term"><code class="constant">:NOLOCKING</code><br /></span><span class="term"><code class="constant">:NOMMAP</code><br /></span><span class="term"><code class="constant">:NOPANIC</code><br /></span><span class="term"><code class="constant">:OVERWRITE</code><br /></span><span class="term"><code class="constant">:PANIC-ENVIRONMENT</code><br /></span><span class="term"><code class="constant">:REGION-INIT</code><br /></span><span class="term"><code class="constant">:TXN-NOSYNC</code><br /></span><span class="term"><code class="constant">:TXN-WRITE-NOSYNC</code><br /></span><span class="term"><code class="constant">:YIELDCPU</code><br /></span><span class="term"><code class="constant">:VERB-CHKPOINT</code><br /></span><span class="term"><code class="constant">:VERB-DEADLOCK</code><br /></span><span class="term"><code class="constant">:VERB-RECOVERY</code><br /></span><span class="term"><code class="constant">:VERB-REPLICATION</code><br /></span><span class="term"><code class="constant">:VERB-WAITSFOR</code></span></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a> indicator of whether this
       option is set or not
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_verbose.html"><code class="function">DB_ENV-&gt;get_verbose</code></a> and
       <a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_flags.html"><code class="function">DB_ENV-&gt;get_flags</code></a>).
    </dd><dt><span class="term"><code class="constant">:LG-BSIZE</code></span></dt><dd>log buffer size
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_lg_bsize.html"><code class="function">DB_ENV-&gt;get_lg_bsize</code></a>).
    </dd><dt><span class="term"><code class="constant">:LG-DIR</code></span></dt><dd>logging directory
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_lg_dir.html"><code class="function">DB_ENV-&gt;get_lg_dir</code></a>).
    </dd><dt><span class="term"><code class="constant">:LG-MAX</code></span></dt><dd>log file size
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_lg_max.html"><code class="function">DB_ENV-&gt;get_lg_max</code></a>).
    </dd><dt><span class="term"><code class="constant">:LG-REGIONMAX</code></span></dt><dd>logging region size
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_lg_regionmax.html"><code class="function">DB_ENV-&gt;get_lg_regionmax</code></a>).
    </dd><dt><span class="term"><code class="constant">:LK-CONFLICTS</code></span></dt><dd>lock conflicts matrix
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_lk_conflicts.html"><code class="function">DB_ENV-&gt;get_lk_conflicts</code></a>).
    </dd><dt><span class="term"><code class="constant">:LK-DETECT</code></span></dt><dd>automatic deadlock detection
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_lk_detect.html"><code class="function">DB_ENV-&gt;get_lk_detect</code></a>).
    </dd><dt><span class="term"><code class="constant">:LK-MAX-LOCKERS</code></span></dt><dd>maximum number of lockers
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_lk_max_lockers.html"><code class="function">DB_ENV-&gt;get_lk_max_lockers</code></a>).
    </dd><dt><span class="term"><code class="constant">:LK-MAX-LOCKS</code></span></dt><dd>maximum number of locks
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_lk_max_locks.html"><code class="function">DB_ENV-&gt;get_lk_max_locks</code></a>).
    </dd><dt><span class="term"><code class="constant">:LK-MAX-OBJECTS</code></span></dt><dd>maximum number of lock objects
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_lk_max_objects.html"><code class="function">DB_ENV-&gt;get_lk_max_objects</code></a>).
    </dd><dt><span class="term"><code class="constant">:TAS-SPINS</code></span></dt><dd>the number of test-and-set spins
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_tas_spins.html"><code class="function">DB_ENV-&gt;get_tas_spins</code></a>).
    </dd><dt><span class="term"><code class="constant">:SHM-KEY</code></span></dt><dd>base segment ID for shared memory regions
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_shm_key.html"><code class="function">DB_ENV-&gt;get_shm_key</code></a>).
    </dd><dt><span class="term"><code class="constant">:LOCK-TIMEOUT</code><br /></span><span class="term"><code class="constant">:TXN-TIMEOUT</code></span></dt><dd>timeout values for locks or transactions in the
       database environment
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_timeout.html"><code class="function">DB_ENV-&gt;get_timeout</code></a>).
    </dd><dt><span class="term"><code class="constant">:ENCRYPT</code></span></dt><dd>encryption flags
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_encrypt_flags.html"><code class="function">DB_ENV-&gt;get_encrypt_flags</code></a>).
    </dd><dt><span class="term"><code class="constant">:ERRFILE</code></span></dt><dd><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_errfile.html"><code class="function">DB_ENV-&gt;get_errfile</code></a>).
    </dd><dt><span class="term"><code class="constant">:MSGFILE</code></span></dt><dd><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_msgfile.html"><code class="function">DB_ENV-&gt;get_msgfile</code></a>).
    </dd><dt><span class="term"><code class="constant">:ERRPFX</code></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_errpfx.html"><code class="function">DB_ENV-&gt;get_errpfx</code></a>).
    </dd><dt><span class="term"><code class="constant">:DB-XIDDATASIZE</code></span></dt><dd>the <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a> of the globally unique
       <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span> which must be passed to
       <a class="bdb" href="http://www.sleepycat.com/docs/api_c/txn_prepare.html"><code class="function">DB_TXN-&gt;prepare</code></a>.
    </dd><dt><span class="term"><code class="constant">:HOME</code></span></dt><dd>the home directory when open
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_home.html"><code class="function">DB_ENV-&gt;get_home</code></a>).
    </dd><dt><span class="term"><code class="constant">:OPEN</code></span></dt><dd>the <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of flags passed to <a href="#dbe-open"><code class="function">BDB:DBE-OPEN</code></a>
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_open_flags.html"><code class="function">DB_ENV-&gt;get_open_flags</code></a>).
    </dd></dl></div></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-operations"></a>32.4.5. Database Operations</h3></div></div></div>
<!--DB->associate Associate a secondary index DB->err Error message with error string DB->errx Error message-->
<div class="variablelist"><dl><dt><a id="db-create"></a><span class="term"><code class="code">(BDB:DB-CREATE dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   XA)</code></span></dt><dd>Create a database handle
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_class.html"><code class="function">db_create</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DB-CLOSE db <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> NOSYNC)</code></span></dt><dd>Close a database
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_close.html"><code class="function">DB-&gt;close</code></a>).
   You can also call <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a>.</dd><dt><span class="term"><code class="code">(BDB:DB-DEL dbe key <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   TRANSACTION AUTO-COMMIT)</code></span></dt><dd>Delete items from a database
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_del.html"><code class="function">DB-&gt;del</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DB-FD db)</code></span></dt><dd>Return a file descriptor from a database
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_fd.html"><code class="function">DB-&gt;fd</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DB-GET db key <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> ACTION AUTO-COMMIT
   DEGREE-2 DIRTY-READ MULTIPLE RMW TRANSACTION (ERROR <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>))</code></span></dt><dd><p>Get items from a database
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get.html"><code class="function">DB-&gt;get</code></a>).
   If <code class="constant">:ERROR</code> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and the record is not found, no <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed,
   instead <code class="constant">:NOTFOUND</code> is returned.
   <code class="constant">:ACTION</code> should be one of
   </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">:CONSUME</code></td><td><code class="constant">:GET-BOTH</code></td></tr><tr><td><code class="constant">:CONSUME-WAIT</code></td><td><code class="constant">:SET-RECNO</code></td></tr></table><p>
</p></dd><dt><span class="term"><code class="code">(BDB:DB-PUT db key val
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> AUTO-COMMIT ACTION TRANSACTION)</code></span></dt><dd><p>Store items into a database
  (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_put.html"><code class="function">DB-&gt;put</code></a>).
  <code class="constant">:ACTION</code> should be one of
  </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">:APPEND</code></td><td><code class="constant">:NODUPDATA</code></td><td><code class="constant">:NOOVERWRITE</code></td></tr></table><p>
</p></dd><dt><span class="term"><code class="code">(BDB:DB-STAT db <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> FAST-STAT
   TRANSACTION)</code></span></dt><dd>Return database statistics
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_byteswapped.html"><code class="function">DB-&gt;get_byteswapped</code></a>,
   <a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_type.html"><code class="function">DB-&gt;get_type</code></a>,
   <a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_stat.html"><code class="function">DB-&gt;stat</code></a>).
</dd><dt><a id="db-open"></a><span class="term"><code class="code">(BDB:DB-OPEN db file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   DATABASE TYPE MODE FLAGS CREATE DIRTY-READ EXCL NOMMAP RDONLY
   THREAD TRUNCATE AUTO-COMMIT TRANSACTION)</code></span></dt><dd><p>Open a database (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_open.html"><code class="function">DB-&gt;open</code></a>).
   <code class="constant">:TYPE</code> should be one of
   </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">:BTREE</code></td><td><code class="constant">:RECNO</code></td></tr><tr><td><code class="constant">:HASH</code></td><td><code class="constant">:UNKNOWN</code> (default)</td></tr><tr><td><code class="constant">:QUEUE</code></td><td> </td></tr></table><p>
   <code class="constant">:FLAGS</code> may be the value of a previous call
   to <code class="code">(<a href="#db-get-options"><code class="function">BDB:DB-GET-OPTIONS</code></a> db :OPEN)</code>
</p></dd><dt><span class="term"><code class="code">(BDB:DB-SYNC db)</code></span></dt><dd>Flush a database to stable storage
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_sync.html"><code class="function">DB-&gt;sync</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DB-TRUNCATE db <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   TRANSACTION AUTO-COMMIT)</code></span></dt><dd>Empty a database
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_truncate.html"><code class="function">DB-&gt;truncate</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DB-UPGRADE db file
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> DUPSORT)</code></span></dt><dd>Upgrade a database
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_upgrade.html"><code class="function">DB-&gt;upgrade</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DB-RENAME db file database newname)</code></span></dt><dd>Rename a database
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_rename.html"><code class="function">DB-&gt;rename</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DB-REMOVE db file database)</code></span></dt><dd>Remove a database
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_remove.html"><code class="function">DB-&gt;remove</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DB-JOIN db cursor-sequence
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> JOIN-NOSORT)</code></span></dt><dd>Create a specialized join cursor for use in
   performing equality or natural joins on secondary indices
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_join.html"><code class="function">DB-&gt;join</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DB-KEY-RANGE db key
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> TRANSACTION)</code></span></dt><dd>return an estimate of the proportion of keys that
   are less than, equal to, and greater than the specified key
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_key_range.html"><code class="function">DB-&gt;key_range</code></a>).
   The underlying database must be of type Btree.
</dd><dt><span class="term"><code class="code">(BDB:DB-VERIFY db file <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   DATABASE SALVAGE AGGRESSIVE PRINTABLE NOORDERCHK)</code></span></dt><dd>Verify/salvage a database
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_verify.html"><code class="function">DB-&gt;verify</code></a>).
   <code class="constant">:SALVAGE</code>, if supplied, should be the output
   file name.  <code class="constant">:DATABASE</code>, if supplied,
   will force <code class="constant">DB_ORDERCHKONLY</code>.
</dd><dt><a id="with-db"></a><span class="term"><code class="code">(BDB:WITH-DB (var dbe file
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <em class="replaceable"><code>create</code></em> <em class="replaceable"><code>options</code></em> <em class="replaceable"><code>open</code></em>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> body)</code></span></dt><dd>Open the database, execute <em class="replaceable"><code>body</code></em>, close it.
   <em class="replaceable"><code>create</code></em> is a list of options to be passed to <a href="#db-create"><code class="function">BDB:DB-CREATE</code></a>,
   <em class="replaceable"><code>options</code></em> is a list of options to be passed to <a href="#db-set-options"><code class="function">BDB:DB-SET-OPTIONS</code></a>,
   <em class="replaceable"><code>open</code></em> is a list of options to be passed to <a href="#db-open"><code class="function">BDB:DB-OPEN</code></a>.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-db-config"></a>32.4.6. Database Configuration</h3></div></div></div>
<!--DB->set_alloc Set local space allocation functions DB->set_dup_compare Set a duplicate comparison function DB->set_errcall Set error message callback DB->set_errpfx Set error message prefix DB->set_feedback Set feedback callback DB->set_paniccall Set panic callback DB->set_append_recno Set record append callback DB->set_bt_compare Set a Btree comparison function DB->set_bt_prefix Set a Btree prefix comparison function DB->set_h_hash Set a hashing function-->
<div class="variablelist"><dl><dt><a id="db-set-options"></a><span class="term"><code class="code">(BDB:DB-SET-OPTIONS db
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> ERRFILE MSGFILE ERRPFX PASSWORD ENCRYPTION NCACHE CACHESIZE CACHE
   LORDER PAGESIZE BT-MINKEY H-FFACTOR H-NELEM Q-EXTENTSIZE
   RE-DELIM RE-LEN RE-PAD RE-SOURCE
   CHKSUM ENCRYPT TXN-NOT-DURABLE DUP DUPSORT INORDER RECNUM REVSPLITOFF
   RENUMBER SNAPSHOT)</code></span></dt><dd><p>Set some database options using </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_errfile.html"><code class="function">DB_ENV-&gt;set_errfile</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_pagesize.html"><code class="function">DB-&gt;set_pagesize</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_re_len.html"><code class="function">DB-&gt;set_re_len</code></a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_msgfile.html"><code class="function">DB_ENV-&gt;set_msgfile</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_bt_minkey.html"><code class="function">DB-&gt;set_bt_minkey</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_re_pad.html"><code class="function">DB-&gt;set_re_pad</code></a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_set_errpfx.html"><code class="function">DB_ENV-&gt;set_errpfx</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_h_ffactor.html"><code class="function">DB-&gt;set_h_ffactor</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_re_source.html"><code class="function">DB-&gt;set_re_source</code></a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_encrypt.html"><code class="function">DB-&gt;set_encrypt</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_h_nelem.html"><code class="function">DB-&gt;set_h_nelem</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_flags.html"><code class="function">DB-&gt;set_flags</code></a></td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_cachesize.html"><code class="function">DB-&gt;set_cachesize</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_q_extentsize.html"><code class="function">DB-&gt;set_q_extentsize</code></a></td><td> </td></tr><tr><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_lorder.html"><code class="function">DB-&gt;set_lorder</code></a></td><td><a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_set_re_delim.html"><code class="function">DB-&gt;set_re_delim</code></a></td><td> </td></tr></table></dd><dt><a id="db-get-options"></a><span class="term"><code class="code">(BDB:DB-GET-OPTIONS db
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)</code></span></dt><dd><p>Retrieve some database options.
   </p><div class="variablelist"><p class="title"><b>Values of <em class="replaceable"><code>what</code></em></b></p><dl><dt><span class="term">missing<br /></span><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></span></dt><dd>all options as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>
    </dd><dt><span class="term"><code class="constant">:FLAGS</code></span></dt><dd>all flags
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_flags.html"><code class="function">DB_ENV-&gt;get_flags</code></a>).
    </dd><dt><span class="term"><code class="constant">:CHKSUM</code><br /></span><span class="term"><code class="constant">:ENCRYPT</code><br /></span><span class="term"><code class="constant">:TXN-NOT-DURABLE</code><br /></span><span class="term"><code class="constant">:DUP</code><br /></span><span class="term"><code class="constant">:DUPSORT</code><br /></span><span class="term"><code class="constant">:INORDER</code><br /></span><span class="term"><code class="constant">:RECNUM</code><br /></span><span class="term"><code class="constant">:REVSPLITOFF</code><br /></span><span class="term"><code class="constant">:RENUMBER</code><br /></span><span class="term"><code class="constant">:SNAPSHOT</code></span></dt><dd>a <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a> indicator of whether this
       option is set or not
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_verbose.html"><code class="function">DB_ENV-&gt;get_verbose</code></a> and
       <a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_flags.html"><code class="function">DB_ENV-&gt;get_flags</code></a>).
    </dd><dt><span class="term"><code class="constant">:CACHE</code></span></dt><dd>database cache information
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_cachesize.html"><code class="function">DB-&gt;get_cachesize</code></a>).
    </dd><dt><span class="term"><code class="constant">:ENCRYPTION</code></span></dt><dd>encryption flags
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_encrypt_flags.html"><code class="function">DB_ENV-&gt;get_encrypt_flags</code></a>).
    </dd><dt><span class="term"><code class="constant">:ERRFILE</code></span></dt><dd><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_errfile.html"><code class="function">DB_ENV-&gt;get_errfile</code></a>).
    </dd><dt><span class="term"><code class="constant">:MSGFILE</code></span></dt><dd><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_msgfile.html"><code class="function">DB_ENV-&gt;get_msgfile</code></a>).
    </dd><dt><span class="term"><code class="constant">:ERRPFX</code></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_get_errpfx.html"><code class="function">DB_ENV-&gt;get_errpfx</code></a>).
    </dd><dt><span class="term"><code class="constant">:PAGESIZE</code></span></dt><dd>database page size
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_pagesize.html"><code class="function">DB-&gt;get_pagesize</code></a>).
    </dd><dt><span class="term"><code class="constant">:BT-MINKEY</code></span></dt><dd>the minimum number of key/data pairs intended to
       be stored on any single <code class="constant">:BTREE</code> leaf page
       underlying source file
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_bt_minkey.html"><code class="function">DB-&gt;get_bt_minkey</code></a>).
    </dd><dt><span class="term"><code class="constant">:H-FFACTOR</code></span></dt><dd>the desired density within
       the <code class="constant">:HASH</code> table
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_h_ffactor.html"><code class="function">DB-&gt;get_h_ffactor</code></a>).
    </dd><dt><span class="term"><code class="constant">:H-NELEM</code></span></dt><dd>an estimate of the final size of
       the <code class="constant">:HASH</code> table
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_h_nelem.html"><code class="function">DB-&gt;get_h_nelem</code></a>).
    </dd><dt><span class="term"><code class="constant">:Q-EXTENTSIZE</code></span></dt><dd>the size of the extents used to hold pages in
       a <code class="constant">:QUEUE</code> database
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_q_extentsize.html"><code class="function">DB-&gt;get_q_extentsize</code></a>).
    </dd><dt><span class="term"><code class="constant">:RE-DELIM</code></span></dt><dd>the record delimiter
       for <code class="constant">:RECNO</code> databases
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_re_delim.html"><code class="function">DB-&gt;get_re_delim</code></a>).
    </dd><dt><span class="term"><code class="constant">:RE-LEN</code></span></dt><dd>database record length
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_re_len.html"><code class="function">DB-&gt;get_re_len</code></a>).
    </dd><dt><span class="term"><code class="constant">:RE-PAD</code></span></dt><dd>database record pad byte
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_re_pad.html"><code class="function">DB-&gt;get_re_pad</code></a>).
    </dd><dt><span class="term"><code class="constant">:RE-SOURCE</code></span></dt><dd>the underlying source file
       for <code class="constant">:RECNO</code> databases
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_re_source.html"><code class="function">DB-&gt;get_re_source</code></a>).
    </dd><dt><span class="term"><code class="constant">:LORDER</code></span></dt><dd>database byte order
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_lorder.html"><code class="function">DB-&gt;get_lorder</code></a>).
    </dd><dt><span class="term"><code class="constant">:DBNAME</code></span></dt><dd>the file name and database name
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_dbname.html"><code class="function">DB-&gt;get_dbname</code></a>)
    </dd><dt><span class="term"><code class="constant">:TRANSACTIONAL</code></span></dt><dd>the indicator whether the database is transactional
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_transactional.html"><code class="function">DB-&gt;get_transactional</code></a>).
    </dd><dt><span class="term"><code class="constant">:OPEN</code></span></dt><dd>the flags passed to <a href="#db-open"><code class="function">BDB:DB-OPEN</code></a>
       (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_open_flags.html"><code class="function">DB-&gt;get_open_flags</code></a>).
    </dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Once you call a method for one type of access method,
    the handle can only be used for that type.
    The methods <a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_re_delim.html"><code class="function">DB-&gt;get_re_delim</code></a>
    and <a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_get_re_source.html"><code class="function">DB-&gt;get_re_source</code></a> are for
    a <code class="constant">:RECNO</code> database so
    you <span class="emphasis"><em>cannot</em></span> call them
    (by passing <code class="constant">:RE-DELIM</code>
    or <code class="constant">:RE-SOURCE</code> to this function)
    and then use the database handle to open a database of different type
    (e.g., <code class="constant">:QUEUE</code>).</p></div></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-cursor"></a>32.4.7. Database Cursor Operations</h3></div></div></div><div class="variablelist"><dl><dt><a id="make-dbc"></a><span class="term"><code class="code">(BDB:MAKE-DBC db <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   DEGREE-2 DIRTY-READ WRITECURSOR TRANSACTION)</code></span></dt><dd>Create a cursor handle
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/db_cursor.html"><code class="function">DB-&gt;cursor</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DBC-CLOSE cursor)</code></span></dt><dd>Close the cursor handle
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/dbc_close.html"><code class="function">DBCursor-&gt;close</code></a>).
   You can also call <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a>.</dd><dt><span class="term"><code class="code">(BDB:DBC-COUNT cursor)</code></span></dt><dd>Return count of duplicates
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/dbc_count.html"><code class="function">DBCursor-&gt;count</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DBC-DEL cursor)</code></span></dt><dd>Delete by cursor
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/dbc_del.html"><code class="function">DBCursor-&gt;del</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DBC-DUP cursor <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> POSITION)</code></span></dt><dd>Duplicate a cursor
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/dbc_dup.html"><code class="function">DBCursor-&gt;dup</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:DBC-GET cursor key data action
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> DEGREE-2 DIRTY-READ MULTIPLE (ERROR <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>))</code></span></dt><dd><p>Retrieve by cursor
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/dbc_get.html"><code class="function">DBCursor-&gt;get</code></a>).
   If <code class="constant">:ERROR</code> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and the record is not found, no <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed,
   <code class="constant">:NOTFOUND</code> or <code class="constant">:KEYEMPTY</code>
   is returned instead, as appropriate.
   <em class="replaceable"><code>action</code></em> should be one of
   </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">:CURRENT</code></td><td><code class="constant">:GET-RECNO</code></td><td><code class="constant">:NEXT-DUP</code></td><td><code class="constant">:SET</code></td></tr><tr><td><code class="constant">:FIRST</code></td><td><code class="constant">:JOIN-ITEM</code></td><td><code class="constant">:NEXT-NODUP</code></td><td><code class="constant">:SET-RANGE</code></td></tr><tr><td><code class="constant">:GET-BOTH</code></td><td><code class="constant">:LAST</code></td><td><code class="constant">:PREV</code></td><td><code class="constant">:SET-RECNO</code></td></tr><tr><td><code class="constant">:GET-BOTH-RANGE</code></td><td><code class="constant">:NEXT</code></td><td><code class="constant">:PREV-NODUP</code></td><td> </td></tr></table><p>
</p></dd><dt><span class="term"><code class="code">(BDB:DBC-PUT cursor key data
   flag)</code></span></dt><dd>Store by cursor
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/dbc_put.html"><code class="function">DBCursor-&gt;put</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:WITH-DBC (var <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a>
   <em class="replaceable"><code>options</code></em>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <em class="replaceable"><code>body</code></em>))</code></span></dt><dd>Open a cursor, execute <em class="replaceable"><code>body</code></em>, close it.
   <em class="replaceable"><code>options</code></em> are passed to <a href="#make-dbc"><code class="function">BDB:MAKE-DBC</code></a>.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-lock"></a>32.4.8. Lock Subsystem</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="code">(BDB:LOCK-DETECT dbe action)</code></span></dt><dd>Perform deadlock detection
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_lock_detect.html"><code class="function">DB_ENV-&gt;lock_detect</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:LOCK-ID dbe)</code></span></dt><dd>Acquire a locker ID
  (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_lock_id.html"><code class="function">DB_ENV-&gt;lock_id</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:LOCK-ID-FREE dbe id)</code></span></dt><dd>Release a locker ID
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_lock_id_free.html"><code class="function">DB_ENV-&gt;lock_id_free</code></a>).
   All associated locks should be released first.
</dd><dt><span class="term"><code class="code">(BDB:LOCK-GET dbe object locker
   mode <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> NOWAIT)</code></span></dt><dd>Acquire a lock
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_lock_get.html"><code class="function">DB_ENV-&gt;lock_get</code></a>).
   The <span class="type">BDB:DBLOCK</span> object returned by this function will
   <span class="strong"><strong>not</strong></span> be released when the environment is closed.
   This permits long-lived locks.</dd><dt><span class="term"><code class="code">(BDB:LOCK-PUT dbe lock)</code></span></dt><dd>Release a lock
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_lock_put.html"><code class="function">DB_ENV-&gt;lock_put</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:LOCK-CLOSE lock)</code></span></dt><dd><p>Release a lock
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_lock_put.html"><code class="function">DB_ENV-&gt;lock_put</code></a>) using the
   environment with which it has been acquired.
   This is used to <a href="#final" title="30.8.&#xA0;Finalization"><code class="function">EXT:FINALIZE</code></a> <span class="type">BDB:DBLOCK</span> objects.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If that environment has already been closed, you are
    in big trouble (segfault), so you better release your locks or do not
    drop them.</p></div></dd><dt><span class="term"><code class="code">(BDB:LOCK-STAT dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   STAT-CLEAR)</code></span></dt><dd>Return lock subsystem statistics
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_lock_stat.html"><code class="function">DB_ENV-&gt;lock_stat</code></a>).
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-log"></a>32.4.9. Log Subsystem</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#bdb-log-cursor">32.4.9.1. Log Cursor Operations</a></span></dt><dt><span class="section"><a href="#bdb-log-seq">32.4.9.2. Log Sequence Numbers</a></span></dt></dl></div><div class="variablelist"><dl><dt><span class="term"><code class="code">(BDB:LOG-ARCHIVE dbe
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> ARCH-ABS ARCH-DATA ARCH-LOG ARCH-REMOVE)</code></span></dt><dd>Return a list of log or database filenames
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_log_archive.html"><code class="function">DB_ENV-&gt;log_archive</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:LOG-FILE dbe lsn)</code></span></dt><dd>Return the name of the file containing the record
   named by <em class="replaceable"><code>lsn</code></em>
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_log_file.html"><code class="function">DB_ENV-&gt;log_file</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:LOG-FLUSH dbe lsn)</code></span></dt><dd>Flush log records to disk
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_log_flush.html"><code class="function">DB_ENV-&gt;log_flush</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:LOG-PUT dbe data
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :FLUSH)</code></span></dt><dd>Write a log record
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_log_put.html"><code class="function">DB_ENV-&gt;log_put</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:LOG-STAT dbe
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> STAT-CLEAR)</code></span></dt><dd>Logging subsystem statistics
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_log_stat.html"><code class="function">DB_ENV-&gt;log_stat</code></a>).
</dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="bdb-log-cursor"></a>32.4.9.1. Log Cursor Operations</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="code">(BDB:LOG-CURSOR dbe)</code></span></dt><dd>Create a log cursor handle
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_log_cursor.html"><code class="function">DB_ENV-&gt;log_cursor</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:LOGC-CLOSE logc)</code></span></dt><dd>Close a log cursor handle
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/logc_close.html"><code class="function">DB_LOGC-&gt;close</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:LOGC-GET logc action
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> TYPE ERROR)</code></span></dt><dd><p>Retrieve a log record
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/logc_get.html"><code class="function">DB_LOGC-&gt;get</code></a>).
   If <code class="constant">:ERROR</code> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and the record is not found, no <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed,
   <code class="constant">:NOTFOUND</code> is returned instead.
   </p><div class="variablelist"><p class="title"><b>Valid <em class="replaceable"><code>action</code></em>s</b></p><dl><dt><span class="term"><code class="constant">:CURRENT</code><br /></span><span class="term"><code class="constant">:FIRST</code><br /></span><span class="term"><code class="constant">:LAST</code><br /></span><span class="term"><code class="constant">:NEXT</code><br /></span><span class="term"><code class="constant">:PREV</code></span></dt><dd>Retrieve the appropriate record.
    </dd><dt><span class="term"><span class="type">DB:LSN</span></span></dt><dd>Retrieve the specified record, as
       with <code class="constant">DB_SET</code>.
   </dd></dl></div><p>
   Returns two values: the datum of type specified by the <code class="constant">:TYPE</code>
   argument and the <span class="type">DB:LSN</span> value of the record retrieved
   (when <em class="replaceable"><code>action</code></em> is a <span class="type">DB:LSN</span>, it
   is returned unchanged).
</p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="bdb-log-seq"></a>32.4.9.2. Log Sequence Numbers</h4></div></div></div><p>Use <a href="http://www.lisp.org/HyperSpec/Body/fun_equalp.html" target="_top"><code class="function">EQUALP</code></a> to check similarity of <span class="type">BDB:LSN</span> objects.</p><div class="variablelist"><dl><dt><span class="term"><code class="code">(BDB:LOG-COMPARE lsn1 lsn2)</code></span></dt><dd>Compare two Log Sequence Numbers
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/log_compare.html"><code class="function">log_compare</code></a>).
</dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-mem-pool"></a>32.4.10. Memory Pool Subsystem</h3></div></div></div><p>not implemented yet, patches are welcome</p>
<!--DB_ENV->set_cachesize Set the environment cache size DB_ENV->set_mp_mmapsize Set maximum mapped-in database file size DB_ENV->memp_register Register input/output functions for a file in a memory pool DB_ENV->memp_stat Return memory pool statistics DB_ENV->memp_sync Flush pages from a memory pool DB_ENV->memp_trickle Trickle flush pages from a memory pool Memory Pool Files DB_ENV->memp_fcreate Open a file in a memory pool DB_MPOOLFILE->close Close a file in a memory pool DB_MPOOLFILE->get Get page from a file in a memory pool DB_MPOOLFILE->open Open a file in a memory pool DB_MPOOLFILE->put Return a page to a memory pool DB_MPOOLFILE->set Set memory pool page status DB_MPOOLFILE->sync Flush pages from a file in a memory pool DB_MPOOLFILE->set_clear_len Set file page bytes to be cleared DB_MPOOLFILE->set_fileid Set file unique identifier DB_MPOOLFILE->set_ftype Set file type DB_MPOOLFILE->set_lsn_offset Set file log-sequence-number offset DB_MPOOLFILE->set_pgcookie Set file cookie for pgin/pgout-->
<!--variablelist> <varlistentry><term><code>()</code></term> <listitem><simpara></simpara></listitem></varlistentry> </variablelist-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-replication"></a>32.4.11. Replication</h3></div></div></div><p>not implemented yet, patches are welcome</p>
<!--DB_ENV->set_rep_transport Configure replication transport DB_ENV->rep_elect Hold a replication election DB_ENV->set_rep_limit Limit data sent in response to a single message DB_ENV->rep_process_message Process a replication message DB_ENV->rep_start Configure an environment for replication DB_ENV->rep_stat Replication statistics-->
<!--variablelist> <varlistentry><term><code>()</code></term> <listitem><simpara></simpara></listitem></varlistentry> </variablelist-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-sequences"></a>32.4.12. Sequences</h3></div></div></div><p>not implemented yet, patches are welcome</p>
<!--Sequences and Related Methods Description db_sequence_create Create a sequence handle DB_SEQUENCE->close Close a sequence DB_SEQUENCE->get Get the next sequence element(s) DB_SEQUENCE->get_dbp Return a handle for the underlying sequence database DB_SEQUENCE->get_key Return the key for a sequence DB_SEQUENCE->init_value Set the initial value of a sequence DB_SEQUENCE->open Open a sequence DB_SEQUENCE->remove Remove a sequence DB_SEQUENCE->stat Return sequence statistics Sequences Configuration DB_SEQUENCE->set_cachesize Set the cache size of a sequence DB_SEQUENCE->set_flags Set the flags for a sequence DB_SEQUENCE->set_range Set the range for a sequence-->
<!--variablelist> <varlistentry><term><code>()</code></term> <listitem><simpara></simpara></listitem></varlistentry> </variablelist-->
</div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="bdb-transaction"></a>32.4.13. Transaction Subsystem</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="code">(BDB:TXN-BEGIN dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   DEGREE-2 PARENT DIRTY-READ NOSYNC NOWAIT SYNC)</code></span></dt><dd>Begin a transaction
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_txn_begin.html"><code class="function">DB_ENV-&gt;txn_begin</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:TXN-ABORT txn)</code></span></dt><dd>Abort a transaction
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/txn_abort.html"><code class="function">DB_TXN-&gt;abort</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:TXN-COMMIT txn <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   NOSYNC SYNC)</code></span></dt><dd>Commit a transaction
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/txn_commit.html"><code class="function">DB_TXN-&gt;commit</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:TXN-DISCARD txn)</code></span></dt><dd>Discard a transaction
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/txn_discard.html"><code class="function">DB_TXN-&gt;discard</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:TXN-ID txn)</code></span></dt><dd>Return the transaction's ID
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/txn_id.html"><code class="function">DB_TXN-&gt;id</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:TXN-CHECKPOINT dbe
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> KBYTE MIN FORCE)</code></span></dt><dd>Checkpoint the transaction subsystem
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_txn_checkpoint.html"><code class="function">DB_ENV-&gt;txn_checkpoint</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:TXN-PREPARE txn id)</code></span></dt><dd>Initiate the beginning of a two-phase commit
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/txn_prepare.html"><code class="function">DB_TXN-&gt;prepare</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:TXN-RECOVER dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   FIRST NEXT)</code></span></dt><dd>Return a list of prepared but not yet resolved
   transactions (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_txn_recover.html"><code class="function">DB_ENV-&gt;txn_recover</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:TXN-SET-TIMEOUT txn
   timeout which)</code></span></dt><dd>Set timeout values for locks or transactions for the
   specified transaction
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/txn_set_timeout.html"><code class="function">DB_TXN-&gt;set_timeout</code></a>).
</dd><dt><span class="term"><code class="code">(BDB:TXN-STAT dbe <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
   STAT-CLEAR)</code></span></dt><dd>Transaction subsystem statistics
   (<a class="bdb" href="http://www.sleepycat.com/docs/api_c/env_txn_stat.html"><code class="function">DB_ENV-&gt;txn_stat</code></a>).
</dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="regexp-mod"></a>32.5. POSIX Regular Expressions</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#regexp-api">32.5.1. Regular Expression API</a></span></dt><dt><span class="section"><a href="#re-example">32.5.2. Example</a></span></dt></dl></div><p>The <a href="#regexp-mod" title="32.5.&#xA0;POSIX Regular Expressions"><strong class="package">“<span class="quote">REGEXP</span>”</strong></a> module implements the
 <a href="regexp.html" target="_top">POSIX regular expressions</a>
by calling the standard <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> system facilities.
The syntax of these <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html">regular expression</a>s is described in many places,
such as your local <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html">&lt;<code class="filename">regex.h</code>&gt;</a> manual
and <a href="http://www.gnu.org/software/emacs/" target="_top">Emacs</a> info pages.</p><p>This module is present even in the <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">base</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a> by default.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a>
 contains the symbol <code class="constant">:REGEXP</code>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="regexp-api"></a>32.5.1. Regular Expression API</h3></div></div></div><div class="variablelist"><a id="re-api"></a><dl><dt><a id="re-match"></a><span class="term"><code class="code">(<a href="#re-match"><code class="function">REGEXP:MATCH</code></a> <em class="replaceable"><code>pattern</code></em>
   <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> (<code class="constant">:START</code> 0) <code class="constant">:END</code> <a href="#re-cflags"><code class="constant">:EXTENDED</code> <code class="constant">:IGNORE-CASE</code> <code class="constant">:NEWLINE</code> <code class="constant">:NOSUB</code></a>
   <a href="#re-eflags"><code class="constant">:NOTBOL</code> <code class="constant">:NOTEOL</code></a>)</code></span></dt><dd><p>This macro returns as first value a <code class="classname">REGEXP:MATCH</code> structure
  containing the indices of the start and end of the first match for the
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html">regular expression</a> <em class="replaceable"><code>pattern</code></em> in <em class="replaceable"><code>string</code></em>; or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if there is no match.
  Additionally, a <code class="classname">REGEXP:MATCH</code> structure is returned for every matched
  <code class="literal">"\(...\)"</code> group in <em class="replaceable"><code>pattern</code></em>, in the
  order that the open parentheses appear in <em class="replaceable"><code>pattern</code></em>.
  If <em class="replaceable"><code>start</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the search starts at that index in <em class="replaceable"><code>string</code></em>.
  If <em class="replaceable"><code>end</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, only <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/acc_subseq.html" target="_top"><code class="function">SUBSEQ</code></a> <em class="replaceable"><code>string</code></em> <em class="replaceable"><code>start</code></em>
  <em class="replaceable"><code>end</code></em>)</code> is considered.
  </p><div class="example"><a id="ex-re-match"></a><p class="title"><b>Example 32.1. <a href="#re-match"><code class="function">REGEXP:MATCH</code></a></b></p><pre class="programlisting">
(<a href="#re-match"><code class="function">REGEXP:MATCH</code></a> "quick" "The quick brown fox jumped quickly.")
⇒ <code class="computeroutput">#S(<code class="classname">REGEXP:MATCH</code> :START 4 :END 9)</code>
(<a href="#re-match"><code class="function">REGEXP:MATCH</code></a> "quick" "The quick brown fox jumped quickly." :start 8)
⇒ <code class="computeroutput">#S(<code class="classname">REGEXP:MATCH</code> :START 27 :END 32)</code>
(<a href="#re-match"><code class="function">REGEXP:MATCH</code></a> "quick" "The quick brown fox jumped quickly." :start 8 :end 30)
⇒ <code class="computeroutput"><a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></code>
(<a href="#re-match"><code class="function">REGEXP:MATCH</code></a> "\\([a-z]*\\)[0-9]*\\(bar\\)" "foo12bar")
⇒ <code class="computeroutput">#S(<code class="classname">REGEXP:MATCH</code> :START 0 :END 8)</code> ;
⇒ <code class="computeroutput">#S(<code class="classname">REGEXP:MATCH</code> :START 0 :END 3)</code> ;
⇒ <code class="computeroutput">#S(<code class="classname">REGEXP:MATCH</code> :START 5 :END 8)</code>
</pre></div><p>
</p></dd><dt><a id="re-match-access"></a><span class="term"><code class="code">(<a href="#re-match-access"><code class="function">REGEXP:MATCH-START</code></a> <em class="replaceable"><code>match</code></em>)</code><br /></span><span class="term"><code class="code">(<a href="#re-match-access"><code class="function">REGEXP:MATCH-END</code></a> <em class="replaceable"><code>match</code></em>)</code></span></dt><dd>Return the start and end the <em class="replaceable"><code>match</code></em>; <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>-able.
</dd><dt><a id="re-match-string"></a><span class="term"><code class="code">(<a href="#re-match-string"><code class="function">REGEXP:MATCH-STRING</code></a> <em class="replaceable"><code>string</code></em> <em class="replaceable"><code>match</code></em>)</code></span></dt><dd>Extracts the substring of <em class="replaceable"><code>string</code></em> corresponding
   to the given pair of start and end indices of <em class="replaceable"><code>match</code></em>.
   The result is shared with <em class="replaceable"><code>string</code></em>.
   If you want a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>, use <a href="http://www.lisp.org/HyperSpec/Body/fun_copy-seq.html" target="_top"><code class="function">COPY-SEQ</code></a> or
   <a href="http://www.lisp.org/HyperSpec/Body/fun_coerce.html" target="_top"><code class="function">COERCE</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html" target="_top"><code class="classname">SIMPLE-STRING</code></a>.</dd><dt><a id="re-regexp-quote"></a><span class="term"><code class="code">(<a href="#re-regexp-quote"><code class="function">REGEXP:REGEXP-QUOTE</code></a>
   <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>extended</code></em>)</code></span></dt><dd><p>This function returns a <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html">regular expression</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>
  that matches exactly <em class="replaceable"><code>string</code></em> and nothing else.
  This allows you to request an exact string match when calling a
  function that wants a <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html">regular expression</a>.
  </p><div class="example"><a id="ex-re-quote"></a><p class="title"><b>Example 32.2. <a href="#re-regexp-quote"><code class="function">REGEXP:REGEXP-QUOTE</code></a></b></p><pre class="programlisting">
(regexp-quote "^The cat$")
⇒ <code class="computeroutput">"\\^The cat\\$"</code>
  </pre></div><p>
  One use of <a href="#re-regexp-quote"><code class="function">REGEXP:REGEXP-QUOTE</code></a> is to combine an exact string match with
  context described as a <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html">regular expression</a>.
  When <em class="replaceable"><code>extended</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, also
  quote <span class="keysym">#\+</span> and <span class="keysym">#\?</span>.
</p></dd><dt><a id="re-regexp-compile"></a><span class="term"><code class="code">(<a href="#re-regexp-compile"><code class="function">REGEXP:REGEXP-COMPILE</code></a>
   <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <a href="#re-cflags"><code class="constant">:EXTENDED</code> <code class="constant">:IGNORE-CASE</code> <code class="constant">:NEWLINE</code> <code class="constant">:NOSUB</code></a>)</code></span></dt><dd>Compile the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html">regular expression</a> <em class="replaceable"><code>string</code></em> into an
  object suitable for <a href="#re-regexp-exec"><code class="function">REGEXP:REGEXP-EXEC</code></a>.</dd><dt><a id="re-regexp-exec"></a><span class="term"><code class="code">(<a href="#re-regexp-exec"><code class="function">REGEXP:REGEXP-EXEC</code></a>
     <em class="replaceable"><code>pattern</code></em> <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> (<code class="constant">:START</code> 0) <code class="constant">:END</code>
     <a href="#re-eflags"><code class="constant">:NOTBOL</code> <code class="constant">:NOTEOL</code></a>)</code></span></dt><dd><p>Execute the <em class="replaceable"><code>pattern</code></em>, which must be a compiled
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html">regular expression</a> returned by <a href="#re-regexp-compile"><code class="function">REGEXP:REGEXP-COMPILE</code></a>, against the
   appropriate portion of the <em class="replaceable"><code>string</code></em>.</p><p>Negative <em class="replaceable"><code>end</code></em> means <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_pl.html" target="_top"><code class="function">+</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a>
    <em class="replaceable"><code>string</code></em>) <em class="replaceable"><code>end</code></em>)</code></p><p>Returns <code class="classname">REGEXP:MATCH</code> structures as multiple values (one for each
   subexpression which successfully matched and one for the whole pattern),
   unless <code class="literal">:BOOLEAN</code> was non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, in which case
   return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> as an indicator of success, but do not allocate anything.
</p></dd><dt><a id="re-regexp-split"></a><span class="term"><code class="code">(<a href="#re-regexp-split"><code class="function">REGEXP:REGEXP-SPLIT</code></a>
     <em class="replaceable"><code>pattern</code></em> <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> (<code class="constant">:START</code> 0) <code class="constant">:END</code>
     <a href="#re-cflags"><code class="constant">:EXTENDED</code> <code class="constant">:IGNORE-CASE</code> <code class="constant">:NEWLINE</code> <code class="constant">:NOSUB</code></a> <a href="#re-eflags"><code class="constant">:NOTBOL</code> <code class="constant">:NOTEOL</code></a>)</code></span></dt><dd>Return a list of substrings of <em class="replaceable"><code>string</code></em> (all
  sharing the structure with <em class="replaceable"><code>string</code></em>) separated by <em class="replaceable"><code>pattern</code></em> (a
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap09.html">regular expression</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or a return value of <a href="#re-regexp-compile"><code class="function">REGEXP:REGEXP-COMPILE</code></a>)
 </dd><dt><a id="re-with-loop-split"></a><span class="term"><code class="code">(<a href="#re-with-loop-split"><code class="function">REGEXP:WITH-LOOP-SPLIT</code></a>
     (<em class="replaceable"><code>variable</code></em> <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>pattern</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> (<code class="constant">:START</code> 0) <code class="constant">:END</code>
     <a href="#re-cflags"><code class="constant">:EXTENDED</code> <code class="constant">:IGNORE-CASE</code> <code class="constant">:NEWLINE</code> <code class="constant">:NOSUB</code></a> <a href="#re-eflags"><code class="constant">:NOTBOL</code> <code class="constant">:NOTEOL</code></a>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <em class="replaceable"><code>body</code></em>)</code></span></dt><dd>Read lines from <em class="replaceable"><code>stream</code></em>, split them with
  <a href="#re-regexp-split"><code class="function">REGEXP:REGEXP-SPLIT</code></a> on <em class="replaceable"><code>pattern</code></em>, and bind the resulting list to
  <em class="replaceable"><code>variable</code></em>.</dd><dt><a id="re-cflags"></a><span class="term"><a href="#re-cflags"><code class="constant">:EXTENDED</code> <code class="constant">:IGNORE-CASE</code> <code class="constant">:NEWLINE</code> <code class="constant">:NOSUB</code></a></span></dt><dd>These options control compilation of a pattern.
   See <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html">&lt;<code class="filename">regex.h</code>&gt;</a> for their meaning.
</dd><dt><a id="re-eflags"></a><span class="term"><a href="#re-eflags"><code class="constant">:NOTBOL</code> <code class="constant">:NOTEOL</code></a></span></dt><dd>These options constrol execution of a pattern.
   See <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html">&lt;<code class="filename">regex.h</code>&gt;</a> for their meaning.
</dd><dt><a id="re-matcher"></a><span class="term"><a href="#re-matcher"><code class="function">REGEXP:REGEXP-MATCHER</code></a></span></dt><dd>A valid value for <a href="#apropos" title="25.2.12.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><code class="varname">CUSTOM:*APROPOS-MATCHER*</code></a>.
   This will work only when your <em class="replaceable"><code><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html">LOCALE</a></code></em> is <a href="#charset-UTF-8"><code class="constant">CHARSET:UTF-8</code></a>
   because <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses <a href="#charset-UTF-8"><code class="constant">CHARSET:UTF-8</code></a> internally and POSIX constrains
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html">&lt;<code class="filename">regex.h</code>&gt;</a> to use the current <em class="replaceable"><code><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html">LOCALE</a></code></em>.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="re-example"></a>32.5.2. Example</h3></div></div></div><p>The following code computes the number of people who use a
 particular shell:</p><pre class="programlisting">
#!/usr/local/bin/clisp -C
(<a href="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html" target="_top"><code class="function">DEFPACKAGE</code></a> "REGEXP-TEST" (:use "LISP" "REGEXP"))
(<a href="http://www.lisp.org/HyperSpec/Body/mac_in-package.html" target="_top"><code class="function">IN-PACKAGE</code></a> "REGEXP-TEST")
(let ((h (make-hash-table :test #'equal :size 10)) (n 0))
  (with-open-file (f "/etc/passwd")
    (with-loop-split (s f ":")
      (incf (gethash (seventh s) h 0))))
  (with-hash-table-iterator (i h)
    (loop (multiple-value-bind (r k v) (i)
            (unless r (return))
            (format t "[~d] ~s~30t== ~5:d~%" (incf n) k v)))))
</pre><p>For comparison, the same can be done by the following <a href="http://www.perl.com" target="_top"><span><strong class="command">Perl</strong></span></a>:
</p><pre class="programlisting">
#!/usr/local/bin/perl -w

use diagnostics;
use strict;

my $IN = $ARGV[0];
open(INF,"&lt; $IN") || die "$0: cannot read file [$IN]: $!\n;";
my %hash;
while (&lt;INF&gt;) {
  chop;
  my @all = split($ARGV[1]);
  my $shell = ($#all &gt;= 6 ? $all[6] : "");
  if ($hash{$shell}) { $hash{$shell} ++; }
  else { $hash{$shell} = 1; }
}
my $ii = 0;
for my $kk (keys(%hash)) {
  print "[",++$ii,"] \"",$kk,"\"  --  ",$hash{$kk},"\n";
}
close(INF);
</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="pari"></a>32.6. Computer Algebra System PARI</h2></div></div></div><p>This package offers an <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>-based interface to <a href="http://pari.math.u-bordeaux.fr/" target="_top">PARI</a>.</p><p>The package <strong class="package">“<span class="quote">PARI</span>”</strong>
 is <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity">case-sensitive</a>.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a> contains the
 symbol <code class="constant">:PARI</code>.</p><p>PARI objects are printed and read using a
 special <span class="data"><code class="literal">#Z""</code></span> syntax.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="pcre"></a>32.7. Perl Compatible Regular Expressions</h2></div></div></div><p>This is an interface to <a href="http://www.pcre.org/" target="_top">Perl
  Compatible Regular Expressions</a>.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a> contains the
 symbol <code class="constant">:PCRE</code>.</p><div class="variablelist"><a id="pcre-api"></a><p class="title"><b>PCRE module API</b></p><dl><dt><a id="pcre-version"></a><span class="term"><code class="code">(PCRE:PCRE-VERSION)</code></span></dt><dd>Return version information as 3 values: descriptive
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> and 2 <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>s: major and minor numbers.
 </dd><dt><a id="pcre-config"></a><span class="term"><code class="code">(PCRE:PCRE-CONFIG <em class="replaceable"><code>type</code></em>)</code></span></dt><dd><p>Return some information about the PCRE build
    configuration.  <em class="replaceable"><code>type</code></em> is one of </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">:UTF8</code></td></tr><tr><td><code class="literal">:NEWLINE</code></td></tr><tr><td><code class="literal">:LINK-SIZE</code></td></tr><tr><td><code class="literal">:POSIX-MALLOC-THRESHOLD</code></td></tr><tr><td><code class="literal">:MATCH-LIMIT</code></td></tr></table></dd><dt><a id="pcre-compile"></a><span class="term"><code class="code">(PCRE:PCRE-COMPILE <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :STUDY
    :IGNORE-CASE :MULTILINE :DOTALL :EXTENDED :ANCHORED :DOLLAR-ENDONLY
    :EXTRA :NOTBOL :NOTEOL :UNGREADY :NOTEMPTY :NO-AUTO-CAPTURE)</code></span></dt><dd>Compile a pattern, optionally study it.
 </dd><dt><a id="pattern-info"></a><span class="term">
   <code class="code">(PCRE:PATTERN-INFO <em class="replaceable"><code>pattern</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> request)</code></span></dt><dd><p>Return some information about the <em class="replaceable"><code>pattern</code></em>,
    such as </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="literal">:OPTIONS</code></td></tr><tr><td><code class="literal">:SIZE</code></td></tr><tr><td><code class="literal">:CAPTURECOUNT</code></td></tr><tr><td><code class="literal">:BACKREFMAX</code></td></tr><tr><td><code class="literal">:FIRSTBYTE</code></td></tr><tr><td><code class="literal">:FIRSTTABLE</code></td></tr><tr><td><code class="literal">:LASTLITERAL</code></td></tr><tr><td><code class="literal">:NAMEENTRYSIZE</code></td></tr><tr><td><code class="literal">:NAMECOUNT</code></td></tr><tr><td><code class="literal">:NAMETABLE</code></td></tr><tr><td><code class="literal">:STUDYSIZE</code></td></tr></table></dd><dt><a id="pcre-name-to-index"></a><span class="term"><code class="code">(PCRE:PCRE-NAME-TO-INDEX <em class="replaceable"><code>pattern</code></em> <em class="replaceable"><code>name</code></em>)</code></span></dt><dd>Convert the name of the sub-pattern to an index in
    the return vector.</dd><dt><a id="pcre-exec"></a><span class="term"><code class="code">(PCRE:PCRE-EXEC <em class="replaceable"><code>pattern</code></em> <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :BOOLEAN
    :OFFSET :ANCHORED :NOTBOL :NOTEOL :NOTEMPTY)</code></span></dt><dd>Execute the compiled <em class="replaceable"><code>pattern</code></em> against the
    <em class="replaceable"><code>string</code></em> at the given <em class="replaceable"><code>offset</code></em> with the given options.
    Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if no matches or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> of <a href="http://www.lisp.org/HyperSpec/Body/fun_length.html" target="_top"><code class="function">LENGTH</code></a>
    <code class="literal">CAPTURECOUNT+1</code> of <span class="type">PCRE:MATCH</span> structures,
    unless <code class="literal">:BOOLEAN</code> was non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, in which case
    return <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> as an indicator of success, but do not allocate anything.
 </dd><dt><a id="pcre-match-access"></a><span class="term"><code class="code">(PCRE:MATCH-START <em class="replaceable"><code>match</code></em>)</code><br /></span><span class="term"><code class="code">(PCRE:MATCH-END <em class="replaceable"><code>match</code></em>)</code></span></dt><dd>Return the start and end of the <em class="replaceable"><code>match</code></em>. <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>-able.
 </dd><dt><a id="match-substring"></a><span class="term"><code class="code">(PCRE:MATCH-SUBSTRING <em class="replaceable"><code>match</code></em> <em class="replaceable"><code>string</code></em>)</code></span></dt><dd>Return the substring of <em class="replaceable"><code>string</code></em> bounded by <em class="replaceable"><code>match</code></em>.
 </dd><dt><a id="match-strings"></a><span class="term"><code class="code">(PCRE:MATCH-STRINGS return-vector <em class="replaceable"><code>string</code></em>)</code></span></dt><dd>Return all substrings for all matches found
    by <code class="function">PCRE:PCRE-EXEC</code>.
 </dd><dt><a id="match-string"></a><span class="term"><code class="code">(PCRE:MATCH-STRING return-vector which
    <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>pattern</code></em>)</code></span></dt><dd>Return the substring that matches the given sub-pattern.
    If <em class="replaceable"><code>which</code></em> is a name of the sub-pattern (as
    opposed to its number), <em class="replaceable"><code>pattern</code></em> must be supplied.
 </dd><dt><a id="pcre-matcher"></a><span class="term"><code class="code">(PCRE:PCRE-MATCHER <em class="replaceable"><code>pattern</code></em>)</code></span></dt><dd>A valid value for <a href="#apropos" title="25.2.12.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><code class="varname">CUSTOM:*APROPOS-MATCHER*</code></a>.
 </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="postgresql"></a>32.8. PostgreSQL Database Access</h2></div></div></div><p>This package offers an <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>-based interface to
 <a href="http://www.PostgreSQL.org/" target="_top">PostgreSQL</a>.</p><p>The package <strong class="package">“<span class="quote">SQL</span>”</strong>
 (nicknamed <strong class="package">“<span class="quote">POSTGRES</span>”</strong>
 and <strong class="package">“<span class="quote">POSTGRESQL</span>”</strong>)
 is <a href="#package-case" title="11.4.&#xA0;Package Case-Sensitivity">case-sensitive</a>,
 so you would write <code class="code">(sql:PQconnectdb ...)</code>
 when you need to call
 <a href="http://www.postgresql.org/docs/8.0/interactive/libpq.html#LIBPQ-CONNECT" target="_top"><code class="function">PQconnectdb()</code></a>.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a>
 contains the symbol <code class="constant">:POSTGRESQL</code>.</p><p>See <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/postgresql/test.tst"><code class="filename">modules/postgresql/test.tst</code></a>
 for sample usage.</p><p>Additionally, some higher level functionality is available:</p><div class="variablelist"><dl><dt><a id="sql:pq-finish"></a><span class="term"><code class="code">(sql:pq-finish
   <em class="replaceable"><code>connection</code></em>)</code></span></dt><dd><code class="function">PQfinish</code> the <em class="replaceable"><code>connection</code></em> and mark
   it as invalid</dd><dt><a id="sql:pq-clear"></a><span class="term"><code class="code">(sql:pq-clear
   <em class="replaceable"><code>result</code></em>)</code></span></dt><dd><code class="function">PQclear</code> the <em class="replaceable"><code>result</code></em> and mark
   it as invalid</dd><dt><span class="term"><code class="code">(sql:sql-error <em class="replaceable"><code>connection</code></em> <em class="replaceable"><code>result</code></em> <em class="replaceable"><code>format-string</code></em>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>arguments</code></em>)</code></span></dt><dd>finalize <em class="replaceable"><code>connection</code></em> and <em class="replaceable"><code>result</code></em> and <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a> an
   appropriate <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a></dd><dt><a id="sql:sql-connect"></a><span class="term"><code class="code">(sql:sql-connect
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> host port options tty name login password)</code></span></dt><dd>call <code class="function">PQsetdbLogin</code> and return
   the <em class="replaceable"><code>connection</code></em></dd><dt><a id="sql:with-sql-connection"></a><span class="term"><code class="code">(sql:with-sql-connection
   (<em class="replaceable"><code>variable</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>option</code></em>s <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> log <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <em class="replaceable"><code>body</code></em>)</code></span></dt><dd><div class="procedure"><ol type="1"><li><p>bind <code class="varname">*sql-log*</code>
     to the <em class="replaceable"><code>log</code></em> argument</p></li><li><p>call <code class="function">sql:sql-connect</code> on
     <em class="replaceable"><code>option</code></em>s and bind <em class="replaceable"><code>variable</code></em> to the result</p></li><li><p>execute <em class="replaceable"><code>body</code></em></p></li><li><p>call <code class="function">sql:pq-finish</code> on
     <em class="replaceable"><code>variable</code></em></p></li></ol></div></dd><dt><span class="term"><code class="code">(sql:sql-transaction <em class="replaceable"><code>connection</code></em> <em class="replaceable"><code>command</code></em>
   <em class="replaceable"><code>status</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (clear-p <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>))</code></span></dt><dd>execute the <em class="replaceable"><code>command</code></em> via <em class="replaceable"><code>connection</code></em>;
   if the status does not match <em class="replaceable"><code>status</code></em>, <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed;
   if <em class="replaceable"><code>clear-p</code></em> is
   non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> <code class="function">sql:pq-clear</code> the <em class="replaceable"><code>result</code></em>;
   otherwise return it</dd><dt><span class="term"><code class="code">(sql:with-sql-transaction (<em class="replaceable"><code>result</code></em> <em class="replaceable"><code>connection</code></em>
   <em class="replaceable"><code>command</code></em> status) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <em class="replaceable"><code>body</code></em>)</code></span></dt><dd>execure the <em class="replaceable"><code>body</code></em> on the <em class="replaceable"><code>result</code></em> of <em class="replaceable"><code>command</code></em>,
   then <code class="function">sql:pq-clear</code> the <em class="replaceable"><code>result</code></em>
</dd><dt><a id="sql:sql-login"></a><span class="term"><code class="code">sql:*sql-login*</code></span></dt><dd>the default <em class="replaceable"><code>login</code></em>
   argument to <code class="function">sql:sql-connect</code>
   (initially set to <span class="data"><code class="literal">"postgres"</code></span>)
</dd><dt><a id="sql:sql-password"></a><span class="term"><code class="code">sql:*sql-password*</code></span></dt><dd>the default <em class="replaceable"><code>password</code></em>
   argument to <code class="function">sql:sql-connect</code>
   (initially set to <span class="data"><code class="literal">"postgres"</code></span>)
</dd><dt><a id="sql:sql-log"></a><span class="term"><code class="code">sql:*sql-log*</code></span></dt><dd>when non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>;
   <code class="function">sql:sql-connect</code>
   and <code class="function">sql:sql-transaction</code>
   will write to it (initially set to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>)
</dd></dl></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Since <code class="code">PQfinish</code> and <code class="code">PQclear</code>
  cannot be called on the same pointer twice, one needs to track their
  validity (<code class="function">sql:sql-connect</code>
  and <code class="function">sql:sql-transaction</code> take care of that).
  See <a href="#ex-dffi-validity" title="Example&#xA0;31.10.&#xA0;Controlling validity of resources">Example 31.10, “Controlling validity of resources”</a>.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="i18n-mod"></a>32.9. Internationalization of User Programs</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#ggettext">32.9.1. The GNU gettext</a></span></dt><dd><dl><dt><span class="section"><a href="#domain">32.9.1.1. Domain</a></span></dt><dt><span class="section"><a href="#category">32.9.1.2. Category</a></span></dt><dt><span class="section"><a href="#i18n-example">32.9.1.3. Internationalization Example</a></span></dt></dl></dd><dt><span class="section"><a href="#i18n-locale">32.9.2. Locale</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ggettext"></a>32.9.1. The <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a></h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#domain">32.9.1.1. Domain</a></span></dt><dt><span class="section"><a href="#category">32.9.1.2. Category</a></span></dt><dt><span class="section"><a href="#i18n-example">32.9.1.3. Internationalization Example</a></span></dt></dl></div><p><a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> is a set of functions, included in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> or the
<a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> library, which permit looking up translations of strings
through message catalogs. It is also a set of tools which makes the
translation maintenance easy for the translator and the program
maintainer.</p><p>The <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/gettext/gettext.html" target="_top">gettext</a> functions are available in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> in the
<a href="#i18n" title="30.4.&#xA0;Internationalization of CLISP"><strong class="package">“<span class="quote">I18N</span>”</strong></a> package, which is <a href="#re-export" title="11.5.3.&#xA0;Function EXT:RE-EXPORT"><code class="function">EXT:RE-EXPORT</code></a>ed from the <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a>
package.</p><p>This module is present even in the <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">base</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a> by default.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a>
 contains the symbol <code class="constant">:I18N</code>.</p><div class="variablelist"><dl><dt><a id="gettext"></a><span class="term"><code class="code">(<a href="#gettext"><code class="function">I18N:GETTEXT</code></a>
    <em class="replaceable"><code>MSGID</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a> <a href="#category" title="32.9.1.2.&#xA0;Category"><em class="replaceable"><code>CATEGORY</code></em></a>)</code></span></dt><dd>returns the translation of the message <em class="replaceable"><code>MSGID</code></em>,
    in the given <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a>, depending on the given <a href="#category" title="32.9.1.2.&#xA0;Category"><em class="replaceable"><code>CATEGORY</code></em></a>.
    <em class="replaceable"><code>MSGID</code></em> should be an <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> string, and is normally the English message.
 </dd><dt><a id="ngettext"></a><span class="term"><code class="code">(<a href="#ngettext"><code class="function">I18N:NGETTEXT</code></a>
    <em class="replaceable"><code>MSGID</code></em> <em class="replaceable"><code>msgid_plural</code></em>
    <em class="replaceable"><code>n</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a> <a href="#category" title="32.9.1.2.&#xA0;Category"><em class="replaceable"><code>CATEGORY</code></em></a>)</code></span></dt><dd>returns the plural form of the translation for of
    <em class="replaceable"><code>MSGID</code></em> and <em class="replaceable"><code>n</code></em> in the given <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a>, depending on the given
    <a href="#category" title="32.9.1.2.&#xA0;Category"><em class="replaceable"><code>CATEGORY</code></em></a>.  <em class="replaceable"><code>MSGID</code></em> and <em class="replaceable"><code>msgid_plural</code></em>
    should be <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> strings, and are normally the English singular and
    English plural variant of the message, respectively.
 </dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="domain"></a>32.9.1.1. Domain</h4></div></div></div><p>The <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a> is a string identifier denoting the program that
is requesting the translation.  The pathname of the message catalog
depends on the <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a>: usually it is located at
<code class="filename">TEXTDOMAINDIR/l/LC_MESSAGES/domain.mo</code>, where
<em class="replaceable"><code>l</code></em> is the <a href="http://www.loc.gov/standards/iso639-2/" target="_top">ISO
 639-2</a> code of the language.
The notion of <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a> allows several Lisp programs running in the same
image to request translations independently of each other.</p><p><a id="textdomain"></a><b>Function <a href="#textdomain"><code class="function">I18N:TEXTDOMAIN</code></a>. </b><code class="code">(<a href="#textdomain"><code class="function">I18N:TEXTDOMAIN</code></a>)</code> is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> that returns the default
 <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a>, used when no <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a> argument is passed to the <a href="#gettext"><code class="function">I18N:GETTEXT</code></a> and
 <a href="#ngettext"><code class="function">I18N:NGETTEXT</code></a> functions.  It is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>able.
<code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="#textdomain"><code class="function">I18N:TEXTDOMAIN</code></a>)</code> is usually used
during the startup phase of a program.
Note that the default <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a> is not saved in a <a href="impnotes.html#image" class="olink">memory image</a>.
The use of <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="#textdomain"><code class="function">I18N:TEXTDOMAIN</code></a>)</code> is
recommended only for programs that are so simple that they will never
need more than one <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a>.</p><p><a id="textdomaindir"></a><b>Function <a href="#textdomaindir"><code class="function">I18N:TEXTDOMAINDIR</code></a>. </b><code class="code">(<a href="#textdomaindir"><code class="function">I18N:TEXTDOMAINDIR</code></a> <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a>)</code>
is a <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a> that returns the base directory, called
<code class="filename">TEXTDOMAINDIR</code> above, where the message
catalogs for the given <a href="#domain" title="32.9.1.1.&#xA0;Domain"><em class="replaceable"><code>DOMAIN</code></em></a> are assumed to be installed.
It is <a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>able.
<code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="#textdomaindir"><code class="function">I18N:TEXTDOMAINDIR</code></a>)</code> is usually used
during the startup phase of a program, and should be used because only
the program knows where its message catalogs are installed.
Note that the <code class="filename">TEXTDOMAINDIR</code>s
are not saved in a <a href="impnotes.html#image" class="olink">memory image</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="category"></a>32.9.1.2. Category</h4></div></div></div><p>The <a href="#category" title="32.9.1.2.&#xA0;Category"><em class="replaceable"><code>CATEGORY</code></em></a> argument of the <a href="#gettext"><code class="function">I18N:GETTEXT</code></a> and <a href="#ngettext"><code class="function">I18N:NGETTEXT</code></a>
functions denotes which <em class="replaceable"><code><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html">LOCALE</a></code></em> facet the result should depend on.
The possible values are a platform-dependent subset of
<span class="simplelist"><code class="constant">:LC_ADDRESS</code>, <code class="constant">:LC_ALL</code>, <code class="constant">:LC_COLLATE</code>, <code class="constant">:LC_CTYPE</code>, <code class="constant">:LC_IDENTIFICATION</code>, <code class="constant">:LC_MEASUREMENT</code>, <code class="constant">:LC_MESSAGES</code>, <code class="constant">:LC_MONETARY</code>, <code class="constant">:LC_NAME</code>, <code class="constant">:LC_NUMERIC</code>, <code class="constant">:LC_PAPER</code>, <code class="constant">:LC_TELEPHONE</code>, <code class="constant">:LC_TIME</code></span>
The use of these values is useful for users who have a
character/time/collation/money handling set differently from the usual
message handling.
Note that when a <a href="#category" title="32.9.1.2.&#xA0;Category"><em class="replaceable"><code>CATEGORY</code></em></a> argument is used, the message catalog
location depends on the <a href="#category" title="32.9.1.2.&#xA0;Category"><em class="replaceable"><code>CATEGORY</code></em></a>: it will be expected at
<code class="filename">TEXTDOMAINDIR/ll/category/domain.mo</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="i18n-example"></a>32.9.1.3. Internationalization Example</h4></div></div></div><p>A non-internationalized program simulating a restaurant dialogue
might look as follows.</p><p><a id="i18n-non-i"></a><b>prog.lisp. </b></p><pre class="programlisting">
(setq n (parse-integer (first <a href="impnotes.html#script-exec" class="olink"><code class="varname">EXT:*ARGS*</code></a>)))

(format t "~A~%" "'Your command, please?', asked the waiter.")

(format t "~@?~%"
          (if (= n 1) "a piece of cake" "~D pieces of cake")
          n)
</pre><p>After being internationalized, all strings are wrapped in
<a href="#gettext"><code class="function">I18N:GETTEXT</code></a> calls, and <a href="#ngettext"><code class="function">I18N:NGETTEXT</code></a> is used for plurals.
Also, <a href="#textdomaindir"><code class="function">I18N:TEXTDOMAINDIR</code></a> is assigned a value; in our case, for simplicity,
the current directory.</p><p><a id="i18n-i"></a><b>prog.lisp. </b></p><pre class="programlisting">
(setf (textdomain) "prog")
(setf (textdomaindir "prog") "./")

(setq n (parse-integer (first <a href="impnotes.html#script-exec" class="olink"><code class="varname">EXT:*ARGS*</code></a>)))

(format t "~A~%"
          (gettext "'Your command, please?', asked the waiter."))

(format t "~@?~%"
          (ngettext "a piece of cake" "~D pieces of cake" n)
          n)
</pre><p>For ease of reading, it is customary to define an abbreviation
for the <a href="#gettext"><code class="function">I18N:GETTEXT</code></a> function.  An underscore is customary.</p><p><a id="i18n-i-abbrev"></a><b>prog.lisp. </b></p><pre class="programlisting">
(setf (textdomaindir "prog") "./")
(defun _ (msgid) (gettext msgid "prog"))

(setq n (parse-integer (first <a href="impnotes.html#script-exec" class="olink"><code class="varname">EXT:*ARGS*</code></a>)))

(format t "~A~%"
          (_"'Your command, please?', asked the waiter."))

(format t "~@?~%"
          (ngettext "a piece of cake" "~D pieces of cake" n "prog")
          n)
</pre><p>Now the program's maintainer creates a message catalog template
through the command
</p><pre class="screen">
bash$ xgettext -o prog.pot prog.lisp
</pre><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>xgettext version 0.11 or higher is required here.</p></div><p>The message catalog template looks roughly like this.</p><p><a id="i18n-pot"></a><b>prog.pot. </b></p><pre class="programlisting">
msgid "'Your command, please?', asked the waiter."
msgstr ""

msgid "a piece of cake"
msgid_plural "%d pieces of cake"
msgstr[0] ""
msgstr[1] ""
</pre><p>Then a French translator creates a French message catalog</p><p><a id="i18n-fr-po"></a><b>prog.fr.po. </b></p><pre class="programlisting">
msgid ""
msgstr ""
"Content-Type: text/plain; charset=ISO-8859-1\n"
"Plural-Forms: nplurals=2; plural=(n &gt; 1);\n"

msgid "'Your command, please?', asked the waiter."
msgstr "«Votre commande, s'il vous plait», dit le garçon."

# Les gateaux allemands sont les meilleurs du monde.
msgid "a piece of cake"
msgid_plural "%d pieces of cake"
msgstr[0] "un morceau de gateau"
msgstr[1] "%d morceaux de gateau"
</pre><p>and sends it to the program's maintainer.</p><p>The program's maintainer compiles the catalog as follows:
</p><pre class="screen">
bash$ mkdir -p ./fr/LC_MESSAGES
bash$ msgfmt -o ./fr/LC_MESSAGES/prog.mo prog.fr.po
</pre><p>When a user in a french <em class="replaceable"><code><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html">LOCALE</a></code></em> then runs the program
</p><pre class="screen">
bash$ clisp prog.lisp 2
</pre><p>
she will get the output
</p><pre class="screen">
    «Votre commande, s'il vous plait», dit le garçon.
    2 morceaux de gateau
</pre><p>
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="i18n-locale"></a>32.9.2. Locale</h3></div></div></div><div class="variablelist"><dl><dt><a id="set-locale"></a><span class="term"><code class="code">(<a href="#set-locale"><code class="function">I18N:SET-LOCALE</code></a>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <a href="#category" title="32.9.1.2.&#xA0;Category"><em class="replaceable"><code>CATEGORY</code></em></a> <em class="replaceable"><code><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html">LOCALE</a></code></em>)</code></span></dt><dd><p>This is an interface to
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setlocale.html"><code class="function">setlocale</code></a>.</p><p>When <em class="replaceable"><code><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap07.html">LOCALE</a></code></em> is missing or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, return the current one.</p><p>When <a href="#category" title="32.9.1.2.&#xA0;Category"><em class="replaceable"><code>CATEGORY</code></em></a> is missing or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, return all categories
   as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>.</p></dd><dt><a id="locale-conv"></a><span class="term"><code class="code">(<a href="#locale-conv"><code class="function">I18N:LOCALE-CONV</code></a>)</code></span></dt><dd><p>This is an interface to
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/localeconv.html"><code class="function">localeconv</code></a>.</p><p>Returns a <span class="type">I18N:LOCALE-CONV</span>
   structure.</p></dd><dt><a id="lang-info"></a><span class="term"><code class="code">(<a href="#lang-info"><code class="function">I18N:LANGUAGE-INFORMATION</code></a>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>item</code></em>)</code></span></dt><dd><p>This is an interface to
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/nl_langinfo.html"><code class="function">nl_langinfo</code></a> (<a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>)
   and <code class="function">GetLocaleInfo</code> (<a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>).</p><p>When <em class="replaceable"><code>item</code></em> is missing or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
   return all available information as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>.</p></dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="readline-mod"></a>32.10. Advanced Readline and History Functionality</h2></div></div></div><p>The <strong class="package">“<span class="quote">READLINE</span>”</strong> module exports most
 of the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> functions using <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>.</p><p>This module is present even in the <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">base</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a> by default
 on platforms where both <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> and <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> are available.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a>
 contains the symbol <code class="constant">:READLINE</code>.</p><div class="variablelist"><p class="title"><b>Lisp-level Functionality</b></p><dl><dt><span class="term"><code class="varname">READLINE:*READLINE-INPUT-STREAM*</code></span></dt><dd>A <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a> (see <a href="#stream-buffer" title="21.3.13.&#xA0;Functions&#10;  EXT:MAKE-BUFFERED-INPUT-STREAM&#10;    and&#10;  EXT:MAKE-BUFFERED-OUTPUT-STREAM&#10;   ">Section 21.3.13, “Functions
  <code class="function">EXT:MAKE-BUFFERED-INPUT-STREAM</code>
    and
  <code class="function">EXT:MAKE-BUFFERED-OUTPUT-STREAM</code>
   ”</a>)
  that receives user input using <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> and the standard <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
  <a href="#prompt" title="30.9.&#xA0;The Prompt">prompt</a>.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="syscalls"></a>32.11. System Calls</h2></div></div></div><p>The <a href="#syscalls" title="32.11.&#xA0;System Calls"><strong class="package">“<span class="quote">POSIX</span>”</strong></a> module makes some system calls available from lisp.
 Not all of these system calls are actually POSIX, so this package has a
 nickname <strong class="package">“<span class="quote">OS</span>”</strong>.</p><p>This module is present even in the <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">base</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a> by default.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a>
 contains the symbol <code class="constant">:SYSCALLS</code>.</p><div class="variablelist"><dl><dt><a id="resolve-host"></a><span class="term"><code class="code">(<a href="#resolve-host"><code class="function">POSIX:RESOLVE-HOST-IPADDR</code></a>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>host</code></em>)</code></span></dt><dd><p>Returns the <span class="type">HOSTENT</span> structure:
   </p><div class="variablelist"><dl><dt><span class="term"><em class="structfield"><code>name</code></em></span></dt><dd>host name</dd><dt><span class="term"><em class="structfield"><code>aliases</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of aliases</dd><dt><span class="term"><em class="structfield"><code>addr-list</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of IP addresses as dotted quads (for IPv4) or
       coloned octets (for IPv6)</dd><dt><span class="term"><em class="structfield"><code>addrtype</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> address type (IPv4 or IPv6)
   </dd></dl></div><p>
   When <em class="replaceable"><code>host</code></em> is omitted or <code class="constant">:DEFAULT</code>, return the data for the
   current host. When <em class="replaceable"><code>host</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, all the
   host database is returned as a list (this would be the contents of the
   <code class="filename">/etc/hosts</code> file on a <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> system or
   <code class="filename">${windir}/system32/etc/hosts</code> on a <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> system).
  </p><p>This is an interface
   to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostent.html"><code class="function">gethostent</code></a>,
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyname.html"><code class="function">gethostbyname</code></a>,
   and <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyaddr.html"><code class="function">gethostbyaddr</code></a>.
 </p></dd><dt><a id="service"></a><span class="term"><code class="code">(<code class="function">OS:SERVICE</code>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>service-name</code></em>
    <em class="replaceable"><code>protocol</code></em>)</code></span></dt><dd>A convenience function for looking up a port given
   the service name, such as “<span class="quote">WWW</span>” or “<span class="quote">FTP</span>”.
   It returns the <span class="type">SERVICE</span> structure
   (name, list of aliases, port, protocol) for the given
   <em class="replaceable"><code>service-name</code></em> and <em class="replaceable"><code>protocol</code></em>,
   or all services as a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> if <em class="replaceable"><code>service-name</code></em>
   is missing or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><a id="file-stat"></a><span class="term"><code class="code">(<code class="function">POSIX:FILE-STAT</code>
    <em class="replaceable"><code>pathname</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>link-p</code></em>)</code></span></dt><dd><p>Return the <span class="type">FILE-STAT</span> structure.
   <em class="replaceable"><code>pathname</code></em> can be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a> (on a <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> system, meaning <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>).
   The first slot of the structure returned is the string or the
   number on which <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/stat.html"><code class="function">stat</code></a>,
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/fstat.html"><code class="function">fstat</code></a>,
   or <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/lstat.html"><code class="function">lstat</code></a> was called.
   The other slots are numbers, members of the <span class="type">struct stat</span>:
    </p><div class="variablelist"><dl><dt><span class="term"><em class="structfield"><code>dev</code></em></span></dt><dd>Device ID of device containing file.
     </dd><dt><span class="term"><em class="structfield"><code>ino</code></em></span></dt><dd>File serial number.
     </dd><dt><span class="term"><em class="structfield"><code>mode</code></em></span></dt><dd>Mode of file.
     </dd><dt><span class="term"><em class="structfield"><code>nlink</code></em></span></dt><dd>Number of hard links to the file.
     </dd><dt><span class="term"><em class="structfield"><code>uid</code></em></span></dt><dd>User ID of file.
     </dd><dt><span class="term"><em class="structfield"><code>gid</code></em></span></dt><dd>Group ID of file.
     </dd><dt><span class="term"><em class="structfield"><code>rdev</code></em></span></dt><dd>Device ID (if file is character or block
        special).</dd><dt><span class="term"><em class="structfield"><code>size</code></em></span></dt><dd>For regular files, the file size in bytes.
        For symbolic links, the length in bytes of the pathname contained
        in the symbolic link.
        For a shared memory object, the length in bytes.
        For a typed memory object, the length in bytes.
        For other file types, the use of this field is unspecified.
     </dd><dt><span class="term"><em class="structfield"><code>atime</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-4-2.html" target="_top">universal time</a> of last access.
     </dd><dt><span class="term"><em class="structfield"><code>mtime</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-4-2.html" target="_top">universal time</a> of last data modification.
     </dd><dt><span class="term"><em class="structfield"><code>ctime</code></em></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-4-2.html" target="_top">universal time</a> of last status change
        (on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> - creation time).</dd><dt><span class="term"><em class="structfield"><code>blksize</code></em></span></dt><dd>A file system-specific preferred I/O block size
        for this object.  In some file system types, this may vary from
        file to file.</dd><dt><span class="term"><em class="structfield"><code>blocks</code></em></span></dt><dd>Number of blocks allocated for this object.
     </dd></dl></div><p>
    All slots are read-only.</p><p>If the system does not support a particular field (e.g.,
    <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> prior to 2000 does not have hard links), <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (or the
    default, like 1 for the number of hard links for old <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>) is
    returned.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><span class="strong"><strong>Win32</strong></span> platform only.</h3><p>Normally, one would expect <code class="code">(POSIX:FILE-STAT
      "foo")</code> and <code class="code">(POSIX:FILE-STAT (<a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a> "foo"))</code> to
     return “<span class="quote">similar</span>” objects (<a href="http://www.lisp.org/HyperSpec/Body/fun_open.html" target="_top"><code class="function">OPEN</code></a>ing a file changes its
     access time though).  This is <span class="strong"><strong>not</strong></span> the case on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>,
     where <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/stat.html"><code class="function">stat</code></a>
     works but <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/fstat.html"><code class="function">fstat</code></a> does <span class="strong"><strong>not</strong></span>.
     Specifically, <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/fstat.html"><code class="function">fstat</code></a> requires
     an <span class="type">int</span> argument of an unknown nature,
     and it is not clear how do deduce it from the <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> file handle.
     Therefore, instead of always failing on open <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a> arguments,
     this function calls
     <code class="function">GetFileInformationByHandle</code> and
     fills the <span class="type">FILE-STAT</span> return value based on that.
 </p></div></dd><dt><a id="set-file-stat"></a><span class="term"><code class="code">(<code class="function">POSIX:SET-FILE-STAT</code> <em class="replaceable"><code>pathname</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :ATIME :MTIME :MODE :UID :GID)</code></span></dt><dd>Set some file attributes using
    <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/chmod.html"><code class="function">chmod</code></a>,
    <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/chown.html"><code class="function">chown</code></a>,
    and <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/utime.html"><code class="function">utime</code></a>.
 </dd><dt><a id="stat-vfs"></a><span class="term"><code class="code">(<code class="function">POSIX:STAT-VFS</code>
    <em class="replaceable"><code>pathname</code></em>)</code></span></dt><dd><p>Return a <span class="type">STAT-VFS</span> structure.
   <em class="replaceable"><code>pathname</code></em> can be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html" target="_top"><code class="classname">PATHNAME</code></a>, a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a> (on a <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> system, meaning <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>).
   The first slot of the structure returned is the string
   or the number on which <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/statvfs.html"><code class="function">statvfs</code></a> or
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/fstatvfs.html"><code class="function">fstatvfs</code></a> was called.
   The other slots are members of the <span class="type">struct statvfs</span>:
   </p><div class="variablelist"><dl><dt><span class="term"><em class="structfield"><code>bsize</code></em></span></dt><dd>File system block size.
    </dd><dt><span class="term"><em class="structfield"><code>frsize</code></em></span></dt><dd>Fundamental file system block size.
    </dd><dt><span class="term"><em class="structfield"><code>blocks</code></em></span></dt><dd>Total number of blocks on file system in units of
       <em class="structfield"><code>frsize</code></em>.</dd><dt><span class="term"><em class="structfield"><code>bfree</code></em></span></dt><dd>Total number of free blocks.
    </dd><dt><span class="term"><em class="structfield"><code>bavail</code></em></span></dt><dd>Number of free blocks available to
       non-privileged processes.</dd><dt><span class="term"><em class="structfield"><code>files</code></em></span></dt><dd>Total number of file serial numbers.
    </dd><dt><span class="term"><em class="structfield"><code>ffree</code></em></span></dt><dd>Total number of free file serial numbers.
    </dd><dt><span class="term"><em class="structfield"><code>favail</code></em></span></dt><dd>Number of file serial numbers available to
       non-privileged processes.</dd><dt><span class="term"><em class="structfield"><code>fsid</code></em></span></dt><dd>File system ID.</dd><dt><span class="term"><em class="structfield"><code>flag</code></em></span></dt><dd>List of platform-dependent values, such as <code class="constant">:READ-ONLY</code>.
    </dd><dt><span class="term"><em class="structfield"><code>namemax</code></em></span></dt><dd>Maximum filename length.
   </dd><dt><span class="term"><em class="structfield"><code>vol-name</code></em></span></dt><dd>Volume name (<a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> only).
   </dd><dt><span class="term"><em class="structfield"><code>fs-type</code></em></span></dt><dd>File system type (<a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> only).
   </dd></dl></div><p>
   All slots are read-only.
 </p></dd><dt><a id="file-info"></a><span class="term"><code class="code">(<code class="function">OS:FILE-INFO</code>
    <em class="replaceable"><code>pathname</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> all)</code></span></dt><dd><p>Return the <span class="type">FILE-INFO</span> structure.
    <em class="replaceable"><code>pathname</code></em> should be a <a href="#path-des">pathname designator</a>. The 7 slots are</p><table class="simplelist" border="0" summary="Simple list"><tr><td><em class="structfield"><code>attributes</code></em></td></tr><tr><td><em class="structfield"><code>ctime</code></em></td></tr><tr><td><em class="structfield"><code>atime</code></em></td></tr><tr><td><em class="structfield"><code>wtime</code></em></td></tr><tr><td><em class="structfield"><code>size</code></em></td></tr><tr><td><em class="structfield"><code>name</code></em></td></tr><tr><td><em class="structfield"><code>name-short</code></em></td></tr></table><p>When <em class="replaceable"><code>pathname</code></em> is wild, returns just the first match,
    unless the second (optional) argument is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, in which case a
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of objects is returned, one for each match.
 </p></dd><dt><a id="user-info"></a><span class="term"><code class="code">(<code class="function">POSIX:USER-INFO</code>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>user</code></em>)</code></span></dt><dd><p>Return the <span class="type">USER-INFO</span> structure (name,
   encoded password, UID, GID, full name, home directory, shell).
   <em class="replaceable"><code>user</code></em> should be a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a>.
   When <em class="replaceable"><code>user</code></em> is missing or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, return all users.
   When <em class="replaceable"><code>user</code></em> is <code class="constant">:DEFAULT</code>,
   return the information about the current user.</p><p><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></p></dd><dt><a id="group-info"></a><span class="term"><code class="code">(<code class="function">POSIX:GROUP-INFO</code>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>group</code></em>)</code></span></dt><dd><p>Return the <span class="type">GROUP-INFO</span> structure (name,
   GID, member list). <em class="replaceable"><code>group</code></em> should be a
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_number.html" target="_top"><code class="classname">NUMBER</code></a>. When <em class="replaceable"><code>group</code></em> is
   missing or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, return all groups.</p><p><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></p></dd><dt><span class="term"><code class="code">(<code class="function">POSIX:UNAME</code>)</code></span></dt><dd>Return a structure describing the OS, derived from
    <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/name.html"><code class="function">name</code></a>.</dd><dt><span class="term"><code class="code">(<code class="function">POSIX:SYSCONF</code>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">POSIX:CONFSTR</code>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)</code></span></dt><dd>Return the specified configuration parameter or a
    list of all available parameters (when <em class="replaceable"><code>what</code></em> is missing or
    <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>), by calling <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/sysconf.html"><code class="function">sysconf</code></a>
    and <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/confstr.html"><code class="function">confstr</code></a> respectively.
 </dd><dt><a id="rlimit"></a><span class="term"><code class="code">(<a href="#rlimit"><code class="function">POSIX:RLIMIT</code></a>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)</code></span></dt><dd>Return the current and the maximal limits as two
    values when <em class="replaceable"><code>what</code></em> is specified or the <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a> of all available
    limits (as an <span class="type">RLIMIT</span> structure) when <em class="replaceable"><code>what</code></em> is
    missing or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, by calling <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getrlimit.html"><code class="function">getrlimit</code></a>.
 </dd><dt><a id="set-rlimit"></a><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="#rlimit"><code class="function">POSIX:RLIMIT</code></a> <em class="replaceable"><code>what</code></em>)
    (<a href="http://www.lisp.org/HyperSpec/Body/acc_values.html" target="_top"><code class="function">VALUES</code></a> cur max))</code><br /></span><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="#rlimit"><code class="function">POSIX:RLIMIT</code></a> <em class="replaceable"><code>what</code></em>) rlimit)</code><br /></span><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (<a href="#rlimit"><code class="function">POSIX:RLIMIT</code></a>) rlimit-alist)</code></span></dt><dd><p>Set the limits using
    <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setrlimit.html"><code class="function">setrlimit</code></a>.</p><div class="orderedlist"><ol type="1"><li>In the first form, <em class="replaceable"><code>cur</code></em>
       and <em class="replaceable"><code>max</code></em> are numbers
       (or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> for <code class="constant">RLIM_INFINITY</code>).</li><li>In the second form, <em class="replaceable"><code>rlimit</code></em>
       is an <span class="type">RLIMIT</span> structure.</li><li>In the third form,
       <em class="replaceable"><code>rlimit-alist</code></em> is an <a href="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list" target="_top">alist</a>, as returned by
       <code class="code">(<a href="#rlimit"><code class="function">POSIX:RLIMIT</code></a>)</code>.</li></ol></div></dd><dt><a id="usage"></a><span class="term"><code class="code">(<code class="function">POSIX:USAGE</code>)</code></span></dt><dd>Return 2 structures describing the resource usage
    by the lisp process and its children, using
    <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getrusage.html"><code class="function">getrusage</code></a>.
 </dd><dt><span class="term"><code class="code">(<code class="function">POSIX:ERF</code> <em class="replaceable"><code>real</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">POSIX:ERFC</code> <em class="replaceable"><code>real</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">POSIX:J0</code> <em class="replaceable"><code>real</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">POSIX:J1</code> <em class="replaceable"><code>real</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">POSIX:JN</code> <em class="replaceable"><code>integer</code></em> <em class="replaceable"><code>real</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">POSIX:Y0</code> <em class="replaceable"><code>real</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">POSIX:Y1</code> <em class="replaceable"><code>real</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">POSIX:YN</code> <em class="replaceable"><code>integer</code></em> <em class="replaceable"><code>real</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">POSIX:GAMMA</code> <em class="replaceable"><code>real</code></em>)</code><br /></span><span class="term"><code class="code">(<code class="function">POSIX:LGAMMA</code> <em class="replaceable"><code>real</code></em>)</code></span></dt><dd><p>Compute the error functions, Bessel functions and
   Gamma.  These functions are required by the POSIX standard and should
   be available in <code class="filename">libm.so</code>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Please note that these functions do not provide
    lisp-style error handling and precision, and do all the computations
    at the <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a> level.</p></div></dd><dt><a id="stream-lock"></a><span class="term">
   <code class="code">(<code class="function">POSIX:STREAM-LOCK</code> <em class="replaceable"><code>stream</code></em>
    <em class="replaceable"><code>lock-p</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    (:BLOCK <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>) (:SHARED <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>) (:START 0) (:END <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>))</code></span></dt><dd><p>Set or remove a file lock for the (portion of the)
    file associated with <em class="replaceable"><code>stream</code></em>,
    depending on <em class="replaceable"><code>lock-p</code></em>.
    When <em class="replaceable"><code>block</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, the call is non-blocking,
    and when locking fails, it returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
    When <em class="replaceable"><code>shared</code></em> is non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
    then lock can be shared between several callers.
    Several processes can set a <em class="replaceable"><code>shared</code></em>
    (i.e., <span class="emphasis"><em>read</em></span>) lock, but only one can set
    an <em class="replaceable"><code>exclusive</code></em> (i.e., <span class="emphasis"><em>write</em></span>,
    or non-<em class="replaceable"><code>shared</code></em>) lock.
    Uses <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/fcntl.html"><code class="function">fcntl</code></a>
    or <code class="function">LockFileEx</code>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> and <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> differ on locking 0-length files: on
     <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>, two processes can have exclusive locks on it!</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> locks are <span class="emphasis"><em>mandatory</em></span>:
     if you lock a file, others will not be able to open it!
     <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> locks are usually <span class="emphasis"><em>advisory</em></span>: a process
     is free to ignore it, but on some <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> systems one can mount some
     file system with <span class="emphasis"><em>mandatory</em></span> locks.</p></div></dd><dt><a id="with-stream-lock"></a><span class="term">
   <code class="code">(<code class="function">POSIX:WITH-STREAM-LOCK</code> (<em class="replaceable"><code>stream</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>options</code></em>) <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <em class="replaceable"><code>body</code></em>)</code></span></dt><dd>Lock the <em class="replaceable"><code>stream</code></em>, execute the <em class="replaceable"><code>body</code></em>, unlock
    the <em class="replaceable"><code>stream</code></em>.  Pass <em class="replaceable"><code>options</code></em> to
    <a href="#stream-lock"><code class="function">POSIX:STREAM-LOCK</code></a>.
 </dd><dt><a id="fcntl"></a><span class="term"><code class="code">(<code class="function">POSIX:STREAM-OPTIONS</code>
    <em class="replaceable"><code>stream</code></em> <em class="replaceable"><code>command</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>value</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/fcntl.html"><code class="function">fcntl</code></a>,
    <em class="replaceable"><code>command</code></em> can be <code class="constant">:FD</code> or <code class="constant">:FL</code>.
 </dd><dt><a id="mknod"></a><span class="term"><code class="code">(<code class="function">POSIX:MKNOD</code>
    <em class="replaceable"><code>pathname</code></em> <em class="replaceable"><code>type</code></em> <em class="replaceable"><code>mode</code></em>)</code></span></dt><dd>Create a special file using
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/mknod.html"><code class="function">mknod</code></a>.
   Use <code class="constant">:FIFO</code> to create pipes
   and <code class="constant">:SOCK</code> to create sockets.
 </dd><dt><a id="convert-modes"></a><span class="term"><code class="code">(<code class="function">POSIX:CONVERT-MODE</code> <em class="replaceable"><code>mode</code></em>)</code></span></dt><dd>Convert between numeric, (e.g., <code class="literal">0644</code>)
    and symbolic (e.g., <span class="data"><code class="literal">(:RUSR :WUSR :RGRP
     :ROTH)</code></span>) file modes.</dd><dt><a id="umask"></a><span class="term"><code class="code">(<code class="function">UMASK</code>
    <em class="replaceable"><code>mode</code></em>)</code></span></dt><dd>Change process mask using
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/umask.html"><code class="function">umask</code></a>.
 </dd><dt><a id="copy-file"></a><span class="term">
   <code class="code">(<code class="function">POSIX:COPY-FILE</code> <em class="replaceable"><code>source</code></em> <em class="replaceable"><code>destination</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :METHOD :PRESERVE :IF-EXISTS :IF-DOES-NOT-EXIST)</code></span></dt><dd><p>This is an interface to
    <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/symlink.html"><code class="function">symlink</code></a>
    (when <em class="replaceable"><code>method</code></em> is <code class="constant">:SYMLINK</code>),
    <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/link.html"><code class="function">link</code></a>
    (when it is <code class="constant">:HARDLINK</code>),
    and <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/rename.html"><code class="function">rename</code></a>
    (when it is <code class="constant">:RENAME</code>) system calls, as well as,
    you guessed it, a generic file copy utility (when <em class="replaceable"><code>method</code></em> is <code class="constant">:COPY</code>).
   </p><p>Both <em class="replaceable"><code>source</code></em> and <em class="replaceable"><code>destination</code></em> may be wild.
 </p></dd><dt><a id="dup-handle"></a><span class="term">
   <code class="code">(<code class="function">POSIX:DUPLICATE-HANDLE</code>
    <em class="replaceable"><code>fd1</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>fd2</code></em>)</code></span></dt><dd>This is an interface to the
    <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html"><code class="function">dup</code></a> system calls on
    <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> systems and to <code class="function">DuplicateHandle</code>
    system call on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>.</dd><dt><span class="term"><code class="code">(OS:SHORTCUT-INFO <em class="replaceable"><code>pathname</code></em>)</code></span></dt><dd>Return information about a <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> shortcut
    (<code class="filename">#P".lnk"</code>) file contents in a
    <span class="type">SHORTCUT-INFO</span> structure.</dd><dt><span class="term"><code class="code">(OS:MAKE-SHORTCUT <em class="replaceable"><code>pathname</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    :WORKING-DIRECTORY :ARGUMENTS :SHOW-COMMAND :ICON :DESCRIPTION
    :HOT-KEY :PATH)</code></span></dt><dd>Create (or modify the properties of an existing one)
    a <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> shortcut (<code class="filename">#P".lnk"</code>) file.
 </dd><dt><span class="term"><code class="code">(OS:SYSTEM-INFO)</code></span></dt><dd>Return <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> system information in a
    <span class="type">SYSTEM-INFO</span> structure.</dd><dt><span class="term"><code class="code">(OS:VERSION)</code></span></dt><dd>Return <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> version information in a
    <span class="type">VERSION</span> structure.</dd><dt><span class="term"><code class="code">(OS:MEMORY-STATUS)</code></span></dt><dd>Return <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> memory status information in a
    <span class="type">MEMORY-STATUS</span> structure.</dd><dt><span class="term"><code class="code">(OS:FILE-PROPERTIES filename set
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :INITID <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>)</code></span></dt><dd><p>Wrapper for the <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>
    <code class="function">IPropertyStorage</code> functionality.
    </p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>filename</code></em></span></dt><dd>name of a compound file (where properties are stored)
      or (on NTFS) name of any file (properties are stored in the filesystem).
      For compound files on NTFS, file storage is preferred.
     </dd><dt><span class="term"><em class="replaceable"><code>set</code></em></span></dt><dd>property set, either <code class="constant">:BUILT-IN</code>
        or <code class="constant">:USER-DEFINED</code>
     </dd><dt><span class="term"><code class="constant">:INITID</code>
       <em class="replaceable"><code>init-id</code></em></span></dt><dd>set the <em class="replaceable"><code>init-id</code></em>
     </dd><dt><span class="term"><em class="replaceable"><code>specifier value</code></em></span></dt><dd><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>specifier</code></em></span></dt><dd><p>the property specifier: an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>,
            <a href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> or a
            <a href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a> and a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>.
            </p><div class="variablelist"><dl><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a></span></dt><dd>a property identifier
             </dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a></span></dt><dd><p>Predefined <a href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a> IDs are
                </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">:APPNAME</code></td><td><code class="constant">:CREATE-DTM</code></td><td><code class="constant">:LASTPRINTED</code></td><td><code class="constant">:SUBJECT</code></td></tr><tr><td><code class="constant">:AUTHOR</code></td><td><code class="constant">:DOC-SECURITY</code></td><td><code class="constant">:LASTSAVE-DTM</code></td><td><code class="constant">:TEMPLATE</code></td></tr><tr><td><code class="constant">:CHARCOUNT</code></td><td><code class="constant">:EDITTIME</code></td><td><code class="constant">:LOCALE</code></td><td><code class="constant">:THUMBNAIL</code></td></tr><tr><td><code class="constant">:CODEPAGE</code></td><td><code class="constant">:KEYWORDS</code></td><td><code class="constant">:PAGECOUNT</code></td><td><code class="constant">:TITLE</code></td></tr><tr><td><code class="constant">:COMMENTS</code></td><td><code class="constant">:LASTAUTHOR</code></td><td><code class="constant">:REVNUMBER</code></td><td><code class="constant">:WORDCOUNT</code></td></tr></table></dd><dt><span class="term"><a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a></span></dt><dd>string property specifier.
                If no match is found, the first ID &gt;= init-id
                (which defaults to 2) is associated with the
                string and its value is replaced with new value.
             </dd><dt><span class="term">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>|<a href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a>
               <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>)</span></dt><dd>the first element is used as
                a specifier, the string is associated with this ID.
            </dd></dl></div><p>
           </p></dd><dt><span class="term"><em class="replaceable"><code>value</code></em></span></dt><dd><p>the new value of the property, a suitable Lisp
            object, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of a <a href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a> and the value
            itself.  If <em class="replaceable"><code>value</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, no assignment is done.
            <code class="constant">:EMPTY</code> and <code class="constant">:NULL</code>
            correspond to the <span class="type">VT_EMPTY</span>
            and <span class="type">VT_NULL</span> data types.
            <a href="http://www.lisp.org/HyperSpec/Body/typ_keyword.html" target="_top"><code class="classname">KEYWORD</code></a> in the <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> specifies the desired type of
            the property being set.
            Supported types are</p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">:BOOL</code></td><td><code class="constant">:I1</code></td><td><code class="constant">:LPWSTR</code></td><td><code class="constant">:UI4</code></td></tr><tr><td><code class="constant">:BSTR</code></td><td><code class="constant">:I2</code></td><td><code class="constant">:R4</code></td><td><code class="constant">:UI8</code></td></tr><tr><td><code class="constant">:DATE</code></td><td><code class="constant">:I4</code></td><td><code class="constant">:R8</code></td><td><code class="constant">:UINT</code></td></tr><tr><td><code class="constant">:ERROR</code></td><td><code class="constant">:I8</code></td><td><code class="constant">:UI1</code></td><td> </td></tr><tr><td><code class="constant">:FILETIME</code></td><td><code class="constant">:LPSTR</code></td><td><code class="constant">:UI2</code></td><td> </td></tr></table><p>
            <span class="type">FILETIME</span>s are converted to/from the universal
            time format, while <span class="type">DATE</span>s are not.
       </p></dd></dl></div><p>
    </p></dd></dl></div><p>
    Returns the property contents before assignment as multiple values.
 </p></dd><dt><span class="term"><code class="code">(POSIX:CRYPT <em class="replaceable"><code>key</code></em>
    <em class="replaceable"><code>salt</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/crypt.html"><code class="function">crypt</code></a>,
    arguments are <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s.</dd><dt><a id="encrypt"></a><span class="term"><code class="code">(POSIX:ENCRYPT <em class="replaceable"><code>block</code></em>
    <em class="replaceable"><code>decrypt-p</code></em>)</code><br /></span><span class="term"><code class="code">(POSIX:SETKEY <em class="replaceable"><code>key</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/encrypt.html"><code class="function">encrypt</code></a>
    and <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setkey.html"><code class="function">setkey</code></a>, respectively.
    <em class="replaceable"><code>block</code></em> and <em class="replaceable"><code>key</code></em> are of type
    <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/fun_vector.html" target="_top"><code class="function">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8) 8)</code></span>.
    <em class="replaceable"><code>decrypt-p</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/typ_boolean.html" target="_top"><code class="classname">BOOLEAN</code></a>.
 </dd><dt><a id="phys-mem"></a><span class="term"><code class="code">(OS:PHYSICAL-MEMORY)</code></span></dt><dd><p>Return 2 values: total and available physical memory.
   </p><p><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></p></dd><dt><a id="file-owner"></a><span class="term"><code class="code">(OS:FILE-OWNER
    <em class="replaceable"><code>filename</code></em>)</code></span></dt><dd><p>Return the owner of the file.</p><p><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platforms only.</span></span></p></dd><dt><a id="priority"></a><span class="term"><code class="code">(OS:PRIORITY <em class="replaceable"><code>pid</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>what</code></em>)</code></span></dt><dd><p>Return the process priority, platform-dependent
    <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> or platform-independent <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>, one of
    </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="constant">:REALTIME</code></td><td><code class="constant">:NORMAL</code></td><td><code class="constant">:IDLE</code></td></tr><tr><td><code class="constant">:HIGH</code></td><td><code class="constant">:BELOW-NORMAL</code></td><td> </td></tr><tr><td><code class="constant">:ABOVE-NORMAL</code></td><td><code class="constant">:LOW</code></td><td> </td></tr></table><p>
    On <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getpriority.html"><code class="function">getpriority</code></a>, on
    <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> calls <code class="function">GetPriorityClass</code>.</p><p><a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a>able using <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setpriority.html"><code class="function">setpriority</code></a> and
    <code class="function">SetPriorityClass</code>.
 </p></dd><dt><a id="process-id"></a><span class="term"><code class="code">(OS:PROCESS-ID)</code></span></dt><dd>Return the process ID
    (on <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getpid.html"><code class="function">getpid</code></a>,
    on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> calls <code class="function">GetCurrentProcessId</code>)
 </dd><dt><a id="openlog"></a><span class="term"><code class="code">(POSIX:OPENLOG ident <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    :PID :CONS :NDELAY :ODELAY :NOWAIT :FACILITY)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/openlog.html"><code class="function">openlog</code></a>
 </dd><dt><a id="setlogmask"></a><span class="term"><code class="code">(POSIX:SETLOGMASK
    maskpri)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setlogmask.html"><code class="function">setlogmask</code></a>
 </dd><dt><a id="syslog"></a><span class="term"><code class="code">(POSIX:SYSLOG severity facility
    <em class="replaceable"><code>format-string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> <em class="replaceable"><code>arguments</code></em>)</code></span></dt><dd><p>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/syslog.html"><code class="function">syslog</code></a> on
    <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_apply.html" target="_top"><code class="function">APPLY</code></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> <em class="replaceable"><code>format-string</code></em> <em class="replaceable"><code>arguments</code></em>)</code></p><p>No <span class="data"><code class="literal">%</code></span> conversion is performed,
    you must do all formatting in Lisp.</p></dd><dt><a id="closelog"></a><span class="term"><code class="code">(POSIX:CLOSELOG)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/closelog.html"><code class="function">closelog</code></a>
 </dd><dt><a id="kill"></a><span class="term"><code class="code">(POSIX:KILL <em class="replaceable"><code>pid</code></em> <em class="replaceable"><code>signal</code></em>)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/kill.html"><code class="function">kill</code></a>
 </dd><dt><a id="getpgrp"></a><span class="term"><code class="code">(POSIX:GETPGRP <em class="replaceable"><code>pid</code></em>)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getpgrp.html"><code class="function">getpgrp</code></a>
 </dd><dt><a id="setpgrp"></a><span class="term"><code class="code">(POSIX:SETPGRP)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setpgrp.html"><code class="function">setpgrp</code></a>;
    on non-POSIX systems where it requires 2 arguments (legacy
    BSD-style), it is called as <code class="code">setpgrp(0,0)</code>
 </dd><dt><a id="getsid"></a><span class="term"><code class="code">(POSIX:GETSID <em class="replaceable"><code>pid</code></em>)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getsid.html"><code class="function">getsid</code></a>
 </dd><dt><a id="setsid"></a><span class="term"><code class="code">(POSIX:SETSID)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setsid.html"><code class="function">setsid</code></a>
 </dd><dt><a id="setpgid"></a><span class="term"><code class="code">(POSIX:SETPGID
    <em class="replaceable"><code>pid</code></em> <em class="replaceable"><code>pgid</code></em>)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setpgid.html"><code class="function">setpgid</code></a>
 </dd><dt><a id="endutxent"></a><span class="term"><code class="code">(POSIX:ENDUTXENT)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/endutxent.html"><code class="function">endutxent</code></a>
 </dd><dt><a id="getutxent"></a><span class="term"><code class="code">(POSIX:GETUTXENT
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> utmpx)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getutxent.html"><code class="function">getutxent</code></a>,
    returns a <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a> of
    type <span class="type">POSIX:UTMPX</span>, which can be passed to subsequent calls to
    this function and re-used.</dd><dt><a id="getutxid"></a><span class="term"><code class="code">(POSIX:GETUTXID id)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getutxid.html"><code class="function">getutxid</code></a>,
    the argument is filled and returned</dd><dt><a id="getutxline"></a><span class="term"><code class="code">(POSIX:GETUTXLINE line)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getutxline.html"><code class="function">getutxline</code></a>,
    the argument is filled and returned</dd><dt><a id="pututxline"></a><span class="term"><code class="code">(POSIX:PUTUTXLINE
    utmpx)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/pututxline.html"><code class="function">pututxline</code></a>,
    the argument is filled and returned</dd><dt><a id="setutxent"></a><span class="term"><code class="code">(POSIX:SETUTXENT)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setutxent.html"><code class="function">setutxent</code></a>
 </dd><dt><a id="getuid"></a><span class="term"><code class="code">(POSIX:GETUID)</code><br /></span><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (POSIX:GETUID) <em class="replaceable"><code>uid</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getuid.html"><code class="function">getuid</code></a> and
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setuid.html"><code class="function">setuid</code></a>.</dd><dt><a id="getgid"></a><span class="term"><code class="code">(POSIX:GETGID)</code><br /></span><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (POSIX:GETGID) <em class="replaceable"><code>gid</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getgid.html"><code class="function">getgid</code></a> and
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setgid.html"><code class="function">setgid</code></a>.</dd><dt><a id="geteuid"></a><span class="term"><code class="code">(POSIX:GETEUID)</code><br /></span><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (POSIX:GETEUID) <em class="replaceable"><code>uid</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/geteuid.html"><code class="function">geteuid</code></a> and
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/seteuid.html"><code class="function">seteuid</code></a>.</dd><dt><a id="getegid"></a><span class="term"><code class="code">(POSIX:GETEGID)</code><br /></span><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (POSIX:GETEGID) <em class="replaceable"><code>gid</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getegid.html"><code class="function">getegid</code></a> and
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setegid.html"><code class="function">setegid</code></a>.</dd><dt><a id="strtime"></a><span class="term"><code class="code">(OS:STRING-TIME <em class="replaceable"><code>format-string</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>object</code></em> timezone)</code></span></dt><dd>When <em class="replaceable"><code>object</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>, is is parsed
    according to <em class="replaceable"><code>format-string</code></em> by <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/strptime.html"><code class="function">strptime</code></a>.
    When it is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>, it is formatted according to <em class="replaceable"><code>format-string</code></em>
    by <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/strftime.html"><code class="function">strftime</code></a>.
    <em class="replaceable"><code>object</code></em> defaults to <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_get-unive_decoded-time.html" target="_top"><code class="function">GET-UNIVERSAL-TIME</code></a>)</code>.
 </dd><dt><a id="mkstemp"></a><span class="term"><code class="code">(POSIX:MKSTEMP <em class="replaceable"><code>filename</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:DIRECTION</code> <a href="#eltype"><code class="constant">:ELEMENT-TYPE</code></a> <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a> <a href="#buffered"><code class="constant">:BUFFERED</code></a>)</code></span></dt><dd><p>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/mkstemp.html"><code class="function">mkstemp</code></a>,
    returns a <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a>.</p><p><code class="constant">:DIRECTION</code> should allow output.</p><p>When <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/mkstemp.html"><code class="function">mkstemp</code></a> is missing,
    use <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/tempnam.html"><code class="function">tempnam</code></a>.
    On <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> use <code class="function">GetTempFileName</code>.
 </p></dd><dt><a id="mkdtemp"></a><span class="term"><code class="code">(POSIX:MKDTEMP
    <em class="replaceable"><code>filename</code></em>)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/mkdtemp.html"><code class="function">mkdtemp</code></a>
    (similar to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/mkstemp.html"><code class="function">mkstemp</code></a> but not in POSIX),
    returns the namestring of a new empty temporary directory.
 </dd><dt><a id="sync"></a><span class="term"><code class="code">(POSIX:SYNC <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
    <em class="replaceable"><code>stream</code></em>)</code></span></dt><dd>calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/fsync.html"><code class="function">fsync</code></a>
    (<code class="function">FlushFileBuffers</code> on <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>)
    on the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a> associated with <em class="replaceable"><code>stream</code></em>,
    or <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/sync.html"><code class="function">sync</code></a>
    when <em class="replaceable"><code>stream</code></em> is not supplied</dd><dt><a id="mk-xterm-io"></a><span class="term">(<a href="#mk-xterm-io"><code class="function">POSIX:MAKE-XTERM-IO-STREAM</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> title)</span></dt><dd><p>When running under the <a href="http://www.x.org/" target="_top">X Window System</a>, you can create a <a href="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional" target="_top">bidirectional</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>,
    which uses a new dedicated xterm, using the function <a href="#mk-xterm-io"><code class="function">POSIX:MAKE-XTERM-IO-STREAM</code></a>:
</p><pre class="programlisting">
  (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*ERROR-OUTPUT*</code></a>
        (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> <a href="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html" target="_top"><code class="varname">*DEBUG-IO*</code></a>
             (<a href="#mk-xterm-io"><code class="function">POSIX:MAKE-XTERM-IO-STREAM</code></a> :title "clisp errors and debug")))
</pre><p><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></p></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="oracle"></a>32.12. <a href="http://www.oracle.com" target="_top">Oracle</a> Interface</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#ora-functionality">32.12.1. Functions and Macros in
  package <strong class="package">“<span class="quote">ORACLE</span>”</strong></a></span></dt><dt><span class="section"><a href="#ora-example">32.12.2. Oracle Example</a></span></dt><dt><span class="section"><a href="#ora-config">32.12.3. Oracle Configuration</a></span></dt><dt><span class="section"><a href="#ora-build">32.12.4. Building the Oracle Interface</a></span></dt></dl></div><p>
The <a href="http://www.oracle.com" target="_top">Oracle</a> module allows a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> program to act as client to an
<a href="http://www.oracle.com" target="_top">Oracle</a> database server.  The module includes full
SQL support, transactions (including auto-commit), support for most
<a href="http://www.oracle.com" target="_top">Oracle</a> data types (<span class="type">LONG</span>, <span class="type">BLOB</span>,
<span class="type">CLOB</span>, <span class="type">RAW</span>, etc.), automatic conversion
between <a href="http://www.oracle.com" target="_top">Oracle</a> and <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> data types, database connection caching and
retry, concurrent connections to multiple databases, proper handling
of <a href="http://www.oracle.com" target="_top">Oracle</a> errors, and more.</p><p>The module can be used to build sophisticated <a href="http://www.oracle.com" target="_top">Oracle</a> database
applications in <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a> contains the
 symbol <code class="constant">:ORACLE</code>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ora-functionality"></a>32.12.1. Functions and Macros in
  package <strong class="package">“<span class="quote">ORACLE</span>”</strong></h3></div></div></div><p>Access to <a href="http://www.oracle.com" target="_top">Oracle</a> is via these functions and macros in
package <strong class="package">“<span class="quote">ORACLE</span>”</strong>.
When any <a href="http://www.oracle.com" target="_top">Oracle</a> function fails, the general Lisp function
<a href="http://www.lisp.org/HyperSpec/Body/fun_error.html" target="_top"><code class="function">ERROR</code></a> is called, with the condition string set to
include the <a href="http://www.oracle.com" target="_top">Oracle</a> error number, the <a href="http://www.oracle.com" target="_top">Oracle</a> message text,
and other context of the error (e.g., the text and parse location of a
SQL query).</p>
<!--List of functions an macros-->
<div class="variablelist">
<!--CONNECT-->
<dl><dt><a id="ora-connect"></a><span class="term"><code class="code">(ORACLE:CONNECT
<em class="replaceable"><code>user</code></em>
<em class="replaceable"><code>password</code></em>
<em class="replaceable"><code>server</code></em>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
<em class="replaceable"><code>schema</code></em>
<em class="replaceable"><code>auto-commit</code></em>
<em class="replaceable"><code>prefetch-buffer-bytes</code></em>
<em class="replaceable"><code>long-len</code></em>
<em class="replaceable"><code>truncate-ok</code></em>)</code></span></dt><dd><p>

Connect to an <a href="http://www.oracle.com" target="_top">Oracle</a> database.  All subsequent operations will affect
this database until the next call to <a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a>.  A
single program can access different <a href="http://www.oracle.com" target="_top">Oracle</a> schemas concurrently by
repeated calls to <a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a>.  Database connections
are cached and re-used: if you call <a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a> again
with the same <em class="replaceable"><code>user</code></em>,
<em class="replaceable"><code>schema</code></em>, and
<em class="replaceable"><code>server</code></em>, the previous <a href="http://www.oracle.com" target="_top">Oracle</a> connection will
be re-used.  <a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a> may not be called inside
<code class="function">WITH-TRANSACTION</code>.

Returns: <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if a cached connection was re-used, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if a new
connection was created (and cached).

The meaning of the arguments is as follows:
</p><div class="variablelist"><p class="title"><b>Arguments for <a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a></b></p><dl><dt><span class="term"><em class="replaceable"><code>user</code></em></span></dt><dd><a href="http://www.oracle.com" target="_top">Oracle</a> user ID</dd><dt><span class="term"><em class="replaceable"><code>password</code></em></span></dt><dd>Password for user, or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if
   <em class="replaceable"><code>user</code></em> has no password (!).
</dd><dt><span class="term"><em class="replaceable"><code>server</code></em></span></dt><dd><a href="http://www.oracle.com" target="_top">Oracle</a> server ID (SID).
</dd><dt><span class="term"><em class="replaceable"><code>schema</code></em></span></dt><dd><a href="http://www.oracle.com" target="_top">Oracle</a> default schema (default: <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>).
   If <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, same as user.  This allows you to log on with one user's
   id/password but see the database as if you were some other user.
</dd><dt><span class="term"><em class="replaceable"><code>auto-commit</code></em></span></dt><dd>Flag: whether to commit after every operation
   (default: <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>). Set this to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if you intend to do transactions
   and call <code class="function">COMMIT</code> explicitly.  However,
   <code class="function">WITH-TRANSACTION</code> is probably easier.
</dd><dt><span class="term"><em class="replaceable"><code>prefetch-buffer-bytes</code></em></span></dt><dd>Number of bytes to cache from SQL SELECT fetches
   (default: 64 Kbytes) If you are very short of memory, or have a slow
   connection to <a href="http://www.oracle.com" target="_top">Oracle</a>, you can reduce this to 10k or so.
   Alternatively, if you have a fast connection to <a href="http://www.oracle.com" target="_top">Oracle</a> and
   regularly do large queries, you can increase throughput by increasing
   this value.</dd><dt><span class="term"><em class="replaceable"><code>long-len</code></em></span></dt><dd>Number of bytes to fetch for "long" (LONG, [BC]LOB)
   types.  Long data that exceeds this size will raise an error, or be
   truncated depending on the value of <em class="replaceable"><code>truncate-ok</code></em>
   (below).  Setting <em class="replaceable"><code>long-len</code></em> to zero and
   <em class="replaceable"><code>truncate-ok</code></em> to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> will disable long
   fetching entirely.  If <em class="replaceable"><code>long-len</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
   or negative, defaults to 500k bytes.</dd><dt><span class="term"><em class="replaceable"><code>truncate-ok</code></em></span></dt><dd>Flag: if set, allow truncation of LONG columns to
   <em class="replaceable"><code>long-len</code></em> bytes on fetch; otherwise, fetches
   of LONG columns exceeding <em class="replaceable"><code>long-len</code></em> bytes
   will raise an error.  Default: <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd></dl></div></dd>
<!--DISCONNECT-->
<dt><span class="term"><code class="code">(ORACLE:DISCONNECT)</code></span></dt><dd>
Disconnect from the database currently connected.  No more calls can
be made until <a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a> is called again.  The
connection is closed and removed from the connection cache.  Does
nothing if there is no connection.  <code class="function">DISCONNECT</code>
may not be called inside <code class="function">WITH-TRANSACTION</code>.
Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
</dd>
<!--RUN-SQL-->
<dt><span class="term"><code class="code">(ORACLE:RUN-SQL
<em class="replaceable"><code>sql</code></em>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
<em class="replaceable"><code>params</code></em>
<em class="replaceable"><code>is-select</code></em>)</code></span></dt><dd><p>Execute a SQL statement.  Must be <a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a>ed
to a database.  Returns the number of rows affected by the SQL operation,
for non-SELECT statements, zero for SELECT statements.  For
destructive database operations (INSERT, UPDATE, DELETE), the results
are committed to the database immediately if
<em class="replaceable"><code>auto-commit</code></em> when establishing the current
connection; see <a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a>.  The meaning of the
arguments is as follows: </p><div class="variablelist"><p class="title"><b>Arguments for <code class="function">RUN-SQL</code></b></p><dl><dt><span class="term"><em class="replaceable"><code>sql</code></em></span></dt><dd>Text of SQL statement, as a string.
   The <em class="replaceable"><code>sql</code></em> statement may contain
   <a href="http://www.oracle.com" target="_top">Oracle</a> "named parameters," e.g. ":myparam" whose values will
   be substituted from the parameters given
   in <em class="replaceable"><code>params</code></em>.
</dd><dt><span class="term"><em class="replaceable"><code>params</code></em></span></dt><dd>A mapping of the names of the bind-parameters in the
   query to their values.  The set of named parameters in the query must
   match exactly the keys mapped by <em class="replaceable"><code>params</code></em>.
   The mapping may be passed as either (1) a hash table whose keys are
   the named parameters or (2) a list of pairs, ((name value) (name
   value) ...).  Parameter values passed from Lisp are converted to the
   appropriate <a href="http://www.oracle.com" target="_top">Oracle</a> data types (see <code class="function">FETCH</code>).
</dd><dt><span class="term"><em class="replaceable"><code>is-select</code></em></span></dt><dd>Flag: whether the statement is a SELECT query.  You
   usually do not need to set this as it is detected by default based on
   the SQL text.  However, there are situations, such as when a SELECT
   query begins with comment, that you need to specify it explicitly.
</dd></dl></div></dd>
<!--DO-ROWS-->
<dt><span class="term"><code class="code">(ORACLE:DO-ROWS
<em class="replaceable"><code>vars</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a> <em class="replaceable"><code>body</code></em>)</code></span></dt><dd><p> Macro which loops over a SQL SELECT result,
   evaluating, for each row in the result, the forms in <em class="replaceable"><code>body</code></em>,
   binding symbols given in <em class="replaceable"><code>vars</code></em> to
   corresponding database columns in the SELECT result.  The
   argument <em class="replaceable"><code>vars</code></em> must be a non-empty list of
   symbols matching a subset of the columns of an active SELECT query.
   If a SELECT column is an <a href="http://www.oracle.com" target="_top">Oracle</a> expression such as
   <code class="literal">SUBSTR(mycol, 1, 10)</code>, it is recommended to use a
   column alias, e.g., <code class="literal">SELECT SUBSTR(mycol, 1, 10) AS
    myvar</code>, in which case the column alias will be used as the
   symbol bound to the column value.</p><p>As <code class="function">DO-ROWS</code> expands into a <a href="http://www.lisp.org/HyperSpec/Body/mac_docm_dost.html" target="_top"><code class="function">DO*</code></a>
   loop, it may be terminated prematurely, before all rows are fetched,
   by using <a href="http://www.lisp.org/HyperSpec/Body/mac_return.html" target="_top"><code class="function">RETURN</code></a> anywhere in <em class="replaceable"><code>body</code></em>.</p><p>It is allowed to call <a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a> in the
   <em class="replaceable"><code>body</code></em> of the loop, but only to switch the connection to a database
   other than the one that was used to do the SELECT.  This is useful
   for reading from one database while writing to another.
  </p><p>In <em class="replaceable"><code>vars</code></em>, instead of a single
   symbol, a pair (<em class="replaceable"><code>bound-var</code></em>
   <em class="replaceable"><code>"column-name"</code></em>) may be specified, which
   will cause values from the SELECTed column or alias ,
   <em class="replaceable"><code>column-name</code></em>, to be bound to Lisp variable,
   <em class="replaceable"><code>bound-var</code></em>.  This is for unusual cases
   where a Lisp variable cannot be created with the same name as the
   column (e.g., a column named "T"), or when it is inconvenient or
   impossible to alias the column with <code class="literal">SELECT ... AS</code>.
</p></dd>
<!--FETCH-->
<dt><span class="term"><code class="code">(ORACLE:FETCH
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>result-type</code></em>)</code></span></dt><dd><p>Fetch a single row of data.  Returns a row of values
   corresponding to the columns of an active SELECT statment.  The row
   data is returned in one of three different forms, depending on the
   value of the symbol <em class="replaceable"><code>result-type</code></em>:
</p><div class="variablelist"><p class="title"><b>Return values for <code class="function">FETCH</code></b></p><dl><dt><span class="term"><code class="classname">ARRAY</code></span></dt><dd>Values will be returned in an <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a> with the
    same number of columns as in the SELECT statement, in the same
    order.  This is the default.</dd><dt><span class="term"><code class="classname">PAIRS</code></span></dt><dd>A list of pairs, <code class="literal">((column, value)
     ...)</code> is be returned.  The number and order of pairs is
    the same as the columns in the SELECT statement.
 </dd><dt><span class="term"><code class="classname">HASH</code></span></dt><dd>A <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a> whose keys are the column names
    and whose values are the column values in the row.  The SELECT
    columns <span class="emphasis"><em>must be unique</em></span> and be valid Lisp
    symbols to use this option. If you are SELECTing an expression, you
    probably want to use a column alias: <code class="literal">SELECT &lt;expr&gt; AS
    some_alias ...</code></dd></dl></div><p>The following data type conversions are done between <a href="http://www.oracle.com" target="_top">Oracle</a>
 datatypes and <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> data types:
 </p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th><a href="http://www.oracle.com" target="_top">Oracle</a> type</th><th>Converts to/from <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> type</th></tr></thead><tbody><tr><td>Numeric (NUMBER, INTEGER, FLOAT)</td><td>The appropriate <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> numeric type (<a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/typ_bignum.html" target="_top"><code class="classname">BIGNUM</code></a>,
      <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><code class="classname">FLOAT</code></a>)</td></tr><tr><td>String (CHAR, VARCHAR, VARCHAR2)</td><td>A <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>.  Note that CHAR will be padded out to its
      full, fixed length as defined in <a href="http://www.oracle.com" target="_top">Oracle</a>; VARCHAR will be a
      string of variable length.  Also note that <a href="http://www.oracle.com" target="_top">Oracle</a> has no
      "zero-length string" value - it returns the SQL special value
      <code class="constant">NULL</code> which is converted to <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (see below).</td></tr><tr><td>DATE</td><td>A string of the form "YYYY-MM-DD HH:MM:SS" where HH is
      24-hour form.  If you want dates formatted differently, convert
      them to strings in <a href="http://www.oracle.com" target="_top">Oracle</a> using <code class="literal">SELECT
       TO_CHAR(mydate, '<em class="replaceable"><code>template</code></em>') AS
       mydate</code>; the result will then be returned as a string,
      formatted as per <em class="replaceable"><code>template</code></em>.</td></tr><tr><td>RAW, LONG RAW</td><td>A hexadecimal string, with two hex digits for each byte of
      <a href="http://www.oracle.com" target="_top">Oracle</a> data.  Note that this means the Lisp string will be
      twice the size, in bytes, as the <a href="http://www.oracle.com" target="_top">Oracle</a> data.</td></tr><tr><td>"Large" types (LONG, BLOB, CLOB)</td><td>A Lisp string of (arbitrary, possibly binary) data.  Note
      that truncation may occur; see the <a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a>
      parameters <em class="replaceable"><code>long-len</code></em>
      and <em class="replaceable"><code>truncate-ok</code></em>.</td></tr><tr><td><code class="constant">NULL</code></td><td>The <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> value <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a></td></tr></tbody></table></div><p>
</p></dd>
<!--FETCH-ALL-->
<dt><span class="term"><code class="code">(ORACLE:FETCH-ALL
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
<em class="replaceable"><code>max-rows</code></em>
<em class="replaceable"><code>result-type</code></em>
<em class="replaceable"><code>item-type</code></em>)</code></span></dt><dd><p>Fetch some or all the rows from a query and return
result as a sequence of sequences.  Arguments are all optional:
<em class="replaceable"><code>max-rows</code></em> limits the result to
that numbers of rows;
<em class="replaceable"><code>result-type</code></em> is the type of
sequence of the rows, either
'<code class="classname">ARRAY</code> (the default) or
'<code class="classname">LIST</code>;
<em class="replaceable"><code>item-type</code></em> is the type of
sequence of the column values for each row, either
'<code class="classname">ARRAY</code> (the default) or
'<code class="classname">LIST</code>.
Each row fetched always contains the full set of column values SELECTed.
</p><p>
<code class="function">FETCH-ALL</code> is often useful in conjunction with
<code class="function">MAP</code> or <code class="function">REDUCE</code> to iterate
over an entire SELECT result to construct a single Lisp value.

</p></dd>
<!--PEEK-->
<dt><span class="term"><code class="code">(ORACLE:PEEK
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
<em class="replaceable"><code>result-type</code></em>)</code></span></dt><dd>

Peek at next row of data (without fetching it).  Returns a row a la
<code class="function">FETCH</code>, except does not advance to the next row.
Repeated calls to <code class="function">PEEK</code> will thus return the same
row of data.  Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if at EOF.  If data is available, returns
row data just as <code class="function">FETCH</code> (see
<code class="function">FETCH</code> for data format and conversions done).
Optional argument <em class="replaceable"><code>result-type</code></em> is the type
of sequence of the column values for the returned row, either
<a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a> (the default) or <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>.
<code class="function">PEEK</code> is a useful look-ahead
for database reporting functions that may need to "break" on changes in
data to print headers, summaries, etc.
</dd>
<!--COLUMNS-->
<dt><span class="term"><code class="code">(ORACLE:COLUMNS)</code></span></dt><dd><p>Returns information on the columns of a SELECT
  result, in the form of an array of SQLCOL structures, one for each
  result column in the most recent SELECT statement.  It is not
  necessary to have called <code class="function">FETCH</code> before requesting
  column information on the query, however the query must have been
  compiled and executed with <code class="function">RUN-SQL</code>.  Each SQLCOL
  structure has these slots:
</p><div class="variablelist"><p class="title"><b>Slots of <code class="classname">SQLCOL</code></b></p><dl><dt><span class="term">NAME</span></dt><dd>The <a href="http://www.oracle.com" target="_top">Oracle</a> column name or the expression
    selected.  If the query used a column alias, <code class="literal">SELECT
     <em class="replaceable"><code>expr</code></em> AS
     <em class="replaceable"><code>alias</code></em></code>, then
    <em class="replaceable"><code>alias</code></em> will be returned as the column name.
 </dd><dt><span class="term">TYPE</span></dt><dd><a href="http://www.oracle.com" target="_top">Oracle</a> data type (VARCHAR, NUMBER, DATE, ...)
 </dd><dt><span class="term">SIZE</span></dt><dd><a href="http://www.oracle.com" target="_top">Oracle</a> data length (useful mostly for
    character types)</dd><dt><span class="term">SCALE</span></dt><dd>For numeric (NUMBER) types, number of digits to right of
    decimal; NIL for FLOAT</dd><dt><span class="term">PRECISION</span></dt><dd>For numeric types, total number of significant
    digits (decimal digits for NUMBER, bits for FLOAT)</dd><dt><span class="term">NULL_OK</span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if <code class="constant">NULL</code>s allowed, <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if <code class="constant">NULL</code>s are
    not allowed.</dd></dl></div><p>To access the values of the SQLCOL structures, use the standard
 accessor functions, e.g., <code class="literal">(ORACLE:SQLCOL-NAME (elt
  (ORACLE:COLUMNS) 0))</code></p></dd>
<!--EOF-->
<dt><span class="term"><code class="code">(ORACLE:EOF)</code></span></dt><dd>
Returns EOF status.  A SELECT query cursor is considered at EOF if the next
FETCH would return no data.  Must be connected to a database, and have
an active SELECT statement.
</dd>
<!--INSERT-ROW-->
<dt><span class="term"><code class="code">(ORACLE:INSERT-ROW
<em class="replaceable"><code>table</code></em>
<em class="replaceable"><code>values</code></em>)</code></span></dt><dd>
Inserts a single row into <em class="replaceable"><code>table</code></em>.
Second argument <em class="replaceable"><code>values</code></em> is a map of
column names to values: either a hash table whose keys are the column
names, or a list of (name, value) pairs.  Columns missing from the map
will be given the default <a href="http://www.oracle.com" target="_top">Oracle</a> value, or <code class="constant">NULL</code>.
Returns the number of rows inserted (i.e., always 1).
</dd>
<!--UPDATE-ROW-->
<dt><span class="term"><code class="code">(ORACLE:UPDATE-ROW
<em class="replaceable"><code>table</code></em>
<em class="replaceable"><code>condition</code></em>
<em class="replaceable"><code>vals</code></em>
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
<em class="replaceable"><code>params</code></em>)</code></span></dt><dd>
Updates rows in <em class="replaceable"><code>table</code></em>.  Second argument
<em class="replaceable"><code>condition</code></em> is a string expression for a WHERE
clause (without the "WHERE") which determines which rows are updated.
Third argument <em class="replaceable"><code>vals</code></em> is a map of columns to
be updated to their new values: a hash table whose keys are column
names, or list of (name, value) pairs.  Optional
<em class="replaceable"><code>params</code></em> specifies values for named
parameters that may occur in <em class="replaceable"><code>condition</code></em>,
e.g., when the condition is a match on a primary key, e.g.: <code class="literal">"pk_column
= :pk_val"</code>.  Returns the number of rows updated.
</dd>
<!--ROW-COUNT-->
<dt><span class="term"><code class="code">(ORACLE:ROW-COUNT)</code></span></dt><dd>
For SELECT statements, returns the number of rows
<code class="function">FETCH</code>ed (<span class="strong"><strong>not</strong></span>
<code class="function">PEEK</code>ed) so far.  For other statements (e.g.,
INSERT, UPDATE, DELETE), returns the number of rows affected by the
last operation (e.g., inserted, updated, deleted).  Must be connected
to a database and have an active SQL statement.
</dd>
<!--WITH-TRANSACTION-->
<dt><span class="term"><code class="code">(ORACLE:WITH-TRANSACTION
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html" target="_top"><code class="literal">&amp;BODY</code></a>
<em class="replaceable"><code>body</code></em>)</code></span></dt><dd>

Evaluates the forms in <em class="replaceable"><code>body</code></em> atomically as a
database transaction, ensuring that either all the database operations
done in <em class="replaceable"><code>body</code></em> complete successfully, or none
of them do.  If pending (un-committed) changes exist when this macro
is entered, they are <span class="emphasis"><em>rolled back</em></span> (undone), so
that the database is affected only by the subsequent updates inside
<em class="replaceable"><code>body</code></em>.  Nesting of
<code class="function">WITH-TRANSACTION</code> blocks is not allowed and will
raise an error.  There is no effect on the status of
<em class="replaceable"><code>auto-commit</code></em> given in
<a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a>; it resumes its previous state when the
macro exits.  The value of the <code class="function">WITH-TRANSACTION</code>
expression is that of the last form in <em class="replaceable"><code>body</code></em>.
</dd>
<!--COMMIT-->
<dt><span class="term"><code class="code">(ORACLE:COMMIT)</code></span></dt><dd>
Commits (makes permanent) any pending changes to the database.  The
<em class="replaceable"><code>auto-commit</code></em> parameter to
<a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a> must not have been set to use this
function, nor can it be called inside a
<code class="function">WITH-TRANSACTION</code> block. Always returns NIL.
</dd>
<!--ROLLBACK-->
<dt><span class="term"><code class="code">(ORACLE:ROLLBACK)</code></span></dt><dd>
Rolls back (undoes and abandons) any pending changes to the database.
The <em class="replaceable"><code>auto-commit</code></em> parameter to
<a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a> must not have been set to use this
function, nor can it be called inside a
<code class="function">WITH-TRANSACTION</code> block. Always returns NIL.
</dd>
<!--AUTO-COMMIT-->
<dt><span class="term"><code class="code">(ORACLE:AUTO-COMMIT)</code></span></dt><dd>
Toggles the state of <em class="replaceable"><code>auto-commit</code></em> initially
given to <a href="#ora-connect"><code class="function">ORACLE:CONNECT</code></a> for the current connection.
With <em class="replaceable"><code>auto-commit</code></em> enabled, modifications to
the database are committed (made permanent) after each destructive SQL
operation made with calls to <code class="function">RUN-SQL</code>,
<code class="function">INSERT-ROW</code>, <code class="function">UPDATE_ROW</code>, etc.
With <em class="replaceable"><code>auto-commit</code></em> disabled, transactional
integrity is under the programmer's control and is managed either by
(1) explicitly calling <code class="function">COMMIT</code> or
<code class="function">ROLLBACK</code> to commit or undo the pending
operations, or (2) wrapping code blocks with database operations
inside the <code class="function">WITH-TRANSACTION</code> macro.
<code class="function">AUTO-COMMIT</code> returns the previous status of
<em class="replaceable"><code>auto-commit</code></em>.
<code class="function">AUTO-COMMIT</code> may not be called inside
<code class="function">WITH-TRANSACTION</code>.
</dd>
<!--=-=-==-=-==-=-==-=-==-=-==-=-= End of functions section-->
</dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ora-example"></a>32.12.2. <a href="http://www.oracle.com" target="_top">Oracle</a> Example</h3></div></div></div><p>
Below is a simple example script which uses <a href="http://www.oracle.com" target="_top">Oracle</a>'s demo database
schema, <code class="literal">SCOTT</code>.

</p><pre class="programlisting">
(setf server "orcl") <em class="lineannotation"><span class="lineannotation">; Change this to your server's SID</span></em>
(oracle:connect "scott" "tiger" server)

(oracle:run-sql "SELECT deptno, dname, loc FROM dept ORDER BY DNAME")
(oracle:do-rows (deptno dname loc)
  (format t "Dept. no is '~A', " deptno)
  (format t "Dept. name is '~A', " dname)
  (format t "Dept. loc is '~A'~%" loc))

(oracle:update-row "dept" "dname = :acctval" '(("dname" "NEWACCT")) '(("acctval" "ACCOUNTING")))

(oracle:run-sql "SELECT deptno, dname, loc FROM dept ORDER BY DNAME")
(oracle:do-rows (deptno dname loc)
  (format t "Dept. no is '~A', " deptno)
  (format t "Dept. name is '~A', " dname)
  (format t "Dept. loc is '~A'~%" loc))

(oracle:update-row "dept" "dname = :acctval" '(("dname" "ACCOUNTING")) '(("acctval" "NEWACCT")))
</pre><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ora-config"></a>32.12.3. <a href="http://www.oracle.com" target="_top">Oracle</a> Configuration</h3></div></div></div><p>Obviously, a working <a href="http://www.oracle.com" target="_top">Oracle</a> environment is required.  It is
recommended that you first be able to log on and use the <a href="http://www.oracle.com" target="_top">Oracle</a>
SQL*Plus application to test your environment
<span class="emphasis"><em>before</em></span> attempting <a href="http://www.oracle.com" target="_top">Oracle</a> access via the
<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> module.
At a minimum you will need to set environment variables
<code class="envar">ORACLE_HOME</code> to the <a href="http://www.oracle.com" target="_top">Oracle</a> base directory and
<code class="envar">LD_LIBRARY_PATH</code> to include
<code class="literal">$<code class="envar">ORACLE_HOME</code>/lib</code> and possibly other
directories.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ora-build"></a>32.12.4. Building the <a href="http://www.oracle.com" target="_top">Oracle</a> Interface</h3></div></div></div><p>The module uses the <a href="http://www.oracle.com" target="_top">Oracle</a> Call Interface (<a href="http://www.vivtek.com/oracle.html" target="_top">OCI</a>)
<a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> library.  To build the module you will need the <a href="http://www.oracle.com" target="_top">Oracle</a>
<a href="http://www.vivtek.com/oracle.html" target="_top">OCI</a> headers and link libraries; as a quick check, make sure
you have the file <code class="filename">oci.h</code> somewhere
under <code class="envar">ORACLE_HOME</code>, probably
in <code class="filename">$<code class="envar">ORACLE_HOME</code>/rdbms/demo/oci.h</code>.</p><p>To build the module into <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, configure with
<span><strong class="command">./configure ... --with-module=oracle ...</strong></span>.
The <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">full</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a> will contain the module,
so you will need to use the <code class="option"><a href="clisp.html#opt-link-set" class="olink">-K</a></code> option to use it.
You can test that you really have the <a href="http://www.oracle.com" target="_top">Oracle</a>-enabled <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> by
evaluating <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_describe.html" target="_top"><code class="function">DESCRIBE</code></a> 'oracle:connect)</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>It may be necessary to edit file
<a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/oracle/Makefile"><code class="filename">modules/oracle/Makefile</code></a>
prior to running <span><strong class="command">./configure</strong></span>.</p></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="fastcgi"></a>32.13. The <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Interface</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#fcgi-overview">32.13.1. Overview of FastCGI</a></span></dt><dt><span class="section"><a href="#fcgi-functionality">32.13.2. Functions in Package <strong class="package">“<span class="quote">FASTCGI</span>”</strong></a></span></dt><dt><span class="section"><a href="#fcgi-example">32.13.3. FastCGI Example</a></span></dt><dt><span class="section"><a href="#fcgi-build">32.13.4. Building and configuring the
  FastCGI Interface</a></span></dt></dl></div><p>
The <a href="http://www.fastcgi.com" target="_top">FastCGI</a> module speeds up <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> CGI
scripts launched by a Web server.  Working with a
<a href="http://www.fastcgi.com" target="_top">FastCGI</a>-enabled Web server such as <a href="http://www.apache.org/" target="_top">Apache</a> with
<a href="http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html" target="_top">mod_fastcgi</a>, a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> program using the <a href="http://www.fastcgi.com" target="_top">FastCGI</a>
protocol will run many times faster than a conventional CGI program.
The performance improvements stem from the fact that the script's
process remains running across <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> requests, eliminating startup
overhead and allowing for caching of data structures and other resources.  This
is the same approach used is in other languages (e.g., <a href="http://perl.apache.org" target="_top">mod_perl</a> for Perl).  </p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a> contains the
 symbol <code class="constant">:FASTCGI</code>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcgi-overview"></a>32.13.1. Overview of <a href="http://www.fastcgi.com" target="_top">FastCGI</a></h3></div></div></div><p>
Traditional CGI programs work by doing input/output with the Web
server via the following channels:
</p><div class="orderedlist"><ol type="1"><li>
Examining environment variables; e.g., <code class="envar">HTTP_USER_AGENT</code> is the
variable set by the Web server to name the browser used
</li><li>
Reading from standard input.  E.g., to get input data in a "method=POST" request
</li><li>
Writing an <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> response document (usually "Content-type:
text/html") to the standard output, for eventual transmission
back to the browser client
</li><li>
Writing error messages to the standard error, usually captured
by the Web server and logged in its log files.
</li></ol></div><p>
</p><p>
<a href="http://www.fastcgi.com" target="_top">FastCGI</a> involves replacing calls the standard routines to do
the above with calls in the <strong class="package">“<span class="quote">FASTCGI</span>”</strong> package.  These calls will then
work exactly as before when the program is invoked as a CGI, but will
also work when invoked by a <a href="http://www.fastcgi.com" target="_top">FastCGI</a>-enabled Web server.
</p><p>
<a href="http://www.fastcgi.com" target="_top">FastCGI</a> programs persist across <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> requests, and thus incur
startup overhead costs only once.  For Lisp Web programs, this overhead
can be substantial: code must be
compiled and loaded, files and databases must be opened, etc.  Further,
because the program stays running from <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> request to <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> request,
it can cache information in memory such as database connections
or large in-memory data structures.

</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcgi-functionality"></a>32.13.2. Functions in Package <strong class="package">“<span class="quote">FASTCGI</span>”</strong></h3></div></div></div><p>Access to
<a href="http://www.fastcgi.com" target="_top">FastCGI</a> is via these functions in package <strong class="package">“<span class="quote">FASTCGI</span>”</strong>.

</p><div class="variablelist">
<!--IS-CGI-->
<dl><dt><span class="term"><code class="code">(FASTCGI:IS-CGI)</code></span></dt><dd>
Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> program has been launched as a traditional
CGI rather than in <a href="http://www.fastcgi.com" target="_top">FastCGI</a>.  In traditional CGI, program I/O is
via operating system environment variables and standard file streams.
Under <a href="http://www.fastcgi.com" target="_top">FastCGI</a>, I/O is done directly with the Web server via
the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> protocol.
</dd>
<!--ACCEPT-->
<dt><span class="term">
<code class="code">(FASTCGI:ACCEPT)</code> <em class="replaceable"><code>cgi-forms</code></em>
<code class="code">(FASTCGI:FINISH)</code>
</span></dt><dd><p>
In <a href="http://www.fastcgi.com" target="_top">FastCGI</a> mode, the program loops,
<code class="function">ACCEPT</code>ing to begin the execution of an <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a>
request, and <code class="function">FINISH</code>ing to signal that the script
is finished writing its response to the <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> request.  <code class="function">ACCEPT</code>
blocks until the next <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> request comes in, returning <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> if there is
a new request to handle, and <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if no more <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> requests will
occur, usually because the Web server itself has terminated, in which
case the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> server loop should also exit.
</p><p>
A typical <a href="http://www.fastcgi.com" target="_top">FastCGI</a> top-level server loop looks like:
</p><pre class="programlisting">
(do ()
    ((not (fastcgi:accept)))
  (run-my-script)
  (fastcgi:finish))
</pre><p>

</p></dd>
<!--GETENV-->
<dt><span class="term"><code class="code">(FASTCGI:GETENV
<em class="replaceable"><code>varname</code></em>)</code></span></dt><dd>
Use in place of <a href="#getenv" title="31.8.&#xA0;Operating System Environment"><code class="function">EXT:GETENV</code></a> to get the value of the environment variable
named <em class="replaceable"><code>varname</code></em>, which should be a string.
Unlike <a href="#getenv" title="31.8.&#xA0;Operating System Environment"><code class="function">EXT:GETENV</code></a>, which accesses the actual host operating system environment,
<code class="function">FASTCGI:GETENV</code> obtains its environment via
the Web server, over its FastCGI communications channel.
For more information, see the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Web site.
Returns <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> if <em class="replaceable"><code>varname</code></em> is not defined in
the operating system environment.  See <a href="http://www.cgi101.com/class/ch3/text.html" target="_top">here</a> for a
list of useful variables.  You must first have called
<code class="function">ACCEPT</code> and not yet have called
<code class="function">FINISH</code>.  </dd>
<!--WRITE-STDOUT-->
<dt><span class="term"><code class="code">(FASTCGI:WRITE-STDOUT
<em class="replaceable"><code>string</code></em>)</code></span></dt><dd>
Use in place of standard Lisp calls which print to standard output
(i.e., as part of the <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> response).
You must first have called <code class="function">ACCEPT</code> and not yet have
called <code class="function">FINISH</code>.
</dd>
<!--WRITE-STDERR-->
<dt><span class="term"><code class="code">(FASTCGI:WRITE-STDERR
<em class="replaceable"><code>string</code></em>)</code></span></dt><dd>
Use in place of standard Lisp calls which print to
standard error. Rather than being part of
the <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> response, data written to standard error are usually
collected by the Web server in its error log.  This is useful
for diagnostic purposes.
</dd>
<!--SLURP-STDIN-->
<dt><span class="term"><code class="code">(FASTCGI:SLURP-STDIN)</code></span></dt><dd>
Reads in the entirety of standard input and returns it as a string.
This is usually done for <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> requests with
<code class="literal">METHOD="post"</code>, when the data are passed to the CGI
script via standard input rather than via the environment variable
<code class="envar">QUERY_STRING</code>.  There is no way to read standard input
in pieces, which could be a problem, say, for <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> uploads of very large files.
</dd>
<!--OUT-->
<dt><span class="term"><code class="code">(FASTCGI:OUT
<em class="replaceable"><code>tree</code></em>)</code></span></dt><dd>
Like <code class="function">WRITE-STDOUT</code>, except that
<em class="replaceable"><code>tree</code></em>
may be an arbitrarily nested list structure containing (at the leaves)
numbers and strings.  For example,
<code class="literal">(FASTCGI:OUT '("foo" (" " 10 " " 20)))</code>
will write the string <code class="literal">"foo 10 20"</code>.  This function
is useful when building strings in memory for display.
</dd></dl></div><p>

</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcgi-example"></a>32.13.3. <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Example</h3></div></div></div><p>

Below is a simple example CGI script using <a href="http://www.fastcgi.com" target="_top">FastCGI</a>.

</p><pre class="programlisting">
#!/usr/local/bin/clisp -q -K full

(defun newline () (format nil "~%"))
(do ((count 1 (1+ count)))
	((not (fastcgi:accept)) nil)

    (fastcgi:out "Content-type: text/plain" (newline) (newline))
    (fastcgi:out
     "I am running in mode: " (if (fastcgi:is-cgi) "CGI" "FastCGI") (newline)
     "This is execution no.: " count (newline)
     "The browser string is '" (fastcgi:getenv "HTTP_USER_AGENT") "'" (newline))

    (fastcgi:finish))
</pre><p>

</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="fcgi-build"></a>32.13.4. Building and configuring the
  <a href="http://www.fastcgi.com" target="_top">FastCGI</a> Interface</h3></div></div></div><p>
It is necessary to download the <a href="http://www.fastcgi.com" target="_top">FastCGI</a> developers' kit, build it,
and install it, before building <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> with <a href="http://www.fastcgi.com" target="_top">FastCGI</a> support.
You also need to upgrade your Web server to speak the <a href="http://www.fastcgi.com" target="_top">FastCGI</a>
protocol.  For <a href="http://www.apache.org/" target="_top">Apache</a> this means building in <a href="http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html" target="_top">mod_fastcgi</a>, either statically
or dynamically, and then adding a line to your <a href="http://www.apache.org/" target="_top">Apache</a> config like:
</p><pre class="programlisting">
     Addhandler fastcgi-script .fcgi
</pre><p>
After that, you can convert <code class="filename">foo.cgi</code> by linking it
to a script names <code class="filename">foo.fcgi</code>.  Since a <a href="http://www.fastcgi.com" target="_top">FastCGI</a>
script is also a valid CGI script, it can be run unmodified in either
mode.
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="rawsock"></a>32.14. Raw Socket Access</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#rawsock-intro">32.14.1. Introduction</a></span></dt><dt><span class="section"><a href="#rawsock-func">32.14.2. Single System Call Functions</a></span></dt><dt><span class="section"><a href="#rawsock-args">32.14.3. Common arguments</a></span></dt><dd><dl><dt><span class="section"><a href="#rawsock-plat-dep-constants">32.14.3.1. Platform-dependent Keywords</a></span></dt></dl></dd><dt><span class="section"><a href="#rawsock-return">32.14.4. Return Values</a></span></dt><dt><span class="section"><a href="#rawsock-not-implemented">32.14.5. Not Implemented</a></span></dt><dt><span class="section"><a href="#rawsock-high-level">32.14.6. High-Level Functions</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="rawsock-intro"></a>32.14.1. Introduction</h3></div></div></div><p>This is the raw socket interface, as described in
 <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/sys/socket.h.html">&lt;<code class="filename">sys/socket.h</code>&gt;</a>.
Sockets are represented by their <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a> <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>s.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a> contains the
 symbol <code class="constant">:RAWSOCK</code>.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="rawsock-use-sockets"></a>Try <code class="classname">SOCKET:SOCKET-STREAM</code> first!</h3><p>For most uses of sockets, the facilities described in
  <a href="#socket" title="31.5.&#xA0;Socket Streams">Section 31.5, “Socket Streams”</a> are adequate and much more convenient than these.
  You are encouraged to consider <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>s and ensure that they
  are not adequate for your purposes before you use raw sockets.
</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="rawsock-not-streams"></a>Do <span class="strong"><strong>not</strong></span> use <code class="function">EXT:MAKE-STREAM</code>!</h3><p>You can turn such a raw socket into a usual lisp <a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>
  using <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a>, but you should be <span class="emphasis"><em>extremely</em></span>
  careful with such dubious actions!  See the <code class="email">&lt;<a href="mailto:clisp-devel@lists.sourceforge.net">clisp-devel@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-devel" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-devel</a>)
  <a href="http://sourceforge.net/mailarchive/message.php?msg_id=7203955" target="_top">mailing list archives</a> for more details.
  Note that <a href="#make-stream" title="21.3.2.&#xA0;Function EXT:MAKE-STREAM"><code class="function">EXT:MAKE-STREAM</code></a> will duplicate the <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165">file descriptor</a>
  (using <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html"><code class="function">dup</code></a>),
  so you <span class="emphasis"><em>still</em></span> have to <a href="http://www.lisp.org/HyperSpec/Body/fun_close.html" target="_top"><code class="function">CLOSE</code></a> the original raw socket.
</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="rawsock-func"></a>32.14.2. Single System Call Functions</h3></div></div></div><p>We implement access to
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/accept.html"><code class="function">accept</code></a>
    <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>address</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/bind.html"><code class="function">bind</code></a>
    <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>address</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/connect.html"><code class="function">connect</code></a>
    <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>address</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getaddrinfo.html"><code class="function">getaddrinfo</code></a> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>
    node service protocol socktype family passive canonname numerichost
    numericserv v4mapped all addrconfig)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getnameinfo.html"><code class="function">getnameinfo</code></a> <em class="replaceable"><code>address</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> nofqdn numerichost namereqd numericserv numericscope
    dgram)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getpeername.html"><code class="function">getpeername</code></a>
    <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>address</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getsockname.html"><code class="function">getsockname</code></a>
    <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>address</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/htonl.html"><code class="function">htonl</code></a> <em class="replaceable"><code>n</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/htons.html"><code class="function">htons</code></a> <em class="replaceable"><code>n</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/ntohl.html"><code class="function">ntohl</code></a> <em class="replaceable"><code>n</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/ntohs.html"><code class="function">ntohs</code></a> <em class="replaceable"><code>n</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/recv.html"><code class="function">recv</code></a>
    <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>buffer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end peek oob waitall)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/recvfrom.html"><code class="function">recvfrom</code></a> <em class="replaceable"><code>socket</code></em>
    <em class="replaceable"><code>buffer</code></em> <em class="replaceable"><code>address</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end peek oob waitall)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/recvmsg.html"><code class="function">recvmsg</code></a>
    <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>message</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end peek oob waitall)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/send.html"><code class="function">send</code></a>
    <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>buffer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end oob eor)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/sendmsg.html"><code class="function">sendmsg</code></a>
    <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>message</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end oob eor)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/sendto.html"><code class="function">sendto</code></a>
    <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>buffer</code></em> <em class="replaceable"><code>address</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end oob eor)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/sockatmark.html"><code class="function">sockatmark</code></a>
    <em class="replaceable"><code>socket</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/socket.html"><code class="function">socket</code></a>
    <em class="replaceable"><code>domain</code></em> <em class="replaceable"><code>type</code></em> <em class="replaceable"><code>protocol</code></em>)</code></td></tr><tr><td><code class="code">(<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/socketpair.html"><code class="function">socketpair</code></a>
    <em class="replaceable"><code>domain</code></em> <em class="replaceable"><code>type</code></em> <em class="replaceable"><code>protocol</code></em>)</code></td></tr></table><p>using same-named lisp functions in package
 <strong class="package">“<span class="quote">RAWSOCK</span>”</strong>.
 Additionally,</p><table class="simplelist" border="0" summary="Simple list"><tr><td><code class="code">(<code class="function">RAWSOCK:SOCK-CLOSE</code> <em class="replaceable"><code>socket</code></em>)</code>
   calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/close.html"><code class="function">close</code></a>.</td></tr><tr><td><code class="code">(<code class="function">RAWSOCK:SOCK-LISTEN</code> <em class="replaceable"><code>socket</code></em>
    <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> (<em class="replaceable"><code>backlog</code></em> SOMAXCONN))</code>
   calls <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/listen.html"><code class="function">listen</code></a>.</td></tr></table></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="rawsock-args"></a>32.14.3. Common arguments</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#rawsock-plat-dep-constants">32.14.3.1. Platform-dependent Keywords</a></span></dt></dl></div><div class="variablelist"><a id="rawsock-args-list"></a><dl><dt><span class="term"><span class="type">void*</span> <em class="replaceable"><code>buffer</code></em></span></dt><dd>A <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span>.  The vector may be adjustable
   and have a fill pointer.  Whenever a function accepts a <em class="replaceable"><code>buffer</code></em>
   argument, it also accepts <code class="constant">:START</code> and <code class="constant">:END</code> keyword arguments
   with the usual meaning and defaults.  You do not have to supply the
   vector length because Lisp can determine it itself, but, if you want
   to, you can use <code class="constant">:END</code> argument for that.
</dd><dt><span class="term"><span class="type">int</span> <em class="replaceable"><code>socket</code></em></span></dt><dd>An <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> (returned by
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/socketpair.html"><code class="function">socketpair</code></a> or
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/socket.html"><code class="function">socket</code></a>).</dd><dt><span class="term"><span class="type">int</span> <em class="replaceable"><code>family</code></em><br /></span><span class="term"><span class="type">int</span> <em class="replaceable"><code>domain</code></em></span></dt><dd>A <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (stands for <code class="constant">AF_UNSPEC</code>),
   <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>, or a platform-specific keyword, e.g.,
   <code class="constant">:INET</code> stands for <code class="constant">AF_INET</code>.
</dd><dt><span class="term"><span class="type">int</span> <em class="replaceable"><code>type</code></em></span></dt><dd>A <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (stands for 0); <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>; or a
   platform-specific keyword, e.g.,
   <code class="constant">:DGRAM</code> stands for <code class="constant">SOCK_DGRAM</code>.
</dd><dt><span class="term"><span class="type">int</span> <em class="replaceable"><code>protocol</code></em></span></dt><dd>A <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> (stands for 0); <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>; a
   platform-specific keyword, e.g., <code class="constant">:ETH_P_ARP</code> stands
   for <code class="constant">ETH_P_ARP</code>, <code class="constant">:IPPROTO-ICMP</code>
   stands for <code class="constant">IPPROTO_ICMP</code>; or a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> (passed
   to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getprotobyname.html"><code class="function">getprotobyname</code></a>).
</dd><dt><span class="term"><span class="type">int</span> <em class="replaceable"><code>flags</code></em></span></dt><dd>This <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> argument corresponds to keyword
   arguments to the Lisp functions.  E.g., <code class="function">rawsock:send</code>
   accepts <code class="constant">:OOB</code> and <code class="constant">EOR</code> arguments,
   while <code class="function">rawsock:recv</code> accepts <code class="constant">PEEK</code>,
   <code class="constant">OOB</code> and <code class="constant">WAITALL</code>.
</dd><dt><span class="term"><span class="type">struct sockaddr</span> <em class="replaceable"><code>address</code></em></span></dt><dd>A <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a> <span class="type">RAWSOCK:SOCKADDR</span>
   returned by
   <a href="#make-sockaddr"><code class="function">MAKE-SOCKADDR</code></a>.
   You do not need to supply its length because Lisp can determine it itself.
</dd><dt><span class="term"><span class="type">struct msghdr</span> <em class="replaceable"><code>message</code></em></span></dt><dd><p>A <a href="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html" target="_top"><code class="classname">STRUCTURE-OBJECT</code></a> <span class="type">RAWSOCK:MESSAGE</span>
   with the following slots:
   </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><span class="term">addr</span></td><td>
       a <a href="#make-sockaddr"><span class="type">SOCKADDR</span></a>.
    </td></tr><tr><td><span class="term">iovec</span></td><td>
       a <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span>)</code></span>
       (<code class="constant">:START</code> and <code class="constant">:END</code> arguments are applied to this vector)
    </td></tr><tr><td><span class="term">control</span></td><td>
       a <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span></td></tr><tr><td><span class="term">flags</span></td><td>
       a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a></td></tr></tbody></table></div></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="rawsock-plat-dep-constants"></a>32.14.3.1. Platform-dependent Keywords</h4></div></div></div><p>One can extract the list of acceptable platform-dependent
 keywords for, e.g., socket domain, using the following code:
</p><pre class="programlisting">
 (<a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><code class="function">BLOCK</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>
   (<a href="http://www.lisp.org/HyperSpec/Body/mac_handler-bind.html" target="_top"><code class="function">HANDLER-BIND</code></a> ((<a href="http://www.lisp.org/HyperSpec/Body/contyp_type-error.html" target="_top"><code class="classname">TYPE-ERROR</code></a>
                    (<a href="http://www.lisp.org/HyperSpec/Body/mac_lambda.html" target="_top"><code class="function">LAMBDA</code></a> (c)
                      (<a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> "~&amp;error: ~A~%" c)
                      (<a href="http://www.lisp.org/HyperSpec/Body/mac_return.html" target="_top"><code class="function">RETURN</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDDR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/acc_firstcm_s_inthcm_tenth.html" target="_top"><code class="function">THIRD</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/fun_type-erro_xpected-type.html" target="_top"><code class="function">TYPE-ERROR-EXPECTED-TYPE</code></a> c)))))))
     (rawsock:socket "bad" <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>)))
</pre></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="rawsock-return"></a>32.14.4. Return Values</h3></div></div></div><p>The return values of the functions described in section
 <a href="#rawsock-func" title="32.14.2.&#xA0;Single System Call Functions">Section 32.14.2, “Single System Call Functions”</a> are derived from the return values of
 the underlying system call: if, say, the <em class="replaceable"><code>address</code></em> argument is modified
 by the system call, two values are returned (in addition to the
 possible values coming from the return value of the system call):
 the (modified) <em class="replaceable"><code>address</code></em> structure and its new size.
 If the system call fails, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="rawsock-not-implemented"></a>32.14.5. Not Implemented</h3></div></div></div><p>We do not interface to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/select.html"><code class="function">select</code></a>
 or <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/poll.html"><code class="function">poll</code></a> in this module,
 they are already available through <a href="#so-status"><code class="function">SOCKET:SOCKET-STATUS</code></a>.</p><p>We do not interface to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/shutdown.html"><code class="function">shutdown</code></a>
 in this module, it is already available through <a href="#sost-shut"><code class="function">SOCKET:SOCKET-STREAM-SHUTDOWN</code></a>.</p><p>We do not interface to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyname.html"><code class="function">gethostbyname</code></a>
 or <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyaddr.html"><code class="function">gethostbyaddr</code></a> in this module,
 they are already available through <a href="#resolve-host"><code class="function">POSIX:RESOLVE-HOST-IPADDR</code></a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="rawsock-high-level"></a>32.14.6. High-Level Functions</h3></div></div></div><div class="variablelist"><a id="rawsock-high-level-list"></a><p class="title"><b>Functions that do not
  correspond to a single system call</b></p><dl><dt><span class="term"><code class="code">(<code class="function">RAWSOCK:SOCK-READ</code>
   <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>buffer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end)</code><br /></span><span class="term"><code class="code">(<code class="function">RAWSOCK:SOCK-WRITE</code>
   <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>buffer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end)</code></span></dt><dd><p>Call one of
 <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/read.html"><code class="function">read</code></a>/<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/readv.html"><code class="function">readv</code></a> or
 <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/write.html"><code class="function">write</code></a>/<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/writev.html"><code class="function">writev</code></a>
   (depending on whether <em class="replaceable"><code>buffer</code></em> is a <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span> or
   a <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span>)</code></span>).
 Return the number of bytes read or written.</p><p>When <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/readv.html"><code class="function">readv</code></a> and
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/writev.html"><code class="function">writev</code></a> and not available, they are
  emulated by repeated calls to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/read.html"><code class="function">read</code></a>
  and <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/write.html"><code class="function">write</code></a>.</p><p>On <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> we have to use <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/recv.html"><code class="function">recv</code></a>
  instead of <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/read.html"><code class="function">read</code></a>
  and <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/send.html"><code class="function">send</code></a> instead of
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/write.html"><code class="function">write</code></a> because <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/read.html"><code class="function">read</code></a> and
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/write.html"><code class="function">write</code></a> do not work on sockets, only
  on regular files.</p></dd><dt><span class="term"><code class="code">(RAWSOCK:PROTOCOL <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
   <em class="replaceable"><code>protocol</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getprotobyname.html"><code class="function">getprotobyname</code></a>
   when <em class="replaceable"><code>protocol</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>,
   or call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getprotobynumber.html"><code class="function">getprotobynumber</code></a> when
   <em class="replaceable"><code>protocol</code></em> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>.
   Return a <span class="type">RAWSOCK:PROTOCOL</span> structure object.
   When <em class="replaceable"><code>protocol</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, return a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> of all known protocols using
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setprotoent.html"><code class="function">setprotoent</code></a>,
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getprotoent.html"><code class="function">getprotoent</code></a>, and
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/endprotoent.html"><code class="function">endprotoent</code></a>.
</dd><dt><span class="term"><code class="code">(RAWSOCK:NETWORK <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
   <em class="replaceable"><code>network</code></em> <em class="replaceable"><code>type</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getnetbyname.html"><code class="function">getnetbyname</code></a>
   when <em class="replaceable"><code>network</code></em> is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>,
   or call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getnetbynumber.html"><code class="function">getnetbynumber</code></a> when
   <em class="replaceable"><code>network</code></em> is an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>.
   Return a <span class="type">RAWSOCK:NETWORK</span> structure object.
   When <em class="replaceable"><code>network</code></em> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, return a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>
   of all known networks using <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setnetent.html"><code class="function">setnetent</code></a>,
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getnetent.html"><code class="function">getnetent</code></a>, and
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/endnetent.html"><code class="function">endnetent</code></a>.
</dd><dt><span class="term"><code class="code">(RAWSOCK:SOCKET-OPTION <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>name</code></em>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :LEVEL)</code><br /></span><span class="term"><code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> (RAWSOCK:SOCKET-OPTION <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>name</code></em>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> :LEVEL) <em class="replaceable"><code>value</code></em>)</code></span></dt><dd>Call <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/getsockopt.html"><code class="function">getsockopt</code></a>
   and <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/setsockopt.html"><code class="function">setsockopt</code></a>, returns and sets
   individual (for specific option <em class="replaceable"><code>name</code></em> and
   <em class="replaceable"><code>level</code></em>) and multiple (when <em class="replaceable"><code>name</code></em> is
   <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and/or <em class="replaceable"><code>level</code></em> is <code class="constant">:ALL</code>) options.
   (See also <a href="#so-opt"><code class="function">SOCKET:SOCKET-OPTIONS</code></a>.)</dd><dt><span class="term"><code class="code">(RAWSOCK:CONVERT-ADDRESS
   <em class="replaceable"><code>family</code></em> <em class="replaceable"><code>address</code></em>)</code></span></dt><dd><p>Convert between <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> IP
   <em class="replaceable"><code>address</code></em> representations using</p><table class="simplelist" border="0" summary="Simple list"><tr><td><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/inet_addr.html"><code class="function">inet_addr</code></a></td><td><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/inet_ntop.html"><code class="function">inet_ntop</code></a></td></tr><tr><td><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/inet_ntoa.html"><code class="function">inet_ntoa</code></a></td><td><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/inet_pton.html"><code class="function">inet_pton</code></a></td></tr></table></dd><dt><a id="make-sockaddr"></a><span class="term"><code class="code">(RAWSOCK:MAKE-SOCKADDR
   <em class="replaceable"><code>family</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>data</code></em>)</code></span></dt><dd>Create a <span class="type">sockaddr</span> object.
   <em class="replaceable"><code>data</code></em> should be a sequence of <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8)</code></span> or an <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>
   (meaning <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/fun_make-list.html" target="_top"><code class="function">MAKE-LIST</code></a> <em class="replaceable"><code>data</code></em> :initial-element 0)</code>).
   When omitted, the standard platform-specific size is used.
</dd><dt><span class="term"><code class="code">(RAWSOCK:SOCKADDR-FAMILY <em class="replaceable"><code>address</code></em>)</code></span></dt><dd>Return the numeric family of the
   <span class="type">sockaddr</span> object.</dd><dt><span class="term"><code class="code">(RAWSOCK:SOCKADDR-DATA <em class="replaceable"><code>address</code></em>)</code></span></dt><dd><p>Return a <a href="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh" target="_top">fresh</a> <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> displaced to the
   <em class="structfield"><code>data</code></em> field of the
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> <span class="type">struct sockaddr</span> object.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Modifying this <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>'s content will modify the
    <em class="replaceable"><code>address</code></em> argument data!</p></div></dd><dt><span class="term"><code class="code">(RAWSOCK:OPEN-UNIX-SOCKET
   <em class="replaceable"><code>pathname</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> <em class="replaceable"><code>type</code></em>)</code></span></dt><dd>Open a <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> socket special file.
</dd><dt><span class="term"><code class="code">(RAWSOCK:IPCSUM <em class="replaceable"><code>buffer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end)</code>
  - <a class="rfc" href="http://rfc.net/rfc791.html"><code><span><strong class="command">IP</strong></span></code></a><br /></span><span class="term"><code class="code">(RAWSOCK:ICMPCSUM <em class="replaceable"><code>buffer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end)</code>
  - <a class="rfc" href="http://rfc.net/rfc792.html"><code><span><strong class="command">ICMP</strong></span></code></a><br /></span><span class="term"><code class="code">(RAWSOCK:TCPCSUM <em class="replaceable"><code>buffer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end)</code>
  - <a class="rfc" href="http://rfc.net/rfc793.html"><code><span><strong class="command">TCP</strong></span></code></a><br /></span><span class="term"><code class="code">(RAWSOCK:UDPCSUM <em class="replaceable"><code>buffer</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> start end)</code>
  - <a class="rfc" href="http://rfc.net/rfc768.html"><code><span><strong class="command">UDP</strong></span></code></a></span></dt><dd>Compute the appropriate protocol checksum and record
   it in the appropriate location.  <em class="replaceable"><code>buffer</code></em> is assumed to be a suitable
   packet for the protocol, with the appropriate header etc.
   The typical packet you send is both <a class="rfc" href="http://rfc.net/rfc791.html"><code><span><strong class="command">IP</strong></span></code></a> and <a class="rfc" href="http://rfc.net/rfc793.html"><code><span><strong class="command">TCP</strong></span></code></a> and thus has two
   checksums, so you would want to call <span class="emphasis"><em>two</em></span> functions.
</dd><dt><span class="term"><code class="code">(RAWSOCK:CONFIGDEV <em class="replaceable"><code>socket</code></em> <em class="replaceable"><code>name</code></em> <em class="replaceable"><code>address</code></em>
   <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <em class="replaceable"><code>promisc</code></em>
   <em class="replaceable"><code>noarp</code></em>)</code></span></dt><dd>Set some socket options and IP <em class="replaceable"><code>address</code></em>
   with <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/ioctl.html"><code class="function">ioctl</code></a>.
</dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="wildcard"></a>32.15. The Wildcard Module</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#wildcard-syntax">32.15.1. Wildcard Syntax</a></span></dt></dl></div><p>Wildcards, also called “<span class="quote"><a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/xcu_chap02.html#tag_02_13">Pathname Matching</a> Notation</span>”,
describe sets of file names.</p><p>When this module is present, <a href="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html" target="_top"><code class="varname">*FEATURES*</code></a>
 contains the symbol <code class="constant">:WILDCARD</code>.</p><p>The <strong class="package">“<span class="quote">WILDCARD</span>”</strong> package exports the
 following two symbols:</p><p><a id="wildcard-match"></a><b><code class="code">(WILDCARD:MATCH <em class="replaceable"><code>pattern</code></em>
   <em class="replaceable"><code>string</code></em> <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> <code class="constant">:START</code> <code class="constant">:END</code> :case-insensitive)</code>. </b>This function returns a non-<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> value if the <em class="replaceable"><code>string</code></em> matches
 the <em class="replaceable"><code>pattern</code></em>.</p><p><a id="wildcard-matcher"></a><b><code class="code">(WILDCARD:WILDCARD-MATCHER
   <em class="replaceable"><code>pattern</code></em>)</code>. </b>This function is a valid value for <a href="#apropos" title="25.2.12.&#xA0;Functions APROPOS &amp; APROPOS-LIST"><code class="varname">CUSTOM:*APROPOS-MATCHER*</code></a>.
</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="wildcard-syntax"></a>32.15.1. Wildcard Syntax</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><span class="keysym">*</span></span></dt><dd>Matches any zero or more characters.
 </dd><dt><span class="term"><span class="keysym">?</span></span></dt><dd>Matches any one character.
 </dd><dt><span class="term"><span class="keysym">[<em class="replaceable"><code>string</code></em>]</span></span></dt><dd>Matches exactly one character that is a member of
    the <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a> <em class="replaceable"><code>string</code></em>.
    This is called a “<span class="quote">character class</span>”.
    As a shorthand, <em class="replaceable"><code>string</code></em> may contain ranges, which consist of two
    characters with a dash between them.
    For example, the class <em class="replaceable"><code>[a-z0-9_]</code></em>
    matches a lowercase letter, a number, or an underscore.
    You can negate a class by placing a <span class="keysym">#\!</span>
    or <span class="keysym">#\^</span> immediately after the opening bracket.
    Thus, <em class="replaceable"><code>[^A-Z@]</code></em> matches any character
    except an uppercase letter or an at sign.
</dd><dt><span class="term"><span class="keysym">\</span></span></dt><dd>Removes the special meaning of the character that
    follows it.  This works even in character classes.
 </dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Slash characters have no special significance in the
  wildcard matching, unlike in the shell (<a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"><span><strong class="command">/bin/sh</strong></span></a>),
  in which wildcards do not match them.
  Therefore, a pattern <em class="replaceable"><code>foo*bar</code></em>
  can match a file name <code class="filename">foo3/bar</code>,
  and a pattern <em class="replaceable"><code>./sr*sc</code></em>
  can match a file name <code class="filename">./src/misc</code>.</p></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="zlib"></a>32.16. ZLIB Interface</h2></div></div></div><p>This is an <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>-based interface to the
 <a href="http://www.zlib.org" target="_top">ZLIB</a>.</p><div class="variablelist"><dl><dt><span class="term"><code class="code">(ZLIB:Z-VERSION)</code></span></dt><dd>Return the string version of the underlying library.
</dd><dt><span class="term"><code class="code">(ZLIB:COMPRESS source <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> level)</code></span></dt><dd>Compress the source <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>.
</dd><dt><span class="term"><code class="code">(ZLIB:UNCOMPRESS
   source destination-length)</code></span></dt><dd>Uncompress the source <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (returned
   by <code class="function">ZLIB:COMPRESS</code>).
   <em class="replaceable"><code>destination-length</code></em> should be no less than
   the length of the uncompressed <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>.
</dd><dt><span class="term"><code class="code">(ZLIB:COMPRESS-BOUND source-length)</code></span></dt><dd>Return the maximum length of the return value
   of <code class="function">ZLIB:COMPRESS</code>.</dd><dt><span class="term"><code class="code">(ZLIB:ERROR-STRING errno)</code></span></dt><dd>Return a descriptive string for the supplied error
   code.</dd><dt><span class="term"><code class="classname">ZLIB:ZERROR</code></span></dt><dd>An <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> sometimes <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed
   by <code class="function">ZLIB:COMPRESS</code>
   and <code class="function">ZLIB:UNCOMPRESS</code>.
   You can find the error code and the caller
   using <code class="function">ZLIB:ZERROR-ERRNO</code>
   and <code class="function">ZLIB:ZERROR-CALLER</code>.
</dd></dl></div></div></div></div><div class="part" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="internals"></a>Part III. Internals of the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> Implementation</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#source-files">33. The source files of <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#src-file-types">33.1. File Types</a></span></dt><dt><span class="section"><a href="#src-preprocessing">33.2. Source Pre-Processing</a></span></dt><dt><span class="section"><a href="#src-files">33.3. Files</a></span></dt><dd><dl><dt><span class="section"><a href="#src-unpreproc-C">33.3.1. Unpreprocessed <span><strong class="command">C</strong></span> code</a></span></dt><dt><span class="section"><a href="#src-asm-misc">33.3.2. Other assembly language stuff</a></span></dt><dt><span class="section"><a href="#src-lisp">33.3.3. Lisp source files</a></span></dt><dt><span class="section"><a href="#src-ext-mod">33.3.4. External Modules</a></span></dt><dt><span class="section"><a href="#src-doc">33.3.5. Documentation</a></span></dt><dt><span class="section"><a href="#src-i18n">33.3.6. Internationalization</a></span></dt><dt><span class="section"><a href="#src-conf-unix">33.3.7. Automatic configuration on <span class="strong"><strong>UNIX</strong></span></a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#gc">34. Overview of <span><strong class="command">CLISP</strong></span>'s Garbage Collection</a></span></dt><dd><dl><dt><span class="section"><a href="#internals-intro">34.1. Introduction</a></span></dt><dt><span class="section"><a href="#lisp-obj-in-c">34.2. Lisp objects in <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#typecodes">34.3. Object Pointer Representations</a></span></dt><dt><span class="section"><a href="#memory-models">34.4. Memory Models</a></span></dt><dt><span class="section"><a href="#gc-safety">34.5. The burden of garbage-collection upon the rest of <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#gc-moves-data">34.5.1. <span class="type">object</span> pointer invalidation</a></span></dt><dt><span class="section"><a href="#gc-mem-prot">34.5.2. Memory protection</a></span></dt></dl></dd><dt><span class="section"><a href="#foreign-pointers">34.6. Foreign Pointers</a></span></dt></dl></dd><dt><span class="chapter"><a href="#extend">35. Extending <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#add-fun">35.1. Adding a built-in function</a></span></dt><dt><span class="section"><a href="#add-var">35.2. Adding a built-in variable</a></span></dt><dt><span class="section"><a href="#recompile">35.3. Recompilation</a></span></dt></dl></dd><dt><span class="chapter"><a href="#bytecode">36. The <span><strong class="command">CLISP</strong></span> bytecode specification</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-intro">36.1. Introduction</a></span></dt><dt><span class="section"><a href="#vm">36.2. The virtual machine</a></span></dt><dt><span class="section"><a href="#comp-fun">36.3. The structure of compiled functions</a></span></dt><dt><span class="section"><a href="#intr-struct">36.4. The general structure of the instructions</a></span></dt><dt><span class="section"><a href="#intr-set">36.5. The instruction set</a></span></dt><dd><dl><dt><span class="section"><a href="#instr-const">36.5.1. Instructions for constants</a></span></dt><dt><span class="section"><a href="#instr-lex-var">36.5.2. Instructions for lexical variables</a></span></dt><dt><span class="section"><a href="#instr-dyn-var">36.5.3. Instructions for dynamic variables</a></span></dt><dt><span class="section"><a href="#instr-stack">36.5.4. Instructions for stack operations</a></span></dt><dt><span class="section"><a href="#instr-jump">36.5.5. Instructions for control flow, jumps</a></span></dt><dt><span class="section"><a href="#instr-env">36.5.6. Instructions for lexical environment,
   creation of closures</a></span></dt><dt><span class="section"><a href="#instr-funcall">36.5.7. Instructions for function calls</a></span></dt><dt><span class="section"><a href="#instr-optkey">36.5.8. Instructions for optional
  and keyword parameters</a></span></dt><dt><span class="section"><a href="#instr-mulval">36.5.9. Instructions for multiple values</a></span></dt><dt><span class="section"><a href="#instr-block">36.5.10. Instructions for
   <code class="function">BLOCK</code> and <code class="function">RETURN-FROM</code></a></span></dt><dt><span class="section"><a href="#instr-tagbody">36.5.11. Instructions for <code class="function">TAGBODY</code> and <code class="function">GO</code></a></span></dt><dt><span class="section"><a href="#instr-catch">36.5.12. Instructions for <code class="function">CATCH</code> and <code class="function">THROW</code></a></span></dt><dt><span class="section"><a href="#instr-unwind">36.5.13. Instructions for <code class="function">UNWIND-PROTECT</code></a></span></dt><dt><span class="section"><a href="#instr-handler">36.5.14. Instructions for <code class="function">HANDLER-BIND</code></a></span></dt><dt><span class="section"><a href="#instr-inline">36.5.15. Instructions for some inlined
  functions</a></span></dt><dt><span class="section"><a href="#instr-combo">36.5.16. Combined instructions</a></span></dt><dt><span class="section"><a href="#instr-shortcut">36.5.17. Shortcut instructions</a></span></dt></dl></dd><dt><span class="section"><a href="#bytecode-design">36.6. Bytecode Design</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-when-add-q">36.6.1. When to add a new bytecode?</a></span></dt><dt><span class="section"><a href="#byte-jmptail-q">36.6.2. Why JMPTAIL?</a></span></dt></dl></dd></dl></dd></dl></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="source-files"></a>Chapter 33. The source files of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#src-file-types">33.1. File Types</a></span></dt><dt><span class="section"><a href="#src-preprocessing">33.2. Source Pre-Processing</a></span></dt><dt><span class="section"><a href="#src-files">33.3. Files</a></span></dt><dd><dl><dt><span class="section"><a href="#src-unpreproc-C">33.3.1. Unpreprocessed <span><strong class="command">C</strong></span> code</a></span></dt><dd><dl><dt><span class="section"><a href="#src-includes">33.3.1.1. Includes</a></span></dt><dt><span class="section"><a href="#src-modules">33.3.1.2. Internal <span><strong class="command">C</strong></span> Modules</a></span></dt><dt><span class="section"><a href="#src-arith">33.3.1.3. Number system (arithmetic)</a></span></dt><dt><span class="section"><a href="#src-asm-sp">33.3.1.4. External routines for accessing the
  stack, written in assembly language</a></span></dt></dl></dd><dt><span class="section"><a href="#src-asm-misc">33.3.2. Other assembly language stuff</a></span></dt><dt><span class="section"><a href="#src-lisp">33.3.3. Lisp source files</a></span></dt><dt><span class="section"><a href="#src-ext-mod">33.3.4. External Modules</a></span></dt><dt><span class="section"><a href="#src-doc">33.3.5. Documentation</a></span></dt><dt><span class="section"><a href="#src-i18n">33.3.6. Internationalization</a></span></dt><dt><span class="section"><a href="#src-conf-unix">33.3.7. Automatic configuration on <span class="strong"><strong>UNIX</strong></span></a></span></dt></dl></dd></dl></div><p>For files in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> binary distributions,
 see <a href="clisp.html#files" class="olink">the section called “Files”</a>.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="src-file-types"></a>33.1. File Types</h2></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="filename">#P"*.d"</code></span></dt><dd>The source files for unpreprocessed <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code.
</dd><dt><span class="term"><code class="filename">#P".c"</code></span></dt><dd>The <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code after
   <a href="#src-preprocessing" title="33.2.&#xA0;Source Pre-Processing">preprocessing</a>;
   also the result of compiling some <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> forms (see <a href="#ffi-extern-output"><code class="varname">FFI:*OUTPUT-C-FUNCTIONS*</code></a>).
</dd><dt><span class="term"><code class="filename">#P".lisp"</code></span></dt><dd>The source files for Lisp code.
</dd><dt><span class="term"><code class="filename">#P"*.fas"</code></span></dt><dd>Compiled lisp code (platform-independent <a href="impnotes.html#bytecode" class="olink">bytecode</a>s).
</dd><dt><span class="term"><a href="#require" title="24.1.3.&#xA0;Function REQUIRE"><code class="filename">#P".lib"</code></a></span></dt><dd>Lisp “<span class="quote">header</span>”, produced by
   <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a> and used by <a href="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html" target="_top"><code class="function">REQUIRE</code></a></dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="src-preprocessing"></a>33.2. Source Pre-Processing</h2></div></div></div><p><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> sources are pre-processed with the following tools
   before being passed to the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> compiler:</p><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/utils/comment5.c"><code class="filename">utils/comment5.c</code></a></span></dt><dd><p>Convert <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"><span><strong class="command">/bin/sh</strong></span></a>-style comments (lines starting
  with <code class="literal">"# "</code>) to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>-style comments
  (<code class="literal">/**/</code>).</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>The use of <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"><span><strong class="command">/bin/sh</strong></span></a>-style comments is deprecated.</p></div></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/utils/varbrace.d"><code class="filename">utils/varbrace.d</code></a></span></dt><dd>Add braces to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> source code, so that variable
  declarations (introduced with the pseudo-keyword <code class="literal">var</code>)
  can be used within blocks, like in <span><strong class="command">C++</strong></span>
  and <span><strong class="command">C99</strong></span>.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/utils/ccpaux.c"><code class="filename">utils/ccpaux.c</code></a></span></dt><dd>When <a href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span><strong class="command">cpp</strong></span></a> cannot handle indented directives, remove
  the indentation.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/utils/gctrigger.d"><code class="filename">utils/gctrigger.d</code></a></span></dt><dd>Add <code class="function">GCTRIGGER</code> statements at the
  head of function bodies (for functions marked with
  the <code class="literal">maygc</code> pseudo-keyword).
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/utils/deema.c"><code class="filename">utils/deema.c</code></a></span></dt><dd>When <a href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span><strong class="command">cpp</strong></span></a> cannot handle empty macro arguments,
  insert <code class="literal">_EMA_</code> instead.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/utils/ccmp2c.c"><code class="filename">utils/ccmp2c.c</code></a></span></dt><dd>For the <code class="literal">new-clx</code> module only.
  Allows <a href="http://gcc.gnu.org/onlinedocs/cpp/" target="_top"><span><strong class="command">cpp</strong></span></a>-style preprocessing <span class="emphasis"><em>before</em></span> <a href="#modprep-file"><span><strong class="command">modprep</strong></span></a>
  processing.  Should be merged into <a href="#modprep-file"><span><strong class="command">modprep</strong></span></a> eventually.
</dd><dt><a id="modprep-file"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/utils/modprep.lisp"><code class="filename">utils/modprep.lisp</code></a></span></dt><dd>For some modules only, see <a href="#modprep" title="31.2.7.1.&#xA0;Modprep">Section 31.2.7.1, “Modprep”</a>.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="src-files"></a>33.3. Files</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#src-unpreproc-C">33.3.1. Unpreprocessed <span><strong class="command">C</strong></span> code</a></span></dt><dd><dl><dt><span class="section"><a href="#src-includes">33.3.1.1. Includes</a></span></dt><dt><span class="section"><a href="#src-modules">33.3.1.2. Internal <span><strong class="command">C</strong></span> Modules</a></span></dt><dt><span class="section"><a href="#src-arith">33.3.1.3. Number system (arithmetic)</a></span></dt><dd><dl><dt><span class="section"><a href="#src-ari-asm">33.3.1.3.1. External routines for the arithmetic
  system, written in assembly language</a></span></dt></dl></dd><dt><span class="section"><a href="#src-asm-sp">33.3.1.4. External routines for accessing the
  stack, written in assembly language</a></span></dt></dl></dd><dt><span class="section"><a href="#src-asm-misc">33.3.2. Other assembly language stuff</a></span></dt><dt><span class="section"><a href="#src-lisp">33.3.3. Lisp source files</a></span></dt><dt><span class="section"><a href="#src-ext-mod">33.3.4. External Modules</a></span></dt><dt><span class="section"><a href="#src-doc">33.3.5. Documentation</a></span></dt><dt><span class="section"><a href="#src-i18n">33.3.6. Internationalization</a></span></dt><dt><span class="section"><a href="#src-conf-unix">33.3.7. Automatic configuration on <span class="strong"><strong>UNIX</strong></span></a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="src-unpreproc-C"></a>33.3.1. Unpreprocessed <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#src-includes">33.3.1.1. Includes</a></span></dt><dt><span class="section"><a href="#src-modules">33.3.1.2. Internal <span><strong class="command">C</strong></span> Modules</a></span></dt><dt><span class="section"><a href="#src-arith">33.3.1.3. Number system (arithmetic)</a></span></dt><dd><dl><dt><span class="section"><a href="#src-ari-asm">33.3.1.3.1. External routines for the arithmetic
  system, written in assembly language</a></span></dt></dl></dd><dt><span class="section"><a href="#src-asm-sp">33.3.1.4. External routines for accessing the
  stack, written in assembly language</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="src-includes"></a>33.3.1.1. Includes</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/lispbibl.d"><code class="filename">src/lispbibl.d</code></a></span></dt><dd>main include file</dd><dt><a id="fsubr-d"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/fsubr.d"><code class="filename">src/fsubr.d</code></a></span></dt><dd>list of all built-in special forms
</dd><dt><a id="subr-d"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/subr.d"><code class="filename">src/subr.d</code></a></span></dt><dd>list of all built-in functions
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/pseudofun.d"><code class="filename">src/pseudofun.d</code></a></span></dt><dd>list of all “<span class="quote">pseudo functions</span>”
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/constpack.d"><code class="filename">src/constpack.d</code></a></span></dt><dd>list of packages accessed by <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code
</dd><dt><a id="constsym-d"></a><span class="term">
  <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/constsym.d"><code class="filename">src/constsym.d</code></a></span></dt><dd>list of symbols accessed by <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code
</dd><dt><a id="constobj-d"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/constobj.d"><code class="filename">src/constobj.d</code></a></span></dt><dd>list of miscellaneous objects accessed by <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/unix.d"><code class="filename">src/unix.d</code></a></span></dt><dd>include file for the <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> implementations
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/win32.d"><code class="filename">src/win32.d</code></a></span></dt><dd>include file for the <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> based versions
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/xthread.d"><code class="filename">src/xthread.d</code></a></span></dt><dd>include file for thread support
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/modules.h"><code class="filename">src/modules.h</code></a></span></dt><dd>list of foreign <a href="#modules" title="31.2.&#xA0;External Modules">module</a>s
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="src-modules"></a>33.3.1.2. Internal <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> Modules</h4></div></div></div><div class="variablelist"><dl><dt><a id="spvw-d"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/spvw.d"><code class="filename">src/spvw.d</code></a></span></dt><dd><p>Memory management (<a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion), startup; some OS interface.
   </p><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/avl.d"><code class="filename">src/avl.d</code></a></span></dt><dd>An implementation of AVL (Adelson-Velskii and
       Landis) trees.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/sort.d"><code class="filename">src/sort.d</code></a></span></dt><dd>A sorting routine.</dd><dt><a id="subrkw-d"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/subrkw.d"><code class="filename">src/subrkw.d</code></a></span></dt><dd>The list of all built-in functions with keywords
       in <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>.</dd></dl></div><p>
</p></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/spvwtabf.d"><code class="filename">src/spvwtabf.d</code></a></span></dt><dd>The table of built-in special operators and functions.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/spvwtabs.d"><code class="filename">src/spvwtabs.d</code></a></span></dt><dd>The table of all <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>s accessed by <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/spvwtabo.d"><code class="filename">src/spvwtabo.d</code></a></span></dt><dd>The table of miscellaneous objects accessed by
   <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> code.</dd><dt><a id="eval-d"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/eval.d"><code class="filename">src/eval.d</code></a></span></dt><dd><p>Evaluator (form interpreter) and <a href="impnotes.html#bytecode" class="olink">bytecode</a> interpreter.
   </p><div class="variablelist"><dl><dt><a id="bytecode-d"></a><span class="term"><a href="#bytecode-d"><code class="filename">bytecode.d</code></a></span></dt><dd>List of <a href="impnotes.html#bytecode" class="olink">bytecode</a>s.</dd></dl></div></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/control.d"><code class="filename">src/control.d</code></a></span></dt><dd>Special operator interpreter.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/pathname.d"><code class="filename">src/pathname.d</code></a></span></dt><dd>Pathnames, file- and directory-related functions.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/stream.d"><code class="filename">src/stream.d</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_stream.html" target="_top"><code class="classname">STREAM</code></a>s of all kinds: <a href="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html" target="_top"><code class="classname">FILE-STREAM</code></a>s,
   <a href="#terminal" title="21.2.&#xA0;Terminal interaction">terminal</a> streams, <a href="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html" target="_top"><code class="classname">STRING-STREAM</code></a>s
   etc.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/socket.d"><code class="filename">src/socket.d</code></a></span></dt><dd>Opening sockets for TCP/IP and CLX.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/io.d"><code class="filename">src/io.d</code></a></span></dt><dd>The lisp reader (parser) and printer (also pretty
   printer).</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/array.d"><code class="filename">src/array.d</code></a></span></dt><dd>Functions dealing with <a href="http://www.lisp.org/HyperSpec/Body/syscla_array.html" target="_top"><code class="classname">ARRAY</code></a>s and <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>s.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/hashtabl.d"><code class="filename">src/hashtabl.d</code></a></span></dt><dd>Functions dealing with <a href="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html" target="_top"><code class="classname">HASH-TABLE</code></a>s.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/list.d"><code class="filename">src/list.d</code></a></span></dt><dd>Functions dealing with <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>s.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/package.d"><code class="filename">src/package.d</code></a></span></dt><dd>Functions dealing with <a href="http://www.lisp.org/HyperSpec/Body/syscla_package.html" target="_top"><code class="classname">PACKAGE</code></a>s.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/record.d"><code class="filename">src/record.d</code></a></span></dt><dd>Functions dealing with records (structures, closures, etc.)
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/sequence.d"><code class="filename">src/sequence.d</code></a></span></dt><dd>The generic <a href="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html" target="_top"><code class="classname">SEQUENCE</code></a> functions.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/charstrg.d"><code class="filename">src/charstrg.d</code></a></span></dt><dd>Functions dealing with <a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s and <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>s.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/debug.d"><code class="filename">src/debug.d</code></a></span></dt><dd>Support for debugging and the <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a>
   (see <a href="#debugger" title="25.1.&#xA0;Debugging Utilities&#10;   [CLHS-25.1.2]">Section 25.1, “Debugging Utilities
   [CLHS-25.1.2]”</a>).</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/error.d"><code class="filename">src/error.d</code></a></span></dt><dd><p><a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> handling and <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ing.
   </p><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/errunix.d"><code class="filename">src/errunix.d</code></a></span></dt><dd><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>-specific error messages.
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/errwin32.d"><code class="filename">src/errwin32.d</code></a></span></dt><dd><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>-specific error messages.
    </dd></dl></div></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/misc.d"><code class="filename">src/misc.d</code></a></span></dt><dd>Miscellaneous functions.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/time.d"><code class="filename">src/time.d</code></a></span></dt><dd>Timing functions.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/predtype.d"><code class="filename">src/predtype.d</code></a></span></dt><dd>Predicates, type tests.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/symbol.d"><code class="filename">src/symbol.d</code></a></span></dt><dd>Functions dealing with <a href="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html" target="_top"><code class="classname">SYMBOL</code></a>s.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/unixaux.d"><code class="filename">src/unixaux.d</code></a></span></dt><dd>Auxiliary functions (<a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> version only).
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/win32aux.d"><code class="filename">src/win32aux.d</code></a></span></dt><dd>Auxiliary functions (<a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> version only).
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/foreign.d"><code class="filename">src/foreign.d</code></a></span></dt><dd><a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> support.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/lisparit.d"><code class="filename">src/lisparit.d</code></a></span></dt><dd>Functions dealing with numbers (arithmetic), see
   <a href="#src-arith" title="33.3.1.3.&#xA0;Number system (arithmetic)">Section 33.3.1.3, “Number system (arithmetic)”</a>.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/noreadline.d"><code class="filename">src/noreadline.d</code></a></span></dt><dd>Dummy plug-in for the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> library.
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="src-arith"></a>33.3.1.3. Number system (arithmetic)</h4></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#src-ari-asm">33.3.1.3.1. External routines for the arithmetic
  system, written in assembly language</a></span></dt></dl></div><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/lisparit.d"><code class="filename">src/lisparit.d</code></a></span></dt><dd>initialization, input/output of numbers, lisp functions
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/aridecl.d"><code class="filename">src/aridecl.d</code></a></span></dt><dd>declarations</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/arilev0.d"><code class="filename">src/arilev0.d</code></a></span></dt><dd>arithmetic at the machine level
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/arilev1.d"><code class="filename">src/arilev1.d</code></a></span></dt><dd>digit sequences</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/arilev1c.d"><code class="filename">src/arilev1c.d</code></a></span></dt><dd>operations on digit sequences, written in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/arilev1i.d"><code class="filename">src/arilev1i.d</code></a></span></dt><dd>operations on digit sequences, as inline functions
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/arilev1e.d"><code class="filename">src/arilev1e.d</code></a></span></dt><dd>operations on digit sequences, bindings to external
   routines</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intelem.d"><code class="filename">src/intelem.d</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s: elementary operations
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intlog.d"><code class="filename">src/intlog.d</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s: logical connectives
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intplus.d"><code class="filename">src/intplus.d</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s: addition and subtraction
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intcomp.d"><code class="filename">src/intcomp.d</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s: comparison
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intbyte.d"><code class="filename">src/intbyte.d</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s: byte operations <a href="http://www.lisp.org/HyperSpec/Body/acc_ldb.html" target="_top"><code class="function">LDB</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_dpb.html" target="_top"><code class="function">DPB</code></a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intmal.d"><code class="filename">src/intmal.d</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s: multiplication
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intdiv.d"><code class="filename">src/intdiv.d</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s: division
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intgcd.d"><code class="filename">src/intgcd.d</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s: <a href="http://www.lisp.org/HyperSpec/Body/fun_gcd.html" target="_top"><code class="function">GCD</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_lcm.html" target="_top"><code class="function">LCM</code></a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/int2adic.d"><code class="filename">src/int2adic.d</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s: operations on 2-adic integers
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intsqrt.d"><code class="filename">src/intsqrt.d</code></a></span></dt><dd><a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a>s: square root, n-th root
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intprint.d"><code class="filename">src/intprint.d</code></a></span></dt><dd>subroutines for <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> output
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intread.d"><code class="filename">src/intread.d</code></a></span></dt><dd>subroutines for <a href="http://www.lisp.org/HyperSpec/Body/syscla_integer.html" target="_top"><code class="classname">INTEGER</code></a> input
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/rational.d"><code class="filename">src/rational.d</code></a></span></dt><dd>rational numbers (<a href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html" target="_top"><code class="classname">RATIO</code></a>s)
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/sfloat.d"><code class="filename">src/sfloat.d</code></a></span></dt><dd>elementary operations for <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a>s
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/ffloat.d"><code class="filename">src/ffloat.d</code></a></span></dt><dd>elementary operations for <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a>s
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/dfloat.d"><code class="filename">src/dfloat.d</code></a></span></dt><dd>elementary operations for <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">DOUBLE-FLOAT</code></a>s
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/lfloat.d"><code class="filename">src/lfloat.d</code></a></span></dt><dd>elementary operations for <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">LONG-FLOAT</code></a>s
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/flo_konv.d"><code class="filename">src/flo_konv.d</code></a></span></dt><dd>conversions between <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><code class="classname">FLOAT</code></a>s
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/flo_rest.d"><code class="filename">src/flo_rest.d</code></a></span></dt><dd>general <a href="http://www.lisp.org/HyperSpec/Body/syscla_float.html" target="_top"><code class="classname">FLOAT</code></a> operations
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/realelem.d"><code class="filename">src/realelem.d</code></a></span></dt><dd>elementary functions for <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><code class="classname">REAL</code></a> numbers
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/realrand.d"><code class="filename">src/realrand.d</code></a></span></dt><dd>random numbers
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/realtran.d"><code class="filename">src/realtran.d</code></a></span></dt><dd>transcendental functions for <a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><code class="classname">REAL</code></a> numbers
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/compelem.d"><code class="filename">src/compelem.d</code></a></span></dt><dd>elementary functions for <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> numbers
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/comptran.d"><code class="filename">src/comptran.d</code></a></span></dt><dd>transcendental functions for <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> numbers
</dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h5 class="title"><a id="src-ari-asm"></a>33.3.1.3.1. External routines for the arithmetic
  system, written in assembly language</h5></div></div></div><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/ari68000.d"><code class="filename">src/ari68000.d</code></a></span></dt><dd>written in 68000 assembler, MIT syntax
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/ari68020.d"><code class="filename">src/ari68020.d</code></a></span></dt><dd>written in 68020 assembler, MIT syntax
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/arisparc.d"><code class="filename">src/arisparc.d</code></a></span></dt><dd>written in SPARC assembler
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/arisparc64.d"><code class="filename">src/arisparc64.d</code></a></span></dt><dd>written in 64-bit SPARC assembler
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/ari80386.d"><code class="filename">src/ari80386.d</code></a></span></dt><dd>written in i386/i486 assembler
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/arimips.d"><code class="filename">src/arimips.d</code></a></span></dt><dd>written in MIPS assembler
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/arimips64.d"><code class="filename">src/arimips64.d</code></a></span></dt><dd>written in 64-bit MIPS assembler
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/arihppa.d"><code class="filename">src/arihppa.d</code></a></span></dt><dd>written in HPPA-1.0 assembler
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/arivaxunix.d"><code class="filename">src/arivaxunix.d</code></a></span></dt><dd>written in VAX assembler, Unix assembler syntax
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/ariarm.d"><code class="filename">src/ariarm.d</code></a></span></dt><dd>written in ARM assembler
</dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="src-asm-sp"></a>33.3.1.4. External routines for accessing the
  stack, written in assembly language</h4></div></div></div><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/sp68000.d"><code class="filename">src/sp68000.d</code></a></span></dt><dd>written in 68000 assembler, MIT syntax
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/spsparc.d"><code class="filename">src/spsparc.d</code></a></span></dt><dd>written in SPARC assembler
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/spsparc64.d"><code class="filename">src/spsparc64.d</code></a></span></dt><dd>written in 64-bit SPARC assembler
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/sp80386.d"><code class="filename">src/sp80386.d</code></a></span></dt><dd>written in i386/i486 assembler
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/spmips.d"><code class="filename">src/spmips.d</code></a></span></dt><dd>written in MIPS assembler
</dd></dl></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="src-asm-misc"></a>33.3.2. Other assembly language stuff</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/asmi386.sh"><code class="filename">src/asmi386.sh</code></a></span></dt><dd>converts i386 assembler from MIT syntax to a macro syntax
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/asmi386.hh"><code class="filename">src/asmi386.hh</code></a></span></dt><dd>expands i386 assembler in macro syntax to either MIT
   or Intel syntax</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="src-lisp"></a>33.3.3. Lisp source files</h3></div></div></div><div class="variablelist"><dl><dt><a id="init-lisp"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/init.lisp"><code class="filename">src/init.lisp</code></a></span></dt><dd>the first file to be loaded during bootstrapping,
 loads everything else</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/defseq.lisp"><code class="filename">src/defseq.lisp</code></a></span></dt><dd>defines the usual sequence types for the generic
   sequence functions</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/backquote.lisp"><code class="filename">src/backquote.lisp</code></a></span></dt><dd>implements the backquote read macro
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/defmacro.lisp"><code class="filename">src/defmacro.lisp</code></a></span></dt><dd>implements <a href="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html" target="_top"><code class="function">DEFMACRO</code></a></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/macros1.lisp"><code class="filename">src/macros1.lisp</code></a></span></dt><dd>the most important macros
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/macros2.lisp"><code class="filename">src/macros2.lisp</code></a></span></dt><dd>some other macros
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/defs1.lisp"><code class="filename">src/defs1.lisp</code></a></span></dt><dd>miscellaneous definitions
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/timezone.lisp"><code class="filename">src/timezone.lisp</code></a></span></dt><dd>site-dependent definition of time zone, except for
   <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> and <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/places.lisp"><code class="filename">src/places.lisp</code></a></span></dt><dd>macros using <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s, definitions of most standard
   and extensiion <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#place" target="_top">place</a>s</dd><dt><a id="floatprint-lisp"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/floatprint.lisp"><code class="filename">src/floatprint.lisp</code></a></span></dt><dd>defines <a href="#write-float-decimal"><code class="function">SYS::WRITE-FLOAT-DECIMAL</code></a>
   for printing floating point numbers in base 10
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/type.lisp"><code class="filename">src/type.lisp</code></a></span></dt><dd>functions working with type specifiers: <a href="http://www.lisp.org/HyperSpec/Body/fun_typep.html" target="_top"><code class="function">TYPEP</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/fun_subtypep.html" target="_top"><code class="function">SUBTYPEP</code></a></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/defstruct.lisp"><code class="filename">src/defstruct.lisp</code></a></span></dt><dd>implements the macro <a href="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html" target="_top"><code class="function">DEFSTRUCT</code></a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/format.lisp"><code class="filename">src/format.lisp</code></a></span></dt><dd>implements the function <a href="http://www.lisp.org/HyperSpec/Body/fun_format.html" target="_top"><code class="function">FORMAT</code></a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/room.lisp"><code class="filename">src/room.lisp</code></a></span></dt><dd>implements the function <a href="http://www.lisp.org/HyperSpec/Body/fun_room.html" target="_top"><code class="function">ROOM</code></a>
   (see also <a href="#room" title="25.2.7.&#xA0;Function ROOM">Section 25.2.7, “Function <code class="function">ROOM</code>”</a>)</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/savemem.lisp"><code class="filename">src/savemem.lisp</code></a></span></dt><dd>see <a href="#image" title="30.2.&#xA0;Saving an Image">Section 30.2, “Saving an Image”</a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/keyboard.lisp"><code class="filename">src/keyboard.lisp</code></a></span></dt><dd>implements the macro <a href="#with-kbd" title="21.2.2.&#xA0;Macro EXT:WITH-KEYBOARD"><code class="function">EXT:WITH-KEYBOARD</code></a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/runprog.lisp"><code class="filename">src/runprog.lisp</code></a></span></dt><dd>implements the functions <a href="#run-prog"><code class="function">EXT:RUN-PROGRAM</code></a>, <a href="#run-prog"><code class="function">EXT:RUN-SHELL-COMMAND</code></a> etc.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/query.lisp"><code class="filename">src/query.lisp</code></a></span></dt><dd>implements the functions <a href="http://www.lisp.org/HyperSpec/Body/fun_y-or-n-pcm_yes-or-no-p.html" target="_top"><code class="function">Y-OR-N-P</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_y-or-n-pcm_yes-or-no-p.html" target="_top"><code class="function">YES-OR-NO-P</code></a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/reploop.lisp"><code class="filename">src/reploop.lisp</code></a></span></dt><dd>support for debugging and the <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a>
   (see <a href="#debugger" title="25.1.&#xA0;Debugging Utilities&#10;   [CLHS-25.1.2]">Section 25.1, “Debugging Utilities
   [CLHS-25.1.2]”</a>)</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/dribble.lisp"><code class="filename">src/dribble.lisp</code></a></span></dt><dd>implements the functions <a href="http://www.lisp.org/HyperSpec/Body/fun_dribble.html" target="_top"><code class="function">DRIBBLE</code></a> and
   <a href="#dribble" title="25.2.13.&#xA0;Function DRIBBLE"><code class="function">EXT:DRIBBLE-STREAM</code></a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/complete.lisp"><code class="filename">src/complete.lisp</code></a></span></dt><dd>implements completion, see <a href="#terminal" title="21.2.&#xA0;Terminal interaction">Section 21.2, “Terminal interaction”</a>.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/describe.lisp"><code class="filename">src/describe.lisp</code></a></span></dt><dd>implements functions <a href="impnotes.html#describe" class="olink"><code class="function">DESCRIBE</code></a>, <a href="impnotes.html#apropos" class="olink"><code class="function">APROPOS</code></a>,
   <a href="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html" target="_top"><code class="function">APROPOS-LIST</code></a></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/trace.lisp"><code class="filename">src/trace.lisp</code></a></span></dt><dd><a href="#trace" title="25.2.5.&#xA0;Macro TRACE">tracer</a>
</dd><dt><a id="macros3-lisp"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/macros3.lisp"><code class="filename">src/macros3.lisp</code></a> (optional)</span></dt><dd>the macros <a href="#letf" title="30.11.2.&#xA0;Macros EXT:LETF &amp; EXT:LETF*"><code class="function">EXT:LETF</code></a>, <a href="#letf" title="30.11.2.&#xA0;Macros EXT:LETF &amp; EXT:LETF*"><code class="function">EXT:LETF*</code></a> and <a href="#ethe" title="30.11.1.&#xA0;Macro EXT:ETHE"><code class="function">EXT:ETHE</code></a>
</dd><dt><a id="config-lisp"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/config.lisp"><code class="filename">src/config.lisp</code></a></span></dt><dd><p>(user written) site-dependent configuration,
   may be a link to one of the following:</p><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/cfgsunux.lisp"><code class="filename">src/cfgsunux.lisp</code></a></span></dt><dd>for <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>, using SunOS
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/cfgunix.lisp"><code class="filename">src/cfgunix.lisp</code></a></span></dt><dd>for any other <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/cfgwin32.lisp"><code class="filename">src/cfgwin32.lisp</code></a></span></dt><dd>for the <a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a>
    </dd></dl></div><p>
   See <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior">Section 30.12, “Customizing <span><strong class="command">CLISP</strong></span> behavior”</a>.</p></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/compiler.lisp"><code class="filename">src/compiler.lisp</code></a></span></dt><dd>compiles Lisp code to <a href="impnotes.html#bytecode" class="olink">bytecode</a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/disassem.lisp"><code class="filename">src/disassem.lisp</code></a></span></dt><dd>the function <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><code class="function">DISASSEMBLE</code></a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/defs2.lisp"><code class="filename">src/defs2.lisp</code></a></span></dt><dd>miscellaneous [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] definitions
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/loop.lisp"><code class="filename">src/loop.lisp</code></a></span></dt><dd>implements the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]-compatible <a href="http://www.lisp.org/HyperSpec/Body/mac_loop.html" target="_top"><code class="function">LOOP</code></a> macro
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos.lisp"><code class="filename">src/clos.lisp</code></a></span></dt><dd><p>loads the various parts of the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>:</p><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-package.lisp"><code class="filename">src/clos-package.lisp</code></a></span></dt><dd>declares the imports and exports of the
     <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a> package</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-macros.lisp"><code class="filename">src/clos-macros.lisp</code></a></span></dt><dd>defines some internal macros used by the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>
     implementation</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-class0.lisp"><code class="filename">src/clos-class0.lisp</code></a></span></dt><dd>defines the <code class="classname">class-version</code>
     structure</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-metaobject1.lisp"><code class="filename">src/clos-metaobject1.lisp</code></a></span></dt><dd>defines the <a href="#mop-metaobjects" title="29.1.2.1.&#xA0;Metaobjects"><code class="classname">CLOS:METAOBJECT</code></a> class
  </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-slotdef1.lisp"><code class="filename">src/clos-slotdef1.lisp</code></a></span></dt><dd>defines the <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><code class="classname">CLOS:SLOT-DEFINITION</code></a> class and its
     subclasses</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-slotdef2.lisp"><code class="filename">src/clos-slotdef2.lisp</code></a></span></dt><dd>defines <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> methods for
     <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><code class="classname">CLOS:SLOT-DEFINITION</code></a> and its subclasses</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-slotdef3.lisp"><code class="filename">src/clos-slotdef3.lisp</code></a></span></dt><dd>defines the generic functions that can be used on
     <a href="#mop-sd" title="29.1.4.&#xA0;Slot Definitions"><code class="classname">CLOS:SLOT-DEFINITION</code></a> objects</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-stablehash1.lisp"><code class="filename">src/clos-stablehash1.lisp</code></a></span></dt><dd>defines the <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="classname">EXT:STANDARD-STABLEHASH</code></a> class
  </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-stablehash2.lisp"><code class="filename">src/clos-stablehash2.lisp</code></a></span></dt><dd>defines <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> methods for
     <a href="#make-hash" title="18.1.1.&#xA0;Function MAKE-HASH-TABLE"><code class="classname">EXT:STANDARD-STABLEHASH</code></a></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-specializer1.lisp"><code class="filename">src/clos-specializer1.lisp</code></a></span></dt><dd>defines the <a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><code class="classname">CLOS:SPECIALIZER</code></a> class and its subclasses
  </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-specializer2.lisp"><code class="filename">src/clos-specializer2.lisp</code></a></span></dt><dd>defines <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> methods for
     <a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><code class="classname">CLOS:SPECIALIZER</code></a> and its subclasses</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-specializer3.lisp"><code class="filename">src/clos-specializer3.lisp</code></a></span></dt><dd>defines the generic functions that can be used on
     <a href="#mop-mo-spec" title="29.1.2.1.5.&#xA0;Specializers"><code class="classname">CLOS:SPECIALIZER</code></a> objects</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-class1.lisp"><code class="filename">src/clos-class1.lisp</code></a></span></dt><dd>defines the <code class="classname">potential-class</code>
     class and its subclasses</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-class2.lisp"><code class="filename">src/clos-class2.lisp</code></a></span></dt><dd>implements the mapping from class names to classes
  </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-class3.lisp"><code class="filename">src/clos-class3.lisp</code></a></span></dt><dd>implements the <a href="http://www.lisp.org/HyperSpec/Body/mac_defclass.html" target="_top"><code class="function">DEFCLASS</code></a> macro, class definition
     and class redefinition</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-class4.lisp"><code class="filename">src/clos-class4.lisp</code></a></span></dt><dd>defines <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> methods
     for <code class="classname">potential-class</code> and its
     subclasses</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-class5.lisp"><code class="filename">src/clos-class5.lisp</code></a></span></dt><dd>implements the special logic of <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_make-instance.html" target="_top"><code class="function">MAKE-INSTANCE</code></a>,
     <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> etc.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-class6.lisp"><code class="filename">src/clos-class6.lisp</code></a></span></dt><dd>defines the generic functions that can be used on
     <code class="classname">potential-class</code> objects
  </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-method1.lisp"><code class="filename">src/clos-method1.lisp</code></a></span></dt><dd>defines the <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a> class and its subclasses
  </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-method2.lisp"><code class="filename">src/clos-method2.lisp</code></a></span></dt><dd>implements the bulk of <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>
  </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-method3.lisp"><code class="filename">src/clos-method3.lisp</code></a></span></dt><dd>defines the generic functions that can be used on
     <a href="http://www.lisp.org/HyperSpec/Body/syscla_method.html" target="_top"><code class="classname">METHOD</code></a> objects</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-method4.lisp"><code class="filename">src/clos-method4.lisp</code></a></span></dt><dd>makes generic functions on <a href="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html" target="_top"><code class="classname">STANDARD-METHOD</code></a>
     objects extensible</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-methcomb1.lisp"><code class="filename">src/clos-methcomb1.lisp</code></a></span></dt><dd>defines the <a href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html" target="_top"><code class="classname">METHOD-COMBINATION</code></a> class
  </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-methcomb2.lisp"><code class="filename">src/clos-methcomb2.lisp</code></a></span></dt><dd>implements method combination (part 2 of generic
     function dispatch and execution) and the <a href="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html" target="_top"><code class="function">DEFINE-METHOD-COMBINATION</code></a> macro
  </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-methcomb3.lisp"><code class="filename">src/clos-methcomb3.lisp</code></a></span></dt><dd>defines <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> methods for
     <a href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html" target="_top"><code class="classname">METHOD-COMBINATION</code></a></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-methcomb4.lisp"><code class="filename">src/clos-methcomb4.lisp</code></a></span></dt><dd>makes generic functions on <a href="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html" target="_top"><code class="classname">METHOD-COMBINATION</code></a>
     objects extensible</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-genfun1.lisp"><code class="filename">src/clos-genfun1.lisp</code></a></span></dt><dd>defines the <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a> class and its
     metaclass, superclass and subclasses</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-genfun2a.lisp"><code class="filename">src/clos-genfun2a.lisp</code></a></span></dt><dd>implements part 1 of generic function dispatch and
     execution</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-genfun2b.lisp"><code class="filename">src/clos-genfun2b.lisp</code></a></span></dt><dd>implements part 3 of generic function dispatch and
     execution</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-genfun3.lisp"><code class="filename">src/clos-genfun3.lisp</code></a></span></dt><dd>implements creation of generic function objects,
     <a href="http://www.lisp.org/HyperSpec/Body/mac_defmethod.html" target="_top"><code class="function">DEFMETHOD</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/mac_defgeneric.html" target="_top"><code class="function">DEFGENERIC</code></a></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-genfun4.lisp"><code class="filename">src/clos-genfun4.lisp</code></a></span></dt><dd>defines <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_ini_ize-instance.html" target="_top"><code class="function">INITIALIZE-INSTANCE</code></a> methods for
     <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a> and its subclasses</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-genfun5.lisp"><code class="filename">src/clos-genfun5.lisp</code></a></span></dt><dd>makes generic functions on <a href="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html" target="_top"><code class="classname">GENERIC-FUNCTION</code></a>
     objects extensible</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-slots1.lisp"><code class="filename">src/clos-slots1.lisp</code></a></span></dt><dd>implements low-level slot access, <a href="http://www.lisp.org/HyperSpec/Body/mac_with-slots.html" target="_top"><code class="function">WITH-SLOTS</code></a>,
     <a href="http://www.lisp.org/HyperSpec/Body/mac_with-accessors.html" target="_top"><code class="function">WITH-ACCESSORS</code></a></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-slots2.lisp"><code class="filename">src/clos-slots2.lisp</code></a></span></dt><dd>defines the generic functions that deal with slot access
  </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-dependent.lisp"><code class="filename">src/clos-dependent.lisp</code></a></span></dt><dd>implements notification from metaobjects to
     dependent objects</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-print.lisp"><code class="filename">src/clos-print.lisp</code></a></span></dt><dd>implements the function <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_print-object.html" target="_top"><code class="function">PRINT-OBJECT</code></a>
  </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clos-custom.lisp"><code class="filename">src/clos-custom.lisp</code></a></span></dt><dd>provides user customization of the <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a>
  </dd></dl></div></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/condition.lisp"><code class="filename">src/condition.lisp</code></a></span></dt><dd>implements the <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> Condition System (<a href="http://www.lisp.org/HyperSpec/Body/chap-9.html" target="_top"><span><strong class="command">CLCS</strong></span></a>)
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/gstream.lisp"><code class="filename">src/gstream.lisp</code></a></span></dt><dd>generic stream default methods
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/foreign1.lisp"><code class="filename">src/foreign1.lisp</code></a></span></dt><dd><a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> interface
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/screen.lisp"><code class="filename">src/screen.lisp</code></a></span></dt><dd>the screen access package, see <a href="#screen" title="31.1.&#xA0;Random Screen Access">Section 31.1, “Random Screen Access”</a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/edit.lisp"><code class="filename">src/edit.lisp</code></a>
  (optional)</span></dt><dd>the screen editor (<a href="http://www.lisp.org/HyperSpec/Body/fun_ed.html" target="_top"><code class="function">ED</code></a>), <a href="#uncompile" title="25.2.2.&#xA0;Function EXT:UNCOMPILE"><code class="function">EXT:UNCOMPILE</code></a>
</dd><dt><a id="inspect-lisp"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/inspect.lisp"><code class="filename">src/inspect.lisp</code></a></span></dt><dd>implements <a href="#inspect" title="25.2.6.&#xA0;Function INSPECT"><code class="function">INSPECT</code></a> (tty and <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> frontends)
</dd><dt><a id="clhs-lisp"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/clhs.lisp"><code class="filename">src/clhs.lisp</code></a></span></dt><dd>implements <a href="#open-http" title="30.11.8.&#xA0;Function EXT:OPEN-HTTP and&#10;  macro EXT:WITH-HTTP-INPUT"><code class="function">EXT:OPEN-HTTP</code></a>, <a href="#browse-url" title="30.11.9.&#xA0;Function EXT:BROWSE-URL"><code class="function">EXT:BROWSE-URL</code></a>
</dd><dt><a id="exporting-lisp"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/exporting.lisp"><code class="filename">src/exporting.lisp</code></a></span></dt><dd>Macros that export their definienda,
   see <a href="#exporting" title="31.2.7.3.&#xA0;Exporting">Section 31.2.7.3, “Exporting”</a>.</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/threads.lisp"><code class="filename">src/threads.lisp</code></a></span></dt><dd>MT interface</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/spanish.lisp"><code class="filename">src/spanish.lisp</code></a><br /></span><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/german.lisp"><code class="filename">src/german.lisp</code></a><br /></span><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/french.lisp"><code class="filename">src/french.lisp</code></a><br /></span><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/russian.lisp"><code class="filename">src/russian.lisp</code></a><br /></span><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/dutch.lisp"><code class="filename">src/dutch.lisp</code></a></span></dt><dd><a href="#i18n" title="30.4.&#xA0;Internationalization of CLISP">i18n</a> user messages
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="src-ext-mod"></a>33.3.4. External Modules</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/"><code class="filename">modules/</code></a></span></dt><dd>individual external module sources
</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="src-doc"></a>33.3.5. Documentation</h3></div></div></div><div class="variablelist"><dl><dt><a id="src-news"></a><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/NEWS"><code class="filename">src/NEWS</code></a></span></dt><dd>the list of the user-visible changes
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/_README"><code class="filename">src/_README</code></a></span></dt><dd><p>master for the distribution's README</p><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/_README.en"><code class="filename">src/_README.en</code></a><br /></span><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/_README.de"><code class="filename">src/_README.de</code></a><br /></span><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/_README.es"><code class="filename">src/_README.es</code></a></span></dt><dd>translations of
       <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/_README"><code class="filename">src/_README</code></a>
    </dd></dl></div></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/clisp.xml.in"><code class="filename">doc/clisp.xml.in</code></a></span></dt><dd><a href="http://www.docbook.org/" target="_top">DocBook</a>/<a href="http://www.w3.org/XML/" target="_top">XML</a> sources for the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
   <a href="clisp.html#clisp" class="olink">manual page</a>
</dd><dt><span class="term"><code class="filename"><em class="replaceable"><code>build-dir</code></em>/clisp.1</code></span></dt><dd>the platform-specific
   <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/man.html"><span><strong class="command">man</strong></span></a> manual page,
   generated from <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/clisp.xml.in"><code class="filename">doc/clisp.xml.in</code></a>
   at <span class="emphasis"><em>build</em></span> time</dd><dt><span class="term"><code class="filename"><em class="replaceable"><code>build-dir</code></em>/clisp.html</code></span></dt><dd>the platform-specific <a href="http://www.w3.org/MarkUp/" target="_top">HTML</a> manual page,
   generated from <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/clisp.xml.in"><code class="filename">doc/clisp.xml.in</code></a>
   at <span class="emphasis"><em>build</em></span> time</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/impnotes.xml.in"><code class="filename">doc/impnotes.xml.in</code></a></span></dt><dd><p>the master <a href="http://www.docbook.org/" target="_top">DocBook</a>/<a href="http://www.w3.org/XML/" target="_top">XML</a> file for these
   implementation notes; includes the following files</p><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/cl-ent.xml"><code class="filename">doc/cl-ent.xml</code></a></span></dt><dd><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>-independent general <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>-related entities
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/clhs-ent.xml"><code class="filename">doc/clhs-ent.xml</code></a></span></dt><dd>generated list of [<span class="citation"><a href="#CLHS">Common Lisp HyperSpec</a></span>] entities
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/impent.xml"><code class="filename">doc/impent.xml</code></a></span></dt><dd><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>-specific entities
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/unix-ent.xml"><code class="filename">doc/unix-ent.xml</code></a></span></dt><dd><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a>-related entities
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/mop-ent.xml"><code class="filename">doc/mop-ent.xml</code></a></span></dt><dd><a href="#mop-chap" title="29.1.&#xA0;Meta-Object Protocol">Meta-Object Protocol</a>-related entities
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/impbody.xml"><code class="filename">doc/impbody.xml</code></a></span></dt><dd>most of <a href="#clhs-chapters" title="Part&#xA0;I.&#xA0;Chapters or the Common Lisp HyperSpec">Part I, “Chapters or the Common Lisp HyperSpec”</a>
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/impissue.xml"><code class="filename">doc/impissue.xml</code></a></span></dt><dd><a href="#issues" title="Chapter&#xA0;28.&#xA0;X3J13 Issue Index&#10;   [CLHS-ic]">Chapter 28, <i>X3J13 Issue Index
   [CLHS-ic]</i></a>
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/gray.xml"><code class="filename">doc/gray.xml</code></a></span></dt><dd><a href="#gray" title="29.2.&#xA0;Gray streams">Section 29.2, “Gray streams”</a>
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/mop.xml"><code class="filename">doc/mop.xml</code></a></span></dt><dd><a href="#mop-chap" title="29.1.&#xA0;Meta-Object Protocol">Section 29.1, “Meta-Object Protocol”</a>
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/impext.xml"><code class="filename">doc/impext.xml</code></a></span></dt><dd><a href="#ext-p-indep" title="Chapter&#xA0;30.&#xA0;Platform Independent Extensions">Chapter 30, <i>Platform Independent Extensions</i></a> and
       <a href="#ext-platform" title="Chapter&#xA0;31.&#xA0;Platform Specific Extensions">Chapter 31, <i>Platform Specific Extensions</i></a></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/impbyte.xml"><code class="filename">doc/impbyte.xml</code></a></span></dt><dd>this <a href="#internals" title="Part&#xA0;III.&#xA0;Internals of the CLISP Implementation">Part III, “Internals of the <span><strong class="command">CLISP</strong></span> Implementation”</a>
    </dd><dt><span class="term"><code class="filename">modules/**/*.xml</code></span></dt><dd>individual external module documentation
    </dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/Symbol-Table.text"><code class="filename">doc/Symbol-Table.text</code></a></span></dt><dd>the mapping between lisp symbols and element IDs
       in these notes (see <a href="impnotes.html#describe" class="olink"><code class="function">DESCRIBE</code></a>).
    </dd></dl></div></dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/impnotes.html"><code class="filename">doc/impnotes.html</code></a></span></dt><dd>these <a href="http://www.w3.org/MarkUp/" target="_top">HTML</a> implementation notes,
   generated from <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/impnotes.xml.in"><code class="filename">doc/impnotes.xml.in</code></a>
   at <span class="emphasis"><em>release</em></span> time</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="src-i18n"></a>33.3.6. Internationalization</h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><code class="filename">src/po/*.pot</code></span></dt><dd>list of translatable messages (“<span class="quote">portable
    object template</span>”)</dd><dt><span class="term"><code class="filename">src/po/*.po</code></span></dt><dd>translated messages (“<span class="quote">portable objects</span>”)
</dd><dt><span class="term"><code class="filename">src/po/*.gmo</code></span></dt><dd>translated messages (“<span class="quote"><a href="http://www.gnu.org" target="_top">GNU</a> format message
    objects</span>”)</dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="src-conf-unix"></a>33.3.7. Automatic configuration on <a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a></h3></div></div></div><div class="variablelist"><dl><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/configure.in"><code class="filename">src/configure.in</code></a></span></dt><dd>lists features to be checked
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/autoconf/autoconf.m4"><code class="filename">src/autoconf/autoconf.m4</code></a></span></dt><dd><span><strong class="command">autoconf</strong></span>'s driver macros.
   Part of <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/autoconf/" target="_top">autoconf</a> 2.57</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/m4/"><code class="filename">src/m4/</code></a></span></dt><dd>a repertoire of features.
   Use with <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/software/autoconf/" target="_top">autoconf</a> 2.57</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/configure"><code class="filename">src/configure</code></a></span></dt><dd>configuration script, generated from
   <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/configure.in"><code class="filename">src/configure.in</code></a>
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/intparam.c"><code class="filename">src/intparam.c</code></a></span></dt><dd>figures out some machine parameters (word size,
   endianness etc.)</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/floatparam.c"><code class="filename">src/floatparam.c</code></a></span></dt><dd>figures out some floating point arithmetics parameters
   (rounding, epsilons etc.)</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/unixconf.h.in"><code class="filename">src/unixconf.h.in</code></a></span></dt><dd>header file master, generated
   from <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/configure.in"><code class="filename">src/configure.in</code></a>.
   <code class="filename"><em class="replaceable"><code>build-dir</code></em>/unixconf.h</code>
   contains the values of the features
   discovered by <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/configure"><code class="filename">src/configure</code></a>.
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/makemake.in"><code class="filename">src/makemake.in</code></a></span></dt><dd>makefile construction script master
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/_clisp.c"><code class="filename">src/_clisp.c</code></a></span></dt><dd>master for the distribution's driver program
</dd><dt><span class="term"><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/_distmakefile"><code class="filename">src/_distmakefile</code></a></span></dt><dd>master for the distribution's Makefile
</dd></dl></div></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="gc"></a>Chapter 34. Overview of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>'s Garbage Collection</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#internals-intro">34.1. Introduction</a></span></dt><dt><span class="section"><a href="#lisp-obj-in-c">34.2. Lisp objects in <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="section"><a href="#typecodes">34.3. Object Pointer Representations</a></span></dt><dt><span class="section"><a href="#memory-models">34.4. Memory Models</a></span></dt><dt><span class="section"><a href="#gc-safety">34.5. The burden of garbage-collection upon the rest of <span><strong class="command">CLISP</strong></span></a></span></dt><dd><dl><dt><span class="section"><a href="#gc-moves-data">34.5.1. <span class="type">object</span> pointer invalidation</a></span></dt><dt><span class="section"><a href="#gc-mem-prot">34.5.2. Memory protection</a></span></dt></dl></dd><dt><span class="section"><a href="#foreign-pointers">34.6. Foreign Pointers</a></span></dt></dl></div><div class="abstract"><p class="title"><b>Abstract</b></p><p>These are internals, which are of interest only to the
   <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> developers.  If you are not subscribed to <code class="email">&lt;<a href="mailto:clisp-devel@lists.sourceforge.net">clisp-devel@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-devel" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-devel</a>), this
   chapter is probably not for you.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="internals-intro"></a>34.1. Introduction</h2></div></div></div><p>Knowing that most <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"><code class="function">malloc</code></a> implementations are buggy and/or slow,
and because <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> needs to perform <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has its
own memory management subsystem in files <code class="filename">src/spvw*.d</code>,
see <a href="#src-modules" title="33.3.1.2.&#xA0;Internal C Modules">Section 33.3.1.2, “Internal <span><strong class="command">C</strong></span> Modules”</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="lisp-obj-in-c"></a>34.2. Lisp objects in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><div class="orderedlist"><p class="title"><b>Three kinds of storage are distinguished:</b></p><ol type="1"><li><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> data (the “<span class="quote">heap</span>”), i.e. storage
  which contains <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a>s and is managed by the <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>or.
 </li><li><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> stack (called <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>), contains <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
  <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a>s visible to the <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>or</li><li><a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> data (including program text, data,
  <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"><code class="function">malloc</code></a>ed memory)</li></ol></div><p>A <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> object is one word, containing a tag (partial type
information) and either immediate data or a pointer to storage.
Pointers to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> data have tag = <code class="literal">machine_type</code> = 0,
pointers to <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> stack have tag = <code class="literal">system_type</code>,
most other pointers point to <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> data.</p><div class="variablelist"><a id="immediate-o"></a><p class="title"><b>Immediate objects</b></p><dl><dt><span class="term">32-bit CPU</span></dt><dd><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a></td></tr><tr><td><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a></td></tr><tr><td><a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a></td></tr></table></dd><dt><span class="term">64-bit CPU</span></dt><dd><p>In addition to the above, </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SINGLE-FLOAT</code></a> (with <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">TYPECODES</code></strong></span></a>)</td></tr></table></dd></dl></div><p>Let us turn to those <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects that consume regular <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
memory.  Every <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> object has a size which is determined when the
object is allocated (using one of the <code class="function">allocate_*()</code>
routines). The size can be computed from the type tag and - if necessary
- the length field of the object's header. The length field always
contains the number of elements of the object. The number of bytes is
given by the function <code class="function">objsize()</code>.</p><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects which contain exactly 2 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects
(i.e. <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a>es, <a href="http://www.lisp.org/HyperSpec/Body/syscla_complex.html" target="_top"><code class="classname">COMPLEX</code></a> numbers, <a href="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html" target="_top"><code class="classname">RATIO</code></a>s) are
stored in a separate area and occupy 2 words each.
All other <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects have “<span class="quote">varying</span>” length
(more precisely, not a fixed length) and include a word for <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion
purposes at their beginning.</p><p>The garbage collector is invoked by
 <code class="function">allocate_*()</code> calls according to certain heuristics.
It marks all objects which are "live" (may be reached from the "roots"),
compacts these objects and unmarks them.  Non-live objects are lost;
their storage is reclaimed.</p><p>2-pointer objects are compacted by a simple hole-filling
algorithm: fill the left-most object into the right-most hole, and so
on, until the objects are contiguous at the right and the hole is
contiguous at the left.</p><p>Variable-length objects are compacted by sliding them down (their
address decreases).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="typecodes"></a>34.3. Object Pointer Representations</h2></div></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> implements two ways of representing object pointers.
(An object pointer, <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a>, contains a
pointer to the memory location of the object, or - for <a href="#immediate-o">immediate object</a>
 - all bits of the object itself.)
Both of them have some things in common:
</p><div class="itemizedlist"><ul type="disc"><li>There is a distinction between <a href="#immediate-o">immediate object</a>s
   (<a href="http://www.lisp.org/HyperSpec/Body/syscla_character.html" target="_top"><code class="classname">CHARACTER</code></a>s, <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>s, <a href="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html" target="_top"><code class="classname">SHORT-FLOAT</code></a>s, etc) and
   heap allocated objects.</li><li>All object pointers are typed, i.e. contain a few
   bits of information about the type of the pointed-to object. At a
   minimum, these bits must allow to distinguish immediate and
   heap-allocated objects.</li><li>Not all of the type information is contained in the
   object pointer.  For example, <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> objects can change their type
   when <a href="http://www.lisp.org/HyperSpec/Body/stagenfun_change-class.html" target="_top"><code class="function">CHANGE-CLASS</code></a> is called. To avoid scanning all the heap for
   references when this happens, the class information is stored in the
   heap allocated object, not in the object pointer.</li></ul></div><p>The <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">HEAPCODES</code></strong></span></a> object representation has a minimum of type
bits in the object pointer, namely, 2 bits. They allow to distinguish
<a href="#immediate-o">immediate object</a>s (which have some more type bits), <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a>es (which
have no type bits in the heap, since they occupy just two words in the
heap, with no header), other heap objects (many, from <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a>s
to <a href="#fptr"><code class="classname">FFI:FOREIGN-POINTER</code></a>s), and <span class="type">Subr</span>s. Most object types are
distinguished by looking a the <em class="structfield"><code>rectype</code></em> field
in the header of the heap object.</p><p>The <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">TYPECODES</code></strong></span></a> object representation has about two dozen of types
encoded in 6 or 7 bits in the object pointer.
Typically these are the upper 8 bits of a word (on a 32-bit machine) or
the upper 16 bits or 32 bits of a word (on a 64-bit machine).
The particular values of the typecodes allow many common operations to
be performed with a single bit test (e.g. <a href="http://www.lisp.org/HyperSpec/Body/fun_consp.html" target="_top"><code class="function">CONSP</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/fun_minuspcm_plusp.html" target="_top"><code class="function">MINUSP</code></a> for a
<a href="http://www.lisp.org/HyperSpec/Body/syscla_real.html" target="_top"><code class="classname">REAL</code></a> are bit tests) or range check.
However, the <em class="structfield"><code>rectype</code></em> field still exists for
many types, because there are many built-in types which do not need a
particularly fast type test.</p><p>Which object representation is chosen is decided at build time
depending on the available preprocessor definitions. You can define
<a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">TYPECODES</code></strong></span></a> or <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">HEAPCODES</code></strong></span></a> to force one or the other.</p><p>One might expect that <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">TYPECODES</code></strong></span></a> is faster than <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">HEAPCODES</code></strong></span></a>
because it does not need to make as many memory accesses. This effect
is, however, hardly measurable in practice (certainly not more than 5%
faster).  Apparently because, first, the situations where the type of an
object is requested but then the object is not looked into are rare.
It is much more common to look into an object, regardless of its type.
Second, due to the existence of data caches in the CPU, accessing a heap
location twice, once for the type test and then immediately afterwards
for the data, is not significantly slower than just accessing the
data.</p><p><a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">TYPECODES</code></strong></span></a> is problematic on 32-bit machines, when you want to
use more than 16 MB of memory, because the type bits (at bit 31..24)
interfere with the bits of a heap address. For this reason,
<a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">HEAPCODES</code></strong></span></a> is the default on 32-bit platforms.</p><p><a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">HEAPCODES</code></strong></span></a> is problematic on platforms whose object alignment
is less than 4. This affects only the mc680x0 CPU; however, here the
alignment can usually be guaranteed through some <a href="http://gcc.gnu.org/" target="_top"><span><strong class="command">gcc</strong></span></a> options.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="memory-models"></a>34.4. Memory Models</h2></div></div></div><p>There are 6 memory models. Which one is used, depends on the
operating system and is determined at build time.</p><div class="variablelist"><p class="title"><b>Memory Models</b></p><dl><dt><span class="term">SPVW_MIXED_BLOCKS_OPPOSITE</span></dt><dd><p>The heap consists of one block of fixed length
  (allocated at startup).
  The variable-length objects are allocated from the left, the 2-pointer
  objects are allocated from the right.
  There is a hole between them.
  When the hole shrinks to 0, <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> is invoked.
  <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> slides the variable-length objects to the left and concentrates
  the 2-pointer objects at the right end of the block again.
  When no more room is available, some reserve area beyond the right end
  of the block is halved, and the 2-pointer objects are moved to the
  right accordingly.
  </p><div class="variablelist"><p class="title"><b>Advantages and Disadvantages</b></p><table border="0"><col align="left" valign="top" /><tbody><tr><td><span class="term">(+)</span></td><td>Simple management.
    </td></tr><tr><td><span class="term">(+)</span></td><td>No fragmentation at all.
    </td></tr><tr><td><span class="term">(-)</span></td><td>The total heap size is limited.
    </td></tr></tbody></table></div><p>
 </p></dd><dt><span class="term">SPVW_MIXED_BLOCKS_OPPOSITE &amp; TRIVIALMAP_MEMORY</span></dt><dd><p>The heap consists of two big blocks, one for
  variable-length objects and one for 2-pointer objects.
  The former one has a hole to the right and is extensible to the right,
  the latter one has a hole to the left and is extensible to the left.
  Similar to the previous model, except that the hole is unmapped.
  </p><div class="variablelist"><p class="title"><b>Advantages and Disadvantages</b></p><table border="0"><col align="left" valign="top" /><tbody><tr><td><span class="term">(+)</span></td><td>Total heap size grows depending on the
     application's needs.</td></tr><tr><td><span class="term">(+)</span></td><td>No fragmentation at all.
    </td></tr><tr><td><span class="term">(*)</span></td><td>Works only when SINGLEMAP_MEMORY is
     possible as well.</td></tr></tbody></table></div><p>
 </p></dd><dt><span class="term">SPVW_MIXED_BLOCKS_STAGGERED &amp; TRIVIALMAP_MEMORY</span></dt><dd><p>The heap consists of two big blocks, one for
  variable-length objects and one for 2-pointer objects.
  Both have a hole to the right, but are extensible to the right.
  </p><div class="variablelist"><p class="title"><b>Advantages and Disadvantages</b></p><table border="0"><col align="left" valign="top" /><tbody><tr><td><span class="term">(+)</span></td><td>Total heap size grows depending on the
     application's needs.</td></tr><tr><td><span class="term">(+)</span></td><td>No fragmentation at all.
    </td></tr><tr><td><span class="term">(*)</span></td><td>Works only when SINGLEMAP_MEMORY is
     possible as well.</td></tr></tbody></table></div><p>
 </p></dd><dt><span class="term">SPVW_MIXED_PAGES</span></dt><dd><p>The heap consists of many small pages (usually around 8 KB).
  There are two kinds of pages: one for 2-pointer objects, one for
  variable-length objects.
  The set of all pages of a fixed kind is called a "Heap".
  Each page has its hole (free space) at its end.
  For every heap, the pages are kept sorted according to the size of
  their hole, using AVL trees.
  The <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion is invoked when the used space has grown by 25% since the
  last GC; until that point new pages are allocated from the OS.
  The GC compacts the data in each page separately:
  data is moved to the left. Emptied pages are given back to the OS.
  If the holes then make up more than 25% of the occupied storage, a
  second GC turn moves objects across pages, from nearly empty ones to
  nearly full ones, with the aim to free as many pages as possible.
  </p><div class="variablelist"><p class="title"><b>Advantages and Disadvantages</b></p><table border="0"><col align="left" valign="top" /><tbody><tr><td><span class="term">(-)</span></td><td>Every allocation requires AVL tree operations,
     thus slower</td></tr><tr><td><span class="term">(+)</span></td><td>Total heap size grows depending on the
     application's needs.</td></tr><tr><td><span class="term">(+)</span></td><td>Works on operating systems which do not provide
     large contiguous areas.</td></tr></tbody></table></div><p>
 </p></dd><dt><span class="term">SPVW_PURE_PAGES</span></dt><dd><p>Just like SPVW_MIXED_PAGES, except that every page
  contains data of only a single type tag, i.e. there is a Heap for
  every type tag.
  </p><div class="variablelist"><p class="title"><b>Advantages and Disadvantages</b></p><table border="0"><col align="left" valign="top" /><tbody><tr><td><span class="term">(-)</span></td><td>Every allocation requires AVL tree operations,
     thus slower</td></tr><tr><td><span class="term">(+)</span></td><td>Total heap size grows depending on the
     application's needs.</td></tr><tr><td><span class="term">(+)</span></td><td>Works on operating systems which do not provide
     large contiguous areas.</td></tr><tr><td><span class="term">(-)</span></td><td>More fragmentation because objects of different
    type never fit into the same page.</td></tr></tbody></table></div></dd><dt><span class="term">SPVW_PURE_BLOCKS</span></dt><dd><p>There is a big block of storage for each type tag.
  Each of these blocks has its data to the left and the hole to the
  right, but these blocks are extensible to the right (because there is
  enough room between them).
  A <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion is triggered when the allocation amount since the
  last GC reaches 50% of the amount of used space at the last GC, but at
  least 512 KB.
  The <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion cleans up each block separately: data is moved left.
  </p><div class="variablelist"><p class="title"><b>Advantages and Disadvantages</b></p><table border="0"><col align="left" valign="top" /><tbody><tr><td><span class="term">(+)</span></td><td>Total heap size grows depending on the
     application's needs.</td></tr><tr><td><span class="term">(+)</span></td><td>No 16 MB total size limit.
    </td></tr><tr><td><span class="term">(*)</span></td><td>Works only in combination with SINGLEMAP_MEMORY.
    </td></tr></tbody></table></div><p>
 </p></dd></dl></div><p>In page based memory models, an object larger than a page is the
only object carried by its pages.
There are no small objects in pages belonging to a big object.</p><p>The following combinations of memory model and
 <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/mmap.html"><code class="function">mmap</code></a> tricks are possible (the number
 indicates the order in which the respective models have been
 developed):</p><div class="table"><a id="mem-models-comb-typecodes"></a><p class="title"><b>Table 34.1. Memory models with <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">TYPECODES</code></strong></span></a></b></p><table summary="Memory models with TYPECODES" border="1"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center"><a href="#MMC-A">A</a></th><th align="center"><a href="#MMC-B">B</a></th><th align="center"><a href="#MMC-C">C</a></th><th align="center"><a href="#MMC-D">D</a></th><th align="center"><a href="#MMC-E">E</a></th></tr></thead><tbody><tr><td align="center">SPVW_MIXED_BLOCKS_OPPOSITE</td><td align="center">1</td><td align="center">10</td><td align="center"> </td><td align="center">2</td><td align="center">9</td></tr><tr><td align="center">SPVW_MIXED_BLOCKS_STAGGERED</td><td align="center"> </td><td align="center">7</td><td align="center"> </td><td align="center"> </td><td align="center">8</td></tr><tr><td align="center">SPVW_PURE_BLOCKS</td><td align="center"> </td><td align="center"> </td><td align="center">5</td><td align="center"> </td><td align="center">6</td></tr><tr><td align="center">SPVW_MIXED_PAGES</td><td align="center">3</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="center">SPVW_PURE_PAGES</td><td align="center">4</td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div><div class="table"><a id="mem-models-comb-heapcodes"></a><p class="title"><b>Table 34.2. Memory models with <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="strong"><strong><code class="option">HEAPCODES</code></strong></span></a></b></p><table summary="Memory models with HEAPCODES" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th align="center"> </th><th align="center"><a href="#MMC-A">A</a></th><th align="center"><a href="#MMC-B">B</a></th><th align="center"><a href="#MMC-E">E</a></th></tr></thead><tbody><tr><td align="center">SPVW_MIXED_BLOCKS_OPPOSITE</td><td align="center">*</td><td align="center">*</td><td align="center">*</td></tr><tr><td align="center">SPVW_MIXED_BLOCKS_STAGGERED</td><td align="center"> </td><td align="center">*</td><td align="center">*</td></tr><tr><td align="center">SPVW_MIXED_PAGES</td><td align="center">*</td><td align="center"> </td><td align="center"> </td></tr></tbody></table></div><div class="orderedlist"><p class="title"><b>Legend to
  <a href="#mem-models-comb-typecodes" title="Table&#xA0;34.1.&#xA0;Memory models with TYPECODES">Table 34.1, “Memory models with <span class="strong"><strong><code class="option">TYPECODES</code></strong></span>”</a> and
  <a href="#mem-models-comb-heapcodes" title="Table&#xA0;34.2.&#xA0;Memory models with HEAPCODES">Table 34.2, “Memory models with <span class="strong"><strong><code class="option">HEAPCODES</code></strong></span>”</a></b></p><ol type="A"><li><a id="MMC-A"></a>no MAP_MEMORY</li><li><a id="MMC-B"></a>TRIVIALMAP_MEMORY</li><li><a id="MMC-C"></a>SINGLEMAP_MEMORY</li><li><a id="MMC-D"></a>MULTIMAP_MEMORY</li><li><a id="MMC-E"></a>GENERATIONAL_GC</li></ol></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gc-safety"></a>34.5. The burden of <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion upon the rest of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#gc-moves-data">34.5.1. <span class="type">object</span> pointer invalidation</a></span></dt><dt><span class="section"><a href="#gc-mem-prot">34.5.2. Memory protection</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gc-moves-data"></a>34.5.1. <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a> pointer invalidation</h3></div></div></div><p>Every subroutine marked with <span class="emphasis"><em>can trigger GC</em></span>
may invoke <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion.
<a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> moves all the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> non-<a href="#immediate-o">immediate object</a>s and updates the pointers.
But the <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> looks only on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> and not in the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
variables. (Anything else would not be portable.)
Therefore at every "unsafe" point, i.e. every call to such a subroutine,
all the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> variables of type <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a>
<span class="strong"><strong>MUST BE ASSUMED TO BECOME GARBAGE</strong></span>.
(Except for <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a>s that are known to be unmovable,
 e.g. immediate data or <span class="type">Subr</span>s.)
Pointers inside <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> data (e.g. to the characters of a <a href="http://www.lisp.org/HyperSpec/Body/syscla_string.html" target="_top"><code class="classname">STRING</code></a>
or to the elements of a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a>) become
<span class="strong"><strong>INVALID</strong></span> as well.</p><p>The workaround is usually to allocate all the needed <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> data
first and do the rest of the computation with <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> variables,
without calling unsafe routines, and without worrying about <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>.</p><p>Run-time GC-safety checking is available when you build <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 with a C++ compiler, e.g.:
<a id="clisp-config-gxx"></a></p><pre class="screen">
<code class="prompt">$</code> CC=g++ ./configure --with-debug build-g-gxx
</pre><p>
When built like this, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/abort.html"><code class="function">abort</code></a>
when you reference GC-unsafe data after an allocation (which could have
triggered a <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion), and <a href="http://sources.redhat.com/gdb/" target="_top"><span><strong class="command">gdb</strong></span></a> will pinpoint the trouble spot.</p><p>Specifically, when <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is configured
 as <a href="#clisp-config-gxx">above</a>, there is a
global integer variable <code class="varname">alloccount</code> and the <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a>
structure contains an integer <em class="structfield"><code>allocstamp</code></em>
slot. If these two integers are not the same, the <a href="#typecodes" title="34.3.&#xA0;Object Pointer Representations"><span class="type">object</span></a> is invalid.
By playing with <a href="http://sources.redhat.com/gdb/" target="_top"><span><strong class="command">gdb</strong></span></a>, you should be able to figure out the precise spot
where an allocation increments <code class="varname">alloccount</code>
<span class="emphasis"><em>after</em></span> the object has been retrieved from a
GC-visible location.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gc-mem-prot"></a>34.5.2. Memory protection</h3></div></div></div><p>Generational <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>or uses memory protection, so when passing pointers
 into the lisp heap to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> functions, you may encounter errors
 (<code class="varname">errno</code>=<code class="constant">EFAULT</code>) unless you call
 <code class="function">handle_fault_range(protection,region_start,region_end)</code>
 on the appropriate memory region.  See files </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/unixaux.d"><code class="filename">src/unixaux.d</code></a></td></tr><tr><td><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/win32aux.d"><code class="filename">src/win32aux.d</code></a></td></tr><tr><td><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/syscalls/calls.c"><code class="filename">modules/syscalls/calls.c</code></a></td></tr><tr><td><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/modules/rawsock/rawsock.c"><code class="filename">modules/rawsock/rawsock.c</code></a></td></tr></table><p> for examples.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="foreign-pointers"></a>34.6. Foreign Pointers</h2></div></div></div><p>Pointers to <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> functions and to <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"><code class="function">malloc</code></a>ed data can be
hidden in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects of type machine_type; <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a> will not modify its
value.  But one should not dare to assume that a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> stack pointer
or the address of a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function in a shared library satisfies the
same requirements.</p><p>If another pointer is to be viewed as a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> object, it is best
to box it, e.g. in a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-bit-vector.html" target="_top"><code class="classname">SIMPLE-BIT-VECTOR</code></a> or in an
<span class="type">Fpointer</span> (using <code class="function">allocate_fpointer()</code>.)</p></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="extend"></a>Chapter 35. Extending <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#add-fun">35.1. Adding a built-in function</a></span></dt><dt><span class="section"><a href="#add-var">35.2. Adding a built-in variable</a></span></dt><dt><span class="section"><a href="#recompile">35.3. Recompilation</a></span></dt></dl></div><div class="epigraph"><p><a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> is a <span class="emphasis"><em>programmable</em></span>
  programming language.</p><div class="attribution"><span>--<span class="attribution"><a href="http://www.franz.com/~jkf/" target="_top">John
  Foderaro</a></span></span></div></div><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> can be easily extended the same way any other <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a>
 implementation can: create a lisp file with your variables, functions,
 macros, etc.; (optionally) compile it with <a href="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html" target="_top"><code class="function">COMPILE-FILE</code></a>; <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><code class="function">LOAD</code></a> it
 into a running <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, and save the <a href="impnotes.html#image" class="olink">memory image</a>.</p><p>This method does not work when you need to use some functionality
 not available in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, e.g., you want to call a <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function.
 You are urged to use <a href="#modules" title="31.2.&#xA0;External Modules">External Modules</a>
 instead of adding built-in functions.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> comes with an <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> which allows you
 to access <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> libraries in an easy way (including creating
 <a href="#dffi-make-func"><code class="function">FFI:FOREIGN-FUNCTION</code></a>s dynamically).</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="add-fun"></a>35.1. Adding a built-in function</h2></div></div></div><p>In the rare cases when you really need to modify <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
 internals and add a truly built-in function, you should read the
 <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> sources for inspiration and enlightenment, choose a file where
 your brand-new built-in function should go to, and then ...
 </p><div class="itemizedlist"><ul type="disc"><li>add the <code class="function">LISPFUN</code>
    form and the implementation there;</li><li>add the <code class="function">LISPFUN</code> header to
    file <a href="#subr-d"><code class="filename">subr.d</code></a>;</li><li>declare the function name in file
    <a href="#constsym-d"><code class="filename">constsym.d</code></a> in the appropriate package
    (probably <a href="#ext-pac"><strong class="package">“<span class="quote">EXT</span>”</strong></a>, if there is no specific package);
  </li><li>if your function accepts keyword arguments,
    then an appropriate pair of forms must be added
    to <a href="#subrkw-d"><code class="filename">subrkw.d</code></a> and you must make sure that the
    keyword symbols are declared in <a href="#constsym-d"><code class="filename">constsym.d</code></a>;
  </li><li>export your function name from the appropriate
    package in file <a href="#init-lisp"><code class="filename">init.lisp</code></a>;</li><li>when you are done, you should run
    <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/make.html"><span><strong class="command">make check-sources</strong></span></a> in your build directory:
    this will check that the definitions (source files) and the declarations
    (<a href="#subr-d"><code class="filename">subr.d</code></a>, <a href="#subrkw-d"><code class="filename">subrkw.d</code></a> and <a href="#fsubr-d"><code class="filename">fsubr.d</code></a>) are in sync.</li></ul></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>Be very careful with the <span class="emphasis"><em>GC-unsafe</em></span>
  functions!  Always remember about <a href="#gc-safety" title="34.5.&#xA0;The burden of garbage-collection upon the rest of CLISP">GC-safety</a>!</p></div><p>These instructions are intentionally terse - you are encouraged to
 use <a href="#modules" title="31.2.&#xA0;External Modules">module</a>s and/or <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a> instead of adding built-ins directly.
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="add-var"></a>35.2. Adding a built-in variable</h2></div></div></div><p>If you must be able to access the Lisp variable in the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>
 code, follow these steps:
 </p><div class="itemizedlist"><ul type="disc"><li>declare the variable name
    in <a href="#constsym-d"><code class="filename">constsym.d</code></a> in the appropriate package
    (probably <a href="#customize" title="30.12.&#xA0;Customizing CLISP behavior"><strong class="package">“<span class="quote">CUSTOM</span>”</strong></a>, if there is no specific package);
  </li><li>add a <code class="function">define_variable()</code> call
    in function <code class="function">init_symbol_values()</code>
    in file <a href="#spvw-d"><code class="filename">spvw.d</code></a>;</li><li>export your variable name from the appropriate
    package in file <a href="#init-lisp"><code class="filename">init.lisp</code></a>;</li></ul></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="recompile"></a>35.3. Recompilation</h2></div></div></div><p><span class="emphasis"><em>Any</em></span> change that forces
 <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/make.html"><span><strong class="command">make</strong></span></a> to remake <code class="filename">lisp.run</code>,
 will force recompilation of all <code class="filename">#P".lisp"</code> files and
 re-dumping of <a href="#image" title="30.2.&#xA0;Saving an Image"><code class="filename">lispinit.mem</code></a>, which may be time-consuming.  This is not
 always necessary, depending on what kind of change you introduced.
</p><p>On the other hand, if you change any of the following files:
 </p><table class="simplelist" border="0" summary="Simple list"><tr><td><a href="#constobj-d"><code class="filename">constobj.d</code></a></td></tr><tr><td><a href="#constsym-d"><code class="filename">constsym.d</code></a></td></tr><tr><td><a href="#fsubr-d"><code class="filename">fsubr.d</code></a></td></tr><tr><td><a href="#subr-d"><code class="filename">subr.d</code></a></td></tr><tr><td><a href="#subrkw-d"><code class="filename">subrkw.d</code></a></td></tr></table><p>
 your <a href="#image" title="30.2.&#xA0;Saving an Image"><code class="filename">lispinit.mem</code></a> will <span class="emphasis"><em>have</em></span> to be re-dumped.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="byte-version"></a>Warning</h3><p>If you change the signature of any
 system function mentioned in the <code class="varname">FUNTAB</code> arrays in
 file <a href="#eval-d"><code class="filename">eval.d</code></a>, all the <code class="filename">#P".fas"</code> files will
 become obsolete and will need to be recompiled.
 You will need to add a note to that effect to
 the <a href="#src-news"><code class="filename">src/NEWS</code></a> file
 and augment the object <code class="literal">version</code> in
 file <a href="#constsym-d"><code class="filename">constsym.d</code></a>.
  Please try to avoid this as much as possible.</p></div></div></div><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="bytecode"></a>Chapter 36. The <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> bytecode specification</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#byte-intro">36.1. Introduction</a></span></dt><dt><span class="section"><a href="#vm">36.2. The virtual machine</a></span></dt><dt><span class="section"><a href="#comp-fun">36.3. The structure of compiled functions</a></span></dt><dt><span class="section"><a href="#intr-struct">36.4. The general structure of the instructions</a></span></dt><dt><span class="section"><a href="#intr-set">36.5. The instruction set</a></span></dt><dd><dl><dt><span class="section"><a href="#instr-const">36.5.1. Instructions for constants</a></span></dt><dt><span class="section"><a href="#instr-lex-var">36.5.2. Instructions for lexical variables</a></span></dt><dt><span class="section"><a href="#instr-dyn-var">36.5.3. Instructions for dynamic variables</a></span></dt><dt><span class="section"><a href="#instr-stack">36.5.4. Instructions for stack operations</a></span></dt><dt><span class="section"><a href="#instr-jump">36.5.5. Instructions for control flow, jumps</a></span></dt><dt><span class="section"><a href="#instr-env">36.5.6. Instructions for lexical environment,
   creation of closures</a></span></dt><dt><span class="section"><a href="#instr-funcall">36.5.7. Instructions for function calls</a></span></dt><dt><span class="section"><a href="#instr-optkey">36.5.8. Instructions for optional
  and keyword parameters</a></span></dt><dt><span class="section"><a href="#instr-mulval">36.5.9. Instructions for multiple values</a></span></dt><dt><span class="section"><a href="#instr-block">36.5.10. Instructions for
   <code class="function">BLOCK</code> and <code class="function">RETURN-FROM</code></a></span></dt><dt><span class="section"><a href="#instr-tagbody">36.5.11. Instructions for <code class="function">TAGBODY</code> and <code class="function">GO</code></a></span></dt><dt><span class="section"><a href="#instr-catch">36.5.12. Instructions for <code class="function">CATCH</code> and <code class="function">THROW</code></a></span></dt><dt><span class="section"><a href="#instr-unwind">36.5.13. Instructions for <code class="function">UNWIND-PROTECT</code></a></span></dt><dt><span class="section"><a href="#instr-handler">36.5.14. Instructions for <code class="function">HANDLER-BIND</code></a></span></dt><dt><span class="section"><a href="#instr-inline">36.5.15. Instructions for some inlined
  functions</a></span></dt><dt><span class="section"><a href="#instr-combo">36.5.16. Combined instructions</a></span></dt><dt><span class="section"><a href="#instr-shortcut">36.5.17. Shortcut instructions</a></span></dt></dl></dd><dt><span class="section"><a href="#bytecode-design">36.6. Bytecode Design</a></span></dt><dd><dl><dt><span class="section"><a href="#byte-when-add-q">36.6.1. When to add a new bytecode?</a></span></dt><dt><span class="section"><a href="#byte-jmptail-q">36.6.2. Why JMPTAIL?</a></span></dt></dl></dd></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="byte-intro"></a>36.1. Introduction</h2></div></div></div><p>The <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> compiler compiles <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> programs into instruction codes
for a virtual processor.  This bytecode is optimized for saving space in
the most common cases of <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> programs.  The main advantages/drawbacks
of this approach, compared to native code compilation, are:
</p><div class="itemizedlist"><ul type="disc"><li>Bytecode compiled programs are a lot smaller than
  when compiled to native code.  This results in better use of CPU
  caches, and in less virtual memory paging. Users perceive this as good
  responsiveness.</li><li>Maximum execution speed (throughput in tight loops)
   is limited.</li><li>Since no bytecode instructions are provided for
   “<span class="quote">unsafe</span>” operations (like unchecked array accesses,
   or “<span class="quote">fast</span>” <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CAR</code></a>/<a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>), programs run with all safety
   checks enabled even when compiled.</li><li>Execution speed of a program can easily be
   understood by looking at the output of the <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><code class="function">DISASSEMBLE</code></a> function.
   A rule of thumb is that every elementary instruction costs 1 time
   unit, whereas a function call costs 3 to 4 time units.
  </li><li>Needing to do no type inference, the compiler is
   pretty straightforward and fast.  As a consequence, the definition of
   <a href="http://www.lisp.org/HyperSpec/Body/chap-7.html" target="_top"><span><strong class="command">CLOS</strong></span></a> generic functions, which needs to compile small pieces of
   generated code, is not perceived to be slow.</li><li>The compiler is independent from the hardware CPU.
   Different back-ends, one for each hardware CPU, are not needed.  As a
   consequence, the compiler is fairly small (and would have been easily
   maintainable if it were written in a less kludgey way...), and it is
   impossible for the compiler writer to introduce CPU dependent bugs.
 </li></ul></div><p>
</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="vm"></a>36.2. The virtual machine</h2></div></div></div><p>The bytecode can be thought of as being interpreted by a virtual
processor.  The engine which interprets the bytecode (the
 “<span class="quote">implementation of the virtual machine</span>”) is actually a
<a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> function, but it could as well be a just-in-time compiler which
translates a function's bytecode into hardware CPU instructions the
first time said function is called.</p><p>The virtual machine is a stack machine with two stacks:
</p><div class="variablelist"><dl><dt><span class="term"><a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a></span></dt><dd>a stack for <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects and frames
   (“<span class="quote">Lisp stack</span>”).</dd><dt><span class="term"><a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a></span></dt><dd>a stack for other data and pointers
   (“<span class="quote">Program stack</span>”).</dd></dl></div><p>This two-stack architecture permits to save an unlimited number of
<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> (needed for handling of <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>),
without <a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#cons" target="_top">consing[3]</a>.  Also, in a world with a compacting no-ambiguous-roots
garbage collector, <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> must only hold <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects, and <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> can
hold all the other data belonging to a frame, which would not fit into
<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> without tagging/untagging overhead.</p><p>The scope of <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> and <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> is only valid for a given function
invocation.  Whereas the amount of <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> space needed for executing a
function (excluding other function calls) is unlimited, the amount of
<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> space needed is known a priori, at compile time.  When a function
is called, no relation is specified between the caller's <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> and the
callee's <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, and between the caller's <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> and the callee's <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>.
The bytecode is designed so that outgoing arguments on the caller's
<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> can be shared by the caller's incoming arguments area (on the
callee's <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>), but a virtual machine implementation may also copy
outgoing arguments to incoming arguments instead of sharing them.</p><p>The virtual machine has a special data structure,
<code class="varname">values</code>, containing the “<span class="quote">top of stack</span>”,
specially adapted to <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>:
</p><div class="variablelist"><dl><dt><span class="term"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a></span></dt><dd>an unsigned integer.
  </dd><dt><span class="term"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a></span></dt><dd>the <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#primary_value" target="_top">primary value</a>, a <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> object.
  If <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> = 0, this is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</dd><dt><span class="term"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_space</code></a></span></dt><dd>all values except the first one, an array of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
  objects.</dd></dl></div><p>The contents of <code class="varname">values</code> is short-lived.
It does not survive a function call, not even a <a href="#gc" title="Chapter&#xA0;34.&#xA0;Overview of CLISP's Garbage Collection">garbage-collect</a>ion.</p><p>The interpretation of some bytecode instructions depends on a
constant, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a>.  This is a CPU-dependent number, the value of
<code class="varname">SYSTEM::*JMPBUF-SIZE*</code>.  In <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>, it is defined as
<code class="literal">ceiling(sizeof(jmp_buf),sizeof(void*))</code>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="comp-fun"></a>36.3. The structure of compiled functions</h2></div></div></div><p>A compiled function consists of two objects: The function itself,
containing the references to all <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects needed for the bytecode,
and a byte vector containing only immediate data, including the bytecode
proper.</p><p>Typically, the byte vector is about twice as large as the function
vector.  The separation thus helps the garbage collector (since the byte
vector does not need to be scanned for pointers).</p><p>A function looks like this
 (cf. the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <span class="type">Cclosure</span>):
</p><div class="variablelist"><dl><dt><a id="func-name"></a><span class="term">name</span></dt><dd>This is the name of the function, normally a symbol
   or a list of the form <code class="code">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <em class="replaceable"><code>symbol</code></em>)</code>.
   It is used for printing the function and for error messages.
   This field is immutable.</dd><dt><a id="func-codevec"></a><span class="term"><a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">codevec</code></a></span></dt><dd>This is the byte-code vector, a <span class="type"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a> (<a href="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html" target="_top"><code class="classname">UNSIGNED-BYTE</code></a> 8))</code></span>.
    This field is immutable.</dd><dt><span class="term"><a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[]</span></dt><dd>The remaining fields in the function object are
   references to other <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects.  These references are immutable,
   which is why they are called “<span class="quote">constants</span>”.
   (The referenced <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> objects can be mutable objects,
    such as <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a>es or <a href="http://www.lisp.org/HyperSpec/Body/syscla_vector.html" target="_top"><code class="classname">VECTOR</code></a>s, however.)
 </dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">The Exception to the Immutability Rule</h3><p>When a generic function's dispatch code is installed, the <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">codevec</code></a>
  and <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a> fields are destructively modified.</p></div><p>Some of the <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a> can play special roles.
 A function looks like this, in more detail:
</p><div class="variablelist"><dl><dt><span class="term">name</span></dt><dd>see <a href="#func-name">name</a>.
 </dd><dt><span class="term"><a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">codevec</code></a></span></dt><dd>see <a href="#func-codevec"><a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">codevec</code></a></a>.
 </dd><dt><span class="term"><a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">venv-const</code></a>*</span></dt><dd>At most one object, representing the closed-up
   variables, representing the variables of the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> in
   which this function was defined.  It is a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a>, which
   looks like this: <span class="data"><code class="literal">#(<em class="replaceable"><code>next</code></em>
   <em class="replaceable"><code>value<sub>1</sub></code></em> ...
   <em class="replaceable"><code>value<sub>n</sub></code></em>)</code></span>
   where <em class="replaceable"><code>value<sub>1</sub></code></em>, ...,
   <em class="replaceable"><code>value<sub>n</sub></code></em>
   are the values of the closed-up variables,
   and <em class="replaceable"><code>next</code></em> is either <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> or a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a> having the same
   structure.</dd><dt><span class="term"><a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">block-const</code></a>*</span></dt><dd>Objects representing closed-up <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><code class="function">BLOCK</code></a> tags,
   representing the <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><code class="function">BLOCK</code></a> tags of the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> in which
   this function was defined.  Each is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a> containing in the
   <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a> part: either a frame pointer to the block frame, or <span class="data"><code class="literal">#&lt;DISABLED&gt;</code></span>.
   The <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CAR</code></a> is the block's name, for error messages only.
  </dd><dt><span class="term"><a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">tagbody-const</code></a>*</span></dt><dd>Objects representing closed-up <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> tags,
   representing the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> tags of the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a> in which
   this function was defined.  Each is a <a href="http://www.lisp.org/HyperSpec/Body/syscla_cons.html" target="_top"><code class="classname">CONS</code></a> containing in the
   <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a> part: either a frame pointer to the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> frame, or
   <span class="data"><code class="literal">#&lt;DISABLED&gt;</code></span> if the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> has already been left.  The <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CAR</code></a> is a
   <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a> containing the names of the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> tags,
   for error messages only.</dd><dt><span class="term"><a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">keyword-const</code></a>*</span></dt><dd>If the function was defined with a <a href="#lalist" title="3.4.&#xA0;Lambda Lists&#10;   [CLHS-3.4]">lambda list</a>
   containing <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>, here come the symbols ("keywords"), in their
   correct order.  They are used by the interpreter during function call.
  </dd><dt><span class="term"><a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">other-const</code></a>*</span></dt><dd>Other objects needed by the function's bytecode.
  </dd></dl></div><p>
</p><p>If <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">venv-const</code></a>, <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">block-const</code></a>, <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">tagbody-const</code></a> are all absent,
the function is called <span class="emphasis"><em>autonomous</em></span>.
This is the case if the function does not refer to lexical variables,
blocks or tags defined in compile code outside of the function.
In particular, it is the case if the function is defined in a null
<a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.</p><p>If some <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">venv-const</code></a>, <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">block-const</code></a>, or <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">tagbody-const</code></a> are
present, the function (a “<span class="quote">closure</span>”) is created at runtime.
The compiler only generates a prototype, containing <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> values
instead of each <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">venv-const</code></a>, <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">block-const</code></a>, <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">tagbody-const</code></a>.
At runtime, a function is created by copying this prototype and
replacing the <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> values by the definitive ones.</p><p>The list <span class="data"><code class="literal">(<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">keyword-const</code></a>*
<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">other-const</code></a>*)</code></span> normally does not contain duplicates, because
the compiler removes duplicates when possible.  (Duplicates can occur
nevertheless, through the use of <a href="http://www.lisp.org/HyperSpec/Body/speope_load-time-value.html" target="_top"><code class="function">LOAD-TIME-VALUE</code></a>.)</p><p>The <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">codevec</code></a> looks like this
 (cf. the <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> type <span class="type">Codevec</span>):
</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">spdepth_1</code> (2 bytes)</span></dt><dd>The 1st part of the maximal <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> depth.
  </dd><dt><span class="term"><code class="literal">spdepth_jmpbufsize</code> (2 bytes)</span></dt><dd>The <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a> part of the maximal <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> depth.
   The maximal <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> depth (precomputed by the compiler) is given by
   <code class="literal">spdepth_1 + spdepth_jmpbufsize * <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a></code>.
  </dd><dt><span class="term"><a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">numreq</code></a> (2 bytes)</span></dt><dd>Number of required parameters.
  </dd><dt><span class="term"><code class="literal">numopt</code> (2 bytes)</span></dt><dd>Number of optional parameters.
  </dd><dt><span class="term"><a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">flags</code></a> (1 byte)</span></dt><dd><div class="variablelist"><dl><dt><span class="term">bit 0</span></dt><dd>set if the function has the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> parameter
    </dd><dt><span class="term">bit 7</span></dt><dd>set if the function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> parameters
    </dd><dt><span class="term">bit 6</span></dt><dd>set if the function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;ALLOW-OTHER-KEYS</code></a>
    </dd><dt><span class="term">bit 4</span></dt><dd>set if the function is a generic function
    </dd><dt><span class="term">bit 3</span></dt><dd>set if the function is a generic function and its
     effective method shall be returned (instead of being executed)
    </dd></dl></div></dd><dt><span class="term"><code class="literal">signature</code> (1 byte)</span></dt><dd>An abbreviation code depending on
    <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">numreq</code></a>, <code class="literal">numopt</code>, <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">flags</code></a>.
    It is used for speeding up the function
    call.</dd><dt><span class="term"><code class="literal">numkey</code> (2 bytes, only if the
     function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>)</span></dt><dd>The number of <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> parameters.
   </dd><dt><span class="term"><code class="literal">keyconsts</code> (2 bytes, only if the
     function has <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>)</span></dt><dd>The offset of the <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">keyword-const</code></a> in the function.
   </dd><dt><span class="term"><code class="literal">byte</code>* (any number of bytes)</span></dt><dd>The bytecode instructions.
   </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="intr-struct"></a>36.4. The general structure of the instructions</h2></div></div></div><p>All instructions consist of one byte, denoting the opcode, and
some number of operands.</p><p>The conversion from a byte (in the range 0..255) to the opcode is
performed by lookup in the table contained in the file <a href="#bytecode-d"><code class="filename">bytecode.d</code></a>.</p><p>There are the following types of operands, denoted by different
letters:
</p><div class="variablelist"><dl><dt><span class="term"><em class="replaceable"><code>k</code></em>, <em class="replaceable"><code>n</code></em>, <em class="replaceable"><code>m</code></em>, <em class="replaceable"><code>l</code></em></span></dt><dd>A (nonnegative) numeric operand.
   The next byte is read.
   If its bit 7 is zero, then the bits 6..0 give the value (7 bits).
   If its bit 7 is one, then the bits 6..0 and the subsequent byte
   together form the value (15 bits).
  </dd><dt><span class="term"><em class="replaceable"><code>b</code></em></span></dt><dd>A (nonnegative) 1-byte operand.
   The next byte is read and is the value.
  </dd><dt><span class="term"><em class="replaceable"><code>label</code></em></span></dt><dd>A label operand.
   A signed numeric operand is read: The next byte is read.
   If its bit 7 is zero, then the bits 6..0 give the value
    (7 bits, sign-extended).
   If its bit 7 is one, then the bits 6..0 and the subsequent byte
    together form the value (15 bits, sign-extended).
   If the latter 15-bit result is zero, then four more bytes are read
    and put together (32 bits, sign-extended).
   Finally, the bytecode pointer for the target is computed as the
   current bytecode pointer (pointing after the operand just read), plus
   the signed numeric operand.
  </dd></dl></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="intr-set"></a>36.5. The instruction set</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#instr-const">36.5.1. Instructions for constants</a></span></dt><dt><span class="section"><a href="#instr-lex-var">36.5.2. Instructions for lexical variables</a></span></dt><dt><span class="section"><a href="#instr-dyn-var">36.5.3. Instructions for dynamic variables</a></span></dt><dt><span class="section"><a href="#instr-stack">36.5.4. Instructions for stack operations</a></span></dt><dt><span class="section"><a href="#instr-jump">36.5.5. Instructions for control flow, jumps</a></span></dt><dt><span class="section"><a href="#instr-env">36.5.6. Instructions for lexical environment,
   creation of closures</a></span></dt><dt><span class="section"><a href="#instr-funcall">36.5.7. Instructions for function calls</a></span></dt><dt><span class="section"><a href="#instr-optkey">36.5.8. Instructions for optional
  and keyword parameters</a></span></dt><dt><span class="section"><a href="#instr-mulval">36.5.9. Instructions for multiple values</a></span></dt><dt><span class="section"><a href="#instr-block">36.5.10. Instructions for
   <code class="function">BLOCK</code> and <code class="function">RETURN-FROM</code></a></span></dt><dt><span class="section"><a href="#instr-tagbody">36.5.11. Instructions for <code class="function">TAGBODY</code> and <code class="function">GO</code></a></span></dt><dt><span class="section"><a href="#instr-catch">36.5.12. Instructions for <code class="function">CATCH</code> and <code class="function">THROW</code></a></span></dt><dt><span class="section"><a href="#instr-unwind">36.5.13. Instructions for <code class="function">UNWIND-PROTECT</code></a></span></dt><dt><span class="section"><a href="#instr-handler">36.5.14. Instructions for <code class="function">HANDLER-BIND</code></a></span></dt><dt><span class="section"><a href="#instr-inline">36.5.15. Instructions for some inlined
  functions</a></span></dt><dt><span class="section"><a href="#instr-combo">36.5.16. Combined instructions</a></span></dt><dt><span class="section"><a href="#instr-shortcut">36.5.17. Shortcut instructions</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-const"></a>36.5.1. Instructions for constants</h3></div></div></div><div class="informaltable"><a id="instr-const-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>)</code></span></td><td align="center">Load <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> into values.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(PUSH-NIL <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Push <em class="replaceable"><code>n</code></em> <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>s into the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.</td><td align="center"><em class="replaceable"><code>n</code></em> times do: *--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(<a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>)</code></span></td><td align="center">Load <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> into values.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CONST <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Load the function's <em class="replaceable"><code>n</code></em>th constant into values.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>],
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-lex-var"></a>36.5.2. Instructions for lexical variables</h3></div></div></div><div class="informaltable"><a id="instr-lex-var-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Load a directly accessible local variable into values.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOADI <em class="replaceable"><code>k<sub>1</sub></code></em> <em class="replaceable"><code>k<sub>2</sub></code></em> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Load an indirectly accessible local variable into values.</td><td align="center"><em class="replaceable"><code>k</code></em> := <em class="replaceable"><code>k<sub>1</sub></code></em> + <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a> * <em class="replaceable"><code>k<sub>2</sub></code></em>,
              <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := *(*(<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>+<em class="replaceable"><code>k</code></em>)+ <em class="replaceable"><code>n</code></em>),
              <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOADC <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td><td align="center">Load a closed-up variable, defined in the same function and
             directly accessible, into values.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(*(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>),1+<em class="replaceable"><code>m</code></em>),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOADV <em class="replaceable"><code>k</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td><td align="center">Load a closed-up variable, defined in an outer function,
             into values.</td><td align="center"><em class="replaceable"><code>v</code></em> := <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">venv-const</code></a>,
             <em class="replaceable"><code>m</code></em> times do: <em class="replaceable"><code>v</code></em> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(<em class="replaceable"><code>v</code></em>,0),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(<em class="replaceable"><code>v</code></em>,<em class="replaceable"><code>m</code></em>),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOADIC <em class="replaceable"><code>k<sub>1</sub></code></em> <em class="replaceable"><code>k<sub>2</sub></code></em> <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td><td align="center">Load a closed-up variable, defined in the same function and
             indirectly accessible, into values.</td><td align="center"><em class="replaceable"><code>k</code></em> := <em class="replaceable"><code>k<sub>1</sub></code></em> + <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a> * <em class="replaceable"><code>k<sub>2</sub></code></em>,
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(*(*(<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>+<em class="replaceable"><code>k</code></em>)+<em class="replaceable"><code>n</code></em>),1+<em class="replaceable"><code>m</code></em>),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(STORE <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Store values into a directly accessible local variable.</td><td align="center">*(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>) := <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(STOREI <em class="replaceable"><code>k<sub>1</sub></code></em> <em class="replaceable"><code>k<sub>2</sub></code></em> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Store values into an indirectly accessible local variable.</td><td align="center"><em class="replaceable"><code>k</code></em> := <em class="replaceable"><code>k<sub>1</sub></code></em> + <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a> * <em class="replaceable"><code>k<sub>2</sub></code></em>,
              *(*(<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>+<em class="replaceable"><code>k</code></em>)+ <em class="replaceable"><code>n</code></em>) := <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,
              <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(STOREC <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td><td align="center">Store values into a closed-up variable, defined in the same
             function and directly accessible.</td><td align="center"><a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(*(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>),1+m) := <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(STOREV <em class="replaceable"><code>k</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td><td align="center">Store values into a closed-up variable, defined in an outer
             function.</td><td align="center"><em class="replaceable"><code>v</code></em> := <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">venv-const</code></a>,
             <em class="replaceable"><code>m</code></em> times do: <em class="replaceable"><code>v</code></em> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(<em class="replaceable"><code>v</code></em>,0),
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(<em class="replaceable"><code>v</code></em>,<em class="replaceable"><code>m</code></em>) := <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(STOREIC <em class="replaceable"><code>k<sub>1</sub></code></em> <em class="replaceable"><code>k<sub>2</sub></code></em> <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td><td align="center">Store values into a closed-up variable, defined in the same
             function and indirectly accessible.</td><td align="center"><em class="replaceable"><code>k</code></em> := <em class="replaceable"><code>k<sub>1</sub></code></em> + <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a> * <em class="replaceable"><code>k<sub>2</sub></code></em>,
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(*(*(<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>+<em class="replaceable"><code>k</code></em>)+<em class="replaceable"><code>n</code></em>),1+<em class="replaceable"><code>m</code></em>) := <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-dyn-var"></a>36.5.3. Instructions for dynamic variables</h3></div></div></div><div class="informaltable"><a id="instr-dyn-var-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(GETVALUE <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Load a symbol's value into values.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := symbol-value(<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>]),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(SETVALUE <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Store values into a symbol's value.</td><td align="center">symbol-value(<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>]) := <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(BIND <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Bind a symbol dynamically.</td><td align="center">Bind the value of the symbol
             <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>] to <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,
             implicitly <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> -= 3,
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(UNBIND1)</code></span></td><td align="center">Dissolve one binding frame.</td><td align="center">Unbind the binding frame <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> is pointing to,
             implicitly <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += 3</td></tr><tr><td align="center"><span class="byte"><code class="literal">(UNBIND <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Dissolve <em class="replaceable"><code>n</code></em> binding frames.</td><td align="center"><em class="replaceable"><code>n</code></em> times do:
              Unbind the binding frame <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> is pointing to, thereby
              incrementing <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>
             Thus, <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += 1+2*<em class="replaceable"><code>n</code></em></td></tr><tr><td align="center"><span class="byte"><code class="literal">(PROGV)</code></span></td><td align="center">Bind a set of symbols dynamically to a set of values.</td><td align="center"><em class="replaceable"><code>symbols</code></em> := *<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>++,
             *--<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>,
             build a single binding frame binding the symbols in
             <em class="replaceable"><code>symbols</code></em> to the values in <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,
             values undefined</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-stack"></a>36.5.4. Instructions for stack operations</h3></div></div></div><div class="informaltable"><a id="instr-stack-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(PUSH)</code></span></td><td align="center">Push one object onto the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.</td><td align="center">*--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(POP)</code></span></td><td align="center">Pop one object from the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, into values.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := *<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>++, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(SKIP <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Restore a previous <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> pointer.
             Remove <em class="replaceable"><code>n</code></em> objects from the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.</td><td align="center"><a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> + <em class="replaceable"><code>n</code></em></td></tr><tr><td align="center"><span class="byte"><code class="literal">(SKIPI <em class="replaceable"><code>k<sub>1</sub></code></em> <em class="replaceable"><code>k<sub>2</sub></code></em> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Restore a previous <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> pointer. Remove an unknown
             number of objects from the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.</td><td align="center"><em class="replaceable"><code>k</code></em> := <em class="replaceable"><code>k<sub>1</sub></code></em> + <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a> * <em class="replaceable"><code>k<sub>2</sub></code></em>,
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := *(<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>+<em class="replaceable"><code>k</code></em>),
             <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>+<em class="replaceable"><code>k</code></em>+1,
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> + <em class="replaceable"><code>n</code></em></td></tr><tr><td align="center"><span class="byte"><code class="literal">(SKIPSP <em class="replaceable"><code>k<sub>1</sub></code></em> <em class="replaceable"><code>k<sub>2</sub></code></em>)</code></span></td><td align="center">Restore a previous <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> pointer.</td><td align="center"><em class="replaceable"><code>k</code></em> := <em class="replaceable"><code>k<sub>1</sub></code></em> + <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a> * <em class="replaceable"><code>k<sub>2</sub></code></em>,
             <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>+<em class="replaceable"><code>k</code></em></td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-jump"></a>36.5.5. Instructions for control flow, jumps</h3></div></div></div><div class="informaltable"><a id="instr-jump-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(SKIP&amp;RET <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Clean up the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, and return from the function.</td><td align="center"><a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>,
            return from the function, returning values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(SKIP&amp;RETGF <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Clean up the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, and return from the generic
             function.</td><td align="center">If bit 3 is set in the function's <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">flags</code></a>,
                then <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1,
                     and return from the function.
             Otherwise: if the current function has no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> argument,
                then <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>-<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">numreq</code></a>,
                     apply <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> to the <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">numreq</code></a> arguments
                           still on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, and
                           return from the function.
                Else <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>-<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">numreq</code></a>-1,
                     apply <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> to the <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">numreq</code></a> arguments and the
                           <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a> argument, all still on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, and
                           return from the function.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMP <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em>.</td><td align="center">PC := <em class="replaceable"><code>label</code></em>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPIF <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em>, if <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is true.</td><td align="center">If <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, PC := <em class="replaceable"><code>label</code></em>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPIFNOT <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em>, if <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is false.</td><td align="center">If <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, PC := <em class="replaceable"><code>label</code></em>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPIF1 <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em> and forget secondary values,
             if <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is true.</td><td align="center">If <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is not <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
                <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1, PC := <em class="replaceable"><code>label</code></em>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPIFNOT1 <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em> and forget secondary values,
             if <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is false.</td><td align="center">If <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>,
                <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1, PC := <em class="replaceable"><code>label</code></em>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPIFATOM <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em>, if <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is not a cons.</td><td align="center">If <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is not a cons, PC := <em class="replaceable"><code>label</code></em>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPIFCONSP <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em>, if <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is a cons.</td><td align="center">If <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is a cons, PC := <em class="replaceable"><code>label</code></em>.
                values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPIFEQ <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em>, if <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> to the top-of-stack.</td><td align="center">If eq(<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,*<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>++), PC := <em class="replaceable"><code>label</code></em>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPIFNOTEQ <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em>, if <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> is not <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>
             to the top-of-stack.</td><td align="center">If not eq(<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,*<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>++), PC := <em class="replaceable"><code>label</code></em>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPIFEQTO <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em>,
             if the top-of-stack is <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> to a constant.</td><td align="center">If eq(*<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>++,<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>]), PC := <em class="replaceable"><code>label</code></em>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPIFNOTEQTO <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em>, if the top-of-stack is not <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>
             to a constant.</td><td align="center">If not eq(*<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>++,<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>]), PC := <em class="replaceable"><code>label</code></em>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPHASH <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Table-driven jump, depending on <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>.</td><td align="center">Lookup <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> in the hash table <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>].
             (The hash table's test is either <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a>.)
             If found, the hash table value is a signed <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>,
             jump to it: PC := PC + value.  Else jump to <em class="replaceable"><code>label</code></em>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPHASHV <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Table-driven jump, depending on <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>,
             inside a generic function.</td><td align="center">Lookup <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> in the hash table <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[0],<em class="replaceable"><code>n</code></em>).
             (The hash table's test is either <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/fun_eql.html" target="_top"><code class="function">EQL</code></a>.)
             If found, the hash table value is a signed <a href="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html" target="_top"><code class="classname">FIXNUM</code></a>,
             jump to it: PC := PC + value.  Else jump to <em class="replaceable"><code>label</code></em>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JSR <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Subroutine call.</td><td align="center">*--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := function. Then start interpreting the
             bytecode at <em class="replaceable"><code>label</code></em>, with values undefined.
             When a <span class="byte"><code class="literal">(RET)</code></span> is encountered,
             program execution is resumed at the instruction after
             <span class="byte"><code class="literal">(JSR <em class="replaceable"><code>label</code></em>)</code></span>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPTAIL <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em>
             <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Tail subroutine call.</td><td align="center"><em class="replaceable"><code>n</code></em> <a href="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html" target="_top"><code class="function">&gt;=</code></a> <em class="replaceable"><code>m</code></em>.
             The <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> frame of size <em class="replaceable"><code>n</code></em> is reduced to size <em class="replaceable"><code>m</code></em>:
             {*(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>-<em class="replaceable"><code>m</code></em>), ..., *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>-1)} :=
               {*<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, ..., *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>m</code></em>-1)}.
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += n-m.
             *--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := function.
             Then jump to <em class="replaceable"><code>label</code></em>, with values undefined.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-env"></a>36.5.6. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>,
   creation of closures</h3></div></div></div><div class="informaltable"><a id="instr-env-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(VENV)</code></span></td><td align="center">Load the <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">venv-const</code></a> into values.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[0], <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(MAKE-VECTOR1&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a> used for closed-up variables.</td><td align="center"><em class="replaceable"><code>v</code></em> := new <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a> of size <em class="replaceable"><code>n</code></em>+1.
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(<em class="replaceable"><code>v</code></em>,0) := <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>.
             *--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <em class="replaceable"><code>v</code></em>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(COPY-CLOSURE <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Create a closure by copying the prototype and filling in
             the <a href="http://www.lisp.org/HyperSpec/Body/sec_3-1-1-3.html" target="_top">lexical environment</a>.</td><td align="center"><em class="replaceable"><code>f</code></em> := copy-function(<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>m</code></em>]).
             For <em class="replaceable"><code>i</code></em>=0,..,<em class="replaceable"><code>n</code></em>-1:
                 <em class="replaceable"><code>f</code></em>_<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[i] := *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>-1-<em class="replaceable"><code>i</code></em>).
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += <em class="replaceable"><code>n</code></em>.
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <em class="replaceable"><code>f</code></em>, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-funcall"></a>36.5.7. Instructions for function calls</h3></div></div></div><div class="informaltable"><a id="instr-funcall-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(CALL <em class="replaceable"><code>k</code></em> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Calls a constant function with <em class="replaceable"><code>k</code></em> arguments.</td><td align="center">The function <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>] is called
             with the arguments *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>k</code></em>-1), ..., *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+0).
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += <em class="replaceable"><code>k</code></em>.
             The returned values go into values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALL0 <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Calls a constant function with 0 arguments.</td><td align="center">The function <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>] is called with 0 arguments.
             The returned values go into values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALL1 <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Calls a constant function with 1 argument.</td><td align="center">The function <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>] is called with one argument *<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += 1. The returned values go into values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALL2 <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Calls a constant function with 2 arguments.</td><td align="center">The function <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>] is called
             with two arguments *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+1) and *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+0).
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += 2. The returned values go into values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLS1 <em class="replaceable"><code>b</code></em>)</code></span></td><td align="center">Calls a system function with no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a>.</td><td align="center">Calls the system function FUNTAB[<em class="replaceable"><code>b</code></em>].
             The right number of arguments is already on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>
             (including <span class="data"><code class="literal">#&lt;UNBOUND&gt;</code></span>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> or
              <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> parameters).
             The arguments are removed from the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.
             The returned values go into values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLS2 <em class="replaceable"><code>b</code></em>)</code></span></td><td align="center">Calls a system function with no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a>.</td><td align="center">Calls the system function FUNTAB[256+<em class="replaceable"><code>b</code></em>].
             The right number of arguments is already on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>
             (including <span class="data"><code class="literal">#&lt;UNBOUND&gt;</code></span>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a> or
              <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> parameters).
             The arguments are removed from the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.
             The returned values go into values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLSR <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>b</code></em>)</code></span></td><td align="center">Calls a system function with <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;REST</code></a>.</td><td align="center">Calls the system function FUNTABR[<em class="replaceable"><code>b</code></em>].
             The minimum number of arguments is already on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>,
             and <em class="replaceable"><code>m</code></em> additional arguments as well.
             The arguments are removed from the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.
             The returned values go into values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLC)</code></span></td><td align="center">Calls a computed compiled function with no <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>.</td><td align="center">Calls the compiled function <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>.
             The right number of arguments is already on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>
             (including <span class="data"><code class="literal">#&lt;UNBOUND&gt;</code></span>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
              parameters).
             The arguments are removed from the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.
             The returned values go into values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLCKEY)</code></span></td><td align="center">Calls a computed compiled function with <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a>.</td><td align="center">Calls the compiled function <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>.
             The right number of arguments is already on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>
             (including <span class="data"><code class="literal">#&lt;UNBOUND&gt;</code></span>s in place of absent <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;OPTIONAL</code></a>
              or <a href="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html" target="_top"><code class="literal">&amp;KEY</code></a> parameters).
             The arguments are removed from the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.
             The returned values go into values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(FUNCALL <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Calls a computed function.</td><td align="center">Calls the function *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>)
             with the arguments *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>-1), ..., *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+0).
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += <em class="replaceable"><code>n</code></em>+1.
             The returned values go into values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(APPLY <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Calls a computed function with an unknown number of
             arguments.</td><td align="center">Calls the function *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>)
             with the arguments *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>-1), ..., *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+0)
             and a list of additional arguments <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>.
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += <em class="replaceable"><code>n</code></em>+1.
             The returned values go into values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-optkey"></a>36.5.8. Instructions for optional
  and keyword parameters</h3></div></div></div><div class="informaltable"><a id="instr-optkey-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(PUSH-UNBOUND <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Push <em class="replaceable"><code>n</code></em> <span class="data"><code class="literal">#&lt;UNBOUND&gt;</code></span>s into the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.</td><td align="center"><em class="replaceable"><code>n</code></em> times do: *--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <span class="data"><code class="literal">#&lt;UNBOUND&gt;</code></span>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(UNLIST <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td><td align="center">Destructure a proper <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>.</td><td align="center">0 ≤ <em class="replaceable"><code>m</code></em> ≤ <em class="replaceable"><code>n</code></em>.
             <em class="replaceable"><code>n</code></em> times do: *--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CAR</code></a>(<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>(<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>).
             During the last <em class="replaceable"><code>m</code></em> iterations, the list <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>
             may already have reached its end;
             in this case, *--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <span class="data"><code class="literal">#&lt;UNBOUND&gt;</code></span>.
             At the end, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> must be <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(UNLIST* <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td><td align="center">Destructure a proper or dotted <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a>.</td><td align="center">0 ≤ <em class="replaceable"><code>m</code></em> ≤ <em class="replaceable"><code>n</code></em>, <em class="replaceable"><code>n</code></em> &gt; 0.
             <em class="replaceable"><code>n</code></em> times do: *--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CAR</code></a>(<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>(<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>).
             During the last <em class="replaceable"><code>m</code></em> iterations, the list <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>
             may already have reached its end;
             in this case, *--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <span class="data"><code class="literal">#&lt;UNBOUND&gt;</code></span>.
             At the end, after <em class="replaceable"><code>n</code></em> <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>s, *--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(JMPIFBOUNDP <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump to <em class="replaceable"><code>label</code></em>, if a local variable is not unbound.</td><td align="center">If *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>) is not <span class="data"><code class="literal">#&lt;UNBOUND&gt;</code></span>,
                <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>), <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1, PC := <em class="replaceable"><code>label</code></em>.
             Else: values undefined.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(BOUNDP <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Load <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a> or <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> into values, depending on whether a local
             variable is bound.</td><td align="center">If *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>) is not <span class="data"><code class="literal">#&lt;UNBOUND&gt;</code></span>,
                <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.
             Else: <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(UNBOUND-&gt;NIL <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">If a local variable is unbound, assign a default value
             <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> to it.</td><td align="center">If *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>) is <span class="data"><code class="literal">#&lt;UNBOUND&gt;</code></span>,
             *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>) := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-mulval"></a>36.5.9. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a></h3></div></div></div><div class="informaltable"><a id="instr-mulval-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(VALUES0)</code></span></td><td align="center">Load no values into values.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 0</td></tr><tr><td align="center"><span class="byte"><code class="literal">(VALUES1)</code></span></td><td align="center">Forget secondary values.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>-TO-MV <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Pop the first <em class="replaceable"><code>n</code></em> objects from <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> into values.</td><td align="center">Load values(*(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>-1),...,*(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+0)) into
             values. <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += <em class="replaceable"><code>n</code></em>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(MV-TO-<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>)</code></span></td><td align="center">Save values on <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.</td><td align="center">Push the <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> values onto the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>
             (in order: <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> comes first).
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> -= <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(NV-TO-<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Save <em class="replaceable"><code>n</code></em> values on <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.</td><td align="center">Push the first <em class="replaceable"><code>n</code></em> values onto the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>
             (in order: <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> comes first).
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> -= <em class="replaceable"><code>n</code></em>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(MV-TO-LIST)</code></span></td><td align="center">Convert <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a> into a list.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := list of values, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1</td></tr><tr><td align="center"><span class="byte"><code class="literal">(LIST-TO-MV)</code></span></td><td align="center">Convert a <a href="http://www.lisp.org/HyperSpec/Body/syscla_list.html" target="_top"><code class="classname">LIST</code></a> into <a href="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values" target="_top">multiple values</a>.</td><td align="center">Call the function <a href="http://www.lisp.org/HyperSpec/Body/fun_values-list.html" target="_top"><code class="function">VALUES-LIST</code></a> with <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> as argument.
             The returned values go into values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(MVCALLP)</code></span></td><td align="center">Start a <a href="http://www.lisp.org/HyperSpec/Body/speope_multiple-value-call.html" target="_top"><code class="function">MULTIPLE-VALUE-CALL</code></a> invocation.</td><td align="center">*--<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>. *--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(MVCALL)</code></span></td><td align="center">Finish a <a href="http://www.lisp.org/HyperSpec/Body/speope_multiple-value-call.html" target="_top"><code class="function">MULTIPLE-VALUE-CALL</code></a> invocation.</td><td align="center">newSTACK := *<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>++.
             Call the function *(newSTACK-1), passing it
             *(newSTACK-2), ..., *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+0) as arguments.
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := newSTACK.
             The returned values go into values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-block"></a>36.5.10. Instructions for
   <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><code class="function">BLOCK</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_return-from.html" target="_top"><code class="function">RETURN-FROM</code></a></h3></div></div></div><div class="informaltable"><a id="instr-block-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(BLOCK-OPEN <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><code class="function">BLOCK</code></a> frame.</td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><code class="function">BLOCK</code></a> frame, <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> -= 3, <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> -= 2+<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a>.
   The topmost (third) object in the block frame is
   <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><code class="function">CONS</code></a>(<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>],frame-pointer) (its <em class="replaceable"><code>block-cons</code></em>).
   Upon a <a href="http://www.lisp.org/HyperSpec/Body/speope_return-from.html" target="_top"><code class="function">RETURN-FROM</code></a> to this frame, execution will continue at <em class="replaceable"><code>label</code></em>.
   values undefined.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(BLOCK-CLOSE)</code></span></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><code class="function">BLOCK</code></a> frame.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><code class="function">BLOCK</code></a> frame at <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += 3,
             <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> += 2+<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a>. Mark the <em class="replaceable"><code>block-cons</code></em> as invalid.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(RETURN-FROM <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Leave a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><code class="function">BLOCK</code></a> whose <em class="replaceable"><code>block-cons</code></em> is given.</td><td align="center"><em class="replaceable"><code>block-cons</code></em> := <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>].
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>(<em class="replaceable"><code>block-cons</code></em>) = <span class="data"><code class="literal">#&lt;DISABLED&gt;</code></span>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>(<em class="replaceable"><code>block-cons</code></em>) is a frame-pointer.
             Unwind the stack up to this frame, pass it values.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(RETURN-FROM-I <em class="replaceable"><code>k<sub>1</sub></code></em> <em class="replaceable"><code>k<sub>2</sub></code></em> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Leave a <a href="http://www.lisp.org/HyperSpec/Body/speope_block.html" target="_top"><code class="function">BLOCK</code></a> whose <em class="replaceable"><code>block-cons</code></em> is indirectly accessible.</td><td align="center"><em class="replaceable"><code>k</code></em> := <em class="replaceable"><code>k<sub>1</sub></code></em> + <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a> * <em class="replaceable"><code>k<sub>2</sub></code></em>,
             <em class="replaceable"><code>block-cons</code></em> := *(*(<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>+<em class="replaceable"><code>k</code></em>)+<em class="replaceable"><code>n</code></em>).
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>(<em class="replaceable"><code>block-cons</code></em>) = <span class="data"><code class="literal">#&lt;DISABLED&gt;</code></span>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>(<em class="replaceable"><code>block-cons</code></em>) is a frame-pointer.
             Unwind the stack up to this frame, pass it values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-tagbody"></a>36.5.11. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_go.html" target="_top"><code class="function">GO</code></a></h3></div></div></div><div class="informaltable"><a id="instr-tagbody-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(TAGBODY-OPEN <em class="replaceable"><code>m</code></em>
             <em class="replaceable"><code>label<sub>1</sub></code></em> ...
             <em class="replaceable"><code>label<sub>n</sub></code></em>)</code></span></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> frame.</td><td align="center">Fetch <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>m</code></em>], this is a <a href="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html" target="_top"><code class="classname">SIMPLE-VECTOR</code></a> with
             <em class="replaceable"><code>n</code></em> elements, then decode <em class="replaceable"><code>n</code></em> label operands.
             Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> frame, <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> -= 3+<em class="replaceable"><code>n</code></em>, <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> -= 1+<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a>.
             The third object in the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> frame is
             <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><code class="function">CONS</code></a>(<a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>m</code></em>],frame-pointer) (the <em class="replaceable"><code>tagbody-cons</code></em>)
             Upon a <a href="http://www.lisp.org/HyperSpec/Body/speope_go.html" target="_top"><code class="function">GO</code></a> to tag <em class="replaceable"><code>label</code></em> of this frame, execution
             will continue at <em class="replaceable"><code>label<sub>l</sub></code></em>.
             values undefined</td></tr><tr><td align="center"><span class="byte"><code class="literal">(TAGBODY-CLOSE-NIL)</code></span></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> frame, and load <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> into values.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> frame at <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>,
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += 3+<em class="replaceable"><code>m</code></em>, <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> += 1+<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a>.
             Mark the <em class="replaceable"><code>tagbody-cons</code></em> as invalid.
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>, <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(TAGBODY-CLOSE)</code></span></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> frame.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> frame at <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>,
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += 3+<em class="replaceable"><code>m</code></em>, <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> += 1+<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a>.
             Mark the <em class="replaceable"><code>tagbody-cons</code></em> as invalid.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(GO <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump into a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> whose <em class="replaceable"><code>tagbody-cons</code></em> is given.</td><td align="center"><em class="replaceable"><code>tagbody-cons</code></em> := <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>].
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>(<em class="replaceable"><code>tagbody-cons</code></em>) = <span class="data"><code class="literal">#&lt;DISABLED&gt;</code></span>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>(<em class="replaceable"><code>tagbody-cons</code></em>) is a frame-pointer. Unwind the stack up
             to this frame, pass it the number <em class="replaceable"><code>label</code></em>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(GO-I <em class="replaceable"><code>k<sub>1</sub></code></em> <em class="replaceable"><code>k<sub>2</sub></code></em> <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Jump into a <a href="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html" target="_top"><code class="function">TAGBODY</code></a> whose <em class="replaceable"><code>tagbody-cons</code></em> is indirectly
             accessible.</td><td align="center"><em class="replaceable"><code>k</code></em> := <em class="replaceable"><code>k<sub>1</sub></code></em> + <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a> * <em class="replaceable"><code>k<sub>2</sub></code></em>,
             <em class="replaceable"><code>tagbody-cons</code></em> := *(*(<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>+<em class="replaceable"><code>k</code></em>)+<em class="replaceable"><code>n</code></em>).
             If <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>(<em class="replaceable"><code>tagbody-cons</code></em>) = <span class="data"><code class="literal">#&lt;DISABLED&gt;</code></span>, an <a href="http://www.lisp.org/HyperSpec/Body/contyp_error.html" target="_top"><code class="classname">ERROR</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/fun_signal.html" target="_top"><code class="function">SIGNAL</code></a>ed.
             Else <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>(<em class="replaceable"><code>tagbody-cons</code></em>) is a frame-pointer. Unwind the stack up
             to this frame, pass it the number <em class="replaceable"><code>label</code></em>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-catch"></a>36.5.12. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><code class="function">CATCH</code></a> and <a href="http://www.lisp.org/HyperSpec/Body/speope_throw.html" target="_top"><code class="function">THROW</code></a></h3></div></div></div><div class="informaltable"><a id="instr-catch-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(CATCH-OPEN <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><code class="function">CATCH</code></a> frame.</td><td align="center">Create a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><code class="function">CATCH</code></a> frame, with <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> as tag.
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> -= 3, <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> -= 2+<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a>.
             Upon a <a href="http://www.lisp.org/HyperSpec/Body/speope_throw.html" target="_top"><code class="function">THROW</code></a> to this tag execution continues at
             <em class="replaceable"><code>label</code></em>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CATCH-CLOSE)</code></span></td><td align="center">Dissolve a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><code class="function">CATCH</code></a> frame.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><code class="function">CATCH</code></a> frame at <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += 3, <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> += 2+<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(THROW)</code></span></td><td align="center">Non-local exit to a <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><code class="function">CATCH</code></a> frame.</td><td align="center"><em class="replaceable"><code>tag</code></em> := *<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>++.
             Search the innermost <a href="http://www.lisp.org/HyperSpec/Body/speope_catch.html" target="_top"><code class="function">CATCH</code></a> frame with tag
             <em class="replaceable"><code>tag</code></em> on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, unwind the
             stack up to it, pass it values.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-unwind"></a>36.5.13. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a></h3></div></div></div><div class="informaltable"><a id="instr-unwind-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(UNWIND-PROTECT-OPEN
             <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center">Create an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a> frame.</td><td align="center">Create an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a> frame.
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> -= 2, <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> -= 2+<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a>.
             When the stack will be unwound by a non-local exit,
             values will be saved on <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, and execution will be
             transferred to <em class="replaceable"><code>label</code></em>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(UNWIND-PROTECT-NORMAL-EXIT)</code></span></td><td align="center">Dissolve an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a> frame, and start the cleanup
             code.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a> frame at <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += 2, <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> += 2+<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a>.
             *--<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> := 0, *--<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> := 0, *--<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.
             Save the values on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>,
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> -= <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(UNWIND-PROTECT-CLOSE)</code></span></td><td align="center">Terminate the cleanup code.</td><td align="center">newSTACK := *<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>++. Load
             values(*(newSTACK-1), ..., *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+0)) into values.
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := newSTACK. SPword1 := *<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>++, SPword2 := *<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>++.
             Continue depending on SPword1 and SPword2.
             If both are 0, simply continue execution.
             If SPword2 is 0 but SPword1 is nonzero, interpret it as a
             label and jump to it.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(UNWIND-PROTECT-CLEANUP)</code></span></td><td align="center">Dissolve an <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a> frame, and execute the cleanup
             code like a subroutine call.</td><td align="center">Dissolve the <a href="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html" target="_top"><code class="function">UNWIND-PROTECT</code></a> frame at <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>,
             get <em class="replaceable"><code>label</code></em> out of the frame.
             <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += 2, <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> += 2+<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">jmpbufsize</code></a>.
             *--<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> := 0, *--<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> := PC, *--<a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> := <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>.
             Save the values on the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> -= <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a>.
             PC := <em class="replaceable"><code>label</code></em>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-handler"></a>36.5.14. Instructions for <a href="http://www.lisp.org/HyperSpec/Body/mac_handler-bind.html" target="_top"><code class="function">HANDLER-BIND</code></a></h3></div></div></div><div class="informaltable"><a id="instr-handler-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(HANDLER-OPEN <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Create a handler frame.</td><td align="center">Create a handler frame, using <a href="#comp-fun" title="36.3.&#xA0;The structure of compiled functions"><code class="literal">consts</code></a>[<em class="replaceable"><code>n</code></em>] which
             contains the <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><code class="classname">CONDITION</code></a> types, the corresponding labels and
             the current <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> depth (= function entry <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> - current <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a>).
             </td></tr><tr><td align="center"><span class="byte"><code class="literal">(HANDLER-BEGIN&amp;PUSH)</code></span></td><td align="center">Start a handler.</td><td align="center">Restore the same <a href="impnotes.html#vm" class="olink"><code class="literal">SP</code></a> state as after the HANDLER-OPEN.
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := the <a href="http://www.lisp.org/HyperSpec/Body/contyp_condition.html" target="_top"><code class="classname">CONDITION</code></a> that was passed to the handler,
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.
             *--<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> := <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-inline"></a>36.5.15. Instructions for some inlined
  functions</h3></div></div></div><div class="informaltable"><a id="instr-inline-tab"></a><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">description</th><th align="center">semantics</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(NOT)</code></span></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_not.html" target="_top"><code class="function">NOT</code></a>.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := not(<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>), <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(EQ)</code></span></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_eq.html" target="_top"><code class="function">EQ</code></a>.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := eq(*<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>++,<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CAR)</code></span></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CAR</code></a>.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CAR</code></a>(<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>), <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CDR)</code></span></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html" target="_top"><code class="function">CDR</code></a>(<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>), <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CONS)</code></span></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_cons.html" target="_top"><code class="function">CONS</code></a>.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := cons(*<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>++,<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(SYMBOL-FUNCTION)</code></span></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><code class="function">SYMBOL-FUNCTION</code></a>.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html" target="_top"><code class="function">SYMBOL-FUNCTION</code></a>(<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(SVREF)</code></span></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(*<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>++,<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(SVSET)</code></span></td><td align="center">Inlined call to <code class="function">(<a href="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html" target="_top"><code class="function">SETF</code></a> <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a></code>.</td><td align="center"><em class="replaceable"><code>arg1</code></em> := *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+1),
             <em class="replaceable"><code>arg2</code></em> := *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+0), <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += 2.
             <a href="http://www.lisp.org/HyperSpec/Body/acc_svref.html" target="_top"><code class="function">SVREF</code></a>(<em class="replaceable"><code>arg2</code></em>,<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>) :=
                  <em class="replaceable"><code>arg1</code></em>.
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <em class="replaceable"><code>arg1</code></em>,
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(LIST <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><code class="function">LIST</code></a>.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><code class="function">LIST</code></a>(*(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>-1),...,*(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+0)),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1, <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += <em class="replaceable"><code>n</code></em>.</td></tr><tr><td align="center"><span class="byte"><code class="literal">(LIST* <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">Inlined call to <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><code class="function">LIST*</code></a>.</td><td align="center"><a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a> := <a href="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html" target="_top"><code class="function">LIST*</code></a>(*(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+<em class="replaceable"><code>n</code></em>-1),...,
                                     *(<a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>+0),<a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">value1</code></a>),
             <a href="#vm" title="36.2.&#xA0;The virtual machine"><code class="varname">mv_count</code></a> := 1, <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> += <em class="replaceable"><code>n</code></em>.</td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-combo"></a>36.5.16. Combined instructions</h3></div></div></div><p>The most frequent short sequences of instructions have an
equivalent combined instruction.  They are only present for space and
speed optimization. The only exception is
<span class="byte"><code class="literal">FUNCALL&amp;SKIP&amp;RETGF</code></span>, which is needed for
generic functions.</p><div class="informaltable"><a id="instr-combo-tab"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">equivalent</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(NIL&amp;PUSH)</code></span></td><td align="center"><span class="byte"><code class="literal">(NIL) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(T&amp;PUSH)</code></span></td><td align="center"><span class="byte"><code class="literal">(T) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CONST&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CONST <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOADI&amp;PUSH <em class="replaceable"><code>k<sub>1</sub></code></em> <em class="replaceable"><code>k<sub>2</sub></code></em> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOADI <em class="replaceable"><code>k<sub>1</sub></code></em> <em class="replaceable"><code>k<sub>2</sub></code></em> <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOADC&amp;PUSH <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOADC <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>m</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOADV&amp;PUSH <em class="replaceable"><code>k</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOADV <em class="replaceable"><code>k</code></em> <em class="replaceable"><code>m</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(POP&amp;STORE <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(POP) (STORE <em class="replaceable"><code>n</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(GETVALUE&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(GETVALUE <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(JSR&amp;PUSH <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(JSR <em class="replaceable"><code>label</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(COPY-CLOSURE&amp;PUSH <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(COPY-CLOSURE <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALL&amp;PUSH <em class="replaceable"><code>k</code></em> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALL <em class="replaceable"><code>k</code></em> <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALL1&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALL1 <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALL2&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALL2 <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLS1&amp;PUSH <em class="replaceable"><code>b</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLS1 <em class="replaceable"><code>b</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLS2&amp;PUSH <em class="replaceable"><code>b</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLS2 <em class="replaceable"><code>b</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLSR&amp;PUSH <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLSR <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLC&amp;PUSH)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLC) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLCKEY&amp;PUSH)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLCKEY) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(FUNCALL&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(FUNCALL <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(APPLY&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(APPLY <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CAR&amp;PUSH)</code></span></td><td align="center"><span class="byte"><code class="literal">(CAR) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CDR&amp;PUSH)</code></span></td><td align="center"><span class="byte"><code class="literal">(CDR) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CONS&amp;PUSH)</code></span></td><td align="center"><span class="byte"><code class="literal">(CONS) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LIST&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LIST <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LIST*&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LIST* <em class="replaceable"><code>n</code></em>) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(NIL&amp;STORE <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(NIL) (STORE <em class="replaceable"><code>n</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(T&amp;STORE <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(T) (STORE <em class="replaceable"><code>n</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;STOREC <em class="replaceable"><code>k</code></em> <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>k</code></em>) (STOREC <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>m</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLS1&amp;STORE <em class="replaceable"><code>b</code></em> <em class="replaceable"><code>k</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLS1 <em class="replaceable"><code>b</code></em>) (STORE <em class="replaceable"><code>k</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLS2&amp;STORE <em class="replaceable"><code>b</code></em> <em class="replaceable"><code>k</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLS2 <em class="replaceable"><code>b</code></em>) (STORE <em class="replaceable"><code>k</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLSR&amp;STORE <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>k</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLSR <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em>) (STORE <em class="replaceable"><code>k</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;CDR&amp;STORE <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>) (CDR) (STORE <em class="replaceable"><code>n</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;CONS&amp;STORE <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>+1) (CONS) (STORE <em class="replaceable"><code>n</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;INC&amp;STORE <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>) (CALL1 #'1+) (STORE <em class="replaceable"><code>n</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;DEC&amp;STORE <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>) (CALL1 #'1-) (STORE <em class="replaceable"><code>n</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;CAR&amp;STORE <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>m</code></em>) (CAR) (STORE <em class="replaceable"><code>n</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALL1&amp;JMPIF <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALL1 <em class="replaceable"><code>n</code></em>) (JMPIF <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALL1&amp;JMPIFNOT <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALL1 <em class="replaceable"><code>n</code></em>) (JMPIFNOT <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALL2&amp;JMPIF <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALL2 <em class="replaceable"><code>n</code></em>) (JMPIF <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALL2&amp;JMPIFNOT <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALL2 <em class="replaceable"><code>n</code></em>) (JMPIFNOT <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLS1&amp;JMPIF <em class="replaceable"><code>b</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLS1 <em class="replaceable"><code>b</code></em>) (JMPIF <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLS1&amp;JMPIFNOT <em class="replaceable"><code>b</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLS1 <em class="replaceable"><code>b</code></em>) (JMPIFNOT <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLS2&amp;JMPIF <em class="replaceable"><code>b</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLS2 <em class="replaceable"><code>b</code></em>) (JMPIF <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLS2&amp;JMPIFNOT <em class="replaceable"><code>b</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLS2 <em class="replaceable"><code>b</code></em>) (JMPIFNOT <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLSR&amp;JMPIF <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLSR <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em>) (JMPIF <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CALLSR&amp;JMPIFNOT <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CALLSR <em class="replaceable"><code>m</code></em> <em class="replaceable"><code>n</code></em>) (JMPIFNOT <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;JMPIF <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>) (JMPIF <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;JMPIFNOT <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>label</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>) (JMPIFNOT <em class="replaceable"><code>label</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;CAR&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>) (CAR) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;CDR&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>) (CDR) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;INC&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>) (CALL1 #'1+) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;DEC&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>) (CALL1 #'1-) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CONST&amp;SYMBOL-FUNCTION <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CONST <em class="replaceable"><code>n</code></em>) (SYMBOL-FUNCTION)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CONST&amp;SYMBOL-FUNCTION&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CONST <em class="replaceable"><code>n</code></em>) (SYMBOL-FUNCTION) (PUSH)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(CONST&amp;SYMBOL-FUNCTION&amp;STORE <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>k</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(CONST <em class="replaceable"><code>n</code></em>) (SYMBOL-FUNCTION) (STORE <em class="replaceable"><code>k</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(APPLY&amp;SKIP&amp;RET <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>k</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(APPLY <em class="replaceable"><code>n</code></em>) (SKIP&amp;RET <em class="replaceable"><code>k</code></em>)</code></span></td></tr><tr><td align="center"><span class="byte"><code class="literal">(FUNCALL&amp;SKIP&amp;RETGF <em class="replaceable"><code>n</code></em> <em class="replaceable"><code>k</code></em>)</code></span></td><td align="center"><span class="byte"><code class="literal">(FUNCALL <em class="replaceable"><code>n</code></em>) (SKIP&amp;RETGF <em class="replaceable"><code>k</code></em>)</code></span></td></tr></tbody></table></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="instr-shortcut"></a>36.5.17. Shortcut instructions</h3></div></div></div><p>There are special one-byte instructions (without explicit
operands) for the following frequent instructions:</p><div class="informaltable"><a id="instr-shortcut-tab"></a><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th align="center">mnemonic</th><th align="center">operand range</th></tr></thead><tbody><tr><td align="center"><span class="byte"><code class="literal">(LOAD <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">0 ≤ <em class="replaceable"><code>n</code></em> &lt; 15</td></tr><tr><td align="center"><span class="byte"><code class="literal">(LOAD&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">0 ≤ <em class="replaceable"><code>n</code></em> &lt; 25</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CONST <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">0 ≤ <em class="replaceable"><code>n</code></em> &lt; 21</td></tr><tr><td align="center"><span class="byte"><code class="literal">(CONST&amp;PUSH <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">0 ≤ <em class="replaceable"><code>n</code></em> &lt; 30</td></tr><tr><td align="center"><span class="byte"><code class="literal">(STORE <em class="replaceable"><code>n</code></em>)</code></span></td><td align="center">0 ≤ <em class="replaceable"><code>n</code></em> &lt; 8</td></tr></tbody></table></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="bytecode-design"></a>36.6. Bytecode Design</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#byte-when-add-q">36.6.1. When to add a new bytecode?</a></span></dt><dt><span class="section"><a href="#byte-jmptail-q">36.6.2. Why JMPTAIL?</a></span></dt></dl></div><p>This section offers some insight into bytecode design in the form
 of questions and answers.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="byte-when-add-q"></a>36.6.1. When to add a new bytecode?</h3></div></div></div><div class="abstract"><p class="title"><b>Question:</b></p><p>Does it make sense to define a new bytecode instruction for
   <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><code class="function">RESTART-CASE</code></a>? Why? Why not?</p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="byte-when-add-a"></a>Answer: Is it speed critical?</h4></div></div></div><p><a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><code class="function">RESTART-CASE</code></a> is a glorified <a href="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html" target="_top"><code class="function">LET</code></a> binding
   for <code class="varname">SYSTEM::*ACTIVE-RESTARTS*</code> and could well profit
   from a separate bytecode: it would make it non-<a href="http://www.lisp.org/HyperSpec/Body/glo_c.html#cons" target="_top">consing[3]</a>.
   (Remember that <a href="http://www.lisp.org/HyperSpec/Body/syscla_restart.html" target="_top"><code class="classname">RESTART</code></a>s have dynamic extent and therefore do not
   really need to be heap allocated.)</p><p>The reason <a href="http://www.lisp.org/HyperSpec/Body/mac_handler-bind.html" target="_top"><code class="function">HANDLER-BIND</code></a> has its own bytecodes and
   <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><code class="function">RESTART-CASE</code></a> does not is that <a href="http://www.lisp.org/HyperSpec/Body/mac_handler-bind.html" target="_top"><code class="function">HANDLER-BIND</code></a> can occur in inner
   computation loops, whereas <a href="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html" target="_top"><code class="function">RESTART-CASE</code></a> occurs only as part of
   user-interface programming and therefore not in inner loops where its
   consing could hurt much.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="byte-jmptail-q"></a>36.6.2. Why <a href="#instr-jump" title="36.5.5.&#xA0;Instructions for control flow, jumps">JMPTAIL</a>?</h3></div></div></div><div class="abstract"><p class="title"><b>Question:</b></p><p>Consider this function and its disassembly:</p><pre class="programlisting">
 (defun foo (x y) (if (or (= x 0) (= y 0)) (+ x y) (foo y (1- x))))
 (<a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><code class="function">DISASSEMBLE</code></a> 'foo)
8     (LOAD&amp;PUSH 1)
9     (LOAD&amp;DEC&amp;PUSH 3)
11    (JMPTAIL 2 5 L0)
    </pre><p>
    Why are the arguments pushed onto the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a>, just to be popped off of
    it during the <span class="byte"><code class="literal">JMPTAIL</code></span>?
    Why not a sequence of <span class="byte"><code class="literal">LOAD</code></span>,
    <span class="byte"><code class="literal">STORE</code></span> and
    <span class="byte"><code class="literal">SKIP</code></span> instructions
    followed by a <span class="byte"><code class="literal">JMP</code></span>?
 </p></div><div class="simplesect" lang="en" xml:lang="en"><div class="titlepage"><div><div><h4 class="title"><a id="byte-jmptail-a"></a>Answer: This is a shortcut for the most common use</h4></div></div></div><p>Using <span class="byte"><code class="literal">JMPTAIL</code></span> requires 3
   instructions, <span class="byte"><code class="literal">JMP</code></span> requires more.
   When <span class="byte"><code class="literal">JMPTAIL</code></span> needs to be called, we
   usually have some stuff close to the top of the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> which will
   become the new arguments, and some junk between these new arguments
   and the closure object.  <span class="byte"><code class="literal">JMPTAIL</code></span>
   removes the junk.  <span class="byte"><code class="literal">JMPTAIL</code></span> is a
   convenient shortcut which shortens the bytecode - because typically
   one would really have to clean-up the <a href="impnotes.html#vm" class="olink"><code class="literal">STACK</code></a> by hand or make the
   calculations in <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/compiler.lisp"><code class="filename">src/compiler.lisp</code></a>
   more complicated.</p></div></div></div></div></div><div class="part" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="appendices"></a>Part IV. Appendices</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="appendix"><a href="#faq">A. Frequently Asked Questions (With Answers)
  about <span><strong class="command">CLISP</strong></span></a></span></dt><dt><span class="appendix"><a href="#gfdl">B. GNU Free Documentation License</a></span></dt><dd><dl><dt><span class="section"><a href="#gfdl-0">B.1. PREAMBLE</a></span></dt><dt><span class="section"><a href="#gfdl-1">B.2. APPLICABILITY AND DEFINITIONS</a></span></dt><dt><span class="section"><a href="#gfdl-2">B.3. VERBATIM COPYING</a></span></dt><dt><span class="section"><a href="#gfdl-3">B.4. COPYING IN QUANTITY</a></span></dt><dt><span class="section"><a href="#gfdl-4">B.5. MODIFICATIONS</a></span></dt><dt><span class="section"><a href="#gfdl-5">B.6. COMBINING DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-6">B.7. COLLECTIONS OF DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-7">B.8. AGGREGATION WITH INDEPENDENT WORKS</a></span></dt><dt><span class="section"><a href="#gfdl-8">B.9. TRANSLATION</a></span></dt><dt><span class="section"><a href="#gfdl-9">B.10. TERMINATION</a></span></dt><dt><span class="section"><a href="#gfdl-10">B.11. FUTURE REVISIONS OF THIS LICENSE</a></span></dt><dt><span class="section"><a href="#gfdl-addendum">B.12. ADDENDUM: How to use this License for
  your documents</a></span></dt></dl></dd><dt><span class="appendix"><a href="#gpl">C. GNU General Public License</a></span></dt><dd><dl><dt><span class="sect1"><a href="#gpl-1">C.1. Preamble</a></span></dt><dt><span class="sect1"><a href="#gpl-2">C.2. TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gpl-2-0">C.2.1. Section 0</a></span></dt><dt><span class="sect2"><a href="#gpl-2-1">C.2.2. Section 1</a></span></dt><dt><span class="sect2"><a href="#gpl-2-2">C.2.3. Section 2</a></span></dt><dt><span class="sect2"><a href="#gpl-2-3">C.2.4. Section 3
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-4">C.2.5. Section 4
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-5">C.2.6. Section 5
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-6">C.2.7. Section 6
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-7">C.2.8. Section 7
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-8">C.2.9. Section 8
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-9">C.2.10. Section 9
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-10">C.2.11. Section 10
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-11">C.2.12. NO WARRANTY Section 11
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-12">C.2.13. Section 12
      </a></span></dt></dl></dd><dt><span class="sect1"><a href="#gpl-3">C.3. How to Apply These Terms to Your New Programs
    </a></span></dt></dl></dd></dl></div><div class="appendix" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="faq"></a>Appendix A. Frequently Asked Questions (With Answers)
  about <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h2></div></div></div><div class="abstract"><a id="faq-abstract"></a><p class="title"><b>Abstract</b></p><p>This is a list of frequently asked questions about <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> on the
<a href="http://sourceforge.net/mail/?group_id=1355" target="_top">CLISP mailing
 lists</a>
and the USENET newsgroup
<a href="http://groups.google.com/groups?as_ugroup=comp.lang.lisp" target="_top">comp.lang.lisp</a>.
<span class="emphasis"><em>All</em></span> the legitimate technical question are addressed
in the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> documentation (<a href="impnotes.html#impnotes-top" class="olink">CLISP impnotes</a>,
<a href="clisp.html#clisp" class="olink">clisp(1)</a>), and for such questions this
list provides a link into the docs.
The frequently asked <a href="#faq-meta">political</a> questions are
answered here in <span class="emphasis"><em>full</em></span> detail (meaning that no
further explanations of the issues could be provided).</p><p>Please submit more questions (and answers!) to <code class="email">&lt;<a href="mailto:clisp-list@lists.sourceforge.net">clisp-list@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-list</a>).</p></div><div class="qandaset"><h2 class="title">FAQ</h2><dl><dt>A.1.  <a href="#faq-meta">Meta Information</a></dt><dd><dl><dt>A.1.1.  <a href="#faq-meta-misc">Miscellaneous</a></dt><dd><dl><dt>A.1.1.1. <a href="#faq-doc">The official CLISP
   documentation sucks - is anything better available?</a></dt><dt>A.1.1.2. <a href="#faq-gpl">License
   - why GNU GPL?</a></dt><dt>A.1.1.3. <a href="#faq-ansi">What about
   [ANSI CL standard] compliance?</a></dt><dt>A.1.1.4. <a href="#faq-help">How do I
   ask for help?</a></dt><dt>A.1.1.5. <a href="#faq-mailing-lists">Which mailing lists should I subscribe to?</a></dt><dt>A.1.1.6. <a href="#faq-rejected">Why
   is my mail to a mailing list rejected?</a></dt><dt>A.1.1.7. <a href="#faq-bugs">How do I
   report bugs?</a></dt><dt>A.1.1.8. <a href="#faq-contrib">How
   do I help?</a></dt><dt>A.1.1.9. <a href="#faq-debug">How do I
   debug CLISP?</a></dt></dl></dd><dt>A.1.2.  <a href="#faq-menorah">Logo</a></dt><dd><dl><dt>A.1.2.1. <a href="#faq-menorah-why">Why
   is CLISP using menorah as the logo?</a></dt><dt>A.1.2.2. <a href="#faq-menorah-current">Shouldn't the logo be changed now due to the current
   political developments in the Middle East?</a></dt><dt>A.1.2.3. <a href="#faq-menorah-other">Aren't there other political issues of concern?</a></dt><dt>A.1.2.4. <a href="#faq-menorah-users">Aren't you afraid of losing some users who are offended by
   the logo?</a></dt><dt>A.1.2.5. <a href="#faq-menorah-unprofessional">Using software to
   promote a political agenda is unprofessional!</a></dt></dl></dd></dl></dd><dt>A.2.  <a href="#faq-run">Running <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></a></dt><dd><dl><dt>A.2.1. <a href="#faq-defun">Where is
   DEFUN?</a></dt><dt>A.2.2. <a href="#faq-ide">Where is the IDE?</a></dt><dt>A.2.3. <a href="#faq-opt">What are the
   command line arguments?</a></dt><dt>A.2.4. <a href="#faq-debugger">How
   do I get out of the debugger?</a></dt><dt>A.2.5. <a href="#faq-ext">What CLISP
   extensions are available?</a></dt><dt>A.2.6. <a href="#faq-rc">Where is the
   init (“RC”) file on my platform?</a></dt><dt>A.2.7. <a href="#faq-modules">Where
   are the modules with which I built CLISP?</a></dt><dt>A.2.8. <a href="#faq-gui">How do I create
   a GUI
   for my CLISP program?</a></dt></dl></dd><dt>A.3.  <a href="#faq-delivery">Application Delivery</a></dt><dd><dl><dt>A.3.1. <a href="#faq-exec">How do I
   create an executable file with all my code in it?</a></dt><dt>A.3.2. <a href="#faq-licensing">When
 I deliver my application with CLISP does it have to be covered by
   GNU GPL?</a></dt></dl></dd><dt>A.4.  <a href="#faq-trouble">Troubles</a></dt><dd><dl><dt>A.4.1. <a href="#faq-build">Why does not
   CLISP build on my platform?</a></dt><dt>A.4.2. <a href="#faq-enc-err">What do
   these messages mean: “invalid byte #x94 in
    CHARSET:ASCII conversion” and
   “character #\u00B3 cannot be represented in the
    character set CHARSET:ASCII”?</a></dt><dt>A.4.3. <a href="#faq-rl-tab">What does
   this message mean: “Display all 1259
     possibilities? (y or n)”</a></dt><dt>A.4.4. <a href="#faq-no-rl">Why does
   not command line editing work?</a></dt><dt>A.4.5. <a href="#faq-stack">How do I
   avoid stack overflow?</a></dt><dt>A.4.6. <a href="#faq-self-mod">Why does my program return different values on each
   invocation?</a></dt><dt>A.4.7. <a href="#faq-autoconf">Why
   is autoconf invoked during build?</a></dt><dt>A.4.8. <a href="#faq-fp">Why don't floating
   point arithmetics return what I want?
(- 1.1 0.9)
⇒ 0.20000005
</a></dt><dt>A.4.9. <a href="#faq-random">Why does
   $ clisp -x '(RANDOM 1s0)'
   always print the same number?</a></dt><dt>A.4.10. <a href="#faq-warning">How do I disable this annoying
   warning?</a></dt><dt>A.4.11. <a href="#faq-other-problem">Why is the function FOO
   broken?!</a></dt></dl></dd></dl><table border="0" summary="Q and A Set"><col align="left" width="1%" /><tbody><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a id="faq-meta"></a>A.1. Meta Information</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>A.1.1.  <a href="#faq-meta-misc">Miscellaneous</a></dt><dd><dl><dt>A.1.1.1. <a href="#faq-doc">The official CLISP
   documentation sucks - is anything better available?</a></dt><dt>A.1.1.2. <a href="#faq-gpl">License
   - why GNU GPL?</a></dt><dt>A.1.1.3. <a href="#faq-ansi">What about
   [ANSI CL standard] compliance?</a></dt><dt>A.1.1.4. <a href="#faq-help">How do I
   ask for help?</a></dt><dt>A.1.1.5. <a href="#faq-mailing-lists">Which mailing lists should I subscribe to?</a></dt><dt>A.1.1.6. <a href="#faq-rejected">Why
   is my mail to a mailing list rejected?</a></dt><dt>A.1.1.7. <a href="#faq-bugs">How do I
   report bugs?</a></dt><dt>A.1.1.8. <a href="#faq-contrib">How
   do I help?</a></dt><dt>A.1.1.9. <a href="#faq-debug">How do I
   debug CLISP?</a></dt></dl></dd><dt>A.1.2.  <a href="#faq-menorah">Logo</a></dt><dd><dl><dt>A.1.2.1. <a href="#faq-menorah-why">Why
   is CLISP using menorah as the logo?</a></dt><dt>A.1.2.2. <a href="#faq-menorah-current">Shouldn't the logo be changed now due to the current
   political developments in the Middle East?</a></dt><dt>A.1.2.3. <a href="#faq-menorah-other">Aren't there other political issues of concern?</a></dt><dt>A.1.2.4. <a href="#faq-menorah-users">Aren't you afraid of losing some users who are offended by
   the logo?</a></dt><dt>A.1.2.5. <a href="#faq-menorah-unprofessional">Using software to
   promote a political agenda is unprofessional!</a></dt></dl></dd></dl></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h4 class="title"><a id="faq-meta-misc"></a>A.1.1. Miscellaneous</h4></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>A.1.1.1. <a href="#faq-doc">The official CLISP
   documentation sucks - is anything better available?</a></dt><dt>A.1.1.2. <a href="#faq-gpl">License
   - why GNU GPL?</a></dt><dt>A.1.1.3. <a href="#faq-ansi">What about
   [ANSI CL standard] compliance?</a></dt><dt>A.1.1.4. <a href="#faq-help">How do I
   ask for help?</a></dt><dt>A.1.1.5. <a href="#faq-mailing-lists">Which mailing lists should I subscribe to?</a></dt><dt>A.1.1.6. <a href="#faq-rejected">Why
   is my mail to a mailing list rejected?</a></dt><dt>A.1.1.7. <a href="#faq-bugs">How do I
   report bugs?</a></dt><dt>A.1.1.8. <a href="#faq-contrib">How
   do I help?</a></dt><dt>A.1.1.9. <a href="#faq-debug">How do I
   debug CLISP?</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-doc"></a><a id="faq-doc-q"></a><b>A.1.1.1.</b></td><td align="left" valign="top"><p>The official <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
   documentation sucks - is anything better available?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>As with all generic complaints, the answer to this one is
   <a href="http://www.cygwin.com/acronyms/#PTC" target="_top"><acronym class="acronym" title="Patches Thoughtfully Considered">PTC</acronym></a>.</p><p>Additionally, the nightly builds of the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> implementation
   notes documenting the current CVS head are available at
   <a href="http://www.podval.org/~sds/clisp/impnotes/" target="_top">http://www.podval.org/~sds/clisp/impnotes/</a>.
   It contains both the documentation for the new features and the
   general improvements in the documentation.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-gpl"></a><a id="faq-gpl-q"></a><b>A.1.1.2.</b></td><td align="left" valign="top"><p>License
   - why <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/doc/Why-CLISP-is-under-GPL">Because
   <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a></a>.</p><p>Note that this does not necessarily prevent you from distributing
 your proprietary products based on <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>. See <span class="emphasis"><em>Note</em></span>
 in <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/COPYRIGHT"><code class="filename">COPYRIGHT</code></a>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-ansi"></a><a id="faq-ansi-q"></a><b>A.1.1.3.</b></td><td align="left" valign="top"><p>What about
   [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] compliance?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
  <a href="http://www.lisp.org/HyperSpec/Body/glo_p.html#purports_to_conform" target="_top"><span class="emphasis"><em>purports
    to conform</em></span></a> to the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] specification,
  so all deviations in </p><pre class="screen"><code class="prompt">$</code> clisp <a href="clisp.html#opt-ansi" class="olink"><code class="option">-ansi</code></a></pre><p>
  from the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>] standard are bugs and are not (yet) fixed only due
  to lack of resources.</p><p>On the other hand, some decisions made by the ANSI X3J13 committee
  were not as justified from the <span class="emphasis"><em>technical</em></span> point of
  view as were most of them, and some of those questionable decisions
  were made <span class="emphasis"><em>after</em></span> the alternative behavior has
  already been implemented in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.  The <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> developers took
  pains to modify <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> to unconditionally comply with the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>]
  specification in all cases <a href="#ansi" title="30.10.&#xA0;Maximum ANSI CL compliance">except for a handful
  of situations where they believed that the committee had made a
  mistake</a>, in which cases the committee behavior
  is <span class="emphasis"><em>still</em></span> optionally available.</p><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> does not start in the ansi mode by default for
  historical reasons and this is not about to change.
  <a href="#image" title="30.2.&#xA0;Saving an Image">Dumping an image</a> or
  <a href="clisp.html#opt-ansi" class="olink">passing a command line
   argument</a> are easy enough.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-help"></a><a id="faq-help-q"></a><b>A.1.1.4.</b></td><td align="left" valign="top"><p>How do I
   ask for help?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Politely - please refer to <a class="rfc" href="http://rfc.net/rfc1855.html"><code>Netiquette</code></a>.</p><p>If you have a question about <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>, you have the following options
  (listed in the order of decreasing audience size):
  </p><div class="variablelist"><dl><dt><span class="term">USENET group <a href="http://groups.google.com/groups?as_ugroup=comp.lang.lisp" target="_top">comp.lang.lisp</a></span></dt><dd>This is the right place to ask all general Lisp
      questions, such as <a href="http://www.lisp.org/HyperSpec/Body/acc_charcm_schar.html" target="_top">"how
       do I access a character in a string?"</a></dd><dt><span class="term"><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> User Mailing List <code class="email">&lt;<a href="mailto:clisp-list@lists.sourceforge.net">clisp-list@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-list</a>)<br /></span><span class="term">AKA <a href="http://news.gmane.org/gmane.lisp.clisp.general" target="_top">http://news.gmane.org/gmane.lisp.clisp.general</a>
    </span></dt><dd>This is the right place to ask user-level
      <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>-specific questions, such as
      <a href="#image" title="30.2.&#xA0;Saving an Image">"how do I save my <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> image?"</a>
   </dd><dt><span class="term"><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> Developer Mailing List <code class="email">&lt;<a href="mailto:clisp-devel@lists.sourceforge.net">clisp-devel@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-devel" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-devel</a>)<br /></span><span class="term">AKA <a href="http://news.gmane.org/gmane.lisp.clisp.devel" target="_top">http://news.gmane.org/gmane.lisp.clisp.devel</a></span></dt><dd>This is the right place to discuss <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
      internals, submit patches, offer help.  You must be subscribed to post.
      If you read this list on <a href="http://gmane.org" target="_top">Gmane</a>
      and do not want to receive it also by e-mail, you can subscribe to
      it using the aforementioned web interface and then disable mail
      delivery.</dd><dt><span class="term"><a href="http://sourceforge.net/project/memberlist.php?group_id=1355" target="_top">Individual <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> developers</a></span></dt><dd>This is <span class="emphasis"><em>never</em></span> the right thing to
      do, unless you want to <span class="emphasis"><em>hire</em></span> this developer to do
      <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> consulting (commercial support, custom enhancements etc).
      This is actually for your own benefit: the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> developers are very
      busy, they might get weeks to answer your question,
      and some other user may be able to help you in the meantine;
      as well as for the benefit of the other <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> users,
      since the mailing lists are publicly archived (you are encouraged
      to <a href="http://clisp.cons.org" target="_top">search</a> them before asking).
      Please do <span class="strong"><strong>not</strong></span> copy your messages to the
      individual developers.</dd></dl></div></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-mailing-lists"></a><a id="faq-mailing-lists-q"></a><b>A.1.1.5.</b></td><td align="left" valign="top"><p>Which mailing lists should I subscribe to?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Cross-posting in the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> mailing lists is very
  actively discouraged and is virtually non-existent, thus you can
  subscribe to all mailing lists that are relevant to you without getting
  duplicate messages:</p><div class="variablelist"><dl><dt><span class="term"><code class="email">&lt;<a href="mailto:clisp-announce@lists.sourceforge.net">clisp-announce@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-announce" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-announce</a>)</span></dt><dd>extremely low-level moderated list, you should
    definitely subscribe to this list if you have any interest in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
    whatsoever</dd><dt><span class="term"><code class="email">&lt;<a href="mailto:clisp-list@lists.sourceforge.net">clisp-list@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-list</a>)</span></dt><dd>subscribe to this list of you use <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> and want
    to ask (and answer!) questions</dd><dt><span class="term"><code class="email">&lt;<a href="mailto:clisp-devel@lists.sourceforge.net">clisp-devel@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-devel" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-devel</a>)</span></dt><dd>subscribe to this list if you want to help with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
    developments; CVS commit notes go here (as a daily digest).</dd></dl></div></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-rejected"></a><a id="faq-rejected-q"></a><b>A.1.1.6.</b></td><td align="left" valign="top"><p>Why
   is my mail to a mailing list rejected?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> mailing lists get a lot of spam, so the
  maintainers have to take care to protect the users.  If you get a note
  that “<span class="quote">your message is held for moderator's approval</span>”, you
  can safely <span class="strong"><strong>assume that it went
   to <code class="filename">/dev/null</code></strong></span>
  and try again, noting the following:</p><div class="variablelist"><dl><dt><span class="term"><code class="email">&lt;<a href="mailto:clisp-announce@lists.sourceforge.net">clisp-announce@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-announce" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-announce</a>)</span></dt><dd>do not mail here without a prior discussion
    on <code class="email">&lt;<a href="mailto:clisp-devel@lists.sourceforge.net">clisp-devel@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-devel" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-devel</a>)</dd><dt><span class="term"><code class="email">&lt;<a href="mailto:clisp-devel@lists.sourceforge.net">clisp-devel@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-devel" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-devel</a>)</span></dt><dd>subscriber-only, you <span class="emphasis"><em>must</em></span> post
    from a <span class="strong"><strong>subscribed address</strong></span>,
    no exceptions (see <a href="#faq-help">above</a>)
 </dd><dt><span class="term"><code class="email">&lt;<a href="mailto:clisp-list@lists.sourceforge.net">clisp-list@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-list</a>)</span></dt><dd><p>the only open list, so it is filtered especially
    aggressively:</p><div class="itemizedlist"><ul type="disc"><li>no <a class="rfc" href="http://rfc.net/rfc2045.html"><code>MIME</code></a> mail (no <a href="http://www.w3.org/MarkUp/" target="_top">HTML</a> formatting, no
       attachments - send the URL instead)</li><li>the list address must be in <code class="literal">CC</code>
       or <code class="literal">TO</code>, not <code class="literal">BCC</code>.
     </li><li>do not mention “<span class="quote">virgin</span>”,
       “<span class="quote">penis</span>” or “<span class="quote">viagra</span>” in
       the <code class="literal">Subject</code> line.</li></ul></div></dd></dl></div><p>If you do not like this policy, please volunteer to maintain the
  mailing lists - you will be required to go through all the
  “<span class="quote">held for moderator's approval</span>” mail and approve/discard
  as appropriate at least twice a day.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-bugs"></a><a id="faq-bugs-q"></a><b>A.1.1.7.</b></td><td align="left" valign="top"><p>How do I
   report bugs?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a href="clisp.html#bugs" class="olink">Patiently</a>!
</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-contrib"></a><a id="faq-contrib-q"></a><b>A.1.1.8.</b></td><td align="left" valign="top"><p>How
   do I help?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Please read <a href="#extend" title="Chapter&#xA0;35.&#xA0;Extending CLISP">Chapter 35, <i>Extending <span><strong class="command">CLISP</strong></span></i></a> and submit your patch,
  together with a <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/ChangeLog"><code class="filename">src/ChangeLog</code></a>
  entry (see other entries there for inspiration), to <code class="email">&lt;<a href="mailto:clisp-devel@lists.sourceforge.net">clisp-devel@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-devel" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-devel</a>).</p><p>See <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/CodingStyle"><code class="filename">src/CodingStyle</code></a> for the
  style one should follow.</p><p>If your patch is more than just a few lines, it is
  <span class="emphasis"><em>much</em></span> preferred that you make your patch available
  on the web and send the link to the list.</p><p>The patch must be against the
  <a href="http://www.cvshome.org" target="_top">CVS</a> head
  (reasonably recent).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-debug"></a><a id="faq-debug-q"></a><b>A.1.1.9.</b></td><td align="left" valign="top"><p>How do I
   debug <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>When debugging the core:</p><pre class="screen">
<code class="prompt">$</code> ./configure --with-debug --build build-g
<code class="prompt">$</code> cd build-g
<code class="prompt">$</code> gdb lisp.run            ;; or lisp.exe on windows and cygwin
<code class="prompt">(gdb)</code> base
<code class="prompt">(gdb)</code> run
</pre><p>When debugging module <code class="literal">foo</code>:</p><pre class="screen">
<code class="prompt">$</code> ./configure --with-debug --with-module=foo --build build-g
<code class="prompt">$</code> cd build-g
<code class="prompt">$</code> gdb full/lisp.run       ;; or lisp.exe on windows and cygwin
<code class="prompt">(gdb)</code> full
<code class="prompt">(gdb)</code> run
</pre></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h4 class="title"><a id="faq-menorah"></a>A.1.2. Logo</h4></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>A.1.2.1. <a href="#faq-menorah-why">Why
   is CLISP using menorah as the logo?</a></dt><dt>A.1.2.2. <a href="#faq-menorah-current">Shouldn't the logo be changed now due to the current
   political developments in the Middle East?</a></dt><dt>A.1.2.3. <a href="#faq-menorah-other">Aren't there other political issues of concern?</a></dt><dt>A.1.2.4. <a href="#faq-menorah-users">Aren't you afraid of losing some users who are offended by
   the logo?</a></dt><dt>A.1.2.5. <a href="#faq-menorah-unprofessional">Using software to
   promote a political agenda is unprofessional!</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-menorah-why"></a><a id="faq-menorah-why-q"></a><b>A.1.2.1.</b></td><td align="left" valign="top"><p>Why
   is <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> using menorah as the logo?</p></td></tr><tr class="answer"><td align="left" valign="top"><b>Whimsical</b></td><td align="left" valign="top"><p>If you must have some answer and you do not care whether it is
  correct or not, you may simply think that <a href="http://www.lisp.org" target="_top"><span><strong class="command">Common Lisp</strong></span></a> brings
  the <span class="emphasis"><em>Light</em></span> to a programmer, and <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is a
  vehicle that carries the <span class="emphasis"><em>Light</em></span>.</p><p>Accordingly, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> enables you to <span class="emphasis"><em>see</em></span> the
  truth, thus you can pronounce it as <span class="emphasis"><em>see-lisp</em></span>.
  Alternatively, if you are a <span class="emphasis"><em>seasoned</em></span> expert,
  you might pronounce it as <span class="emphasis"><em>sea-lisp</em></span>.</p></td></tr><tr class="answer"><td align="left" valign="top"><b>Historical</b></td><td align="left" valign="top"><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has been using the menorah for the logo since the project was
   first started in the late 1980-ies by Bruno Haible and Michael Stoll.
   This <span class="emphasis"><em>probably</em></span> reflects the authors' affection
   toward the Jewish people, Judaism or the State of Israel
   (neither of the two original authors is Jewish by birth).
   You may ask the original authors for details yourself.
   Both of them are very busy though, so do not expect a prompt reply.
 </p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-menorah-current"></a><a id="faq-menorah-current-q"></a><b>A.1.2.2.</b></td><td align="left" valign="top"><p>Shouldn't the logo be changed now due to the current
   political developments in the Middle East?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> developers, both the original creators and the
  current maintainers, do not subscribe to the mainstream view that
  blames the Jews for everything from high oil prices and Islamic
  extremism to El Niño and Sun spots.</p><p>Moreover, today, when Jews are being pushed out of the American
  and European academic institutions with various obscene
  <a href="http://how_to_help_israel.tripod.com/Petition.htm" target="_top">boycott</a>
  and <a href="http://www.divestmentwatch.com/" target="_top">divestment</a>
  campaigns, it is crucial for all of us to stand together against
  the resurgence of Nazism.</p><p>For more information, please see:
 </p><div class="itemizedlist"><ul type="disc"><li><a href="http://www.camera.org/" target="_top">Committee for
     Accuracy in Middle East Reporting in America</a></li><li><a href="http://www.iris.org.il/" target="_top">Information
     Regarding Israel's Security</a></li><li><a href="http://www.memri.org/" target="_top">Middle East
     Media Research Institute</a></li><li><a href="http://www.mideasttruth.com/" target="_top">YES to
     peace, NO to terror</a></li><li><a href="http://www.mideasttruth.com/links.html" target="_top">More
     links</a></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-menorah-other"></a><a id="faq-menorah-other-q"></a><b>A.1.2.3.</b></td><td align="left" valign="top"><p>Aren't there other political issues of concern?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Yes, there are!  For example, in 1989 the communist
  government of the People's Republic of China murdered some 3000+
  student human rights protesters at the Tienanmen square in Beijing,
  and people appear to have already forgotten this crime.
  A note to that effect was kept in the file
  <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/timezone.lisp"><code class="filename">src/timezone.lisp</code></a>
  until 2002, when it was decided that is was not visible enough there
  and moved it here.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-menorah-users"></a><a id="faq-menorah-users-q"></a><b>A.1.2.4.</b></td><td align="left" valign="top"><p>Aren't you afraid of losing some users who are offended by
   the logo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Do you have in mind people like
  <a href="http://groups.google.com/groups?selm=989898671967295%40amnet.net.ae" target="_top">this</a> one?
  Good riddance!</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-menorah-unprofessional"></a><a id="faq-menorah-unprofessional-q"></a><b>A.1.2.5.</b></td><td align="left" valign="top"><p>Using software to
   promote a political agenda is unprofessional!</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Expressing their opinion is a perfectly natural thing for the
  authors, be it artistic preferences, political views or religious beliefs.
  The use of the menorah has its roots somewhere between these areas,
  and the authors are proud to display it.
  If you are unlucky enough to have lost the freedom to express your
  opinion, due to the constraints of a government, society, religion,
  or expectations of "professional relationships",
  the Free World condoles with you.
  The authors of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> are not operating under such constraints.
  If you are unhappy about their artistic preferences, political views or
  religious beliefs, you are free to ignore them.</p><p>Many scientists have been doing art, politics and religion.
  René Descartes and Isaak Newton combined mathematics and Christianity.
  Albert Einstein helped the U.S. to counter the danger of an atomic bomb
  in the hands of the Nazis.
  Bram Moolenaar, the author of <a href="http://www.vim.org/" target="_top">VIM</a>,
  promotes charitable donations to Uganda.</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a id="faq-run"></a>A.2. Running <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>A.2.1. <a href="#faq-defun">Where is
   DEFUN?</a></dt><dt>A.2.2. <a href="#faq-ide">Where is the IDE?</a></dt><dt>A.2.3. <a href="#faq-opt">What are the
   command line arguments?</a></dt><dt>A.2.4. <a href="#faq-debugger">How
   do I get out of the debugger?</a></dt><dt>A.2.5. <a href="#faq-ext">What CLISP
   extensions are available?</a></dt><dt>A.2.6. <a href="#faq-rc">Where is the
   init (“RC”) file on my platform?</a></dt><dt>A.2.7. <a href="#faq-modules">Where
   are the modules with which I built CLISP?</a></dt><dt>A.2.8. <a href="#faq-gui">How do I create
   a GUI
   for my CLISP program?</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-defun"></a><a id="faq-defun-q"></a><b>A.2.1.</b></td><td align="left" valign="top"><p>Where is
   <a href="http://www.lisp.org/HyperSpec/Body/mac_defun.html" target="_top"><code class="function">DEFUN</code></a>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Pass <code class="option"><a href="clisp.html#opt-memfile" class="olink">-M</a></code> to the runtime (<code class="filename">lisp.run</code>
  or <code class="filename">lisp.exe</code>).
  Use the driver <code class="filename">clisp</code> (or
  <code class="filename">clisp.exe</code>) instead of invoking the runtime
  directly.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-ide"></a><a id="faq-ide-q"></a><b>A.2.2.</b></td><td align="left" valign="top"><p>Where is the <acronym class="acronym" title="Integrated Development Environment">IDE</acronym>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><b><a href="http://www.gnu.org/software/emacs/" target="_top">Emacs</a>-based. </b></p><div class="itemizedlist"><ul type="disc"><li><a href="http://www.gnu.org/software/emacs/manual/emacs.html#External%20Lisp" target="_top"><code class="function">inferior-lisp</code></a></li><li><a href="http://common-lisp.net/project/slime/" target="_top">SLIME</a></li><li><a href="http://sourceforge.net/projects/ilisp/" target="_top">ILISP</a></li><li><a href="http://cl-cookbook.sourceforge.net/windows.html" target="_top">The Common Lisp Cookbook</a></li></ul></div><p><b>non-<a href="http://www.gnu.org/software/emacs/" target="_top">Emacs</a>-based. </b></p><div class="itemizedlist"><ul type="disc"><li><a class="" href="http://www.google.com/search?q=VisualCLisp">VisualCLisp</a></li><li><a href="http://jabberwocky.sourceforge.net/" target="_top">Jabberwocky</a></li><li><a href="http://gclisp.sourceforge.net/" target="_top">GClisp</a></li><li><a href="http://common-lisp.net/project/phemlock/" target="_top">Portable Hemlock</a></li></ul></div></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-opt"></a><a id="faq-opt-q"></a><b>A.2.3.</b></td><td align="left" valign="top"><p>What are the
   command line arguments?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>See <a href="clisp.html#clisp" class="olink">clisp(1)</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-debugger"></a><a id="faq-debugger-q"></a><b>A.2.4.</b></td><td align="left" valign="top"><p>How
   do I get out of the debugger?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>See <a href="#debugger" title="25.1.&#xA0;Debugging Utilities&#10;   [CLHS-25.1.2]">Section 25.1, “Debugging Utilities
   [CLHS-25.1.2]”</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-ext"></a><a id="faq-ext-q"></a><b>A.2.5.</b></td><td align="left" valign="top"><p>What <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
   extensions are available?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><div class="variablelist"><dl><dt><span class="term">Distributed with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></span></dt><dd>Quite a few modules are
     <a href="#included-modules" title="31.2.9.&#xA0;Modules included in the source distribution">included</a> with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>,
     pass <code class="option">--with-module=...</code> to <code class="filename">configure</code>
     to build them and use the <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">full</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a>.
  </dd><dt><span class="term">3rd party</span></dt><dd>See the <span class="emphasis"><em>incomplete</em></span> list of
     <a href="http://clisp.cons.org/resources.html#software" target="_top">"Common
      Lisp software running in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>"</a>.
  </dd><dt><span class="term"><acronym class="acronym" title="Do It Yourself">DIY</acronym></span></dt><dd>See <a href="#modules" title="31.2.&#xA0;External Modules">Section 31.2, “External Modules”</a> and <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility">Section 31.3, “The Foreign Function Call Facility”</a>
     for information on how to interface with external <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a> libraries.
  </dd><dt><span class="term"><a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> (really Frequently Asked!)</span></dt><dd><div class="itemizedlist"><ul type="disc"><li><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> comes with
       <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/src/inspect.lisp"><code class="filename">src/inspect.lisp</code></a>
       which implements a rudimentary <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> server</li><li><a href="http://clocc.sourceforge.net/clocc/src/donc/http.lisp" target="_top">CLOCC/src/donc/</a> has an <a href="http://www.w3.org/Protocols/" target="_top"><span><strong class="command">HTTP</strong></span></a> server</li><li><a href="http://clocc.sourceforge.net/clocc/src/cllib/url.lisp" target="_top">CLOCC/src/cllib/</a> handles URLs</li><li><a href="http://www.fractalconcept.com/asp/mod_lisp" target="_top">mod_lisp</a>
       hooks lisp into <a href="http://www.apache.org/" target="_top">Apache</a></li><li><a href="http://alvin.jpl.nasa.gov/gat/ftp/http.lsp" target="_top">Object-Oriented HTTP server for <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></a></li></ul></div><p>Both <a href="http://allegroserve.sourceforge.net/" target="_top">AllegroServe</a>
     and <a href="http://www.ai.mit.edu/projects/iiip/doc/cl-http/" target="_top">CL-HTTP</a>
     require multithreading and do not work with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> yet.
</p></dd></dl></div></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-rc"></a><a id="faq-rc-q"></a><b>A.2.6.</b></td><td align="left" valign="top"><p>Where is the
   init (“<span class="quote">RC</span>”) file on my platform?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Read the file <code class="filename">&lt;clisp.html#opt-norc&gt;</code>
  in your build directory or binary distribution (this is the version of
  the user manual <a href="clisp.html#clisp" class="olink">clisp(1)</a> for your platform).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-modules"></a><a id="faq-modules-q"></a><b>A.2.7.</b></td><td align="left" valign="top"><p>Where
   are the modules with which I built <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>In the <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">full</strong></span></a> <a href="impnotes.html#linkset" class="olink">linking set</a>. Run <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> like this:
  </p><pre class="screen"><code class="prompt">$</code> clisp <code class="option"><a href="clisp.html#opt-link-set" class="olink">-K</a></code> full</pre><p>The reasons for <a href="impnotes.html#base-modules" class="olink"><span><strong class="command">base</strong></span></a> being the default are explained
 <a href="http://article.gmane.org/gmane.lisp.clisp.general:8691" target="_top">here</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-gui"></a><a id="faq-gui-q"></a><b>A.2.8.</b></td><td align="left" valign="top"><p>How do I create
   a <acronym class="acronym" title="Graphical User Interface">GUI</acronym>
   for my <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> program?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>There are many options,
  see <a href="http://clisp.cons.org/resources.html#software" target="_top">"Common
    Lisp software running in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>"</a>.</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a id="faq-delivery"></a>A.3. Application Delivery</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>A.3.1. <a href="#faq-exec">How do I
   create an executable file with all my code in it?</a></dt><dt>A.3.2. <a href="#faq-licensing">When
 I deliver my application with CLISP does it have to be covered by
   GNU GPL?</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-exec"></a><a id="faq-exec-q"></a><b>A.3.1.</b></td><td align="left" valign="top"><p>How do I
   create an executable file with all my code in it?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Use <a href="impnotes.html#image" class="olink"><code class="function">EXT:SAVEINITMEM</code></a>, see also <a href="#quickstart" title="31.6.&#xA0;Quickstarting delivery with CLISP">Section 31.6, “Quickstarting delivery with <span><strong class="command">CLISP</strong></span>”</a>.
</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-licensing"></a><a id="faq-licensing-q"></a><b>A.3.2.</b></td><td align="left" valign="top"><p>When
 I deliver my application with <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> does it have to be covered by
   <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Not necessarily.</p><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> is <a href="http://www.gnu.org/philosophy/free-sw.html" target="_top">Free
  Software</a>, covered by the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>, with special
 terms governing the distribution of applications that run in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 The precise terms can be found in the
 <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/COPYRIGHT"><code class="filename">COPYRIGHT</code></a>
 file contained in the source and binary distributions of <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 Here is an informal clarification of what these terms mean in practice.
 Please refer to the said <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/COPYRIGHT"><code class="filename">COPYRIGHT</code></a>
 file when in doubt.</p><p>In many cases, <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> does not force an application to be covered
 by the <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>. Nevertheless, we encourage you to release your software
 under an open source license. The benefits of such a license for
 your users are numerous, in particular they are free to modify the
 application when their needs/requirements change, and they are free to
 recompile the application when they upgrade their machine or operating
 system.</p><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <span class="emphasis"><em>extensions</em></span>, i.e. programs which need
 to access non-portable <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> internal symbols (in the packages
 <a href="#sys-pac"><strong class="package">“<span class="quote">SYSTEM</span>”</strong></a>, <a href="#classes" title="4.2.&#xA0;Classes&#10;  [CLHS-4.3]"><strong class="package">“<span class="quote">CLOS</span>”</strong></a>, <a href="#dffi" title="31.3.&#xA0;The Foreign Function Call Facility"><strong class="package">“<span class="quote">FFI</span>”</strong></a>, etc), must be covered by <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>
 as well.</p><p>Other programs running in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> have to or need not to be placed
 under <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>, depending on their distribution form:

</p><div class="itemizedlist"><ul type="disc"><li>Programs distributed as Lisp source or <code class="filename">#P".fas"</code>
   files can be distributed without restrictions coming from <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 </li><li>Programs distributed as <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="impnotes.html#image" class="olink">memory image</a>s can be
  distributed only if accompanied with the non-<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <code class="filename">#P".fas"</code> files
  which make up the <a href="impnotes.html#image" class="olink">memory image</a>, and a <code class="filename">Makefile</code> (or clear textual
  instructions) for rebuilding the <a href="impnotes.html#image" class="olink">memory image</a>.</li><li>If you need to distribute a modified <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>
  executable (for example, incorporating additional <a href="#modules" title="31.2.&#xA0;External Modules">module</a>s written
  in <a href="http://www.eskimo.com/~scs/C-faq/top.html" target="_top"><span><strong class="command">C</strong></span></a>), you must distribute its full source under <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL</a>.
  If you are not satisfied with this, you can instead put the additional
  <a href="#modules" title="31.2.&#xA0;External Modules">module</a>s into a separate (non-<a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>) program, with which your Lisp
  program will communicate via <a href="#socket" title="31.5.&#xA0;Socket Streams"><code class="classname">SOCKET:SOCKET-STREAM</code></a>s.</li></ul></div></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a id="faq-trouble"></a>A.4. Troubles</h3></td></tr><tr class="toc"><td align="left" valign="top" colspan="2"><dl><dt>A.4.1. <a href="#faq-build">Why does not
   CLISP build on my platform?</a></dt><dt>A.4.2. <a href="#faq-enc-err">What do
   these messages mean: “invalid byte #x94 in
    CHARSET:ASCII conversion” and
   “character #\u00B3 cannot be represented in the
    character set CHARSET:ASCII”?</a></dt><dt>A.4.3. <a href="#faq-rl-tab">What does
   this message mean: “Display all 1259
     possibilities? (y or n)”</a></dt><dt>A.4.4. <a href="#faq-no-rl">Why does
   not command line editing work?</a></dt><dt>A.4.5. <a href="#faq-stack">How do I
   avoid stack overflow?</a></dt><dt>A.4.6. <a href="#faq-self-mod">Why does my program return different values on each
   invocation?</a></dt><dt>A.4.7. <a href="#faq-autoconf">Why
   is autoconf invoked during build?</a></dt><dt>A.4.8. <a href="#faq-fp">Why don't floating
   point arithmetics return what I want?
(- 1.1 0.9)
⇒ 0.20000005
</a></dt><dt>A.4.9. <a href="#faq-random">Why does
   $ clisp -x '(RANDOM 1s0)'
   always print the same number?</a></dt><dt>A.4.10. <a href="#faq-warning">How do I disable this annoying
   warning?</a></dt><dt>A.4.11. <a href="#faq-other-problem">Why is the function FOO
   broken?!</a></dt></dl></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-build"></a><a id="faq-build-q"></a><b>A.4.1.</b></td><td align="left" valign="top"><p>Why does not
   <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> build on my platform?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Please see file
  <a class="clisp-cvs" href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/*checkout*/clisp/clisp/unix/PLATFORMS"><code class="filename">unix/PLATFORMS</code></a> in your source
  distribution for information about some known troublesome platforms
  as well as instructions on porting <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> to new platforms.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-enc-err"></a><a id="faq-enc-err-q"></a><b>A.4.2.</b></td><td align="left" valign="top"><p>What do
   these messages mean: “<span class="quote"><code class="computeroutput">invalid byte #x94 in
    CHARSET:ASCII conversion</code></span>” and
   “<span class="quote"><code class="computeroutput">character #\u00B3 cannot be represented in the
    character set CHARSET:ASCII</code></span>”?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This means that you are trying to read (“<span class="quote">invalid
 byte</span>”) or write (“<span class="quote">character cannot be represented</span>”)
 a non-<a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> character from (or to) a character stream which has
 <a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> <a href="#extfmt"><code class="constant">:EXTERNAL-FORMAT</code></a>. The default is described in
  <a href="clisp.html#opt-enc" class="olink">-Edomain encoding</a>.</p><p>This may also be caused by filesystem access.
 If your <a href="impnotes.html#path-enc" class="olink"><code class="varname">CUSTOM:*PATHNAME-ENCODING*</code></a> is set incorrectly, many filesystem accesses (like
 <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><code class="function">LOAD</code></a>, <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> etc) will raise this error.
 Note that <a href="http://www.lisp.org/HyperSpec/Body/fun_load.html" target="_top"><code class="function">LOAD</code></a> will traverse the directories mentioned in <a href="#load-paths"><code class="varname">CUSTOM:*LOAD-PATHS*</code></a>
 - this applies to the <a href="#faq-rc">init (RC) file</a> too.
 You will need to set <a href="impnotes.html#path-enc" class="olink"><code class="varname">CUSTOM:*PATHNAME-ENCODING*</code></a> or pass <code class="option"><a href="clisp.html#opt-enc" class="olink">-Edomain encoding</a></code> to <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 Using a “<span class="quote">1:1</span>” encoding, such as
 <a href="#charset-ISO-8859-1"><code class="constant">ISO-8859-1</code></a>,
 should help you avoid this error.</p><p>Note that this error may be signaled by the Print part of the
 <a href="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html" target="_top">read-eval-print loop</a> and <span class="strong"><strong>not</strong></span> by the function you call.
 E.g., if file <code class="filename">"foo"</code> contains non-<a href="http://www.cplusplus.com/doc/papers/ascii.html" target="_top"><span class="strong"><strong>ASCII</strong></span></a> characters,
 you will see such an error when you type</p><pre class="programlisting">
(with-open-file (s "foo" :direction :input :external-format charset:iso-8859-1)
  (read-line s))
</pre><p> If instead you type </p><pre class="programlisting">
(with-open-file (s "foo" :direction :input :external-format charset:iso-8859-1)
  (setq l (read-line s))
  nil)
</pre><p> <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> will just print <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a> and signal the error
 when you type <code class="literal">l</code>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-rl-tab"></a><a id="faq-rl-tab-q"></a><b>A.4.3.</b></td><td align="left" valign="top"><p>What does
   this message mean: “<span class="quote"><code class="computeroutput">Display all 1259
     possibilities? (y or n)</code></span>”</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> uses <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html" target="_top">readline</a> for command line editing and
   <a href="clisp.html#completion" class="olink">completion</a>.
   You get this “<span class="quote">Display all 1259 possibilities</span>” message
   (and sometimes many screens of symbols) when you
   hit <span class="keycode">TAB</span> too many times in an inappropriate place.
 <a href="clisp.html#opt-ilisp" class="olink">You can turn this feature
  off</a> if you are using <a href="http://www.gnu.org/software/emacs/" target="_top">Emacs</a>.  It is a good idea
 <a href="http://www.w3.org/MarkUp/html3/literal.html" target="_top">not</a> to
 use <span class="keycode">TAB</span>s in your code.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-no-rl"></a><a id="faq-no-rl-q"></a><b>A.4.4.</b></td><td align="left" valign="top"><p>Why does
   not command line editing work?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>See <a href="#readline" title="21.2.1.&#xA0;Command line editing with GNU readline">Section 21.2.1, “Command line editing with GNU readline”</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-stack"></a><a id="faq-stack-q"></a><b>A.4.5.</b></td><td align="left" valign="top"><p>How do I
   avoid stack overflow?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> has <a href="#vm" title="36.2.&#xA0;The virtual machine"><span class="emphasis"><em>two</em></span>
   stacks</a>, the “<span class="quote">program stack</span>” and the “<span class="quote">lisp
   stack</span>”, and both may occasionally overflow.</p><div class="itemizedlist"><p class="title"><b>Avoiding stack overflow: Generic</b></p><ul type="disc"><li>You will always get a stack
    overflow when you try to print a circular object (list or
    structure) and <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-circlest.html" target="_top"><code class="varname">*PRINT-CIRCLE*</code></a> is <a href="http://www.lisp.org/HyperSpec/Body/convar_nil.html" target="_top"><code class="constant">NIL</code></a>.
    Just set <a href="http://www.lisp.org/HyperSpec/Body/var_stprint-circlest.html" target="_top"><code class="varname">*PRINT-CIRCLE*</code></a> to <a href="http://www.lisp.org/HyperSpec/Body/convar_t.html" target="_top"><code class="constant">T</code></a>.</li><li>You will always get a stack overflow on infinite
    recursion.</li><li>Some simple functions (like
    <a href="http://en.wikipedia.org/wiki/Ackermann_function" target="_top">Ackermann's</a>)
    recurse more than you might expect and can run out of stack on
    relatively small inputs.</li><li>Compiled code uses less stack (and memory) and is
    faster.</li><li>If you really do need more Lisp stack, you can
    increase it by telling <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> to
    <a href="clisp.html#opt-memsize" class="olink">pre-allocate more
     memory</a>.</li><li>If you get a segmentation fault after (or instead
    of) a “<span class="quote">program stack overflow</span>” message, please make
    sure that you had <a href="http://www.gnu.org" target="_top">GNU</a> <a href="http://libsigsegv.sourceforge.net/" target="_top">libsigsegv</a> installed when you configured and
    built <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.</li></ul></div><div class="variablelist"><p class="title"><b>Avoiding stack overflow: Platform-specific</b></p><dl><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://winehq.com/" target="_top"><span class="strong"><strong>Win32</strong></span></a> platform only.</span></span></span></dt><dd><a href="http://sourceforge.net/mailarchive/message.php?msg_id=1785942" target="_top">modify SYSTEM.INI or change PIF that you use to invoke <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a></a> or
    <a href="http://sourceforge.net/mailarchive/message.php?msg_id=1662294" target="_top">set program stack using editbin</a> (answered on <code class="email">&lt;<a href="mailto:clisp-list@lists.sourceforge.net">clisp-list@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-list</a>))</dd><dt><span class="term"><span class="plat-dep">Platform Dependent: <span class="plat-dep"><a href="http://www.UNIX-systems.org/online.html" target="_top"><span class="strong"><strong>UNIX</strong></span></a> platform only.</span></span></span></dt><dd>Increase program stack with <span><strong class="command">ulimit
     -s</strong></span> (or <span><strong class="command">limit stacksize</strong></span> if you are using
    <a href="http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/" target="_top"><code class="literal">csh</code></a>) to at least 8 MB.
</dd></dl></div></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-self-mod"></a><a id="faq-self-mod-q"></a><b>A.4.6.</b></td><td align="left" valign="top"><p>Why does my program return different values on each
   invocation?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The following code modifies itself:
</p><pre class="programlisting">(let ((var '(a b c)))
  (nconc var '(1 2 3)))</pre><p>
and will not work as one would naively expect.
(on the first invocation, it will return
<span class="data"><code class="literal">(a b c 1 2 3)</code></span>,
the second invocation will produce a circular list, the third will hang
trying to <a href="http://www.lisp.org/HyperSpec/Body/fun_nconc.html" target="_top"><code class="function">NCONC</code></a> a circular list).</p><p>Instead you must do
</p><pre class="programlisting">(let ((var (copy-list '(a b c))))
  (nconc var (copy-list '(1 2 3))))</pre><p><a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><code class="function">DISASSEMBLE</code></a> will show the constants in your compiled
 functions.  See <a href="#bytecode" title="Chapter&#xA0;36.&#xA0;The CLISP bytecode specification">Chapter 36, <i>The <span><strong class="command">CLISP</strong></span> bytecode specification</i></a> for the explanation of the
 <a href="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html" target="_top"><code class="function">DISASSEMBLE</code></a> output.</p><p>See <a href="http://www.lisp.org/table/style.htm" target="_top">Lisp Programming
  Style</a> for more useful information.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-autoconf"></a><a id="faq-autoconf-q"></a><b>A.4.7.</b></td><td align="left" valign="top"><p>Why
   is autoconf invoked during build?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>When building from the CVS HEAD development sources, you
  will sometimes get errors when <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/make.html"><span><strong class="command">make</strong></span></a>
  tries to regenerate a <code class="filename">configure</code> script for you.
 <span class="strong"><strong>This is never necessary!</strong></span>
 (and will not happen in an officially released source distribution).
 Please just <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/touch.html"><span><strong class="command">touch</strong></span></a> the target, e.g.:
 </p><pre class="screen"><code class="prompt">$</code> touch src/configure</pre><p>
 and re-run <a class="unix" href="http://www.opengroup.org/onlinepubs/007904975/utilities/make.html"><span><strong class="command">make</strong></span></a>.</p><p>You can also pass <code class="option">--disable-maintainer-mode</code>
 to top-level <code class="filename">configure</code> script (this is the default
 when you are <span class="strong"><strong>not</strong></span> working from the CVS).</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-fp"></a><a id="faq-fp-q"></a><b>A.4.8.</b></td><td align="left" valign="top"><p>Why don't floating
   point arithmetics return what I want?</p><pre class="programlisting">
(- 1.1 0.9)
⇒ <code class="computeroutput">0.20000005</code>
</pre></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This not a bug, at least not a bug in <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a>.
 You may argue that this is a bug in <a href="http://grouper.ieee.org/groups/754/" target="_top">IEEE 754</a>,
 but first make sure that you do know
 <a href="http://docs.sun.com/source/806-3568/ncg_goldberg.html" target="_top">What
 Every Computer Scientist Should Know About Floating-Point Arithmetic</a>.
 </p><p>See also <a href="http://sourceforge.net/mailarchive/message.php?msg_id=12445006" target="_top">this message</a> in <code class="email">&lt;<a href="mailto:clisp-list@lists.sourceforge.net">clisp-list@lists.sourceforge.net</a>&gt;</code> (<a href="http://lists.sourceforge.net/lists/listinfo/clisp-list" target="_top">http://lists.sourceforge.net/lists/listinfo/clisp-list</a>).</p><p><b>PS. </b>If you want <span class="emphasis"><em>exact</em></span>
 calculations, use <a href="http://www.lisp.org/HyperSpec/Body/syscla_rational.html" target="_top"><code class="classname">RATIONAL</code></a>s:</p><pre class="programlisting">
(- 11/10 9/10)
⇒ <code class="computeroutput">1/5</code>
</pre></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-random"></a><a id="faq-random-q"></a><b>A.4.9.</b></td><td align="left" valign="top"><p>Why does
   </p><pre class="screen"><code class="prompt">$</code> clisp <code class="option"><a href="clisp.html#opt-exec-expr" class="olink">-x</a></code> '(<a href="http://www.lisp.org/HyperSpec/Body/fun_random.html" target="_top"><code class="function">RANDOM</code></a> 1s0)'</pre><p>
   always print the same number?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Reproducibility is important.
  See <a href="#random-state" title="12.3.1.&#xA0;Random Numbers">Section 12.3.1, “Random Numbers”</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-warning"></a><a id="faq-warning-q"></a><b>A.4.10.</b></td><td align="left" valign="top"><p>How do I disable this annoying
   warning?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p><a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> often issues <a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a>s when it encounters
  suspicious behavior.  It is best to fix your code rather than to
  suppress them.  To figure out where the warning is coming from, do
</p><pre class="programlisting">
 (<a href="http://www.lisp.org/HyperSpec/Body/spefor_setq.html" target="_top"><code class="function">SETQ</code></a> <a href="http://www.lisp.org/HyperSpec/Body/var_stbreak-on-signalsst.html" target="_top"><code class="varname">*BREAK-ON-SIGNALS*</code></a> '<a href="http://www.lisp.org/HyperSpec/Body/contyp_warning.html" target="_top"><code class="classname">WARNING</code></a>)
</pre><p> and examine the stack (see <a href="#debugger" title="25.1.&#xA0;Debugging Utilities&#10;   [CLHS-25.1.2]">Section 25.1, “Debugging Utilities
   [CLHS-25.1.2]”</a>)
to see where the warning is coming from.</p><p>If everything else fails, read the
 <a href="#impnotes-top" title="Implementation Notes for GNU CLISP">manual</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a id="faq-other-problem"></a><a id="faq-other-problem-q"></a><b>A.4.11.</b></td><td align="left" valign="top"><p>Why is the function <code class="function">FOO</code>
   broken?!</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>When confronted with unexpected behavior,
  try looking in the <a href="#impnotes-top" title="Implementation Notes for GNU CLISP"><span><strong class="command">CLISP</strong></span> impnotes</a>.</p><p>E.g., <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> is different from the <a href="http://www.cons.org/cmucl/" target="_top"><span><strong class="command">CMU CL</strong></span></a>
 implementation, so, to find out how to get the results you want,
 you should search the <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> implementation notes for "DIRECTORY".</p><p>Alternatively, since the implementation notes are organized in
 parallel to the [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>], and <a href="http://www.lisp.org/HyperSpec/Body/fun_directory.html" target="_top"><code class="function">DIRECTORY</code></a> belongs to the
 <a href="http://www.lisp.org/HyperSpec/Body/chap-20.html" target="_top">Chapter 20</a> in [<span class="citation"><a href="#ansi-cl">ANSI CL standard</a></span>],
 you can just go to <a href="#files" title="Chapter&#xA0;20.&#xA0;Files&#10;   [CLHS-20]">Chapter 20, <i>Files
   [CLHS-20]</i></a> in impnotes and look
 for "DIRECTORY" <a href="#directory" title="Function DIRECTORY">there</a>.
</p></td></tr></tbody></table></div></div><div class="appendix" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="gfdl"></a>GNU Free Documentation License</h1></div><div><p class="releaseinfo">Version 1.2, November 2002</p></div><div><p class="copyright">Copyright © 2000,2001,2002 Free Software Foundation, Inc.</p></div><div><div class="legalnotice"><a id="gfdl-legalnotice"></a><div class="address"><p>Free Software Foundation, Inc.<br />
 <span class="street">51 Franklin St, Fifth Floor</span>,<br />
 <span class="city">Boston</span>,<br />
 <span class="state">MA</span><br />
 <span class="postcode">02110-1301</span><br />
 <span class="country">USA</span><br />
 </p></div><p>Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.</p></div></div><div><p class="pubdate">Version 1.2, November 2002</p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#gfdl-0">B.1. PREAMBLE</a></span></dt><dt><span class="section"><a href="#gfdl-1">B.2. APPLICABILITY AND DEFINITIONS</a></span></dt><dt><span class="section"><a href="#gfdl-2">B.3. VERBATIM COPYING</a></span></dt><dt><span class="section"><a href="#gfdl-3">B.4. COPYING IN QUANTITY</a></span></dt><dt><span class="section"><a href="#gfdl-4">B.5. MODIFICATIONS</a></span></dt><dt><span class="section"><a href="#gfdl-5">B.6. COMBINING DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-6">B.7. COLLECTIONS OF DOCUMENTS</a></span></dt><dt><span class="section"><a href="#gfdl-7">B.8. AGGREGATION WITH INDEPENDENT WORKS</a></span></dt><dt><span class="section"><a href="#gfdl-8">B.9. TRANSLATION</a></span></dt><dt><span class="section"><a href="#gfdl-9">B.10. TERMINATION</a></span></dt><dt><span class="section"><a href="#gfdl-10">B.11. FUTURE REVISIONS OF THIS LICENSE</a></span></dt><dt><span class="section"><a href="#gfdl-addendum">B.12. ADDENDUM: How to use this License for
  your documents</a></span></dt></dl></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-0"></a>B.1. PREAMBLE</h2></div></div></div><p>The purpose of this License is to make a manual, textbook, or
other functional and useful document "free" in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it, with
or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible for
modifications made by others.</p><p>This License is a kind of "copyleft", which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft license
designed for free software.</p><p>We have designed this License in order to use it for manuals for
free software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals; it
can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-1"></a>B.2. APPLICABILITY AND DEFINITIONS</h2></div></div></div><p><a id="gfdl-doc"></a>This License applies to any manual or other work, in
any medium, that contains a notice placed by the copyright holder saying
it can be distributed under the terms of this License.  Such a notice
grants a world-wide, royalty-free license, unlimited in duration, to use
that work under the conditions stated herein.  The "Document", below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as "you".  You accept the license if you
copy, modify or distribute the work in a way requiring permission under
copyright law.</p><p><a id="gfdl-mod-ver"></a>A "Modified Version" of the Document means any
work containing the Document or a portion of it, either copied verbatim,
or with modifications and/or translated into another language.</p><p><a id="gfdl-secnd-sect"></a>A "Secondary Section" is a named appendix or
a front-matter section of the Document that deals exclusively with the
relationship of the publishers or authors of the Document to the
Document's overall subject (or to related matters) and contains nothing
that could fall directly within that overall subject.  (Thus, if the
Document is in part a textbook of mathematics, a Secondary Section may
not explain any mathematics.)  The relationship could be a matter of
historical connection with the subject or with related matters, or of
legal, commercial, philosophical, ethical or political position
regarding them.</p><p><a id="gfdl-inv-sect"></a>The "Invariant Sections" are certain Secondary
Sections whose titles are designated, as being those of Invariant
Sections, in the notice that says that the Document is released under
this License.  If a section does not fit the above definition of
Secondary then it is not allowed to be designated as Invariant.  The
Document may contain zero Invariant Sections.  If the Document does not
identify any Invariant Sections then there are none.</p><p><a id="gfdl-cov-text"></a>The "Cover Texts" are certain short passages of
text that are listed, as Front-Cover Texts or Back-Cover Texts, in the
notice that says that the Document is released under this License.  A
Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at
most 25 words.</p><p><a id="gfdl-transparent"></a>A "Transparent" copy of the Document means a
machine-readable copy, represented in a format whose specification is
available to the general public, that is suitable for revising the
document straightforwardly with generic text editors or (for images
composed of pixels) generic paint programs or (for drawings) some widely
available drawing editor, and that is suitable for input to text
formatters or for automatic translation to a variety of formats suitable
for input to text formatters.  A copy made in an otherwise Transparent
file format whose markup, or absence of markup, has been arranged to
thwart or discourage subsequent modification by readers is not
Transparent.  An image format is not Transparent if used for any
substantial amount of text.  A copy that is not "Transparent" is called
"Opaque".</p><p>Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input format, SGML or
XML using a publicly available DTD, and standard-conforming simple HTML,
PostScript or PDF designed for human modification.  Examples of
transparent image formats include PNG, XCF and JPG.  Opaque formats
include proprietary formats that can be read and edited only by
proprietary word processors, SGML or XML for which the DTD and/or
processing tools are not generally available, and the machine-generated
HTML, PostScript or PDF produced by some word processors for output
purposes only.</p><p><a id="gfdl-title-page"></a>The "Title Page" means, for a printed book,
the title page itself, plus such following pages as are needed to hold,
legibly, the material this License requires to appear in the title page.
For works in formats which do not have any title page as such, "Title
Page" means the text near the most prominent appearance of the work's
title, preceding the beginning of the body of the text.</p><p><a id="gfdl-entitled"></a>A section "Entitled XYZ" means a named subunit
of the Document whose title either is precisely XYZ or contains XYZ in
parentheses following text that translates XYZ in another language.
(Here XYZ stands for a specific section name mentioned below, such as
"Acknowledgements", "Dedications", "Endorsements", or "History".)  To
"Preserve the Title" of such a section when you modify the Document
means that it remains a section "Entitled XYZ" according to this
definition.</p><p>The Document may include Warranty Disclaimers next to the notice
which states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this License,
but only as regards disclaiming warranties: any other implication that
these Warranty Disclaimers may have is void and has no effect on the
meaning of this License.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-2"></a>B.3. VERBATIM COPYING</h2></div></div></div><p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies to
the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further copying
of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p><p>You may also lend copies, under the same conditions stated above,
and you may publicly display copies.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-3"></a>B.4. COPYING IN QUANTITY</h2></div></div></div><p>If you publish printed copies (or copies in media that commonly
have printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover Texts:
Front-Cover Texts on the front cover, and Back-Cover Texts on the back
cover.  Both covers must also clearly and legibly identify you as the
publisher of these copies.  The front cover must present the full title
with all words of the title equally prominent and visible.  You may add
other material on the covers in addition.  Copying with changes limited
to the covers, as long as they preserve the title of the Document and
satisfy these conditions, can be treated as verbatim copying in other
respects.</p><p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.</p><p>If you publish or distribute Opaque copies of the Document
numbering more than 100, you must either include a machine-readable
Transparent copy along with each Opaque copy, or state in or with each
Opaque copy a computer-network location from which the general
network-using public has access to download using public-standard
network protocols a complete Transparent copy of the Document, free of
added material.  If you use the latter option, you must take reasonably
prudent steps, when you begin distribution of Opaque copies in quantity,
to ensure that this Transparent copy will remain thus accessible at the
stated location until at least one year after the last time you
distribute an Opaque copy (directly or through your agents or retailers)
of that edition to the public.</p><p>It is requested, but not required, that you contact the authors of
the Document well before redistributing any large number of copies, to
give them a chance to provide you with an updated version of the
Document.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-4"></a>B.5. MODIFICATIONS</h2></div></div></div><p>You may copy and distribute a Modified Version of the Document
under the conditions of sections 2 and 3 above, provided that you
release the Modified Version under precisely this License, with the
Modified Version filling the role of the Document, thus licensing
distribution and modification of the Modified Version to whoever
possesses a copy of it.  In addition, you must do these things in the
Modified Version:</p><div class="orderedlist"><a id="gfdl-modif-cond"></a><p class="title"><b>GNU FDL Modification Conditions</b></p><ol type="A"><li>Use in the Title Page (and on the covers, if any) a
  title distinct from that of the Document, and from those of previous
  versions (which should, if there were any, be listed in the History
  section of the Document).  You may use the same title as a previous
  version if the original publisher of that version gives permission.
</li><li>List on the Title Page, as authors, one or more
  persons or entities responsible for authorship of the modifications in
  the Modified Version, together with at least five of the principal
  authors of the Document (all of its principal authors, if it has fewer
  than five), unless they release you from this requirement.
</li><li>State on the Title page the name of the publisher of
  the Modified Version, as the publisher.</li><li>Preserve all the copyright notices of the Document.
</li><li>Add an appropriate copyright notice for your
  modifications adjacent to the other copyright notices.
</li><li>Include, immediately after the copyright notices, a
  license notice giving the public permission to use the Modified
  Version under the terms of this License, in the form shown in the
  <a href="#gfdl-addendum" title="B.12.&#xA0;ADDENDUM: How to use this License for&#10;  your documents">Addendum</a> below.
</li><li>Preserve in that license notice the full lists of
  Invariant Sections and required Cover Texts given in the Document's
  license notice.</li><li>Include an unaltered copy of this License.
</li><li>Preserve the section Entitled "History", Preserve its
  Title, and add to it an item stating at least the title, year, new
  authors, and publisher of the Modified Version as given on the Title
  Page.  If there is no section Entitled "History" in the Document,
  create one stating the title, year, authors, and publisher of the
  Document as given on its Title Page, then add an item describing the
  Modified Version as stated in the previous sentence.
</li><li>Preserve the network location, if any, given in the
  Document for public access to a Transparent copy of the Document, and
  likewise the network locations given in the Document for previous
  versions it was based on.  These may be placed in the "History"
  section.  You may omit a network location for a work that was
  published at least four years before the Document itself, or if the
  original publisher of the version it refers to gives permission.
</li><li>For any section Entitled "Acknowledgements" or
  "Dedications", Preserve the Title of the section, and preserve in the
  section all the substance and tone of each of the contributor
  acknowledgements and/or dedications given therein.
</li><li>Preserve all the Invariant Sections of the Document,
  unaltered in their text and in their titles.  Section numbers or the
  equivalent are not considered part of the section titles.
</li><li>Delete any section Entitled "Endorsements".
  Such a section may not be included in the Modified Version.
</li><li>Do not retitle any existing section to be Entitled
  "Endorsements" or to conflict in title with any Invariant Section.
</li><li>Preserve any Warranty Disclaimers.
</li></ol></div><p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice.
These titles must be distinct from any other section titles.</p><p>You may add a section Entitled "Endorsements", provided it
contains nothing but endorsements of your Modified Version by various
parties--for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.</p><p>You may add a passage of up to five words as a Front-Cover Text,
and a passage of up to 25 words as a Back-Cover Text, to the end of the
list of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or through
arrangements made by) any one entity.  If the Document already includes
a cover text for the same cover, previously added by you or by
arrangement made by the same entity you are acting on behalf of, you may
not add another; but you may replace the old one, on explicit permission
from the previous publisher that added the old one.</p><p>The author(s) and publisher(s) of the Document do not by this
License give permission to use their names for publicity for or to
assert or imply endorsement of any Modified Version.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-5"></a>B.6. COMBINING DOCUMENTS</h2></div></div></div><p>You may combine the Document with other documents released under
this License, under the terms defined in <a href="#gfdl-4" title="B.5.&#xA0;MODIFICATIONS">section
4</a> above for modified versions, provided that you include in the
combination all of the Invariant Sections of all of the original
documents, unmodified, and list them all as Invariant Sections of your
combined work in its license notice, and that you preserve all their
Warranty Disclaimers.</p><p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by adding
at the end of it, in parentheses, the name of the original author or
publisher of that section if known, or else a unique number.  Make the
same adjustment to the section titles in the list of Invariant Sections
in the license notice of the combined work.</p><p>In the combination, you must combine any sections Entitled
"History" in the various original documents, forming one section
Entitled "History"; likewise combine any sections Entitled
"Acknowledgements", and any sections Entitled "Dedications".  You must
delete all sections Entitled "Endorsements".</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-6"></a>B.7. COLLECTIONS OF DOCUMENTS</h2></div></div></div><p>You may make a collection consisting of the Document and other
documents released under this License, and replace the individual copies
of this License in the various documents with a single copy that is
included in the collection, provided that you follow the rules of this
License for verbatim copying of each of the documents in all other
respects.</p><p>You may extract a single document from such a collection, and
distribute it individually under this License, provided you insert a
copy of this License into the extracted document, and follow this
License in all other respects regarding verbatim copying of that
document.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-7"></a>B.8. AGGREGATION WITH INDEPENDENT WORKS</h2></div></div></div><p>A compilation of the Document or its derivatives with other
separate and independent documents or works, in or on a volume of a
storage or distribution medium, is called an "aggregate" if the
copyright resulting from the compilation is not used to limit the legal
rights of the compilation's users beyond what the individual works
permit.  When the Document is included in an aggregate, this License does
not apply to the other works in the aggregate which are not themselves
derivative works of the Document.</p><p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on covers
that bracket the Document within the aggregate, or the electronic
equivalent of covers if the Document is in electronic form.  Otherwise
they must appear on printed covers that bracket the whole
aggregate.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-8"></a>B.9. TRANSLATION</h2></div></div></div><p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between the
translation and the original version of this License or a notice or
disclaimer, the original version will prevail.</p><p>If a section in the Document is Entitled "Acknowledgements",
"Dedications", or "History", the requirement (section 4) to Preserve its
Title (section 1) will typically require changing the actual
title.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-9"></a>B.10. TERMINATION</h2></div></div></div><p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided for under this License.  Any other attempt
to copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this License
will not have their licenses terminated so long as such parties remain
in full compliance.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-10"></a>B.11. FUTURE REVISIONS OF THIS LICENSE</h2></div></div></div><p>The Free Software Foundation may publish new, revised versions of
the GNU Free Documentation License from time to time.  Such new versions
will be similar in spirit to the present version, but may differ in
detail to address new problems or concerns.  See
http://www.gnu.org/copyleft/.</p><p>Each version of the License is given a distinguishing version
number.  If the Document specifies that a particular numbered version of
this License "or any later version" applies to it, you have the option
of following the terms and conditions either of that specified version
or of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gfdl-addendum"></a>B.12. ADDENDUM: How to use this License for
  your documents</h2></div></div></div><p>To use this License in a document you have written, include a copy
of the License in the document and put the following copyright and
license notices just after the title page:</p><div class="blockquote"><a id="copyright-sample"></a><blockquote class="blockquote"><div class="blockquote-title"><p><b>Sample Invariant Sections list</b></p></div><p>
    Copyright (c)  YEAR  YOUR NAME.
    Permission is granted to copy, distribute and/or modify this document
    under the terms of the GNU Free Documentation License, Version 1.2
    or any later version published by the Free Software Foundation;
    with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
    A copy of the license is included in the section entitled "GNU
    Free Documentation License".
</p></blockquote></div><p>If you have Invariant Sections, Front-Cover Texts and Back-Cover
Texts, replace the "with...Texts." line with this:</p><div class="blockquote"><a id="inv-cover-sample"></a><blockquote class="blockquote"><div class="blockquote-title"><p><b>Sample Invariant Sections list</b></p></div><p>
    with the Invariant Sections being LIST THEIR TITLES, with the
    Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.
</p></blockquote></div><p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.</p><p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of free
software license, such as the GNU General Public License, to permit
their use in free software.</p></div></div><div class="appendix" lang="en" xml:lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="gpl"></a>GNU General Public License</h1></div><div><p class="releaseinfo">      Version 2, June 1991</p></div><div><p class="copyright">Copyright © 1989, 1991 Free Software Foundation, Inc.</p></div><div><div class="legalnotice"><a id="gpl-legalnotice"></a><p>	
	</p><div class="address"><p>Free Software Foundation, Inc. <br />
	  <span class="street">51 Franklin Street, Fifth Floor</span>, <br />
	  <span class="city">Boston</span>, <br />
	  <span class="state">MA</span> <br />
	  <span class="postcode">02110-1301</span><br />
	  <span class="country">USA</span><br />
	</p></div><p>
      </p><p>	Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.
      </p></div></div><div><p class="pubdate">Version 2, June 1991</p></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#gpl-1">C.1. Preamble</a></span></dt><dt><span class="sect1"><a href="#gpl-2">C.2. TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gpl-2-0">C.2.1. Section 0</a></span></dt><dt><span class="sect2"><a href="#gpl-2-1">C.2.2. Section 1</a></span></dt><dt><span class="sect2"><a href="#gpl-2-2">C.2.3. Section 2</a></span></dt><dt><span class="sect2"><a href="#gpl-2-3">C.2.4. Section 3
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-4">C.2.5. Section 4
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-5">C.2.6. Section 5
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-6">C.2.7. Section 6
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-7">C.2.8. Section 7
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-8">C.2.9. Section 8
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-9">C.2.10. Section 9
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-10">C.2.11. Section 10
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-11">C.2.12. NO WARRANTY Section 11
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-12">C.2.13. Section 12
      </a></span></dt></dl></dd><dt><span class="sect1"><a href="#gpl-3">C.3. How to Apply These Terms to Your New Programs
    </a></span></dt></dl></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gpl-1"></a>C.1. Preamble</h2></div></div></div><p>      The licenses for most software are designed to take away your 
      freedom to share and change it. By contrast, the GNU General Public License is 
      intended to guarantee your freedom to share and change 
      free software - to make sure the software is free for all its users. 
      This General Public License applies to most of the Free Software 
      Foundation's software and to any other program whose authors commit 
      to using it. (Some other Free Software Foundation software is covered 
      by the GNU Library General Public License instead.) You can apply it 
      to your programs, too.
    </p><p>      When we speak of free software, we are referring to freedom, not price. 
      Our General Public Licenses are designed to make sure that you have the 
      freedom to distribute copies of free software (and charge for this 
      service if you wish), that you receive source code or can get it if you 
      want it, that you can change the software or use pieces of it in new free 
      programs; and that you know you can do these things.
    </p><p>      To protect your rights, we need to make restrictions that forbid anyone 
      to deny you these rights or to ask you to surrender the rights. These 
      restrictions translate to certain responsibilities for you if you distribute 
      copies of the software, or if you modify it.
    </p><p>      For example, if you distribute copies of such a program, whether gratis or 
      for a fee, you must give the recipients all the rights that you have. You 
      must make sure that they, too, receive or can get the source code. And you 
      must show them these terms so they know their rights.
    </p><p>      We protect your rights with two steps:
      </p><div class="orderedlist"><ol type="1"><li><p>	    copyright the software, and
	  </p></li><li><p>	    offer you this license which gives you legal permission to copy, 
	    distribute and/or modify the software.
	  </p></li></ol></div><p>
    </p><p>      Also, for each author's protection and ours, we want to make certain that 
      everyone understands that there is no warranty for this free software. If 
      the software is modified by someone else and passed on, we want its 
      recipients to know that what they have is not the original, so that any 
      problems introduced by others will not reflect on the original authors' 
      reputations.
    </p><p>      Finally, any free program is threatened constantly by software patents. 
      We wish to avoid the danger that redistributors of a free program will 
      individually obtain patent licenses, in effect making the program 
      proprietary. To prevent this, we have made it clear that any patent must be 
      licensed for everyone's free use or not licensed at all.
    </p><p>      The precise terms and conditions for copying, distribution and modification 
      follow.
    </p></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gpl-2"></a>C.2. TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#gpl-2-0">C.2.1. Section 0</a></span></dt><dt><span class="sect2"><a href="#gpl-2-1">C.2.2. Section 1</a></span></dt><dt><span class="sect2"><a href="#gpl-2-2">C.2.3. Section 2</a></span></dt><dt><span class="sect2"><a href="#gpl-2-3">C.2.4. Section 3
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-4">C.2.5. Section 4
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-5">C.2.6. Section 5
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-6">C.2.7. Section 6
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-7">C.2.8. Section 7
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-8">C.2.9. Section 8
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-9">C.2.10. Section 9
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-10">C.2.11. Section 10
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-11">C.2.12. NO WARRANTY Section 11
      </a></span></dt><dt><span class="sect2"><a href="#gpl-2-12">C.2.13. Section 12
      </a></span></dt></dl></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-0"></a>C.2.1. Section 0</h3></div></div></div><p>	This License applies to any program or other work which contains a notice 
	placed by the copyright holder saying it may be distributed under the terms 
	of this General Public License. The "Program", below, refers to any such 
	program or work, and a 
	“<span class="quote">work based on the Program
	</span>” means either 
	the Program or any derivative work under copyright law: that is to say, a 
	work containing the Program or a portion of it, either verbatim or with 
	modifications and/or translated into another language. (Hereinafter, translation 
	is included without limitation in the term 
	“<span class="quote">modification
	</span>”.) Each licensee is addressed as “<span class="quote">you</span>”.
      </p><p>	Activities other than copying, distribution and modification are not covered by 
	this License; they are outside its scope. The act of running the Program is not 
	restricted, and the output from the Program is covered only if its contents 
	constitute a work based on the Program (independent of having been made by running 
	the Program). Whether that is true depends on what the Program does.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-1"></a>C.2.2. Section 1</h3></div></div></div><p>	You may copy and distribute verbatim copies of the Program's source code as you 
	receive it, in any medium, provided that you conspicuously and appropriately 
	publish on each copy an appropriate copyright notice and disclaimer of warranty; 
	keep intact all the notices that refer to this License and to the absence of any 
	warranty; and give any other recipients of the Program a copy of this License 
	along with the Program.
      </p><p>	You may charge a fee for the physical act of transferring a copy, and you may at 
	your option offer warranty protection in exchange for a fee.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-2"></a>C.2.3. Section 2</h3></div></div></div><p>	You may modify your copy or copies of the Program or any portion of it, thus 
	forming a work based on the Program, and copy and distribute such modifications 
	or work under the terms of 
	<a href="#gpl-2-1" title="C.2.2.&#xA0;Section 1">Section 1
	</a> above, provided 
	that you also meet all of these conditions:
	</p><div class="orderedlist"><ol type="1"><li><p>	      You must cause the modified files to carry prominent notices stating that 
	      you changed the files and the date of any change.
	    </p></li><li><p>	      You must cause any work that you distribute or publish, that in whole or 
	      in part contains or is derived from the Program or any part thereof, to be 
	      licensed as a whole at no charge to all third parties under the terms of 
	      this License.
	    </p></li><li><p>	      If the modified program normally reads commands interactively when run, you 
	      must cause it, when started running for such interactive use in the most 
	      ordinary way, to print or display an announcement including an appropriate 
	      copyright notice and a notice that there is no warranty (or else, saying 
	      that you provide a warranty) and that users may redistribute the program 
	      under these conditions, and telling the user how to view a copy of this 
	      License. 
	      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Exception:
		</h3><p>		  If the Program itself is interactive but does not normally print such an 
		  announcement, your work based on the Program is not required to print an 
		  announcement.) 
		</p></div><p>
	    </p></li></ol></div><p>
      </p><p>	These requirements apply to the modified work as a whole. If identifiable sections 
	of that work are not derived from the Program, and can be reasonably considered 
	independent and separate works in themselves, then this License, and its terms, 
	do not apply to those sections when you distribute them as separate works. But when 
	you distribute the same sections as part of a whole which is a work based on the 
	Program, the distribution of the whole must be on the terms of this License, whose 
	permissions for other licensees extend to the entire whole, and thus to each and 
	every part regardless of who wrote it.
      </p><p>	Thus, it is not the intent of this section to claim rights or contest your rights 
	to work written entirely by you; rather, the intent is to exercise the right to control 
	the distribution of derivative or collective works based on the Program.
      </p><p>	In addition, mere aggregation of another work not based on the Program with the Program 
	(or with a work based on the Program) on a volume of a storage or distribution medium 
	does not bring the other work under the scope of this License.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-3"></a>C.2.4. Section 3
      </h3></div></div></div><p>	You may copy and distribute the Program (or a work based on it, under 
	<a href="#gpl-2-2" title="C.2.3.&#xA0;Section 2">Section 2
	</a> in object code or executable form under the terms of 
	<a href="#gpl-2-1" title="C.2.2.&#xA0;Section 1">Sections 1
	</a> and 
	<a href="#gpl-2-2" title="C.2.3.&#xA0;Section 2">2
	</a> above provided that you also do one of the following:
	</p><div class="orderedlist"><ol type="1"><li><p>	Accompany it with the complete corresponding machine-readable source code, which 
	      must be distributed under the terms of Sections 1 and 2 above on a medium 
	      customarily used for software interchange; or,
	    </p></li><li><p>	      Accompany it with a written offer, valid for at least three years, to give any 
	      third party, for a charge no more than your cost of physically performing source 
	      distribution, a complete machine-readable copy of the corresponding source code, 
	      to be distributed under the terms of Sections 1 and 2 above on a medium customarily 
	      used for software interchange; or,
	    </p></li><li><p>	      Accompany it with the information you received as to the offer to distribute 
	      corresponding source code. (This alternative is allowed only for noncommercial 
	      distribution and only if you received the program in object code or executable form 
	      with such an offer, in accord with Subsection b above.)
	    </p></li></ol></div><p>
      </p><p>	The source code for a work means the preferred form of the work for making modifications 
	to it. For an executable work, complete source code means all the source code for all modules 
	it contains, plus any associated interface definition files, plus the scripts used to control 
	compilation and installation of the executable. However, as a special exception, the source 
	code distributed need not include anything that is normally distributed (in either source or 
	binary form) with the major components (compiler, kernel, and so on) of the operating system 
	on which the executable runs, unless that component itself accompanies the executable.
      </p><p>	If distribution of executable or object code is made by offering access to copy from a 
	designated place, then offering equivalent access to copy the source code from the same place 
	counts as distribution of the source code, even though third parties are not compelled to 
	copy the source along with the object code.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-4"></a>C.2.5. Section 4
      </h3></div></div></div><p>	You may not copy, modify, sublicense, or distribute the Program except as expressly provided 
	under this License. Any attempt otherwise to copy, modify, sublicense or distribute the 
	Program is void, and will automatically terminate your rights under this License. However, 
	parties who have received copies, or rights, from you under this License will not have their 
	licenses terminated so long as such parties remain in full compliance.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-5"></a>C.2.6. Section 5
      </h3></div></div></div><p>	You are not required to accept this License, since you have not signed it. However, nothing 
	else grants you permission to modify or distribute the Program or its derivative works. 
	These actions are prohibited by law if you do not accept this License. Therefore, by modifying 
	or distributing the Program (or any work based on the Program), you indicate your acceptance 
	of this License to do so, and all its terms and conditions for copying, distributing or 
	modifying the Program or works based on it.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-6"></a>C.2.7. Section 6
      </h3></div></div></div><p>	Each time you redistribute the Program (or any work based on the Program), the recipient 
	automatically receives a license from the original licensor to copy, distribute or modify 
	the Program subject to these terms and conditions. You may not impose any further restrictions 
	on the recipients' exercise of the rights granted herein. You are not responsible for enforcing 
	compliance by third parties to this License.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-7"></a>C.2.8. Section 7
      </h3></div></div></div><p>	If, as a consequence of a court judgment or allegation of patent infringement or for any other 
	reason (not limited to patent issues), conditions are imposed on you (whether by court order, 
	agreement or otherwise) that contradict the conditions of this License, they do not excuse you 
	from the conditions of this License. If you cannot distribute so as to satisfy simultaneously 
	your obligations under this License and any other pertinent obligations, then as a consequence 
	you may not distribute the Program at all. For example, if a patent license would not permit 
	royalty-free redistribution of the Program by all those who receive copies directly or 
	indirectly through you, then the only way you could satisfy both it and this License would be 
	to refrain entirely from distribution of the Program.
      </p><p>	If any portion of this section is held invalid or unenforceable under any particular circumstance, 
	the balance of the section is intended to apply and the section as a whole is intended to apply 
	in other circumstances.
      </p><p>	It is not the purpose of this section to induce you to infringe any patents or other property 
	right claims or to contest validity of any such claims; this section has the sole purpose of 
	protecting the integrity of the free software distribution system, which is implemented by public 
	license practices. Many people have made generous contributions to the wide range of software 
	distributed through that system in reliance on consistent application of that system; it is up 
	to the author/donor to decide if he or she is willing to distribute software through any other 
	system and a licensee cannot impose that choice.
      </p><p>	This section is intended to make thoroughly clear what is believed to be a consequence of the 
	rest of this License.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-8"></a>C.2.9. Section 8
      </h3></div></div></div><p>	If the distribution and/or use of the Program is restricted in certain countries either by patents 
	or by copyrighted interfaces, the original copyright holder who places the Program under this License 
	may add an explicit geographical distribution limitation excluding those countries, so that 
	distribution is permitted only in or among countries not thus excluded. In such case, this License 
	incorporates the limitation as if written in the body of this License.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-9"></a>C.2.10. Section 9
      </h3></div></div></div><p>	The Free Software Foundation may publish revised and/or new versions of the General Public License 
	from time to time. Such new versions will be similar in spirit to the present version, but may differ 
	in detail to address new problems or concerns.
      </p><p>	Each version is given a distinguishing version number. If the Program specifies a version number of 
	this License which applies to it and "any later version", you have the option of following the terms 
	and conditions either of that version or of any later version published by the Free Software 
	Foundation. If the Program does not specify a version number of this License, you may choose any 
	version ever published by the Free Software Foundation.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-10"></a>C.2.11. Section 10
      </h3></div></div></div><p>	If you wish to incorporate parts of the Program into other free programs whose distribution 
	conditions are different, write to the author to ask for permission. For software which is copyrighted 
	by the Free Software Foundation, write to the Free Software Foundation; we sometimes make exceptions 
	for this. Our decision will be guided by the two goals of preserving the free status of all 
	derivatives of our free software and of promoting the sharing and reuse of software generally.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-11"></a>C.2.12. NO WARRANTY Section 11
      </h3></div></div></div><p>	BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT 
	PERMITTED BY APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR 
	OTHER PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, 
	INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR 
	PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU. SHOULD THE 
	PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.
      </p></div><div class="sect2" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="gpl-2-12"></a>C.2.13. Section 12
      </h3></div></div></div><p>	IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR 
	ANY OTHER PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU 
	FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE 
	USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED 
	INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH 
	ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH 
	DAMAGES.
      </p><p>END OF TERMS AND CONDITIONS
      </p></div></div><div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="gpl-3"></a>C.3. How to Apply These Terms to Your New Programs
    </h2></div></div></div><p>
      If you develop a new program, and you want it to be of the greatest
      possible use to the public, the best way to achieve this is to make it
      free software which everyone can redistribute and change under these terms.
    </p><p>
      To do so, attach the following notices to the program.  It is safest
      to attach them to the start of each source file to most effectively
      convey the exclusion of warranty; and each file should have at least
      the "copyright" line and a pointer to where the full notice is found.
    </p><p>
      &lt;one line to give the program's name and a brief idea of what it does.&gt;
      Copyright (C) &lt;year&gt;    &lt;name of author&gt;
    </p><p>
      This program is free software; you can redistribute it and/or modify
      it under the terms of the GNU General Public License as published by
      the Free Software Foundation; either version 2 of the License, or
      (at your option) any later version.
    </p><p>
      This program is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU General Public License for more details.
    </p><p>
      You should have received a copy of the GNU General Public License
      along with this program; if not, write to the Free Software
      Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
    </p><p>
      Also add information on how to contact you by electronic and paper mail.
    </p><p>
      If the program is interactive, make it output a short notice like this
      when it starts in an interactive mode:
    </p><p>
      Gnomovision version 69, Copyright (C) year name of author
      Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
      This is free software, and you are welcome to redistribute it
      under certain conditions; type `show c' for details.
    </p><p>
      The hypothetical commands `show w' and `show c' should show the appropriate
      parts of the General Public License.  Of course, the commands you use may
      be called something other than `show w' and `show c'; they could even be
      mouse-clicks or menu items--whatever suits your program.
    </p><p>
      You should also get your employer (if you work as a programmer) or your
      school, if any, to sign a "copyright disclaimer" for the program, if
      necessary.  Here is a sample; alter the names:
    </p><p>
      Yoyodyne, Inc., hereby disclaims all copyright interest in the program
      `Gnomovision' (which makes passes at compilers) written by James Hacker.
    </p><p>
      &lt;signature of Ty Coon&gt;, 1 April 1989
      Ty Coon, President of Vice
    </p><p>
      This General Public License does not permit incorporating your program into
      proprietary programs.  If your program is a subroutine library, you may
      consider it more useful to permit linking proprietary applications with the
      library.  If this is what you want to do, use the GNU Library General
      Public License instead of this License.
    </p></div></div></div><div class="index"><div class="titlepage"><div><div><h2 class="title"><a id="idx"></a>Index</h2></div></div></div><div class="index"><div class="indexdiv"><h3>Symbols</h3><dl><dt>*CURRENT-LANGUAGE*
 , <a href="#language">The Language</a></dt><dt>*FOREIGN-ENCODING*
 , <a href="#enc-dflt">Default encodings</a></dt><dt>*FORWARD-REFERENCED-CLASS-MISDESIGN*, <a href="#mop-mo-cl-inheritance">Inheritance Structure of Metaobject Classes</a></dt><dt>*MISC-ENCODING*
 , <a href="#enc-dflt">Default encodings</a></dt><dt>*PATHNAME-ENCODING*
 , <a href="#enc-dflt">Default encodings</a></dt><dt>*TERMINAL-ENCODING*
 , <a href="#enc-dflt">Default encodings</a></dt><dt>
   *WARN-ON-HASHTABLE-NEEDING-REHASH-AFTER-GC*
, <a href="#hashtable-gc-rehash">Interaction between HASH-TABLEs and garbage-collection</a></dt><dt>*WINDOW*
    , <a href="#screen">Random Screen Access</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>DEFAULT-FOREIGN-LANGUAGE
 , <a href="#c-flavor">The choice of the C flavor</a></dt><dt>DEFINTERNATIONAL
 , <a href="#language">The Language</a></dt><dt>DEFLANGUAGE
 , <a href="#language">The Language</a></dt><dt>DEFLOCALIZED
 , <a href="#language">The Language</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>endianness, <a href="#bin-input">Binary input, READ-BYTE,
  EXT:READ-INTEGER &amp; EXT:READ-FLOAT</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>final delimiter, <a href="#spec-symb">Special Symbols
  [CLHS-1.4.1.3]</a></dt><dt>FORMAT</dt><dd><dl><dt>~!, <a href="#print-formatted">Formatted Output
  [CLHS-22.3]</a></dt><dt>~., <a href="#print-formatted">Formatted Output
  [CLHS-22.3]</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>GC
 , <a href="#room">Function ROOM</a></dt><dt>GENERIC-FLET
 , <a href="#clos-diff">Deviations from ANSI CL standard</a></dt><dt>GENERIC-LABELS
 , <a href="#clos-diff">Deviations from ANSI CL standard</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>linking set, <a href="#mod-overview">Overview</a></dt><dt>LOCALIZED
 , <a href="#language">The Language</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>MAKE-BUFFERED-INPUT-STREAM
  , <a href="#stream-buffer">Functions
  EXT:MAKE-BUFFERED-INPUT-STREAM
    and
  EXT:MAKE-BUFFERED-OUTPUT-STREAM
   </a></dt><dt>MAKE-BUFFERED-OUTPUT-STREAM
 , <a href="#stream-buffer">Functions
  EXT:MAKE-BUFFERED-INPUT-STREAM
    and
  EXT:MAKE-BUFFERED-OUTPUT-STREAM
   </a></dt><dt>metaobject, <a href="#mop-metaobjects">Metaobjects</a></dt><dd><dl><dt>class, <a href="#mop-mo-classes">Classes</a></dt><dt>generic function, <a href="#mop-mo-gen-funs">Generic Functions</a></dt><dt>method, <a href="#mop-mo-methods">Methods</a></dt><dt>method combination, <a href="#mop-mo-meth-combs">Method Combinations</a></dt><dt>slot definition, <a href="#mop-mo-slot-defs">Slot Definitions</a></dt><dd><dl><dt>direct, <a href="#mop-mo-slot-defs">Slot Definitions</a></dt><dt>effective, <a href="#mop-mo-slot-defs">Slot Definitions</a></dt></dl></dd><dt>specializer, <a href="#mop-mo-spec">Specializers</a></dt><dt>standard, <a href="#mop-mo-cl-inheritance">Inheritance Structure of Metaobject Classes</a></dt></dl></dd><dt>metaobject class, <a href="#mop-metaobjects">Metaobjects</a></dt><dd><dl><dt>basic, <a href="#mop-metaobjects">Metaobjects</a></dt></dl></dd><dt>METHOD-CALL-ERROR
 , <a href="#std-meth-combo">Standard Method Combination
  [CLHS-7.6.6.2]</a></dt><dt>
    METHOD-CALL-TYPE-ERROR
 , <a href="#std-meth-combo">Standard Method Combination
  [CLHS-7.6.6.2]</a></dt><dt>module, <a href="#mod-overview">Overview</a></dt><dt>module set, <a href="#mod-overview">Overview</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt>NO-PRIMARY-METHOD
 , <a href="#std-meth-combo">Standard Method Combination
  [CLHS-7.6.6.2]</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>PACKAGE</dt><dd><dl><dt>case-inverted, <a href="#package-case">Package Case-Sensitivity</a></dt><dt>case-sensitive, <a href="#package-case">Package Case-Sensitivity</a></dt><dt>modern, <a href="#package-case">Package Case-Sensitivity</a></dt></dl></dd><dt>PACKAGE-LOCK
 , <a href="#pack-lock">Constraints on the “COMMON-LISP” Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>reserved token, <a href="#tokens">Symbols as Tokens
  [CLHS-2.3.4]</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>SYMBOL-MACRO-EXPAND
 , <a href="#def-sym-mac">Macro DEFINE-SYMBOL-MACRO</a></dt></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>WITH-OUTPUT-TO-PRINTER
 , <a href="#hardcopy">Printing</a></dt><dt>WITHOUT-PACKAGE-LOCK
 , <a href="#pack-lock">Constraints on the “COMMON-LISP” Package
  for Conforming Programs - package locking
 [CLHS-11.1.2.1.2]</a></dt><dt>WRITE-FLOAT-DECIMAL
 , <a href="#print-misc">Miscellaneous Issues</a></dt></dl></div></div></div><div class="bibliography"><div class="titlepage"><div><div><h2 class="title"><a id="references"></a>References</h2></div></div></div><div class="bibliodiv"><h3 class="title"><a id="ref-books"></a>Books</h3><div class="biblioentry"><a id="CLtL1"></a><p>[<abbr class="abbrev">CLtL1</abbr>] <span class="authorgroup"><span class="firstname">Guy L.</span> <span class="surname">Steele</span>, <span class="lineage">Jr.</span>. </span><span class="title"><i>Common Lisp: the Language (1st Edition)</i>. </span><span class="pubdate">1984. </span><span class="pagenums">465 pages. </span>ISBN 0-932376-41-X. <span class="publisher"><span class="publishername">Digital Press. </span></span></p></div><div class="biblioentry"><a id="CLtL2"></a><p>[<abbr class="abbrev">CLtL2</abbr>] <span class="authorgroup"><span class="firstname">Guy L.</span> <span class="surname">Steele</span>, <span class="lineage">Jr.</span>. </span><span class="title"><i><a href="http://www.cs.cmu.edu/afs/cs.cmu.edu/project/ai-repository/ai/html/cltl/cltl2.html" target="_top">Common Lisp: the Language (2nd Edition)</a></i>. </span><span class="pubdate">1990. </span><span class="pagenums">1032 pages. </span>ISBN 1-555-58041-6. <span class="publisher"><span class="publishername">Digital Press. </span></span></p></div><div class="biblioentry"><a id="amop"></a><p>[<abbr class="abbrev">AMOP</abbr>] <span class="authorgroup"><span class="firstname">Gregor</span> <span class="surname">Kiczales</span>, <span class="firstname">Jim</span> <span class="surname">des Rivieres</span>, and <span class="firstname">Daniel G.</span> <span class="surname">Bobrow</span>. </span><span class="citetitle"><em class="citetitle"><a href="http://www.lisp.org/mop" target="_top">The Art of the Metaobject
     Protocol</a></em>. </span><span class="pubdate">1991. </span><span class="pagenums">335 pages. </span>ISBN 0-262-61074-4. <span class="publisher"><span class="publishername"><a href="http://www-mitpress.mit.edu" target="_top">MIT
      Press</a>. </span></span></p></div></div><div class="bibliodiv"><h3 class="title"><a id="ref-ansi"></a>ANSI standard documents</h3><div class="biblioentry"><a id="ansi-cl"></a><p>[<abbr class="abbrev">ANSI CL</abbr>] <span class="pubdate">1994. </span><span class="title"><i>ANSI Common Lisp standard X3.226-1994 -
       <a href="http://www.ncits.org/tc_home/j13sd4.htm" target="_top">Information
       Technology - Programming Language - Common Lisp</a></i>. </span></p></div><div class="biblioentry"><a id="CLHS"></a><p>[<abbr class="abbrev">CLHS</abbr>] <span class="title"><i><a href="http://www.lisp.org/HyperSpec/FrontMatter/" target="_top">Common Lisp HyperSpec</a></i>. </span></p></div></div></div></div><div class="bookinfo"><hr width="100%" /><table width="100%" summary="impnotes meta info"><th><td align="left">These notes document <a href="http://clisp.cons.org" target="_top"><span><strong class="command">CLISP</strong></span></a> version 2.38</td><td align="right">Last modified: 2006-01-23</td></th></table></div><div class="custom-footer"><hr width="100%" /><table width="100%"><tr><td align="left"><a href="http://clisp.cons.org"><img src="clisp.png" width="48" height="48" alt="[CLISP home]" /></a></td><td align="center"><a href="http://sourceforge.net/donate/index.php?group_id=1355"><img src="http://images.sourceforge.net/images/project-support.jpg" width="88" height="32" border="0" alt="[Support This Project]" /></a></td><td align="right"><a href="http://sourceforge.net"><img width="125" height="37" alt="[SourceForge]" src="http://sflogo.sourceforge.net/sflogo.php?group_id=1355&amp;type=2&amp;page=impnotes-top" /></a></td></tr></table></div></body></html>
